/*!
 *Last modified: 2024-07-12 16:24:25
 *Filename: ax.js
 *Description: Global JS
 *Version: v2.1.2
 *Website:www.axui.cn
 *Contact:3217728223@qq.com
 *Author:Michael
 */
/*!
 * 全局变量，至于ax.js头部，可全站使用
 */
"use strict";const axError={formatError:"This is not a valid data format!",paraError:"The parameters do not meet the requirements!",arrayRequired:"The value must be an array type!",noNode:"This page can not find the node!",required:"Required field is missing!",notExist:"The program cannot be executed because the object does not exist!"},axIsMobi=()=>"ontouchstart"in document.documentElement,axEventMap=axIsMobi()?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"],axIsDate=t=>isNaN(t)&&!isNaN(Date.parse(t)),axCeil={phone:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ceil-phone")),pad:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ceil-pad")),flip:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ceil-flip")),pro:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ceil-pro")),pc:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ceil-pc"))},axClient=()=>{let t=document.body.clientWidth;return t<axCeil.phone?"phone":t>axCeil.phone&&t<axCeil.pad?"pad":t>axCeil.pad&&t<axCeil.flip?"flip":t>axCeil.flip&&t<axCeil.pro?"pro":"pc"},axType=t=>Object.prototype.toString.call(t).slice(8,-1),axIsEmpty=t=>{let e=axType(t);return!t||("Function"===e?"{}"==t.toString().replace(/\s+/g,"").match(/{.*}/g)[0]:"Array"===e?""==t.join(""):"Object"===e&&0===Object.keys(t).length)},axToNumber=t=>isNaN(t)?parseFloat(t):t,axTheme={set:(t,e="")=>{if(axIsEmpty(t))return!1;let s=t=>{let e=axType(t),s=[];if(!axIsEmpty(t))if("String"===e)if((t=t.trim().toLowerCase()).startsWith("hsl"))s=t.replace(/^(hsl|hsla)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",");else{let e=[];t.startsWith("#")?e=(t=>{let e=(t=t.trim()).toLowerCase(),s=[];if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){let t="#";for(let s=1;s<4;s+=1)t+=e.slice(s,s+1).concat(e.slice(s,s+1));e=t}for(let t=1;t<7;t+=2)s.push(parseInt("0x"+e.slice(t,t+2)))}return s})(t):t.startsWith("rgb")&&(e=t.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",").map(Number)),s=(t=>{let e,s,i=t[0]/255,a=t[1]/255,o=t[2]/255,n=Math.min(i,a,o),r=Math.max(i,a,o),l=(n+r)/2,h=r-n;if(r===n)e=0,s=0;else{switch(s=l>.5?h/(2-r-n):h/(r+n),r){case i:e=(a-o)/h+(a<o?6:0);break;case a:e=2+(o-i)/h;break;case o:e=4+(i-a)/h;break}e=Math.round(60*e)}return s=Math.round(100*s),l=Math.round(100*l),4===t.length?[e,s,l,t[3]]:[e,s,l,1]})(e)}else"Array"===e&&(s=t);return 3===s.length&&s.push(1),s},i={primary:[],text:[],error:[],success:[],info:[],warning:[],question:[]};if("Object"===axType(t))for(let e in t)t.hasOwnProperty(e)&&t[e].length>2&&(i[e]=s(t[e]));else i.primary=s(t);axIsEmpty(axLocalStorage.get("ax-theme-raw"))&&axLocalStorage.set("ax-theme-raw",axGetColors());let a=document.querySelector(":root");for(let t in i)i.hasOwnProperty(t)&&i[t].length>2&&(a.style.setProperty(`--h-${t}`,i[t][0]),a.style.setProperty(`--s-${t}`,"string"==typeof i[t][1]&&i[t][1].includes("%")?i[t][1]:i[t][1]+"%"),a.style.setProperty(`--l-${t}`,"string"==typeof i[t][2]&&i[t][2].includes("%")?i[t][2]:i[t][2]+"%"),a.style.setProperty(`--a-${t}`,i[t][3]));e&&axLocalStorage.set(e,i)},get:()=>axGetColors(),reset:()=>{}};axTheme.reset=()=>{let t=axLocalStorage.get("ax-theme-raw");axTheme.set(t)};const axGetScrollObj=()=>navigator.userAgent.indexOf("Firefox")>0?{event:"DOMMouseScroll",detail:"detail"}:{event:"mousewheel",detail:"wheelDelta"},axGetClientObj=t=>{let e=axIsMobi()?t.targetTouches[0]:t;return e?{x:e.clientX,y:e.clientY}:null},axIsScrollUp=(t,e=axGetScrollObj().detail)=>{let s,i=t[e];return s=navigator.userAgent.indexOf("Firefox")>0?i>0:i<0,s},axIsVnode=t=>!getComputedStyle(t).display,axNumber=(t,e)=>{let s=Object.assign({places:2,mode:"round",zero:!1},e),i=0;if(!t||!Number(t))return 0;{let e=Number(t),a=e+Number.EPSILON,o=Number(`1${"0".repeat(s.places)}`),n=e*o,r=a*o;i="floor"===s.mode?Math.floor(n)/o:"ceil"===s.mode?Math.ceil(n)/o:Math.round(r)/o}return s.zero&&(i=i.toFixed(s.places)),i},axTrim=(t,e=!1)=>e?t.replace(/\s+/g,""):t.trim().replace(/\s+/gi," "),axSplitToArr=(t,e=",",s="all")=>{let i=axType(t),a="",o=[];return"String"===i?(a="one"===s?axTrim(t,!1):"none"===s?axTrim(t,!0):t.trim(),o=a.split(e)):"Array"===i&&(o=t),o},axPreventDefault=t=>{t.preventDefault?t.preventDefault():t.returnValue=!1},axStrEnd=(t,e,s="afterend",i=!0)=>{if(!t||!e)return!1;if((t=t.trim()).includes(e)){let a,o,n=e.length;return"beforebegin"===s?(a=t.indexOf(e),i&&(a+=n),o=t.substring(0,a)):"afterbegin"===s?(a=t.indexOf(e),!i&&(a+=n),o=t.substring(a,t.length)):"beforeend"===s?(a=t.lastIndexOf(e),i&&(a+=n),o=t.substring(0,a)):"afterend"===s?(a=t.lastIndexOf(e),!i&&(a+=n),o=t.substring(a,t.length)):o="",o}return""},axStrType=t=>{if("string"!=typeof t)return!1;t=t.trim();let e="";return t&&(t.includes(" ")?e="level":t.startsWith("#")?e="id":t.startsWith(".")?e="class":t.startsWith("[")&&t.endsWith("]")?e="name":(["H1","H2","H3","H4","H5","H6"].includes(t)||[...t].every((t=>(t=>{if(t>="A"&&t<="Z")return!0})(t))))&&(e="node")),e},axStrToDom=t=>{if("string"!=typeof t)return!1;let e;return(t=t.trim()).startsWith("<tr")||t.endsWith("</tr>")?(e=document.createElement("tr"),e.innerHTML=t,e):(e=document.createElement("div"),e.innerHTML=t,e.firstElementChild)},axIdToDom=t=>{let e=axType(t);if(t){if("String"===e){let e=t.trim();return!!axStrType(e)&&("name"!==axStrType(e)||e.includes("=")||(e=e.slice(0,1)+"name="+e.slice(1)),document.querySelector(e))}return!!e.includes("HTML")&&t}return!1},axAllToDoms=t=>{if(axIsEmpty(t))return[];let e=[],s=axType(t);if(s.includes("HTML"))e.push(t);else if("String"===s){let s=axTrim(t),i=",";s.includes(" ")&&(i=" "),s.split(i).forEach((t=>{let s=axIdToDom(t);s&&e.push(s)}))}else"Array"===s?t.forEach((t=>{let s=axIdToDom(t);s&&e.push(s)})):"NodeList"===s&&(e=[...t]);return e},axValueToArr=t=>{let e=[];if(!axIsEmpty(t)||0===t)if(Array.isArray(t))e=t;else if("string"==typeof t){let s=t.trim(),i=t.includes(",")?",":" ";s.includes(i)?e=s.split(i):e.push(t)}else e.push(t);return e},axUnique=(t,e)=>{if(e){let s=new Map;for(let i of t)s.has(i[e])||s.set(i[e],i);return[...s.values()]}return[...new Set(t)]},axClass={get:function(t){return axValueToArr(t)},add:function(t,e,s){let i=axIdToDom(t),a=this.get(e);return!(!i||0===a.length)&&(a.forEach((t=>{(!s||s(t))&&i.classList.add(t)})),this)},del:function(t,e,s){let i=axIdToDom(t),a=this.get(e);return!(!i||0===a.length)&&(a.forEach((t=>{(!s||s(t))&&i.classList.remove(t)})),this)}},axArrToDom=(t,e)=>{let s=t.split(","),i=[],a=/^[0-9]*$/,o="";return o="string"==typeof e?document.querySelector(e):e,s.forEach((t=>{if(!a.test(t.substr(0,1)))if("class"==axStrType(t))i=o?i.concat([...o.querySelectorAll(t)]):i.concat([...document.querySelectorAll(t)]);else if("id"==axStrType(t))i.push(document.querySelector(t));else{if(!t)return i;document.querySelectorAll(t)&&(i=o?i.concat([...o.querySelectorAll(t)]):i.concat([...document.querySelectorAll(t)]))}})),i},axArrToFlat=t=>{let e=[];return[...t].forEach((t=>{t.children?e=[...e,t,...axArrToFlat(t.children)]:e.push(t)})),e},axIncreaseId=(t,e=!0)=>{let s,i=[];return e?(t.forEach((t=>{i.push(~~t.id)})),s=Math.max(...i)+1):s=t.length,s},axMultiValues=(t,e="checkbox",s="array",i,a=",")=>{let o,n=[],r=i?axIdToDom(i):"";if("NodeList"==axType(t)||"Array"==axType(t)){if(e.includes("select")||"file"==e)return!1;o=t}else if("object"==typeof t||axStrType(t)&&"name"!==axStrType(t)){let s=axIdToDom(t);e.includes("select")||"SELECT"==t.nodeName?(e="select",o=s.options):"file"==e||"file"==s.type?(e="file",o=[s]):o=[...s.querySelectorAll("input")]}else{let s="";s="name"===axStrType(t)?t.replace("[","[name="):`[name=${t}]`,o=e.includes("select")?r?r.querySelector(s).options:document.querySelector(s).options:"file"==e?r?[r.querySelector(s)]:[document.querySelector(s)]:r?[...r.querySelectorAll(s)]:[...document.querySelectorAll(s)]}for(let t=0;t<o.length;t++){let s,i=o[t];s=e.includes("select")?i.selected:i.checked,"file"==e?n=[...i.files]:s&&n.push(i.value)}return"string"==s&&(n=n.join(a)),n},axDebounce=(t,e=200,s=!1)=>{let i=null,a=function(a){s&&(a.stopPropagation(),a.preventDefault()),i&&clearTimeout(i),i=setTimeout((()=>{t.apply(this,arguments)}),e)};return a.cancel=function(){i&&clearTimeout(i)},a},axThrottle=(t,e=500,s=!1)=>{let i=0,a=null,o=function(o){let n=(new Date).getTime();n-i>e?(a&&(clearTimeout(a),a=null),t.apply(this,arguments),i=n):s&&(o.stopPropagation(),o.preventDefault())};return o.cancel=function(){clearTimeout(a),a=null},o},axMoveArr=(t,e,s)=>{if(e>t.length||s>t.length||e<0||s<0)return!1;let i=t[e];return t.splice(e,1),t.splice(s,0,i),t},axIsVisible=t=>{let e=axIdToDom(t),s=!0,i="none"!=getComputedStyle(e).display&&"hidden"!=getComputedStyle(e).visibility;for(;s&&i;)e=e.parentNode,e&&e!=document.body?i="none"!=getComputedStyle(e).display&&"hidden"!=getComputedStyle(e).visibility:s=!1;return i},axClampValue=(t={value:value,min:min,max:max})=>!(!t.hasOwnProperty("min")||!t.hasOwnProperty("max"))&&(t.value=axToNumber(t.value),t.min=axToNumber(t.min),t.max=axToNumber(t.max),t.value>t.max?t.max:t.value<t.min?t.min:t.value),axChildVisible=(t,e)=>{let s=axIdToDom(e),i=axIdToDom(t),a=s.scrollTop,o=s.getBoundingClientRect().height;return i.offsetTop+i.offsetHeight>a&&i.offsetTop<a+o},axUlToArr=(t,e=0,s=!0)=>{let i=axIdToDom(t),a=e;if(!t)return!1;let o=(t,e)=>{let i=t.firstElementChild,n={id:e,node:i};n.label=i.textContent.trim(),s?n.value=i.hasAttribute("value")?i.getAttribute("value"):n.label:i.hasAttribute("value")&&(n.value=i.getAttribute("value")),((t,e)=>{[...t.attributes].filter((t=>"label"!==t.name&&"value"!==t.name)).forEach((t=>{["selected","disabled","readonly","active","checked","expanded"].includes(t.name)?e[t.name]=!0:e[t.name]=t.value.trim()}))})(i,n);let r=t.querySelector("ul")||t.querySelector("ol");return r&&(n.children=[],[...r.children].forEach((t=>{n.children.push(o(t,a++))}))),n};return{data:(()=>{let t=[];return[...i.children].forEach((e=>{t.push(o(e,a++))})),t})(),index:a}},axSelectToArr=(t,e=0,s=!0)=>{let i=axIdToDom(t),a=e;if(!i)return!1;let o=(t,e)=>{let i={id:e,node:t},n=t.textContent.trim(),r=t.hasAttribute("value")?t.getAttribute("value").trim():"";return((t,e)=>{[...t.attributes].filter((t=>"label"!==t.name&&"value"!==t.name)).forEach((t=>{["selected","disabled","readonly","active","checked","expanded"].includes(t.name)?e[t.name]=!0:e[t.name]=t.value.trim()}))})(t,i),"OPTGROUP"==t.nodeName?(i.label=t.getAttribute("label").trim(),i.value=i.label,i.children=[],[...t.children].forEach((t=>{i.children.push(o(t,a++))}))):(i.label=n||r.trim(),i.value=s?r||i.label:r),i};return{data:(()=>{let t=[];return[...i.children].forEach((e=>{t.push(o(e,a++))})),t})(),index:a}},axTableToJson=t=>{let e=axIdToDom(t).querySelector("tbody").rows,s=[];return[...e].forEach((t=>{let e=t.cells,i=[];[...e].forEach((t=>{i.push(t.innerText.trim())})),s.push(i)})),s},axArrToTree=t=>{let e=t[0].pId;return t.forEach((e=>{let s=t.filter((t=>e.id==t.pId));s.length&&(e.children=s)})),t.filter((t=>t.pId==e))},axGetDoms=t=>{let e=axType(t),s=[],i=t=>{let e,s=axType(t);return"String"===s&&axStrType(t)?e=[...this.targetDom.querySelectorAll(t)]:s.includes("HTML")&&(e=[t]),e};return s="Array"===e?t.map((t=>i(t))).flat(1/0):i(t),s.filter(Boolean)},axFindItem=(t,e,s)=>{let i,a=axType(t),o=Object.assign({string:"label",number:"id",dom:"headerDom"},s);return i="Object"===a?e.find((e=>e===t))||((t,e)=>{let s=Object.keys(t);return e.find((e=>{let i=!0;for(let a of s)if(e[a]!=t[a]){i=!1;break}return i}))})(t,e):"Array"===a?e.find((e=>e===t)):"Number"===a?e[0].hasOwnProperty(o.number)?e.find((e=>String(e[o.number])===String(t))):e[t]:"String"===a?t.startsWith("#")?e.find((e=>"#"+e[o.dom].id===t)):e.find((e=>String(e[o.number])===t||String(e[o.string])===t)):!!a.includes("HTML")&&e.find((e=>e[o.dom]===t)),i},axTreeMethod={addPath:(t,e=-1,s=0)=>{if(!Array.isArray(t)||0===t.length)return!1;let i=0,a=0,o=!!t[0].hasOwnProperty("id"),n=s,r=(t,s,l=e)=>{t.forEach((t=>{o||(t.id=n,n++),t.floor=s,t.pId=t.pId||0===t.pId?t.pId:e,t.path=l.toString()+">"+t.id.toString(),s>=i&&(i=s),isNaN(t.id)||t.id>=a&&(a=t.id),t.children&&t.children.length>0&&(t.children.forEach((e=>{e.pId=t.id})),r(t.children,s+1,t.path)),t.path||(t.path=t.pId+">"+t.id)}))};return r(t,1),{data:t,floorMax:i,idMax:a}},remove:(t,e,s,i)=>{if(1!==t.floor){let s=e.find((e=>e.id==t.pId)).children,i=s.indexOf(t);s.splice(i,1)}else s&&(s=s.filter((e=>e!=t)));return e=e.filter((e=>e!==t&&!e.path.includes(">"+t.id+">"))),t.wrapperDom.remove(),i&&i(t,e),{flat:e,tree:s}},createData:(t,e,s,i)=>{let a={},o=axType(t),n=axIncreaseId(s),r="String"===o?t:"新节点"+n;if("Object"===o){let s=i?{path:e.path+">"+t.id,floor:e.floor+1}:{path:e.path.replace(new RegExp("(.*)"+e.id),"$1"+t.id),floor:e.floor};!t.hasOwnProperty("id")&&(t.id=n),a=Object.assign(t,s)}else a=i?{id:n,label:r,pId:e.id,path:e.path+">"+n,floor:e.floor+1}:{id:n,label:r,pId:e.pId,path:e.path.replace(new RegExp("(.*)"+e.id),"$1"+n),floor:e.floor};return a},existChildPush:(t,e,s=!0)=>{s?(e.children.unshift(t),e.bodyDom.insertAdjacentElement("afterBegin",t.wrapperDom)):(e.children.push(t),e.bodyDom.insertAdjacentElement("beforeEnd",t.wrapperDom))},noExistChildPush:(t,e,s)=>{e.children=[],e.children.push(t),(e=s(e)).bodyDom.appendChild(t.wrapperDom),e.wrapperDom.appendChild(e.bodyDom)},getItemsFromPath(t){let e=Object.assign({connector:"/",prop:"label"},t),s=e.path.split(">").map((t=>e.data.find((e=>e.id==t)))).filter(Boolean),i=s.map((t=>t[e.prop])).join(e.connector);return{items:s,path:i}},getFullData:async function(t={}){if(axIsEmpty(t.source))return!1;let e=axType(t.source),s=Object.assign({idStart:0,rootStart:-1,replace:!1,ajaxData:{},ajaxType:"post",async:!1,addPath:!0},t),i=[],a={},o=t=>{let e=t.nodeName,i=[];return"SELECT"===e||"DATALIST"===e?i=axSelectToArr(t,s.idStart,s.replace).data:"UL"!==e&&"OL"!==e||(i=axUlToArr(t,s.idStart,s.replace).data),i},n=t=>{let e=[],s=axClone(t);return e=s[0].hasOwnProperty("pId")&&s[0].hasOwnProperty("id")?axArrToTree(s):s,e};if(!axIsEmpty(s.ajaxData)&&(s.async=!0),s.async){let t=s.source.loadDom?axIdToDom(s.source.loadDom):null;await axAjax({url:s.source,data:axIsEmpty(s.ajaxData)?"":s.ajaxData,type:s.ajaxType,opened:t=>{s.opened?s.opened(t):s.instance&&s.xhrName&&(s.instance[s.xhrName]=t.xhr)},before:e=>{s.before?s.before(e):t&&t.setAttribute("loading","")},success:e=>{if(axIsEmpty(e.content))return!1;t&&t.hasAttribute("loading")&&t.removeAttribute("loading"),s.success&&s.success(e),i=n(e.content)}})}else e.includes("HTML")?i=o(s.source):"String"===e?axStrType(s.source)&&(i=o(axIdToDom(s.source))):"Array"===e&&(i=n(s.source));return a=s.addPath?this.addPath(i,s.rootStart,s.idStart):i,s.callback&&s.callback(a),a}},axDateMethod={toSlash:function(t){return t.replace("-","/")},toDate:function(t,e){let s,i=axType(t);return"Date"===i?s=new Date(t.valueOf()):"String"===i?s=new Date(this.toSlash(t)):"Object"===i?(s=new Date,t.hasOwnProperty("YYYY")&&s.setFullYear(t.YYYY),t.hasOwnProperty("MM")&&s.setMonth(t.MM),t.hasOwnProperty("DD")&&s.setDate(t.DD),t.hasOwnProperty("hh")&&s.setHours(t.hh),t.hasOwnProperty("mm")&&s.setMinutes(t.mm),t.hasOwnProperty("ss")&&s.setSeconds(t.ss)):s=new Date,"date"===e?(s.setHours(0),s.setMinutes(0),s.setSeconds(0)):"month"===e?(s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0)):"year"===e&&(s.setMonth(0),s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0)),s},toObj:function(t,e=!1,s){let i,a=axType(t),o="";if("Object"===a)o=t;else if("String"===a&&!t.trim().includes(" ")&&t.includes(":")){let e=t.split(":");o={hh:~~e[0],mm:~~e[1],ss:~~e[2]}}else i=this.toDate(t),o={YYYY:i.getFullYear(),MM:i.getMonth(),DD:i.getDate(),hh:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds()};return e&&(!o.hasOwnProperty("hh")&&(o.hh=0),!o.hasOwnProperty("mm")&&(o.mm=0),!o.hasOwnProperty("ss")&&(o.ss=0)),"year"===s?(Reflect.deleteProperty(o,"MM"),Reflect.deleteProperty(o,"DD"),Reflect.deleteProperty(o,"hh"),Reflect.deleteProperty(o,"mm"),Reflect.deleteProperty(o,"ss")):"month"===s?(Reflect.deleteProperty(o,"DD"),Reflect.deleteProperty(o,"hh"),Reflect.deleteProperty(o,"mm"),Reflect.deleteProperty(o,"ss")):"date"===s&&(Reflect.deleteProperty(o,"hh"),Reflect.deleteProperty(o,"mm"),Reflect.deleteProperty(o,"ss")),o},strToTimeObj:function(t){let e=(t=t.replace(" ","")).split(":");return{hh:~~e[0]||0,mm:~~e[1]||0,ss:~~e[2]||0}},getDays:function(t){let e=this.toDate(t),s=e.getFullYear(),i=e.getMonth();return new Date(s,i+1,0).getDate()},getChain:function(t,e={YYYY:0,MM:0,DD:0,hh:0,mm:0,ss:0}){let s=this.toDate(t);return e.hasOwnProperty("ss")&&s.setDate(s.getSeconds()+e.ss),e.hasOwnProperty("mm")&&s.setDate(s.getMinutes()+e.mm),e.hasOwnProperty("hh")&&s.setDate(s.getHours()+e.hh),e.hasOwnProperty("DD")&&s.setDate(s.getDate()+e.DD),e.hasOwnProperty("MM")&&s.setMonth(s.getMonth()+e.MM),e.hasOwnProperty("YYYY")&&s.setFullYear(s.getFullYear()+e.YYYY),s},fillZero:function(t){let e=~~t;return e<10?"0"+e:e},fillFormat:function(t,e){let s,i,a,o,n,r,l;return t instanceof Date?(s=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),o=t.getHours(),n=t.getMinutes(),r=t.getSeconds(),l=t.getDay()):(s=t.YYYY,i=t.MM+1,a=t.DD,o=t.hh,n=t.mm,r=t.ss,t.hasOwnProperty("DD")&&(l=new Date(t.YYYY,t.MM,t.DD).getDay())),e.includes("YYYY")&&(e=e.replace("YYYY",s)),e.includes("MM")&&(e=e.replace("MM",this.fillZero(i))),e.includes("DD")&&(e=e.replace("DD",this.fillZero(a))),e.includes("hh")&&(e=e.replace("hh",this.fillZero(o))),e.includes("mm")&&(e=e.replace("mm",this.fillZero(n))),e.includes("ss")&&(e=e.replace("ss",this.fillZero(r))),e.includes("WW")&&void 0!==l&&(e=e.replace("WW",["日","一","二","三","四","五","六"][l])),e},sort:function(t){return t.sort(((t,e)=>this.toDate(t)-this.toDate(e)))},trim:function(t){return t.trim().replace(/\s+/gi," ")},getType:function(t){let e="";return RegExp(/^(?=.*YYYY)(?=.*MM)(?=.*DD)(?=.*hh).*$/).test(t)?e="datetime":RegExp(/^(?=.*YYYY)(?=.*MM)(?=.*DD).*$/).test(t)?e="date":RegExp(/^(?=.*YYYY)(?=.*MM).*$/).test(t)?e="month":RegExp(/^(?=.*YYYY).*$/).test(t)?e="year":RegExp(/^(?=.*hh).*$/).test(t)&&(e="time"),e},isSameDay:function(t,e){let s={...t},i={...e};return Reflect.deleteProperty(s,"hh"),Reflect.deleteProperty(s,"mm"),Reflect.deleteProperty(s,"ss"),Reflect.deleteProperty(i,"hh"),Reflect.deleteProperty(i,"mm"),Reflect.deleteProperty(i,"ss"),JSON.stringify(s)==JSON.stringify(i)}},axIsOutside=(t,e,s,i)=>{if(!e)return!0;let a=axIdToDom(e);if(!a)return!0;let o,n,r,l,h=t.clientX,p=t.clientY;return o=s||a.getBoundingClientRect().left,n=i||a.getBoundingClientRect().top,r=o+a.offsetWidth,l=n+a.offsetHeight,h<o||h>r||p<n||p>l},axStyle=(t,e)=>{if(!t)return!1;let s=axIdToDom(t);return document.defaultView.getComputedStyle(s,e)},axListenAnimation=(t={duration:duration,doing:doing,done:done})=>{if(!t.duration)return!1;let e=(new Date).getTime()+t.duration,s=()=>{let i;(new Date).getTime()>=e?(t.done&&t.done(s),i&&cancelAnimationFrame(s)):(t.doing&&t.doing(s),i=requestAnimationFrame(s))};return s(),s},axGetStyleTransform=(t,e=["translate","scale","rotate","skew"],s=!1)=>{let i=axIdToDom(t),a=axStyle(i),o=i.style.transform,n={rotate:0,scale:{x:1,y:1},translate:{x:0,y:0},skew:{x:0,y:0}};if(o){let t=t=>new RegExp(`${t}\\(([^\\)]+)\\)`),s=e=>o.match(t(e));if(e.includes("translate")&&o.includes("translate")&&s("translate"))if(s("translate")[1].includes(",")){let t=s("translate")[1].split(",").map((t=>parseInt(t)));n.translate={x:t[0],y:t[1]}}else n.translate={x:parseInt(s("translate")[1]),y:0};if(e.includes("scale")&&o.includes("scale")&&s("scale"))if(s("scale")[1].includes(",")){let t=s("scale")[1].split(",").map((t=>parseFloat(t)));n.scale={x:t[0],y:t[1]}}else n.scale={x:parseFloat(s("scale")[1]),y:parseFloat(s("scale")[1])};if(e.includes("rotate")&&o.includes("rotate")&&s("rotate")&&(n.rotate=parseFloat(s("rotate")[1])),e.includes("skew")&&o.includes("skew")&&s("skew"))if(s("skew")[1].includes(",")){let t=s("skew")[1].split(",").map((t=>parseFloat(t)));n.skew={x:t[0],y:t[1]}}else n.skew={x:parseFloat(s("skew")[1]),y:0}}return s&&(n.translate={x:parseInt(a.left),y:parseInt(a.top)}),n},axSetStyleTransform=(t,e,s=!1)=>{let i=axIdToDom(t),a=i.style.transform,o=t=>new RegExp(`${t}\\(([^\\)]+)\\)`,"gmi");if(axIsEmpty(e))return!1;for(let t in e)if(e.hasOwnProperty(t)){let n="";"translate"===t?s?isNaN(e[t])?(i.style.left=`${e[t].x}px`,i.style.top=`${e[t].y}px`):i.style.left=`${e[t]}px`:(n=isNaN(e[t])?`${t}(${e[t].x}px,${e[t].y}px)`:`${t}(${e[t]}px)`,a.includes(t)?a.startsWith("translate")?a=a.replace(o(t),n):(a=a.replace(o(t),""),a=`${n} ${a}`):a=`${n} ${a}`):("scale"===t?n=isNaN(e[t])?`${t}(${e[t].x},${e[t].y})`:`${t}(${e[t]})`:"rotate"===t?n=`${t}(${e[t]}deg)`:"skew"===t&&(n=isNaN(e[t])?`${t}(${e[t].x}deg,${e[t].y}deg)`:`${t}(${e[t]}deg)`),a.includes(t)?a=a.replace(o(t),n):a+=` ${n}`)}return i.style.transform=a,a},axTplEngine=(t,e)=>{if(!t)return!1;let s,i=/<#([^#>]+)?#>/g,a=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,o="let r=[];\n",n=0,r=(t,e)=>(o+=e?t.match(a)?t+"\n":"r.push("+t+");\n":""!=t?'r.push("'+t.replace(/"/g,'\\"')+'");\n':"",r);for(;s=i.exec(t);)r(t.slice(n,s.index))(s[1],!0),n=s.index+s[0].length;return r(t.substr(n,t.length-n)),o+='return r.join("");',new Function(o.replace(/[\r\t\n]/g,"")).apply(e)},axClone=t=>{let e=t=>{if(null===t)return null;if("object"!=typeof t)return t;if(t.constructor===Date)return new Date(t);{let e={};for(let s in t)if(null==t[s])e[s]=null;else if("object"!=typeof t[s]||t[s].nodeType)e[s]=t[s];else if(e[s]=axClone(t[s]),t[s]instanceof Array){let i=[];for(let e of t[s])i.push(axClone(e));e[s]=i}return e}};return Array.isArray(t)?t.map((t=>e(t))):e(t)},axMerge=(t,e,s={arrAppend:!1,clone:!1,attrAppend:!0})=>{if("object"!=typeof t||"object"!=typeof e)return e;if(!e)return t;let i=s.copy?axClone(t):t;for(let t in e)e.hasOwnProperty(t)&&i.hasOwnProperty(t)?i[t]?"Array"!=axType(e[t])?i[t]=axMerge(i[t],e[t],s):s.arrAppend?i[t].push(...e[t]):i[t]=e[t]:i[t]=e[t]:e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&s.attrAppend&&(i[t]=e[t]);return i},axStrToArr=(t,e,s)=>{let i=[],a={};return axIsEmpty(e)||e.forEach(((t,e)=>{a[t]=axIsEmpty(s)?"":s[e]})),"["==t.substr(0,1)&&"]"==t.substr(-1)?i=JSON.parse(t):-1!=t.replace(/\s*/g,"").indexOf("},{")||"{"==t.replace(/\s*/g,"").substr(0,1)&&"}"==t.replace(/\s*/g,"").substr(-1)?i=JSON.parse("["+t+"]"):(i=t.split(","),i.forEach(((t,s)=>{if("string"==typeof(t=t.trim())&&!axIsEmpty(e)){let a={};e.forEach(((e,s)=>{a[e]=0==s?t:""})),i.splice(s,1,a)}}))),i.forEach((t=>{if(!axIsEmpty(a))for(let e in a)t.hasOwnProperty(e)?t.hasOwnProperty(e)&&!t[e]&&(t[e]=a[e]):t[e]=a[e]?a[e]:""})),i},axTplToArr=(t,e,s,i,a)=>{let o=axIdToDom(t),n=[];if(i){o.querySelectorAll(i).forEach((t=>{let i={};e.forEach(((e,o)=>{let n=t.querySelector("["+e+"]");i[s[o]]=n?n.getAttribute(e)?n.getAttribute(e).trim():n.innerHTML.trim():a[o]||""})),n.push(i)}))}else{let t={};e.forEach(((e,i)=>{let n=o.querySelector("["+e+"]");t[s[i]]=n?n.getAttribute(e)?n.getAttribute(e).trim():n.innerHTML.trim():a[i]||""})),n.push(t)}return n},axDataset=(t,e)=>{let s=t?axIdToDom(t):null,i=/^\d+(\.\d+)?$/,a=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;if(s){let t=[...s.attributes].filter((t=>0==t.name.indexOf("data-")));if(!axIsEmpty(t)){let s=axClone(e),o=t=>{for(let e in t){let s=e.toLowerCase();t[s]=t[e],"Object"===axType(t[e])&&o(t[e]),s!=e&&delete t[e]}};o(s);for(let e=0;e<t.length;e++){let o=t[e].value.trim(),n=t[e].name;"true"==o?o=JSON.parse("true"):"false"==o?o=JSON.parse("false"):"null"==o?o=null:"["==o.substr(0,1)&&"]"==o.substr(-1)?o=JSON.parse(o):-1!=o.replace(/\s*/g,"").indexOf("},{")&&(o=JSON.parse("["+o+"]")),"string"==typeof o&&(i.test(o)||a.test(o))&&(o=Number(o));let r=n.split("-");r.length-1==1?s[r[1]]=o:r.length-1==2?s[r[1]][r[2]]=o:r.length-1==3&&(s[r[1]][r[2]][r[3]]=o)}let n=(t,e)=>{for(let s in t){let i=s.toLowerCase();"Object"===axType(t[s])?n(t[s],e[i]):t[s]=e[i]}};n(e,s)}}return e},axAttrToJson=(t,e)=>{let s=axIdToDom(t);if(!s)return{};let i=s.getAttribute(e);if(!e||!i)return{};if(!i.includes(":"))return{};let a=i.trim();return a.startsWith("{")||(a="{"+a+"}"),new Function("return "+a)()},axExtend=(t,e,s,i)=>{if(!t)return!1;let a=s?axIdToDom(s):null;return axMerge(t,e),a&&axMerge(t,axAttrToJson(a,i)),t},axAddPlan=(t,e,s)=>{let i=axType(t),a=[],o=t=>{s.handlers.hasOwnProperty(t)||(s.handlers[t]=[]);let i=e.toString().replace(/\s/g,"").replace(/\;/g,"").match(/{(\S*)}/)[1];!(s.handlers[t].toString().replace(/\s/g,"").replace(/\;/g,"").indexOf(i)>-1)&&s.handlers[t].push(e)};if("String"===i?a=t.includes(",")?t.split(","):t.split(" "):"Array"===i&&(a=t),a.length>0)for(let t of a)o(t)},axExePlan=(t,e,...s)=>{let i=axType(t),a=[];if("String"===i?a=t.includes(",")?t.split(","):t.split(" "):"Array"===i&&(a=t),a.length>0)for(let t of a)o=t,e.handlers.hasOwnProperty(o)&&e.handlers[o].forEach((t=>{t.call(e,...s)}));var o},axDelPlan=(t,e,s)=>{let i=axType(t),a=[],o=t=>{if(s.handlers.hasOwnProperty(t))if(e){let i=s.handlers[t].findIndex((t=>t===e));if(void 0===i)return;s.handlers[t].splice(i,1),0===s.handlers[t].length&&delete s.handlers[t]}else delete s.handlers[t]};if("String"===i?a=t.includes(",")?t.split(","):t.split(" "):"Array"===i&&(a=t),a.length>0)for(let t of a)o(t)},axAddElem=(t,e,s)=>{let i=t.toLowerCase().trim(),a=document.createElement(i),o=function(t,e){if(""===e||null==e)return!1;"template"===i?t.innerHTML=e:Array.isArray(e)?e.length>0&&e.forEach((e=>{o(t,e)})):"object"==typeof e?t.appendChild(e):t.insertAdjacentHTML("beforeEnd",e)};if(e)for(let t in e)e.hasOwnProperty(t)&&a.setAttribute(t,e[t]);return o(a,s),a},axStrToFilter=(t,e,s)=>{let i=new Function("source","return "+`source.filter(item =>${t})`)(e);return s&&s(i),i},axRangeReplace=(t,e,s,i,a)=>{"string"!=typeof t&&(t=JSON.stringify(t)),"string"!=typeof e&&(t=JSON.stringify(e));let o="";return o=s||i?i?s?t.substring(0,s)+e+t.substring(i):a?t.substring(i-a)+e+t.substring(0,s):e+t.substring(i):a?t.substring(0,s)+e+t.substring(s+a):t.substring(0,s)+e:e,o},axArrange=(t,e,s=0,i=[],a=[])=>{let o=t.length;if(!(s+e>o)){for(let n=s;n<o;n++){if(1===e){a.push([...i,t[n]]),n+1<o&&axArrange(t,e,n+1,i,a);break}axArrange(t,e-1,n+1,[...i,t[n]],a)}return a}},axAjax=(t,e,s)=>{if(!t)return!1;let i=axAddElem("SPAN",{"ajax-message":""}),a=e?axIdToDom(e):null;a&&a.appendChild(i);let o={url:"",selector:"",type:"post",async:!0,data:{},delay:6e4,contentType:"",headers:{},responseType:"",catchable:!1,abort:()=>{a&&(i.innerHTML='<i class="ax-color-warning">中止了请求！</i>',a.setAttribute("ajax-result","abort"))},timeout:()=>{a&&(i.innerHTML='<i class="ax-color-error">请求超时了！</i>',a.setAttribute("ajax-result","timeout"))},loading:'<span class="ax-loading"><i></i></span>',opened:"",before:t=>{a&&(i.innerHTML=t.content,a.setAttribute("ajax-result","before"))},downloading:()=>{},uploading:()=>{},success:t=>{a&&(a.innerHTML=t.content,a.setAttribute("ajax-result","success"))},error:t=>{a&&(i.innerHTML=`<i class="ax-color-error">错误状态：${t.status}</i>`,a.setAttribute("ajax-result","error"))}};for(let e in t)o[e]=t[e];let n="";n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");let r="";if(!axIsEmpty(o.data))if("FormData"==axType(o.data))r=o.data;else if("Object"==axType(o.data))if(o.contentType.includes("json"))r=JSON.stringify(o.data);else{for(let t in o.data)r+="&"+t+"="+o.data[t];o.contentType="application/x-www-form-urlencoded"}else o.data=o.data.trim(),r=o.data.startsWith("&")||o.data.startsWith("?")?o.data.slice(1):o.data,o.contentType="application/x-www-form-urlencoded";if(o.contType&&(o.headers["Content-Type"]=o.contType,!o.contType.includes("urlencoded")&&"get"===o.type.toLowerCase()))return!1;let l,h=()=>{for(let t in o.headers)o.headers[t]&&n.setRequestHeader(t,o.headers[t])};n.timeout=o.delay,n.responseType=o.responseType;let p=()=>{l&&n.removeEventListener("timeout",l),n.abort(),!axIsEmpty(o.abort)&&o.abort(a,n)},d=new Promise(((t,e)=>{let i=(t,e)=>{let s=t.loaded,i=t.total,o=0,n=0,r="0%",l=new Date(t.timeStamp).getTime();t.lengthComputable&&(o=s/i,n=Math.round(100*o),r=n+"%",e&&e({result:r,percent:n,current:s,total:i,ratio:o,time:l,dom:a}))};n.upload.onprogress=t=>{i(t,(t=>{!axIsEmpty(o.uploading)&&o.uploading(t)}))},n.onprogress=t=>{i(t,(t=>{!axIsEmpty(o.downloading)&&o.downloading(t)}))},n.onerror=t=>{let s={content:n.response,status:n.status,dom:a,xhr:n};!axIsEmpty(o.error)&&o.error(s),o.catchable&&e(s)},l=()=>{let t={content:n.response,status:n.status,dom:a,xhr:n};a&&a.setAttribute("ajax-result","timeout"),!axIsEmpty(o.timeout)&&o.timeout(t),o.catchable&&e(t)},n.addEventListener("timeout",l),n.onreadystatechange=function(){if(n.readyState<4){let t={content:o.loading,status:n.status,dom:a,xhr:n,abort:p};1===n.readyState&&!axIsEmpty(o.opened)&&o.opened(t),!axIsEmpty(o.before)&&o.before(t),s&&s(t)}else if(n.status>=200&&n.status<300||304==n.status)if(o.responseType&&"text"!=n.responseType){a&&a.setAttribute("ajax-result","success");let e={content:n.response,status:n.status,dom:a,xhr:n};!axIsEmpty(o.success)&&o.success(e),t(e)}else{let e=document.createElement("div"),s="",i=/(<head\b[^<]*(?:(?!<\/head>)<[^<]*)*<\/head>)|(<\/?html.*?>)|(<\!DOCTYPE.*?html.*?>)|(<\/?body.*?>)/gi,r=axStrEnd(o.url,"#"),l=o.selector||r;e.innerHTML=n.responseText,s=l&&e.querySelector(l)?e.querySelector(l).innerHTML:l&&!e.querySelector(l)?n.responseText.replace(i,"").trim():"{"==n.responseText.trim().substr(0,1)||"["==n.responseText.trim().substr(0,1)?JSON.parse(n.responseText.trim()):n.responseText.replace(i,"").trim(),a&&a.setAttribute("ajax-result","success");let h={content:s,status:n.status,dom:a,xhr:n};!axIsEmpty(o.success)&&o.success(h),t(h)}else{let t={content:n.response,status:n.status,dom:a,xhr:n};!axIsEmpty(o.error)&&o.error(t),o.catchable&&e(t)}},"get"==o.type.toLowerCase()?(n.open("get",o.url+"?now="+(new Date).getTime()+"&"+r,o.async),h(),n.send()):"post"==o.type.toLowerCase()&&(n.open("post",o.url,o.async),h(),n.send(r))}));return d.xhr=n,d.abort=p,d},axAjaxSubmit=(t,e,s,i={type:type,success:success,loading:loading,delay:delay,before:before,error:error,opended:opended,other:other})=>{if(!t)return!1;if(!e)return!1;i.type=i.type||"post",i.other=i.other||{};let a=axIdToDom(e),o=s?axIdToDom(s):null,n=o?o.innerHTML:"",r=i.loading||"button",l=Object.assign(i.other,{formClass:"ax-form-submitting",buttonClass:"ax-button-submitting",buttonText:"正在提交",overlayClass:"ax-form-overlay",overlayShowClass:"ax-show",successText:"恭喜！提交成功！",errorText:"对不起，提交失败！"}),h=a.querySelector(".ax-form-overlay")?a.querySelector(".ax-form-overlay"):axAddElem("div",{class:"ax-form-overlay"});if(a.classList.contains(l.formClass))return!1;if(o&&o.classList.contains(l.buttonClass))return!1;let p,d={};return a.querySelectorAll("[name]").forEach((function(t){d[t.getAttribute("name")]=t.value.trim()})),p=axAjax({url:t,data:d,type:i.type,opened:t=>{i.opened&&i.opened(t)},before:t=>{a.classList.add(l.formClass),o&&o.classList.add(l.buttonClass),"button"==r&&o?(o.innerHTML=l.buttonText,o.insertAdjacentHTML("afterbegin",'<i class="ax-btn-loading"></i>')):(h.innerHTML=t.content,h.classList.add(l.overlayClass),a.querySelector(".ax-form-overlay")||a.appendChild(h)),i.before&&i.before(t)},success:t=>{setTimeout((()=>{a.classList.remove(l.formClass),o&&o.classList.remove(l.buttonClass),"button"==r&&o?o.innerHTML=n:h.classList.remove(l.overlayClass),new axMessage({content:l.successText,result:"success",iconShow:!0}),i.success&&i.success(t)}),0===i.delay?0:i.delay||1e3)},error:t=>{"button"==r&&o?o.innerHTML=n:h.classList.remove(l.overlayClass),new axMessage({content:l.errorText,result:"error",iconShow:!0}),i.error&&i.error(t)}}),p},axOffset=t=>{if(!t)return!1;let e,s,i=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,a=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,o=axIdToDom(t);return e=o.getBoundingClientRect().left+i,s=o.getBoundingClientRect().top+a,{left:e,top:s}},axWidth=(t,e)=>{if(!t)return!1;let s=axIdToDom(t),{width:i,paddingLeft:a,paddingRight:o,marginLeft:n,marginRight:r,borderLeftWidth:l,borderRightWidth:h}=getComputedStyle(s);return i=parseInt(i,10),a=parseInt(a,10),o=parseInt(o,10),n=parseInt(n,10),r=parseInt(r,10),l=parseInt(l,10),h=parseInt(h,10),"inner"==e?i+a+o:"outer"==e?i+a+o+n+r+l+h:i},axHeight=(t,e)=>{if(!t)return!1;let s=axIdToDom(t),{height:i,paddingTop:a,paddingBottom:o,marginTop:n,marginBottom:r,borderTopWidth:l,borderBottomWidth:h}=getComputedStyle(s);return i=parseInt(i,10),a=parseInt(a,10),o=parseInt(o,10),n=parseInt(n,10),r=parseInt(r,10),l=parseInt(l,10),h=parseInt(h,10),"inner"==e?i+a+o:"outer"==e?i+a+o+n+r+l+h:i},axArrHeight=t=>{if(!t)return!1;let e=axIdToDom(t),{height:s,paddingTop:i,paddingBottom:a,marginTop:o,marginBottom:n,borderTopWidth:r,borderBottomWidth:l}=getComputedStyle(e);return s=parseInt(s,10),i=parseInt(i,10),a=parseInt(a,10),o=parseInt(o,10),n=parseInt(n,10),r=parseInt(r,10),l=parseInt(l,10),{height:s,paddingTop:i,paddingBottom:a,marginTop:o,marginBottom:n,borderTopWidth:r,borderBottomWidth:l}},axSelector=(t,e)=>{if(!t)return!1;let s=axIdToDom(t),i=!0;if(e){e=String(e).replace(/\s+/g,""),e=String(e).split(",");for(let t=0;t<e.length;t++){if(!e[t]){i=!0;break}if("class"==axStrType(e[t])){let a=e[t].replace(".","");if(s.classList.contains(a)){i=!0;break}i=!1}else if("id"==axStrType(e[t])){let a=e[t].replace("#","");if(s.getAttribute("id")==a){i=!0;break}i=!1}else{let a=e[t].toUpperCase();if(s.nodeName==a){i=!0;break}i=!1}}}else i=!0;return i},axNot=(t,e)=>{if(!t)return!1;let s=axIdToDom(t),i=!0;if(e){e=String(e).replace(/\s+/g,""),e=String(e).split(",");for(let t=0;t<e.length;t++)if("class"==axStrType(e[t])){let a=e[t].replace(".","");if(s.classList.contains(a)){i=!0;break}i=!1}else if("id"==axStrType(e[t])){let a=e[t].replace("#","");if(s.getAttribute("id")==a){i=!0;break}i=!1}else if(e){let a=e[t].toUpperCase();if(s.nodeName==a){i=!0;break}i=!1}else i=!1}else i=!1;return i},axSiblings=(t,e,s,i)=>{if(!t)return!1;let a=axIdToDom(t);return[...a.parentNode.children].filter((t=>e?axSelector(t,s)&&!axNot(t,i):t!==a&&axSelector(t,s)&&!axNot(t,i)))},axChildren=(t,e,s)=>{if(!t)return!1;return[...axIdToDom(t).children].filter((t=>axSelector(t,e)&&!axNot(t,s)))},axParents=(t,e,s,i,a=[])=>{if(!t)return!1;let o=axIdToDom(t),n=e?axIdToDom(e):null;return"BODY"!==o.parentElement.nodeName?(s&&a.indexOf(o)<0&&a.push(o),n?(i&&a.indexOf(n)<0&&a.push(n),o.parentElement!==n?(a.push(o.parentElement),axParents(o.parentElement,n,s,i,a)):a):(a.push(o.parentElement),axParents(o.parentElement,n,s,i,a))):a},axCurves={linear:t=>t,easeIn:t=>t*t*t,easeOut:t=>(t-1)*(t-1)*(t-1)+1,easeInOut:t=>t<.5?2*t*t:-2(t-1)*(t-1)+1,easeOutIn:t=>t<.5?Math.sqrt(.5*t):1-Math.sqrt(.5*(1-t))},axSlideDown=(t,e,s,i,a="easeOut")=>{if(!t)return!1;let o=axIdToDom(t),n=o.style.cssText;if(e=e||"block","none"===window.getComputedStyle(o).display){o.style.cssText=`${n}display: ${e};`;const{height:t,paddingTop:r,paddingBottom:l,marginTop:h,marginBottom:p}=axArrHeight(o);let d;d=void 0!==i&&"number"==typeof i?i:(t=>t/3+250)(t),o.style.cssText=`${n}display: ${e}; padding-top: 0; padding-bottom: 0;margin-top: 0; margin-bottom: 0;`;const c=(new Date).getTime(),m=()=>{const i=(new Date).getTime()-c,u=i/d,g=axCurves[a](u),f=0+t*g,x=0+r*g,b=0+l*g,y=0+h*g,v=0+p*g;i<=d&&Math.ceil(f)<t?o.style.cssText=`${n}overflow:hidden;display: ${e}; padding-top: ${x}px; padding-bottom: ${b}px;margin-top: ${y}px; margin-bottom: ${v}px; height: ${f}px`:o.style.cssText=`${n}display: ${e};`;const D=requestAnimationFrame(m);(Math.ceil(f)>=t||!t)&&(cancelAnimationFrame(D),s&&s())};m()}return o},axHeightDown=(t,e,s,i,a="easeOut")=>{if(!t)return!1;let o=axIdToDom(t);const n=e&&e.height?e.height:axArrHeight(o).height,r=e&&e.paddingTop?e.paddingTop:axArrHeight(o).paddingTop,l=e&&e.paddingBottom?e.paddingBottom:axArrHeight(o).paddingBottom,h=e&&e.marginTop?e.marginTop:axArrHeight(o).marginTop,p=e&&e.marginBottom?e.marginBottom:axArrHeight(o).marginBottom;let d;d=void 0!==i&&"number"==typeof i?i:(t=>t/3+250)(n),o.style.overflow="hidden",o.style.height=0,r&&(o.style.paddingTop=0),l&&(o.style.paddingBottom=0),h&&(o.style.marginTop=0),p&&(o.style.marginBottom=0);const c=(new Date).getTime(),m=()=>{const t=(new Date).getTime()-c,e=t/d,i=axCurves[a](e),u=0+n*i,g=0+r*i,f=0+l*i,x=0+h*i,b=0+p*i;t<=d&&Math.ceil(u)<n?(o.style.height=u+"px",r&&(o.style.paddingTop=g+"px"),l&&(o.style.paddingBottom=f+"px"),h&&(o.style.marginTop=x+"px"),p&&(o.style.marginBottom=b+"px")):(o.style.height=n+"px",r&&(o.style.paddingTop=r+"px"),l&&(o.style.paddingBottom=l+"px"),h&&(o.style.marginTop=h+"px"),p&&(o.style.marginBottom=p+"px"));const y=requestAnimationFrame(m);(Math.ceil(u)>=n||!n)&&(cancelAnimationFrame(y),s&&s())};return m(),o},axSlideUp=(t,e,s,i,a="easeOut")=>{if(!t)return!1;let o=axIdToDom(t),n=o.style.cssText;if(e=e||"block","none"!==window.getComputedStyle(o).display){const{height:t,paddingTop:r,paddingBottom:l,marginTop:h,marginBottom:p}=axArrHeight(o);let d;d=void 0!==i&&"number"==typeof i?i:(t=>t/3+250)(t),o.style.cssText=`${n}display: ${e}; padding-top: 0; padding-bottom: 0;margin-top: 0; margin-bottom: 0;`;const c=(new Date).getTime(),m=()=>{const i=(new Date).getTime()-c,u=i/d,g=axCurves[a](u),f=t+-t*g,x=r+-r*g,b=l+-l*g,y=h+-h*g,v=p+-p*g;i<=d&&Math.floor(f)>0?o.style.cssText=`${n}overflow:hidden;display: ${e}; padding-top: ${x}px; padding-bottom: ${b}px;margin-top: ${y}px; margin-bottom: ${v}px; height: ${f}px`:o.style.cssText=`${n}display: none`;const D=requestAnimationFrame(m);(Math.floor(f)<=0||!t)&&(cancelAnimationFrame(D),s&&s())};m()}return o},axHeightUp=(t,e,s,i,a="easeOut")=>{if(!t)return!1;let o=axIdToDom(t);const n=e&&e.height?e.height:axArrHeight(o).height,r=e&&e.paddingTop?e.paddingTop:axArrHeight(o).paddingTop,l=e&&e.paddingBottom?e.paddingBottom:axArrHeight(o).paddingBottom,h=e&&e.marginTop?e.marginTop:axArrHeight(o).marginTop,p=e&&e.marginBottom?e.marginBottom:axArrHeight(o).marginBottom;let d;d=void 0!==i&&"number"==typeof i?i:(t=>t/3+250)(n),o.style.overflow="hidden";const c=(new Date).getTime(),m=()=>{const t=(new Date).getTime()-c,e=t/d,i=axCurves[a](e),u=n+-n*i,g=r+-r*i,f=l+-l*i,x=h+-h*i,b=p+-p*i;t<=d&&Math.floor(u)>0?(o.style.height=u+"px",r&&(o.style.paddingTop=g+"px"),l&&(o.style.paddingBottom=f+"px"),h&&(o.style.marginTop=x+"px"),p&&(o.style.marginBottom=b+"px")):(o.style.height=0,r&&(o.style.paddingTop=0),l&&(o.style.paddingBottom=0),h&&(o.style.marginTop=0),p&&(o.style.marginBottom=0));const y=requestAnimationFrame(m);(Math.floor(u)<=0||!n)&&(cancelAnimationFrame(y),s&&s())};return m(),o},axSlideToggle=(t,e,s,i,a,o="easeOut")=>{if(!t)return!1;let n=axIdToDom(t);return e=e||"block","none"===window.getComputedStyle(n).display?axSlideDown(n,e,s,a,o):axSlideUp(n,e,i,a,o),n},axFadeIn=(t,e,s,i=200,a="linear")=>{if(!t)return!1;let o=axIdToDom(t);if(e=e||"block",o){let t=window.getComputedStyle(o).display,s=window.getComputedStyle(o).opacity;if("none"===t){o.style.display=e,o.style.opacity=0;let t=(new Date).getTime(),s=()=>{let e=(new Date).getTime()-t,n=e/i,r=axCurves[a](n);o.style.opacity=e<=i&&r<=1?r:1;let l=requestAnimationFrame(s);r>=1&&cancelAnimationFrame(l)};s()}else if("none"!==t&&1!==Number(s)){let t=(new Date).getTime(),e=()=>{let n=(new Date).getTime()-t,r=n/i,l=axCurves[a](r)+Number(s);o.style.opacity=n<=i&&l<=1?l:1;let h=requestAnimationFrame(e);l>=1&&cancelAnimationFrame(h)};e()}}return s&&s(),o},axFadeOut=(t,e,s=200,i="linear")=>{if(!t)return!1;let a=axIdToDom(t);if(a){let t=window.getComputedStyle(a).display,e=window.getComputedStyle(a).opacity;if("none"!==t||0!==Number(e)){a.style.opacity=e;let t=(new Date).getTime(),o=()=>{let n=(new Date).getTime()-t,r=n/s,l=Number(e)-axCurves[i](r);n<=s&&l>0?a.style.opacity=l:(a.style.opacity=0,a.style.display="none");let h=requestAnimationFrame(o);l<=0&&cancelAnimationFrame(h)};o()}}return e&&e(),a},axFadeToggle=(t,e,s,i,a=200,o="linear")=>{if(!t)return!1;let n=axIdToDom(t);if(n){let t=window.getComputedStyle(n).display,r=window.getComputedStyle(n).opacity;"none"===t||Number(r)<=.5?axFadeIn(n,e,s,a,o):(Number(r),axFadeOut(n,i,a,o))}return n},axShow=(t,e,s)=>{if(!t)return!1;let i=axIdToDom(t);"visible"==e?i.style.visibility="visible":i.style.display=e||"block",s&&s()},axHide=(t,e,s)=>{if(!t)return!1;let i=axIdToDom(t);"hidden"==e?i.style.visibility="hidden":i.style.display="none",s&&s()},axToggle=(t,e,s,i,a)=>{if(!t)return!1;let o=axIdToDom(t);axIsVisible(o)?axHide(o,s,a):axShow(o,e,i)},axScrollTo=(t,e={})=>{let s,i=e.parent?axIdToDom(e.parent):null,a=i||window,o=~~e.offset||0,n=e.curve||"easeOut",r="number"==typeof t?"":axIdToDom(t),l=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,h=i?i.scrollTop:l,p=(new Date).getTime();i&&"static"===axStyle(i).position&&(i.style.position="relative"),s=r?i?r.offsetTop-i.scrollTop:r.getBoundingClientRect().top:"number"==typeof t?t-h:-h;let d=e.duration&&"number"==typeof e.duration?e.duration:Math.abs(s)/4+1e3,c=()=>{let t=(new Date).getTime()-p,e=t/d,i=h+(s-o)*axCurves[n](e);a.scrollTo(0,i),c.timer=requestAnimationFrame(c),t>=d&&(a.scrollTo(0,i),cancelAnimationFrame(c.timer))};return c(),t},axIcon={font:{success:'<i class="ax-iconfont ax-icon-check-o"></i>',error:'<i class="ax-iconfont ax-icon-close-o"></i>',warning:'<i class="ax-iconfont ax-icon-warning-o"></i>',info:'<i class="ax-iconfont ax-icon-info-o"></i>',question:'<i class="ax-iconfont ax-icon-question-o"></i>',successFill:'<i class="ax-iconfont ax-icon-check-o-f"></i>',errorFill:'<i class="ax-iconfont ax-icon-close-o-f"></i>',warningFill:'<i class="ax-iconfont ax-icon-warning-o-f"></i>',infoFill:'<i class="ax-iconfont ax-icon-info-o-f"></i>',questionFill:'<i class="ax-iconfont ax-icon-question-o-f"></i>'},svg:{success:'<svg class="svg-success" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-in-1" d="M26.316,42.859L37.9984,54.5414L60.3826,32.1572"></path></svg>',error:'<svg class="svg-error" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-in-1" d="M28.774,57.9246L57.9247,28.7739"></path><path class="svg-line svg-in-2" d="M57.9246,57.9246L28.7739,28.7739"></path></svg>',warning:'<svg class="svg-warning" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M43.4611 7.24c2.8081,0.0924 4.39,1.7 5.3045,3.1159l17.4543 29.9414 17.3445 29.7538c0.5448,1.0193 1.596,4.0544 0.1109,6.4168 -1.4849,2.3626 -3.6815,2.9155 -5.3768,2.992l-34.9082 0.0002 -34.6892 -0.0002c-1.1636,-0.0421 -4.3433,-0.6583 -5.6666,-3.1131 -1.3232,-2.4549 -0.7085,-4.6157 0.0723,-6.1078l17.454 -29.9417 17.3449 -29.7537c0.6185,-0.977 2.7471,-3.396 5.5554,-3.3036z"></path><path class="svg-line svg-out" d="M43.4611 7.24c2.8081,0.0924 4.39,1.7 5.3045,3.1159l17.4543 29.9414 17.3445 29.7538c0.5448,1.0193 1.596,4.0544 0.1109,6.4168 -1.4849,2.3626 -3.6815,2.9155 -5.3768,2.992l-34.9082 0.0002 -34.6892 -0.0002c-1.1636,-0.0421 -4.3433,-0.6583 -5.6666,-3.1131 -1.3232,-2.4549 -0.7085,-4.6157 0.0723,-6.1078l17.454 -29.9417 17.3449 -29.7537c0.6185,-0.977 2.7471,-3.396 5.5554,-3.3036z"></path><path class="svg-line svg-in-1" d="M43.3493,27.8713L43.3493,57.2858"></path><circle class="svg-circle svg-in-2" cx="43.3492" cy="64.3337" r="2.1166"></circle></svg>',info:'<svg class="svg-info" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-in-1" d="M43.3493,65.0602L43.3493,30.9723"></path><circle class="svg-circle svg-in-2" cx="43.3492" cy="23.5856" r="2.1166"></circle></svg>',question:'<svg class="svg-question" xmlns="http://www.w3.org/2000/svg" width="86.6986mm" height="86.6986mm" viewBox="0 0 86.6986 86.6986"><path class="svg-line svg-bg" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path><path class="svg-line svg-in-1" d="M32.3757 35.7255c-0.2203,-11.823 12.5789,-14.1087 18.4056,-9.4189 5.4663,4.3995 4.7426,12.804 -3.1088,17.9938 -3.0015,1.9839 -3.0003,3.8403 -3.0003,10.1707"></path><circle class="svg-circle svg-in-2" cx="44.6612" cy="60.5502" r="2.1166"></circle></svg>'}},axImage={load:getComputedStyle(document.documentElement).getPropertyValue("--load").trim().split('"')[1],loadW:getComputedStyle(document.documentElement).getPropertyValue("--load-w").trim().split('"')[1],blank:getComputedStyle(document.documentElement).getPropertyValue("--blank").trim().split('"')[1],avatar:getComputedStyle(document.documentElement).getPropertyValue("--avatar").trim().split('"')[1],empty:getComputedStyle(document.documentElement).getPropertyValue("--empty").trim().split('"')[1],none:getComputedStyle(document.documentElement).getPropertyValue("--none").trim().split('"')[1]},axGetColors=()=>{let t=getComputedStyle(document.documentElement),e=e=>[t.getPropertyValue(`--h-${e}`),t.getPropertyValue(`--s-${e}`),t.getPropertyValue(`--l-${e}`),t.getPropertyValue(`--a-${e}`)].map((t=>{let e=t.trim();return e.includes("%")?e:Number(e)}));return{primary:e("primary"),text:e("text"),success:e("success"),error:e("error"),info:e("info"),warning:e("warning"),question:e("question")}},axResult=(t,e)=>{if(!t)return!1;let s=axIdToDom(t),i="";switch(e){case"success":i='<path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path>\n            <path class="svg-line svg-in-1" d="M26.316,42.859L37.9984,54.5414L60.3826,32.1572"></path>',s.querySelector("svg").classList.add("svg-success");break;case"error":i='<path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path>\n            <path class="svg-line svg-in-1" d="M28.774,57.9246L57.9247,28.7739"></path>\n            <path class="svg-line svg-in-2" d="M57.9246,57.9246L28.7739,28.7739"></path>',s.querySelector("svg").classList.add("svg-error");break;case"question":i='<path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path>\n            <path class="svg-line svg-in-1" d="M32.3757 35.7255c-0.2203,-11.823 12.5789,-14.1087 18.4056,-9.4189 5.4663,4.3995 4.7426,12.804 -3.1088,17.9938 -3.0015,1.9839 -3.0003,3.8403 -3.0003,10.1707"></path>\n            <circle class="svg-circle svg-in-2" cx="44.6612" cy="60.5502" r="2.1166"></circle>',s.querySelector("svg").classList.add("svg-question");break;case"info":i='<path class="svg-line svg-out" d="M7.238500000000002,43.3493A36.1108,36.1108 0,1,1 79.4601,43.3493A36.1108,36.1108 0,1,1 7.238500000000002,43.3493"></path>\n            <path class="svg-line svg-in-1" d="M43.3493,65.0602L43.3493,30.9723"></path>\n            <circle class="svg-circle svg-in-2" cx="43.3492" cy="23.5856" r="2.1166"></circle>',s.querySelector("svg").classList.add("svg-info");break}s.classList.add("ax-result-show"),-1==s.querySelector("svg").innerHTML.indexOf("svg-in-1")&&s.querySelector("svg").insertAdjacentHTML("beforeend",i)},axCreateContent=(t,e,s)=>{let i,a=t.content,o={};if(t.url)if("async"===t.type){let n="",r="";"id"==axStrType(t.url)?(n=t.url.match(/(\S*)\#/)[1],r="#"+t.url.match(/\#(\S*)/)[1]):n=t.url,o=axAjax({url:n,selector:r,type:t.ajaxType||"post",opened:t=>{e.contentXhr=t.xhr},before:t=>{i=t.content},success:t=>{i="function"==typeof a?a(t.content):t.content,s&&s.call(e,i)}})}else"iframe"===t.type?(i=`<iframe src="${t.url}" frameborder="0" width="100%" height="100%"></iframe>`,t.footerShow=!1):"picture"===t.type?i=`\n            <div class="ax-media-container"><img src="${t.url}" /></div>\n            <div class="ax-media-title">${t.name}</div>\n            ${a}\n            `:"video"===t.type?i=`\n                <div class="ax-media-container"><video src="${t.url}" controls="controls" ></video></div>\n                <div class="ax-media-title">${t.name}</div>\n                ${a}\n                `:"audio"===t.type&&(i=`\n                <div class="ax-media-container"><audio src="${t.url}" controls="controls" ></audio></div>\n                <div class="ax-media-title">${t.name}</div>\n                ${a}\n                `),s&&s.call(e,i);else i="html"==t.type?"string"==typeof a&&"id"==axStrType(a)?document.querySelector(a).innerHTML:"function"==typeof a?a.call(e):a:a||"没有任何内容！",s&&s.call(e,i);return o.content=i,s&&s(i),o},axBreakpoints=(t,e)=>{if(axIsEmpty(t))return!1;let s=[],i={},a=document.body.clientWidth,o=(t,e)=>{t.startsWith("ceil")?axCeil[t.split("-")[1]]>a&&s.push(e):t.startsWith("client")?t.split("-")[1]===axClient()&&s.push(e):t.startsWith("width")?t.split("-")[1]>a&&s.push(e):t.startsWith("mobile")?t.split("-")[1]==axIsMobi()&&s.push(e):t>a&&s.push(e)};for(let t in e)e.hasOwnProperty(t)&&(Reflect.deleteProperty(e[t],"breakpoint"),o(t,e[t]));if(0===s.length)return!1;i=Object.assign(...s),axExtend(t,i)},axFooterBtns=t=>{let e=t.footerBreak?'<div class="ax-break-line"></div>':"",s="";if(t.note&&(t.note=`<div class="ax-note">${t.note}</div>`),t.footerShow)if("right"==t.footerType){let i="",a="",o="";t.confirm.text&&(a=`<a href="###" class="ax-btn ax-primary ${t.confirm.classname}"  confirm>${t.confirm.icon}${t.confirm.text}</a>`),t.cancel.text&&(i=`<a href="###" class="ax-btn ax-plain ax-ignore ${t.cancel.classname}"  cancel>${t.cancel.icon}${t.cancel.text}</a>`),t.diy.text&&t.diy.callback?o=`<a href="###" class="ax-btn ax-plain ${t.diy.classname}"  diy>${t.diy.icon}${t.diy.text}</a>`:t.diy.text&&!t.diy.callback&&(o=`<a href="${t.diy.url}" target="${t.diy.url}" class="ax-btn ax-plain ${t.diy.classname}"  diy>${t.diy.icon}${t.diy.text}</a>`),s=`\n                                        ${e}\n                                        <div class="ax-padding">\n                                              <div class="ax-row">\n                                                  <div class="ax-col">\n                                                  ${t.note}\n                                                  </div>\n                                                  <div class="ax-btns">${o}${i}${a}</div>\n                                              </div>\n                                          </div>\n                          `}else if("line"==t.footerType){let e="",i="",a="";t.confirm.text&&(i=`<a href="###" class="ax-col ax-col-12 ${t.confirm.classname}"  confirm>${t.confirm.icon}${t.confirm.text}</a>`),t.cancel.text&&(e=`<a href="###" class="ax-col ax-col-12 ${t.cancel.classname}"  cancel>${t.cancel.icon}${t.cancel.text}</a><span class="ax-gutter-line"></span>`),t.diy.text&&t.diy.callback?a=`<a href="###" class="ax-col ax-col-12 ${t.diy.classname}"  diy>${t.diy.icon}${t.diy.text}</a><span class="ax-gutter-line"></span>`:t.diy.text&&!t.diy.callback&&(a=`<a href="${t.diy.url}" target="${t.diy.url}" class="ax-col ax-col-12 ${t.diy.classname}"  diy>${t.diy.icon}${t.diy.text}</a><span class="ax-gutter-line"></span>`),s=`\n                          <div class="ax-break-line"></div>\n                          <div class="ax-row">${a}${e}${i}</div>${t.note}\n                          `}else{let i="",a="",o="";t.confirm.text&&(a=`<a href="###" class="ax-btn ax-primary ${t.confirm.classname}"  confirm>${t.confirm.icon}${t.confirm.text}</a>`),t.cancel.text&&(i=`<a href="###" class="ax-btn ax-ignore ${t.cancel.classname}" cancel>${t.cancel.icon}${t.cancel.text}</a>`),t.diy.text&&t.diy.callback?o=`<a href="###" class="ax-btn ${t.diy.classname}" diy>${t.diy.icon}${t.diy.text}</a>`:t.diy.text&&!t.diy.callback&&(o=`<a href="${t.diy.url}" target="${t.diy.url}" class="ax-btn ${t.diy.classname}" diy>${t.diy.icon}${t.diy.text}</a>`),s=`\n                                        ${e}\n                                         <div class="ax-padding ax-align-center">${o}${i}${a}</div>\n                                         <div class="ax-break"></div>${t.note}\n                         `}else s="";return s},axLocalTime=(t,e)=>{let s,i,a,o,n;if(t){if(t=t.trim(),i=new Date(t),a=i instanceof Date&&!isNaN(i.getTime()),!a)return;s=t.replace(/-/g,"/"),o=new Date(s).getTime(),n=-1!==s.indexOf(":")?0:6e4*new Date(s).getTimezoneOffset()}else o=(new Date).getTime(),n=0;return e?o-n:o},axCreateData=(t,e=["src","cover","caption","type"],s=["media","cover","caption","type"],i="figure",a=["","","","image"],o)=>{let n=[],r="";return"String"===axType(t)&&"id"==axStrType(t)?n=axTplToArr(t,e,s,i,a):("Array"===axType(t)||"Object"===axType(t)?r=JSON.stringify(t):"String"===axType(t)&&(r=t),n=axStrToArr(r,s,a)),n=n.filter((t=>t[s[0]])),o&&o(n),n},axSort=(t,e,s)=>{let i=[];Array.isArray(e)?i=e.filter((t=>t.order)):e.order&&i.push(e);let a=(t,e,i)=>{if(0==i.length)return 0;let o,n,r,l=i.shift(),h=l.col,p=l.order,d=l.attr||"label";return"table"==s?"number"==typeof h?(n=t.children.filter((t=>t.index===h))[0][d],r=e.children.filter((t=>t.index===h))[0][d]):(n=t.children.find((t=>t.name===h))[d],r=e.children.find((t=>t.name===h))[d]):(n=t[h],r=e[h]),o=isNaN(n-r)?"desc"===p?r.localeCompare(n,"zh-CN-u-kf-lower"):n.localeCompare(r,"zh-CN-u-kf-lower"):"desc"===p?r-n:n-r,n===r?a(t,e,i):o};return t.sort(((t,e)=>a(t,e,[...i])))}
/*!
 * 插件：表单序列化；使用方法：new axSerialize('#id')
 * 支持将表单值序列化为以“&”连接的字符串，和对象数组[{name:'',value:''},...]
 */,axSerialize=(t,e="string",s=",")=>{let i,a,o=[];if(i=Array.isArray(t)?t:[...axIdToDom(t).querySelectorAll("[name]")].filter((t=>["INPUT","SELECT","TEXTAREA"].includes(t.nodeName)&&t.name&&!t.name.includes("_ax_alt"))),i.forEach((t=>{let e=o.find((e=>e.name==t.name));e?"checkbox"!=t.type&&"radio"!=t.type||e.dom.push(t):o.push({name:t.name,type:t.type,dom:[t]})})),o.forEach((t=>{"file"==t.type?t.value=axMultiValues(t.dom[0],"file","array"):"checkbox"==t.type?t.value=axMultiValues(t.dom,"checkbox","string","",s):"radio"==t.type?t.value=axMultiValues(t.dom,"radio","string"):t.type.includes("select")?t.value=axMultiValues(t.dom[0],"select","string","",s):t.value=t.dom[0].value})),"string"==e){let t="";o.forEach((e=>{t+="&"+e.name+"="+e.value})),a=t}else if("json"==e){let t={};o.forEach((e=>{t[e.name]=e.value})),a=t}else"array"==e&&(o.forEach((t=>{delete t.type,delete t.dom})),a=o);return a}
/*!
 * 通过多个关键字从数组中检索数据，获得每一项的权重
 * 支持多关键字检索
 * 支持多属性检索
 * 支持根据权重进行重排
 * 支持输出指定length数组，0表示不截取
 */,axArrSearch=(t,e,s,i)=>{if(axIsEmpty(t)||axIsEmpty(e)||!s||0===s.length)return[];let a=Object.assign({fuzzy:!0,separator:" ",limit:0,reorder:!1,ignore:!0},i),o=axSplitToArr(t,a.separator),n=axSplitToArr(e,","),r=[],l="("+o.join("|")+")",h=new RegExp(l,(a.ignore?"i":"")+"g");for(let t of s){let e=n.map((e=>t[e])).join("■").match(h),s={};e&&(s={source:t,weight:e.length,keys:[...new Set(e)]},(a.fuzzy||[...new Set(e)].length===o.length)&&r.push(s))}return a.reorder&&r.sort(((t,e)=>e.weight-t.weight)),a.limit&&r.length>a.limit&&r.splice(a.limit),r}
/*!
 * 插件：代理监听；使用方法：new axObserve (obj, options)
 * 基于Proxy监听数组和对象的变化
 */;class axObserve{constructor(t,e){if(this.dataType=axType(t),"Object"!==this.dataType&&"Array"!==this.dataType)return{instance:this,proxy:t};if(this.options=axExtend({deep:!1,accept:!0,once:!1,methods:["set","deleteProperty"],callback:""},e),this.handlers={},this.completeIndex=0,this.reacts=0,this.proxys=[],this.data=t,this.fullMethods={get:(t,e,s)=>{let i=t[e];return this.options.callback&&this.options.callback({target:t,key:e,proxy:s,value:i,type:"get"}),this.handlers.hasOwnProperty(e)&&this.emit(e,{target:t,key:e,proxy:s,value:i,type:"get"}),Reflect.get(t,e,s)},set:(t,e,s,i)=>{if(JSON.stringify(t[e])==JSON.stringify(s))return!0;let a=axType(s),o=t[e],n=void 0===t[e]?"add":"edit";return"Object"!==a&&"Array"!==a||!this.options.deep||(s=this.proxy(s)),this.options.accept&&Reflect.set(t,e,s,i),this.options.callback&&this.options.callback({target:t,key:e,proxy:i,value:s,raw:o,type:n}),this.handlers.hasOwnProperty(e)&&this.emit(e,{target:t,key:e,proxy:i,value:s,raw:o,type:n}),this.reacts++,this.complete(this.reacts),!0},deleteProperty:(t,e)=>{let s=t[e];return this.options.accept&&Reflect.deleteProperty(t,e),this.options.callback&&this.options.callback({target:t,key:e,value:s,type:"delete"}),this.handlers.hasOwnProperty(e)&&this.emit(e,{target:t,key:e,value:s,type:"delete"}),this.reacts++,this.complete(this.reacts),!0}},this.methods={},this.options.methods.forEach((t=>{this.methods[t]=this.fullMethods[t]})),this.options.deep)for(let e in t)if(t.hasOwnProperty(e)){let s=axType(t[e]);"Object"!==s&&"Array"!==s||(t[e]=this.proxy(t[e]))}return{instance:this,proxy:this.proxy(t)}}complete(t){setTimeout((()=>{if(t===this.reacts){if(this.options.once&&0!==this.completeIndex)return!1;this.options.callback&&this.options.callback({target:this.data,proxy:this.proxys[0],type:"complete"}),this.handlers.hasOwnProperty("complete")&&this.emit("complete",{target:this.data,proxy:this.proxys[0],type:"complete"}),this.completeIndex++}}),0)}proxy(t){let e=new Proxy(t,this.methods);return 0===this.proxys.length&&this.proxys.push(e),e}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：全局实例管理；使用方法：new axInstance('#id',{参数})
 * 支持axInstance.push、axInstance.destroy、axInstance.destroyAll、axInstance.clear等个方法
 */class AXINSTANCE{constructor(){this.data=[],this.destroyFun=t=>{if(!t)return!1;t.instance.hasOwnProperty("destroyed")&&t.instance.destroyed||!t.instance.__proto__.destroy||(t.instance.destroy(),t.log=`destroy(${(new Date).toLocaleString()})`)},this.initFun=t=>{if(!t)return!1;t.instance.hasOwnProperty("destroyed")&&!t.instance.destroyed||!t.instance.__proto__.init||(t.instance.init(),t.log=`init(${(new Date).toLocaleString()})`)}}push(t,e,s){if(!t)return!1;let i={name:e,instance:t,type:s||"",log:`push(${(new Date).toLocaleString()})`};this.data.some((e=>e.instance===t))||this.data.push(i)}find(t,e,s=!1){if(!t)return!1;let i;return i=e?this.data.find((i=>i.instance.hasOwnProperty("destroyed")?i.name===t&&i.type===e&&i.instance.destroyed===s:i.name===t&&i.type===e)):this.data.find((e=>e.instance.hasOwnProperty("destroyed")?e.name===t&&e.instance.destroyed===s:e.name===t)),i?i.instance:i}findAll(t,e=!1){let s=[];return s=t?this.data.filter((s=>s.instance.hasOwnProperty("destroyed")?s.type===t&&s.instance.destroyed===e:s.type===t)):i.instance.hasOwnProperty("destroyed")?this.data.filter((t=>t.instance.destroyed===e)):this.data,s.length>0?s.map((t=>t.instance)):s}destroy(t,e,s){if(!t)return!1;let i;i=e?this.data.find((s=>s.name===t&&s.type===e)):this.data.find((e=>e.name===t)),this.destroyFun(i),s&&s(i)}destroyAll(t,e){if(!t)return this.data.forEach((t=>{this.destroyFun(t)})),e&&e(this.data),!1;{let s=this.data.filter((e=>e.type===t));s.forEach((t=>{this.destroyFun(t)})),e&&e(s)}}clear(t){this.data.forEach((t=>{this.destroyFun(t)})),this.data.length=0,t&&t()}init(t,e,s){if(!t)return!1;let i;i=e?this.data.find((s=>s.name===t&&s.type===e)):this.data.find((e=>e.name===t)),this.initFun(i),s&&s(i)}initAll(t,e){if(!t)return this.data.forEach((t=>{this.initFun(t)})),e&&e(this.data),!1;{let s=this.data.filter((e=>e.type===t));s.forEach((t=>{this.initFun(t)})),e&&e(s)}}}const axInstance=new AXINSTANCE;
/*!
* 插件：元素笼子；使用方法：new axCage({参数})
*/class axCage{constructor(t,e){if(!t)return!1;if(this.targetDom=axIdToDom(t),!this.targetDom||0===this.targetDom.children.length)return!1;this.options=axExtend({insName:"",init:!0,unbound:{attr:"unbound",selector:""},dampingRatio:.5,duration:300,drift:{enable:!1,timeTHR:200,distTHR:20,coef:2},scale:{enable:!1,min:1,max:5},completedTHR:20,breakpoints:{},onInit:"",onCompleted:"",onStart:"",onMove:"",onEnd:"",onScaled:"",onScaledMin:"",onScaledMax:"",onTranslated:"",onRefactored:"",onResized:"",onFitted:"",onSlided:"",onUpdated:"",onDestroy:""},e,this.targetDom,this.constructor.name);let s=this;this.handlers={},this.isMobi=axIsMobi(),this.events=this.isMobi?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],this.started=!1,this.scrollObj=axGetScrollObj(),this.startFun=function(t){if(t.stopPropagation(),s.unbounds.length>0&&s.unbounds.includes(t.target))return!1;t.preventDefault(),s.startValue={...s.getCoordValue(t)};let e=s.slides.find((t=>t.dom===this)),i={...s.startValue};s.distStart={x:i.x-e.last.x,y:i.y-e.last.y},s.startTime=t.timeStamp,s.started=!0,this.setAttribute("active",""),e.active=!0,this.style.transitionDuration="0ms",s.handlers.hasOwnProperty("start")&&s.emit("start",e),s.options.onStart&&s.options.onStart.call(s,e)},this.moveFun=function(t){if(t.stopPropagation(),!s.isMobi&&!s.started)return!1;if(s.unbounds.length>0&&s.unbounds.includes(t.target))return!1;t.preventDefault();let e=s.getCoordValue(t);JSON.stringify(e)!=JSON.stringify(s.startValue)&&s.targetDom.setAttribute("moving","");let i=s.slides.find((t=>t.dom===this)),a=t=>i.range[t][0]+(i.now[t]-i.range[t][0])*Math.pow(s.options.dampingRatio,2),o=t=>i.range[t][1]+(i.now[t]-i.range[t][1])*Math.pow(s.options.dampingRatio,2);i.now={x:e.x-s.distStart.x,y:e.y-s.distStart.y},i.now.y<i.range.y[0]?(i.now.y=a("y"),Math.abs(i.now.y-i.range.y[0])>=s.options.completedTHR&&(s.handlers.hasOwnProperty("completed")&&s.emit("completed","top"),s.options.onCompleted&&s.options.onCompleted.call(s,"top"))):i.now.y>i.range.y[1]&&(i.now.y=o("y"),Math.abs(i.now.y-i.range.y[1])>=s.options.completedTHR&&(s.handlers.hasOwnProperty("completed")&&s.emit("completed","bottom"),s.options.onCompleted&&s.options.onCompleted.call(s,"bottom"))),i.now.x<i.range.x[0]?(i.now.x=a("x"),Math.abs(i.now.x-i.range.x[0])>=s.options.completedTHR&&(s.handlers.hasOwnProperty("completed")&&s.emit("completed","left"),s.options.onCompleted&&s.options.onCompleted.call(s,"left"))):i.now.x>i.range.x[1]&&(i.now.x=o("x"),Math.abs(i.now.x-i.range.x[1])>=s.options.completedTHR&&(s.handlers.hasOwnProperty("completed")&&s.emit("completed","right"),s.options.onCompleted&&s.options.onCompleted.call(s,"right"))),s.setValues({item:i,value:i.now,apply:!1}),s.handlers.hasOwnProperty("move")&&s.emit("move",i),s.options.onMove&&s.options.onMove.call(s,i)},this.endFun=function(t){if(t.stopPropagation(),s.targetDom.removeAttribute("moving"),!s.isMobi&&!s.started)return!1;t.preventDefault(),s.started=!1;let e=s.slides.find((t=>t.active)),i=s.computeHYP({...e.now},{...e.last}),a=i.HYP,o=i.SIN,n=i.COS;e.last={...e.now},e.dom.style.cssText=e.dom.style.cssText.replace("transition-duration: 0ms","");let r,l=t.timeStamp-s.startTime;if(s.options.drift.enable&&l<s.options.drift.timeTHR&&a>s.options.drift.distTHR){let t=(s.options.drift.timeTHR-l)*s.options.drift.coef;r={x:~~(e.last.x+o*t),y:~~(e.last.y+n*t)}}else r=e.now;s.slideTo({item:e,value:r}),e.dom.removeAttribute("active"),Reflect.deleteProperty(e,"active"),s.handlers.hasOwnProperty("end")&&s.emit("end",e),s.options.onEnd&&s.options.onEnd.call(s,e)},this.scrollFun=axThrottle((function(t){if(t.stopPropagation(),t.preventDefault(),s.unbounds.length>0&&s.unbounds.includes(this))return!1;let e=s.slides.find((t=>t.dom===this));axIsScrollUp(t,s.scrollObj.detail)?(e.scale++,e.scale>=s.options.scale.max&&(e.scale=s.options.scale.max)):(e.scale--,e.scale<=s.options.scale.min&&(e.scale=s.options.scale.min)),(e.scale<=s.options.scale.max||e.scale>=s.options.scale.min)&&(e.scale=axNumber(e.scale,{places:0,mode:"floor"}),this.style.transitionDuration=s.options.duration+"ms",s.setValues({type:"scale",item:e,value:e.scale}),setTimeout((()=>{s.updateItem(e)}),s.options.duration))}),s.options.duration,!0),this.slidedEvent=function(t){t.stopPropagation(),s.response(this)},this.mutationObs=new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&t.target!==this.targetDom){let e=this.slides.find((e=>e.dom===t.target)),s=this.getValues(e);s[0]==e.scale&&s[3]==e.scale||(this.handlers.hasOwnProperty("scaled")&&this.emit("scaled",e,s[0]),this.options.onScaled&&this.options.onScaled.call(this,e,s[0]),e.scale===this.options.scale.min?(e.boundary="min",this.handlers.hasOwnProperty("scaledMin")&&this.emit("scaledMin",e,this.options.scale.min),this.options.onScaledMin&&this.options.onScaledMin.call(this,e,this.options.scale.min)):e.scale===this.options.scale.max?(e.boundary="max",this.handlers.hasOwnProperty("scaledMax")&&this.emit("scaledMax",e,this.options.scale.max),this.options.onScaledMax&&this.options.onScaledMax.call(this,e,this.options.scale.max)):Reflect.deleteProperty(e,"boundary")),s[4]==e.now.x&&s[5]==e.now.y||(this.handlers.hasOwnProperty("translated")&&this.emit("translated",e,{x:s[4],y:s[5]}),this.options.onTranslated&&this.options.onTranslated.call(this,e,{x:s[4],y:s[5]}))}"childList"===t.type&&t.target===this.targetDom&&(this.options.unbound&&this.getUnbounds(),this.handlers.hasOwnProperty("refactored")&&this.emit("refactored",""),this.options.onRefactored&&this.options.onRefactored.call(this))}))})),this.slideDomSizeObserver=new ResizeObserver(axDebounce((t=>{for(let e of t)this.response(e.target),this.handlers.hasOwnProperty("resized")&&this.emit("resized",e,e.target),this.options.onResized&&this.options.onResized.call(this,e,e.target)}))),this.targetDomSizeObserver=new ResizeObserver(axDebounce((t=>{for(let e of t)this.response(),this.handlers.hasOwnProperty("resized")&&this.emit("resized",e,this.targetDom),this.options.onResized&&this.options.onResized.call(this,e,this.targetDom)}))),this.options.init?this.init():this.destroyed=!0}init(t){return axInstance.push(this,this.options.insName,"cage"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.getUnbounds(),this.slides=[...this.targetDom.children].map((t=>({dom:t,last:{x:0,y:0},now:{x:0,y:0},difference:{x:0,y:0},size:{width:0,height:0},offset:{x:0,y:0},shape:"",range:{x:[],y:[]},scale:1}))),this.setAttribute(),this.updateTarget(),this.distStart={x:0,y:0},this.addTargetEvent(),this.slides.forEach((t=>{this.addItemEvent(t.dom)})),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),t&&t.call(this),this}computeHYP(t,e){let s={...t},i={...e},a=Math.abs(s.x-i.x),o=Math.abs(s.y-i.y),n=Math.sqrt(a*a+o*o);return{HYP:n,SIN:n?(s.x-i.x)/n:0,COS:n?(s.y-i.y)/n:0}}setAttribute(){!this.targetDom.classList.contains("ax-cage")&&this.targetDom.classList.add("ax-cage"),"hidden"!==axStyle(this.targetDom).overflow&&(this.targetDom.style.overflow="hidden"),"static"===axStyle(this.targetDom).position&&(this.targetDom.style.position="relative")}getUnbounds(){this.unbounds=this.getDomsFromArg(this.options.unbound.selector),this.unbounds.forEach((t=>t.setAttribute(this.options.unbound.attr,"")))}getDomsFromArg(t){let e=[];if(t){let s=axType(t);"String"===s?e=[...this.targetDom.querySelectorAll(t)]:"Array"===s?e=t:s.includes("HTML")&&e.push(t)}return e}fitTo(t){if(this.destroyed)return this;let e=Object.assign({item:this.slides[0],placement:"left-top",duration:this.options.duration},t),s=axType(e.item),i=s.includes("HTML")?this.slides.find((t=>t.dom===e.item)):"String"===s?this.targetDom.querySelector(e.item):e.item,a={},o=this.getScaleOffset(i);if(!i||this.unbounds.includes(i.dom))return!1;switch(e.placement){case"right-top":a={x:i.difference.x,y:0};break;case"left-bottom":a={x:0,y:i.difference.y};break;case"right-bottom":a={...i.difference};break;case"left":a={x:0,y:i.now.y};break;case"right":a={x:i.difference.x,y:i.now.y};break;case"top":a={x:i.now.x,y:0};break;case"bottom":a={x:i.now.x,y:i.difference.y};break;default:a={x:0,y:0}}(e.placement.includes("left")||e.placement.includes("right"))&&(a.x+=o.x),(e.placement.includes("top")||e.placement.includes("bottom"))&&(a.y+=o.y),i.dom.style.transitionDuration=e.duration+"ms",this.setValues({value:a,item:i}),setTimeout((()=>{this.handlers.hasOwnProperty("fitted")&&this.emit("fitted",i),this.options.onFitted&&this.options.onFitted.call(this,i),e.callback&&e.callback.call(this,i)}),e.duration)}getEdgeValue(t,e){let s,i=axType(t);if(i.includes("HTML")||"String"===i){let e=axIdToDom(t);!e||(s={x:-e.offsetLeft,y:-e.offsetTop})}else s={...t};return!axIsEmpty(s)&&s.hasOwnProperty("x")&&s.hasOwnProperty("y")&&(s.x<e.range.x[0]?s.x=e.range.x[0]:s.x>e.range.x[1]&&(s.x=e.range.x[1]),s.y<e.range.y[0]?s.y=e.range.y[0]:s.y>e.range.y[1]&&(s.y=e.range.y[1])),s}slideTo(t){if(this.destroyed)return this;let e=Object.assign({item:this.slides[0]},t),s=axType(e.item),i=s.includes("HTML")?this.slides.find((t=>t.dom===e.item)):"String"===s?this.targetDom.querySelector(e.item):e.item;if(!i||this.unbounds.includes(i.dom))return!1;let a=this.getEdgeValue(e.value,i),o=this.computeHYP(i.now,a).HYP/this.hypotenuse,n=e.duration||0==e.duration?`${e.duration}ms`:o>1?Math.trunc(this.options.duration*o)+"ms":`${this.options.duration}ms`;if(JSON.stringify(a)==JSON.stringify(i.now))return!1;i.dom.style.transitionDuration=n,this.setValues({value:a,item:i}),setTimeout((()=>{this.handlers.hasOwnProperty("slided")&&this.emit("slided",{raw:e.value,correction:a,item:i}),this.options.onSlided&&this.options.onSlided.call(this,{raw:e.value,correction:a,item:i}),e.callback&&e.callback.call(this,{raw:e.value,correction:a,item:i})}),parseInt(n))}getCoordValue(t){return this.isMobi?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY}}updateTarget(){let t=axStyle(this.targetDom),e=this.targetDom.getBoundingClientRect().height-(parseInt(t.borderTopWidth)+parseInt(t.borderBottomWidth)+parseInt(t.paddingTop)+parseInt(t.paddingBottom)),s=this.targetDom.getBoundingClientRect().width-(parseInt(t.borderLeftWidth)+parseInt(t.borderRightWidth)+parseInt(t.paddingLeft)+parseInt(t.paddingRight)),i=this.computeHYP({x:0,y:0},{x:s,y:e}).HYP;this.targetHeight!=e&&(this.targetHeight=e),this.targetWidth!=s&&(this.targetWidth=s),this.hypotenuse!=i&&(this.hypotenuse=i)}updateItem(t=this.slides[0]){let e=axType(t),s=e.includes("HTML")?this.slides.find((e=>e.dom===t)):"String"===e?this.targetDom.querySelector(t):t;if(!s||this.unbounds.includes(s.dom))return!1;s.size.height=s.dom.getBoundingClientRect().height,s.size.width=s.dom.getBoundingClientRect().width,s.difference={x:this.targetWidth-s.size.width,y:this.targetHeight-s.size.height},s.offset={x:s.dom.offsetLeft,y:s.dom.offsetTop},s.difference.x>0&&s.difference.y>0?s.shape="baby":s.difference.y>0&&s.difference.x<=0?s.shape="river":s.difference.x>0&&s.difference.y<=0?s.shape="chimney":s.shape="cover",this.fixedTranslate(s)}getScaleOffset(t){return t.scale>this.options.scale.min?{x:t.size.width/t.scale/2*(t.scale-1),y:t.size.height/t.scale/2*(t.scale-1)}:{x:0,y:0}}fixedTranslate(t){let e=this.getValues(t),s={x:e[4],y:e[5]},i=this.getScaleOffset(t),a=e=>{t.offset[e]-i[e]+s[e]<0?s[e]=-t.offset[e]+i[e]:t.offset[e]-i[e]+s[e]>t.difference[e]&&(s[e]=t.difference[e]-t.offset[e]+i[e]),t.range[e]=[0-t.offset[e]+i[e],t.difference[e]-t.offset[e]+i[e]]},o=e=>{s[e]<t.difference[e]-t.offset[e]+i[e]?s[e]=t.difference[e]-t.offset[e]+i[e]:s[e]>-t.offset[e]+i[e]&&(s[e]=-t.offset[e]+i[e]),t.range[e]=[t.difference[e]-t.offset[e]+i[e],-t.offset[e]+i[e]]};switch(t.shape){case"baby":a("x"),a("y");break;case"river":a("y"),o("x");break;case"chimney":a("x"),o("y");break;default:o("x"),o("y")}JSON.stringify(s)!=JSON.stringify(t.now)&&this.setValues({value:s,item:t})}response(t="all"){if(this.destroyed)return this;if("all"===t)this.updateTarget(),this.slides.forEach((t=>{this.updateItem(t)}));else if("parent"===t)this.updateTarget();else if("chidren"===t)this.slides.forEach((t=>{this.updateItem(t)}));else{let e=axType(t),s=e.includes("HTML")?this.slides.find((e=>e.dom===t)):"String"===e?this.targetDom.querySelector(t):t;s&&this.updateItem(s)}}getValues(t=this.slides[0]){let e=axType(t),s=e.includes("HTML")?this.slides.find((e=>e.dom===t)):"String"===e?this.targetDom.querySelector(t):t;if(!s)return!1;let i=axStyle(s.dom).transform;return"none"===i?[1,0,0,1,0,0]:i.replace(/[^0-9.\-,]/g,"").split(",").map((t=>Number(t)))}setValues(t){if(this.destroyed)return this;let e=Object.assign({item:this.slides[0],type:"translate",apply:!0},t),s=axType(e.item),i=s.includes("HTML")?this.slides.find((t=>t.dom===e.item)):"String"===s?this.targetDom.querySelector(e.item):e.item;if(!i||this.unbounds.includes(i.dom))return!1;let a=this.getValues(i),o=[...a],n=axType(e.value),r={};if("Object"===n)r={...e.value};else if("Number"===n)r={x:e.value,y:e.value};else{let t=~~e.value;t||(t="scale"===e.type?1:0),r={x:t,y:t}}"zero"===e.type?(o[0]=1,o[3]=1,o[4]=0,o[5]=0):"scale"===e.type?(o[0]=r.x,o[3]=r.y):(o[4]=r.x,o[5]=r.y),JSON.stringify(o)!=JSON.stringify(a)&&(i.dom.style.transform=`matrix(${o.join()})`,e.apply&&("zero"===e.type?(i.last={x:0,y:0},i.now={x:0,y:0},i.scale=1):"scale"===e.type?i.scale=r.x||r.y:(i.last={...r},i.now={...r})))}reset(){if(this.destroyed)return this;this.slides.forEach((t=>{this.setValues({type:"zero",item:t}),t.dom.style.cssText=t.dom.style.cssText.replace("transition-duration: 0ms","")})),this.targetDom.removeAttribute("moving"),this.started=!1}addItemEvent(t){t.addEventListener(this.events[0],this.startFun),t.addEventListener(this.events[1],this.moveFun),t.addEventListener(this.events[2],this.endFun),!this.isMobi&&this.options.scale.enable&&t.addEventListener(this.scrollObj.event,this.scrollFun),this.mutationObs.observe(t,{attributes:!0,attributeFilter:["style"]}),t.addEventListener("transitionend",this.slidedEvent),this.slideDomSizeObserver.observe(t)}removeItemEvent(t){t.removeEventListener(this.events[0],this.startFun),t.removeEventListener(this.events[1],this.moveFun),t.removeEventListener(this.events[2],this.endFun),!this.isMobi&&this.options.scale.enable&&t.removeEventListener(this.scrollObj.event,this.scrollFun),t.removeEventListener("transitionend",this.slidedEvent),this.slideDomSizeObserver.unobserve(t)}addTargetEvent(){this.isMobi?this.targetDom.addEventListener("touchcancel",this.endFun):this.targetDom.addEventListener("mouseleave",this.endFun),this.mutationObs.observe(this.targetDom,{childList:!0}),this.targetDomSizeObserver.observe(this.targetDom)}removeTargetEvent(){this.isMobi||this.targetDom.removeEventListener("mouseleave",this.endFun),this.targetDomSizeObserver.unobserve(this.targetDom)}add(t,e){let s=axGetDoms(t),i=[];return 0!==s.length&&(i=s.filter(Boolean).map((t=>{let e=this.slides.find((e=>e.dom===t)),s=null;return e&&e.disabled?(Reflect.deleteProperty(e,"disabled"),e.dom.removeAttribute("disabled"),s=t,this.addItemEvent(t)):(s={dom:t,last:{x:0,y:0},now:{x:0,y:0},difference:{x:0,y:0},size:{width:0,height:0},offset:{x:0,y:0},shape:"",range:{x:[],y:[]},scale:1},this.addItemEvent(t),this.slides.push(s)),s})),this.handlers.hasOwnProperty("add")&&this.emit("add",i),this.options.onAdd&&this.options.onAdd.call(this,i),e&&e.call(this,i),this)}remove(t,e){let s=axGetDoms(t),i=this.slides.filter((t=>!t.disabled&&s.includes(t.dom)));return 0!==s.length&&(i.forEach((t=>{t.disabled=!0,t.dom.setAttribute("disabled",""),this.removeItemEvent(t.dom)})),this.handlers.hasOwnProperty("remove")&&this.emit("remove",i),this.options.onRemove&&this.options.onRemove.call(this,i),e&&e.call(this,i),this)}update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.reset(),this.options.init&&this.init(),this.handlers.hasOwnProperty("updated")&&this.emit("updated",""),this.options.onUpdated&&this.options.onUpdated.call(this),e&&e.call(this)),this}destroy(t){return this.destroyed||(this.reset(),this.slides.forEach((t=>{this.removeItemEvent(t.dom)})),this.removeTargetEvent(),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}class axTow{constructor(t,e){return this.targetDom=axIdToDom(t),!!this.targetDom&&(this.options=axExtend({insName:"",parent:document,onInit:"",onStart:null,onMove:null,onEnd:null,onDestroy:""},e,this.targetDom,this.constructor.name),this.parentDom=axIdToDom(this.options.parent),!!this.parentDom&&(this.handlers={},this.coord={x:0,y:0},this.diff={x:0,y:0},this.startFun=t=>{this.coord=axGetClientObj(t),this.parentDom.addEventListener(axEventMap[1],this.moveFun,{passive:!1}),this.parentDom.addEventListener(axEventMap[2],this.endFun,{passive:!1});let e={target:t.target,coord:this.coord,diff:this.diff,originEvent:t};this.handlers.hasOwnProperty("start")&&this.emit("start",e),this.options.onStart&&this.options.onStart.call(this,e)},this.moveFun=t=>{let e=axGetClientObj(t);this.diff={x:e.x-this.coord.x,y:e.y-this.coord.y};let s={target:t.target,coord:e,diff:this.diff,originEvent:t};this.handlers.hasOwnProperty("move")&&this.emit("move",s),this.options.onMove&&this.options.onMove.call(this,s)},this.endFun=t=>{this.coord=axGetClientObj(t);let e={target:t.target,coord:this.coord,diff:this.diff,originEvent:t};this.handlers.hasOwnProperty("end")&&this.emit("end",e),this.options.onEnd&&this.options.onEnd.call(this,e),this.setCompleted()},this.cancelFun=t=>{this.setCompleted(),this.handlers.hasOwnProperty("cancel")&&this.emit("cancel",{target:t.target,coord:this.coord,diff:this.diff}),this.options.onCancel&&this.options.onCancel.call(this,{target:t.target,coord:this.coord,diff:this.diff})},void this.init()))}init(){return axInstance.push(this,this.options.insName,"tow"),this.destroyed=!1,this.targetDom.removeEventListener(axEventMap[0],this.startFun),this.targetDom.addEventListener(axEventMap[0],this.startFun,{passive:!1}),this.parentDom.addEventListener(axEventMap[3],this.cancelFun,{passive:!1}),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}setCompleted(){this.diff={x:0,y:0},this.parentDom.removeEventListener(axEventMap[1],this.moveFun),this.parentDom.removeEventListener(axEventMap[2],this.endFun)}destroy(t){return this.destroyed||(this.setCompleted(),this.targetDom.removeEventListener(axEventMap[0],this.startFun),this.parentDom.removeEventListener(axEventMap[3],this.cancelFun),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 轮播插件axSwipe，使用方法：new axSwipe('#id',{参数})。源自Swiper v8.1.4 from https://swiperjs.com | AXUI做了部分修改
 */!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).axSwiper=e()}(this,(function(){function t(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function e(s,i){void 0===s&&(s={}),void 0===i&&(i={}),Object.keys(i).forEach((a=>{void 0===s[a]?s[a]=i[a]:t(i[a])&&t(s[a])&&Object.keys(i[a]).length>0&&e(s[a],i[a])}))}const s={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function i(){const t="undefined"!=typeof document?document:{};return e(t,s),t}const a={document:s,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:t=>"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0),cancelAnimationFrame(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};function o(){const t="undefined"!=typeof window?window:{};return e(t,a),t}class n extends Array{constructor(t){"number"==typeof t?super(t):(super(...t||[]),function(t){const e=t.__proto__;Object.defineProperty(t,"__proto__",{get:()=>e,set(t){e.__proto__=t}})}(this))}}function r(t){void 0===t&&(t=[]);const e=[];return t.forEach((t=>{Array.isArray(t)?e.push(...r(t)):e.push(t)})),e}function l(t,e){return Array.prototype.filter.call(t,e)}function h(t,e){const s=o(),a=i();let r=[];if(!e&&t instanceof n)return t;if(!t)return new n(r);if("string"==typeof t){const s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){let t="div";0===s.indexOf("<li")&&(t="ul"),0===s.indexOf("<tr")&&(t="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(t="tr"),0===s.indexOf("<tbody")&&(t="table"),0===s.indexOf("<option")&&(t="select");const e=a.createElement(t);e.innerHTML=s;for(let t=0;t<e.childNodes.length;t+=1)r.push(e.childNodes[t])}else r=function(t,e){if("string"!=typeof t)return[t];const s=[],i=e.querySelectorAll(t);for(let t=0;t<i.length;t+=1)s.push(i[t]);return s}(t.trim(),e||a)}else if(t.nodeType||t===s||t===a)r.push(t);else if(Array.isArray(t)){if(t instanceof n)return t;r=t}return new n(function(t){const e=[];for(let s=0;s<t.length;s+=1)-1===e.indexOf(t[s])&&e.push(t[s]);return e}(r))}h.fn=n.prototype;const p={addClass:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const i=r(e.map((t=>t.split(" "))));return this.forEach((t=>{t.classList.add(...i)})),this},removeClass:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const i=r(e.map((t=>t.split(" "))));return this.forEach((t=>{t.classList.remove(...i)})),this},hasClass:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const i=r(e.map((t=>t.split(" "))));return l(this,(t=>i.filter((e=>t.classList.contains(e))).length>0)).length>0},toggleClass:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const i=r(e.map((t=>t.split(" "))));this.forEach((t=>{i.forEach((e=>{t.classList.toggle(e)}))}))},attr:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(let s=0;s<this.length;s+=1)if(2===arguments.length)this[s].setAttribute(t,e);else for(const e in t)this[s][e]=t[e],this[s].setAttribute(e,t[e]);return this},removeAttr:function(t){for(let e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this},transform:function(t){for(let e=0;e<this.length;e+=1)this[e].style.transform=t;return this},transition:function(t){for(let e=0;e<this.length;e+=1)this[e].style.transitionDuration="string"!=typeof t?`${t}ms`:t;return this},on:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];let[i,a,o,n]=e;function r(t){const e=t.target;if(!e)return;const s=t.target.dom7EventData||[];if(s.indexOf(t)<0&&s.unshift(t),h(e).is(a))o.apply(e,s);else{const t=h(e).parents();for(let e=0;e<t.length;e+=1)h(t[e]).is(a)&&o.apply(t[e],s)}}function l(t){const e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),o.apply(this,e)}"function"==typeof e[1]&&([i,o,n]=e,a=void 0),n||(n=!1);const p=i.split(" ");let d;for(let t=0;t<this.length;t+=1){const e=this[t];if(a)for(d=0;d<p.length;d+=1){const t=p[d];e.dom7LiveListeners||(e.dom7LiveListeners={}),e.dom7LiveListeners[t]||(e.dom7LiveListeners[t]=[]),e.dom7LiveListeners[t].push({listener:o,proxyListener:r}),e.addEventListener(t,r,n)}else for(d=0;d<p.length;d+=1){const t=p[d];e.dom7Listeners||(e.dom7Listeners={}),e.dom7Listeners[t]||(e.dom7Listeners[t]=[]),e.dom7Listeners[t].push({listener:o,proxyListener:l}),e.addEventListener(t,l,n)}}return this},off:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];let[i,a,o,n]=e;"function"==typeof e[1]&&([i,o,n]=e,a=void 0),n||(n=!1);const r=i.split(" ");for(let t=0;t<r.length;t+=1){const e=r[t];for(let t=0;t<this.length;t+=1){const s=this[t];let i;if(!a&&s.dom7Listeners?i=s.dom7Listeners[e]:a&&s.dom7LiveListeners&&(i=s.dom7LiveListeners[e]),i&&i.length)for(let t=i.length-1;t>=0;t-=1){const a=i[t];o&&a.listener===o||o&&a.listener&&a.listener.dom7proxy&&a.listener.dom7proxy===o?(s.removeEventListener(e,a.proxyListener,n),i.splice(t,1)):o||(s.removeEventListener(e,a.proxyListener,n),i.splice(t,1))}}}return this},trigger:function(){const t=o();for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];const a=s[0].split(" "),n=s[1];for(let e=0;e<a.length;e+=1){const i=a[e];for(let e=0;e<this.length;e+=1){const a=this[e];if(t.CustomEvent){const e=new t.CustomEvent(i,{detail:n,bubbles:!0,cancelable:!0});a.dom7EventData=s.filter(((t,e)=>e>0)),a.dispatchEvent(e),a.dom7EventData=[],delete a.dom7EventData}}}return this},transitionEnd:function(t){const e=this;return t&&e.on("transitionend",(function s(i){i.target===this&&(t.call(this,i),e.off("transitionend",s))})),this},outerWidth:function(t){if(this.length>0){if(t){const t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(t){if(this.length>0){if(t){const t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const t=o();return this[0]?t.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const t=o(),e=i(),s=this[0],a=s.getBoundingClientRect(),n=e.body,r=s.clientTop||n.clientTop||0,l=s.clientLeft||n.clientLeft||0,h=s===t?t.scrollY:s.scrollTop,p=s===t?t.scrollX:s.scrollLeft;return{top:a.top+h-r,left:a.left+p-l}}return null},css:function(t,e){const s=o();let i;if(1===arguments.length){if("string"!=typeof t){for(i=0;i<this.length;i+=1)for(const e in t)this[i].style[e]=t[e];return this}if(this[0])return s.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(i=0;i<this.length;i+=1)this[i].style[t]=e;return this}return this},each:function(t){return t?(this.forEach(((e,s)=>{t.apply(e,[e,s])})),this):this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:null;for(let e=0;e<this.length;e+=1)this[e].innerHTML=t;return this},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(let e=0;e<this.length;e+=1)this[e].textContent=t;return this},is:function(t){const e=o(),s=i(),a=this[0];let r,l;if(!a||void 0===t)return!1;if("string"==typeof t){if(a.matches)return a.matches(t);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(t);if(a.msMatchesSelector)return a.msMatchesSelector(t);for(r=h(t),l=0;l<r.length;l+=1)if(r[l]===a)return!0;return!1}if(t===s)return a===s;if(t===e)return a===e;if(t.nodeType||t instanceof n){for(r=t.nodeType?[t]:t,l=0;l<r.length;l+=1)if(r[l]===a)return!0;return!1}return!1},index:function(){let t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}},eq:function(t){if(void 0===t)return this;const e=this.length;if(t>e-1)return h([]);if(t<0){const s=e+t;return h(s<0?[]:[this[s]])}return h([this[t]])},append:function(){let t;const e=i();for(let s=0;s<arguments.length;s+=1){t=s<0||arguments.length<=s?void 0:arguments[s];for(let s=0;s<this.length;s+=1)if("string"==typeof t){const i=e.createElement("div");for(i.innerHTML=t;i.firstChild;)this[s].appendChild(i.firstChild)}else if(t instanceof n)for(let e=0;e<t.length;e+=1)this[s].appendChild(t[e]);else this[s].appendChild(t)}return this},prepend:function(t){const e=i();let s,a;for(s=0;s<this.length;s+=1)if("string"==typeof t){const i=e.createElement("div");for(i.innerHTML=t,a=i.childNodes.length-1;a>=0;a-=1)this[s].insertBefore(i.childNodes[a],this[s].childNodes[0])}else if(t instanceof n)for(a=0;a<t.length;a+=1)this[s].insertBefore(t[a],this[s].childNodes[0]);else this[s].insertBefore(t,this[s].childNodes[0]);return this},next:function(t){return this.length>0?t?this[0].nextElementSibling&&h(this[0].nextElementSibling).is(t)?h([this[0].nextElementSibling]):h([]):this[0].nextElementSibling?h([this[0].nextElementSibling]):h([]):h([])},nextAll:function(t){const e=[];let s=this[0];if(!s)return h([]);for(;s.nextElementSibling;){const i=s.nextElementSibling;t?h(i).is(t)&&e.push(i):e.push(i),s=i}return h(e)},prev:function(t){if(this.length>0){const e=this[0];return t?e.previousElementSibling&&h(e.previousElementSibling).is(t)?h([e.previousElementSibling]):h([]):e.previousElementSibling?h([e.previousElementSibling]):h([])}return h([])},prevAll:function(t){const e=[];let s=this[0];if(!s)return h([]);for(;s.previousElementSibling;){const i=s.previousElementSibling;t?h(i).is(t)&&e.push(i):e.push(i),s=i}return h(e)},parent:function(t){const e=[];for(let s=0;s<this.length;s+=1)null!==this[s].parentNode&&(t?h(this[s].parentNode).is(t)&&e.push(this[s].parentNode):e.push(this[s].parentNode));return h(e)},parents:function(t){const e=[];for(let s=0;s<this.length;s+=1){let i=this[s].parentNode;for(;i;)t?h(i).is(t)&&e.push(i):e.push(i),i=i.parentNode}return h(e)},closest:function(t){let e=this;return void 0===t?h([]):(e.is(t)||(e=e.parents(t).eq(0)),e)},find:function(t){const e=[];for(let s=0;s<this.length;s+=1){const i=this[s].querySelectorAll(t);for(let t=0;t<i.length;t+=1)e.push(i[t])}return h(e)},children:function(t){const e=[];for(let s=0;s<this.length;s+=1){const i=this[s].children;for(let s=0;s<i.length;s+=1)t&&!h(i[s]).is(t)||e.push(i[s])}return h(e)},filter:function(t){return h(l(this,t))},remove:function(){for(let t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}};function d(t,e){return void 0===e&&(e=0),setTimeout(t,e)}function c(){return Date.now()}function m(t,e){void 0===e&&(e="x");const s=o();let i,a,n;const r=function(t){const e=o();let s;return e.getComputedStyle&&(s=e.getComputedStyle(t,null)),!s&&t.currentStyle&&(s=t.currentStyle),s||(s=t.style),s}(t);return s.WebKitCSSMatrix?(a=r.transform||r.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map((t=>t.replace(",","."))).join(", ")),n=new s.WebKitCSSMatrix("none"===a?"":a)):(n=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=n.toString().split(",")),"x"===e&&(a=s.WebKitCSSMatrix?n.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===e&&(a=s.WebKitCSSMatrix?n.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),a||0}function u(t){return"object"==typeof t&&null!==t&&t.constructor&&"Object"===Object.prototype.toString.call(t).slice(8,-1)}function g(t){return"undefined"!=typeof window&&void 0!==window.HTMLElement?t instanceof HTMLElement:t&&(1===t.nodeType||11===t.nodeType)}function f(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let s=1;s<arguments.length;s+=1){const i=s<0||arguments.length<=s?void 0:arguments[s];if(null!=i&&!g(i)){const s=Object.keys(Object(i)).filter((t=>e.indexOf(t)<0));for(let e=0,a=s.length;e<a;e+=1){const a=s[e],o=Object.getOwnPropertyDescriptor(i,a);void 0!==o&&o.enumerable&&(u(t[a])&&u(i[a])?i[a].__swiper__?t[a]=i[a]:f(t[a],i[a]):!u(t[a])&&u(i[a])?(t[a]={},i[a].__swiper__?t[a]=i[a]:f(t[a],i[a])):t[a]=i[a])}}}return t}function x(t,e,s){t.style.setProperty(e,s)}function b(t){let{swiper:e,targetPosition:s,side:i}=t;const a=o(),n=-e.translate;let r,l=null;const h=e.params.speed;e.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(e.cssModeFrameID);const p=s>n?"next":"prev",d=(t,e)=>"next"===p&&t>=e||"prev"===p&&t<=e,c=()=>{r=(new Date).getTime(),null===l&&(l=r);const t=Math.max(Math.min((r-l)/h,1),0),o=.5-Math.cos(t*Math.PI)/2;let p=n+o*(s-n);if(d(p,s)&&(p=s),e.wrapperEl.scrollTo({[i]:p}),d(p,s))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout((()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:p})})),void a.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=a.requestAnimationFrame(c)};c()}let y,v,D;function w(){return y||(y=function(){const t=o(),e=i();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),passiveListener:function(){let e=!1;try{const s=Object.defineProperty({},"passive",{get(){e=!0}});t.addEventListener("testPassiveListener",null,s)}catch(t){}return e}(),gestures:"ongesturestart"in t}}()),y}function T(t){return void 0===t&&(t={}),v||(v=function(t){let{userAgent:e}=void 0===t?{}:t;const s=w(),i=o(),a=i.navigator.platform,n=e||i.navigator.userAgent,r={ios:!1,android:!1},l=i.screen.width,h=i.screen.height,p=n.match(/(Android);?[\s\/]+([\d.]+)?/);let d=n.match(/(iPad).*OS\s([\d_]+)/);const c=n.match(/(iPod)(.*OS\s([\d_]+))?/),m=!d&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),u="Win32"===a;let g="MacIntel"===a;return!d&&g&&s.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${l}x${h}`)>=0&&(d=n.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),g=!1),p&&!u&&(r.os="android",r.android=!0),(d||m||c)&&(r.os="ios",r.ios=!0),r}(t)),v}function S(){return D||(D=function(){const t=o();return{isSafari:function(){const e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),D}Object.keys(p).forEach((t=>{Object.defineProperty(h.fn,t,{value:p[t],writable:!0})}));var E={on(t,e,s){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof e)return i;const a=s?"unshift":"push";return t.split(" ").forEach((t=>{i.eventsListeners[t]||(i.eventsListeners[t]=[]),i.eventsListeners[t][a](e)})),i},once(t,e,s){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof e)return i;function a(){i.off(t,a),a.__emitterProxy&&delete a.__emitterProxy;for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];e.apply(i,o)}return a.__emitterProxy=e,i.on(t,a,s)},onAny(t,e){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof t)return s;const i=e?"unshift":"push";return s.eventsAnyListeners.indexOf(t)<0&&s.eventsAnyListeners[i](t),s},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsAnyListeners)return e;const s=e.eventsAnyListeners.indexOf(t);return s>=0&&e.eventsAnyListeners.splice(s,1),e},off(t,e){const s=this;return!s.eventsListeners||s.destroyed?s:s.eventsListeners?(t.split(" ").forEach((t=>{void 0===e?s.eventsListeners[t]=[]:s.eventsListeners[t]&&s.eventsListeners[t].forEach(((i,a)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&s.eventsListeners[t].splice(a,1)}))})),s):s},emit(){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsListeners)return t;let e,s,i;for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];"string"==typeof o[0]||Array.isArray(o[0])?(e=o[0],s=o.slice(1,o.length),i=t):(e=o[0].events,s=o[0].data,i=o[0].context||t),s.unshift(i);return(Array.isArray(e)?e:e.split(" ")).forEach((e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach((t=>{t.apply(i,[e,...s])})),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach((t=>{t.apply(i,s)}))})),t}};var A={updateSize:function(){const t=this;let e,s;const i=t.$el;e=void 0!==t.params.width&&null!==t.params.width?t.params.width:i[0].clientWidth,s=void 0!==t.params.height&&null!==t.params.height?t.params.height:i[0].clientHeight,0===e&&t.isHorizontal()||0===s&&t.isVertical()||(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),s=s-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(s)&&(s=0),Object.assign(t,{width:e,height:s,size:t.isHorizontal()?e:s}))},updateSlides:function(){const t=this;function e(e){return t.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}function s(t,s){return parseFloat(t.getPropertyValue(e(s))||0)}const i=t.params,{$wrapperEl:a,size:o,rtlTranslate:n,wrongRTL:r}=t,l=t.virtual&&i.virtual.enabled,h=l?t.virtual.slides.length:t.slides.length,p=a.children(`.${t.params.slideClass}`),d=l?t.virtual.slides.length:p.length;let c=[];const m=[],u=[];let g=i.slidesOffsetBefore;"function"==typeof g&&(g=i.slidesOffsetBefore.call(t));let f=i.slidesOffsetAfter;"function"==typeof f&&(f=i.slidesOffsetAfter.call(t));const b=t.snapGrid.length,y=t.slidesGrid.length;let v=i.spaceBetween,D=-g,w=0,T=0;if(void 0===o)return;"string"==typeof v&&v.indexOf("%")>=0&&(v=parseFloat(v.replace("%",""))/100*o),t.virtualSize=-v,n?p.css({marginLeft:"",marginBottom:"",marginTop:""}):p.css({marginRight:"",marginBottom:"",marginTop:""}),i.centeredSlides&&i.cssMode&&(x(t.wrapperEl,"--swiper-centered-offset-before",""),x(t.wrapperEl,"--swiper-centered-offset-after",""));const S=i.grid&&i.grid.rows>1&&t.grid;let E;S&&t.grid.initSlides(d);const A="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter((t=>void 0!==i.breakpoints[t].slidesPerView)).length>0;for(let a=0;a<d;a+=1){E=0;const n=p.eq(a);if(S&&t.grid.updateSlide(a,n,d,e),"none"!==n.css("display")){if("auto"===i.slidesPerView){A&&(p[a].style[e("width")]="");const o=getComputedStyle(n[0]),r=n[0].style.transform,l=n[0].style.webkitTransform;if(r&&(n[0].style.transform="none"),l&&(n[0].style.webkitTransform="none"),i.roundLengths)E=t.isHorizontal()?n.outerWidth(!0):n.outerHeight(!0);else{const t=s(o,"width"),e=s(o,"padding-left"),i=s(o,"padding-right"),a=s(o,"margin-left"),r=s(o,"margin-right"),l=o.getPropertyValue("box-sizing");if(l&&"border-box"===l)E=t+a+r;else{const{clientWidth:s,offsetWidth:o}=n[0];E=t+e+i+a+r+(o-s)}}r&&(n[0].style.transform=r),l&&(n[0].style.webkitTransform=l),i.roundLengths&&(E=Math.floor(E))}else E=(o-(i.slidesPerView-1)*v)/i.slidesPerView,i.roundLengths&&(E=Math.floor(E)),p[a]&&(p[a].style[e("width")]=`${E}px`);p[a]&&(p[a].swiperSlideSize=E),u.push(E),i.centeredSlides?(D=D+E/2+w/2+v,0===w&&0!==a&&(D=D-o/2-v),0===a&&(D=D-o/2-v),Math.abs(D)<.001&&(D=0),i.roundLengths&&(D=Math.floor(D)),T%i.slidesPerGroup==0&&c.push(D),m.push(D)):(i.roundLengths&&(D=Math.floor(D)),(T-Math.min(t.params.slidesPerGroupSkip,T))%t.params.slidesPerGroup==0&&c.push(D),m.push(D),D=D+E+v),t.virtualSize+=E+v,w=E,T+=1}}if(t.virtualSize=Math.max(t.virtualSize,o)+f,n&&r&&("slide"===i.effect||"coverflow"===i.effect)&&a.css({width:`${t.virtualSize+i.spaceBetween}px`}),i.setWrapperSize&&a.css({[e("width")]:`${t.virtualSize+i.spaceBetween}px`}),S&&t.grid.updateWrapperSize(E,c,e),!i.centeredSlides){const e=[];for(let s=0;s<c.length;s+=1){let a=c[s];i.roundLengths&&(a=Math.floor(a)),c[s]<=t.virtualSize-o&&e.push(a)}c=e,Math.floor(t.virtualSize-o)-Math.floor(c[c.length-1])>1&&c.push(t.virtualSize-o)}if(0===c.length&&(c=[0]),0!==i.spaceBetween){const s=t.isHorizontal()&&n?"marginLeft":e("marginRight");p.filter(((t,e)=>!i.cssMode||e!==p.length-1)).css({[s]:`${v}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let t=0;u.forEach((e=>{t+=e+(i.spaceBetween?i.spaceBetween:0)})),t-=i.spaceBetween;const e=t-o;c=c.map((t=>t<0?-g:t>e?e+f:t))}if(i.centerInsufficientSlides){let t=0;if(u.forEach((e=>{t+=e+(i.spaceBetween?i.spaceBetween:0)})),t-=i.spaceBetween,t<o){const e=(o-t)/2;c.forEach(((t,s)=>{c[s]=t-e})),m.forEach(((t,s)=>{m[s]=t+e}))}}if(Object.assign(t,{slides:p,snapGrid:c,slidesGrid:m,slidesSizesGrid:u}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){x(t.wrapperEl,"--swiper-centered-offset-before",-c[0]+"px"),x(t.wrapperEl,"--swiper-centered-offset-after",t.size/2-u[u.length-1]/2+"px");const e=-t.snapGrid[0],s=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map((t=>t+e)),t.slidesGrid=t.slidesGrid.map((t=>t+s))}if(d!==h&&t.emit("slidesLengthChange"),c.length!==b&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),m.length!==y&&t.emit("slidesGridLengthChange"),i.watchSlidesProgress&&t.updateSlidesOffset(),!(l||i.cssMode||"slide"!==i.effect&&"fade"!==i.effect)){const e=`${i.containerModifierClass}backface-hidden`,s=t.$el.hasClass(e);d<=i.maxBackfaceHiddenSlides?s||t.$el.addClass(e):s&&t.$el.removeClass(e)}},updateAutoHeight:function(t){const e=this,s=[],i=e.virtual&&e.params.virtual.enabled;let a,o=0;"number"==typeof t?e.setTransition(t):!0===t&&e.setTransition(e.params.speed);const n=t=>i?e.slides.filter((e=>parseInt(e.getAttribute("data-swiper-slide-index"),10)===t))[0]:e.slides.eq(t)[0];if("auto"!==e.params.slidesPerView&&e.params.slidesPerView>1)if(e.params.centeredSlides)e.visibleSlides.each((t=>{s.push(t)}));else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const t=e.activeIndex+a;if(t>e.slides.length&&!i)break;s.push(n(t))}else s.push(n(e.activeIndex));for(a=0;a<s.length;a+=1)if(void 0!==s[a]){const t=s[a].offsetHeight;o=t>o?t:o}(o||0===o)&&e.$wrapperEl.css("height",`${o}px`)},updateSlidesOffset:function(){const t=this,e=t.slides;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=t.isHorizontal()?e[s].offsetLeft:e[s].offsetTop},updateSlidesProgress:function(t){void 0===t&&(t=this&&this.translate||0);const e=this,s=e.params,{slides:i,rtlTranslate:a,snapGrid:o}=e;if(0===i.length)return;void 0===i[0].swiperSlideOffset&&e.updateSlidesOffset();let n=-t;a&&(n=t),i.removeClass(s.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let t=0;t<i.length;t+=1){const r=i[t];let l=r.swiperSlideOffset;s.cssMode&&s.centeredSlides&&(l-=i[0].swiperSlideOffset);const h=(n+(s.centeredSlides?e.minTranslate():0)-l)/(r.swiperSlideSize+s.spaceBetween),p=(n-o[0]+(s.centeredSlides?e.minTranslate():0)-l)/(r.swiperSlideSize+s.spaceBetween),d=-(n-l),c=d+e.slidesSizesGrid[t];(d>=0&&d<e.size-1||c>1&&c<=e.size||d<=0&&c>=e.size)&&(e.visibleSlides.push(r),e.visibleSlidesIndexes.push(t),i.eq(t).addClass(s.slideVisibleClass)),r.progress=a?-h:h,r.originalProgress=a?-p:p}e.visibleSlides=h(e.visibleSlides)},updateProgress:function(t){const e=this;if(void 0===t){const s=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*s||0}const s=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:a,isBeginning:o,isEnd:n}=e;const r=o,l=n;0===i?(a=0,o=!0,n=!0):(a=(t-e.minTranslate())/i,o=a<=0,n=a>=1),Object.assign(e,{progress:a,isBeginning:o,isEnd:n}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&e.updateSlidesProgress(t),o&&!r&&e.emit("reachBeginning toEdge"),n&&!l&&e.emit("reachEnd toEdge"),(r&&!o||l&&!n)&&e.emit("fromEdge"),e.emit("progress",a)},updateSlidesClasses:function(){const t=this,{slides:e,params:s,$wrapperEl:i,activeIndex:a,realIndex:o}=t,n=t.virtual&&s.virtual.enabled;let r;e.removeClass(`${s.slideActiveClass} ${s.slideNextClass} ${s.slidePrevClass} ${s.slideDuplicateActiveClass} ${s.slideDuplicateNextClass} ${s.slideDuplicatePrevClass}`),r=n?t.$wrapperEl.find(`.${s.slideClass}[data-swiper-slide-index="${a}"]`):e.eq(a),r.addClass(s.slideActiveClass),s.loop&&(r.hasClass(s.slideDuplicateClass)?i.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${o}"]`).addClass(s.slideDuplicateActiveClass):i.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${o}"]`).addClass(s.slideDuplicateActiveClass));let l=r.nextAll(`.${s.slideClass}`).eq(0).addClass(s.slideNextClass);s.loop&&0===l.length&&(l=e.eq(0),l.addClass(s.slideNextClass));let h=r.prevAll(`.${s.slideClass}`).eq(0).addClass(s.slidePrevClass);s.loop&&0===h.length&&(h=e.eq(-1),h.addClass(s.slidePrevClass)),s.loop&&(l.hasClass(s.slideDuplicateClass)?i.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicateNextClass):i.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicateNextClass),h.hasClass(s.slideDuplicateClass)?i.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${h.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicatePrevClass):i.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${h.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(t){const e=this,s=e.rtlTranslate?e.translate:-e.translate,{slidesGrid:i,snapGrid:a,params:o,activeIndex:n,realIndex:r,snapIndex:l}=e;let h,p=t;if(void 0===p){for(let t=0;t<i.length;t+=1)void 0!==i[t+1]?s>=i[t]&&s<i[t+1]-(i[t+1]-i[t])/2?p=t:s>=i[t]&&s<i[t+1]&&(p=t+1):s>=i[t]&&(p=t);o.normalizeSlideIndex&&(p<0||void 0===p)&&(p=0)}if(a.indexOf(s)>=0)h=a.indexOf(s);else{const t=Math.min(o.slidesPerGroupSkip,p);h=t+Math.floor((p-t)/o.slidesPerGroup)}if(h>=a.length&&(h=a.length-1),p===n)return void(h!==l&&(e.snapIndex=h,e.emit("snapIndexChange")));const d=parseInt(e.slides.eq(p).attr("data-swiper-slide-index")||p,10);Object.assign(e,{snapIndex:h,realIndex:d,previousIndex:n,activeIndex:p}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),r!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")},updateClickedSlide:function(t){const e=this,s=e.params,i=h(t).closest(`.${s.slideClass}`)[0];let a,o=!1;if(i)for(let t=0;t<e.slides.length;t+=1)if(e.slides[t]===i){o=!0,a=t;break}if(!i||!o)return e.clickedSlide=void 0,void(e.clickedIndex=void 0);e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(h(i).attr("data-swiper-slide-index"),10):e.clickedIndex=a,s.slideToClickedSlide&&void 0!==e.clickedIndex&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}};var C={getTranslate:function(t){void 0===t&&(t=this.isHorizontal()?"x":"y");const{params:e,rtlTranslate:s,translate:i,$wrapperEl:a}=this;if(e.virtualTranslate)return s?-i:i;if(e.cssMode)return i;let o=m(a[0],t);return s&&(o=-o),o||0},setTranslate:function(t,e){const s=this,{rtlTranslate:i,params:a,$wrapperEl:o,wrapperEl:n,progress:r}=s;let l,h=0,p=0;s.isHorizontal()?h=i?-t:t:p=t,a.roundLengths&&(h=Math.floor(h),p=Math.floor(p)),a.cssMode?n[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-h:-p:a.virtualTranslate||o.transform(`translate3d(${h}px, ${p}px, 0px)`),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?h:p;const d=s.maxTranslate()-s.minTranslate();l=0===d?0:(t-s.minTranslate())/d,l!==r&&s.updateProgress(t),s.emit("setTranslate",s.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(t,e,s,i,a){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===s&&(s=!0),void 0===i&&(i=!0);const o=this,{params:n,wrapperEl:r}=o;if(o.animating&&n.preventInteractionOnTransition)return!1;const l=o.minTranslate(),h=o.maxTranslate();let p;if(p=i&&t>l?l:i&&t<h?h:t,o.updateProgress(p),n.cssMode){const t=o.isHorizontal();if(0===e)r[t?"scrollLeft":"scrollTop"]=-p;else{if(!o.support.smoothScroll)return b({swiper:o,targetPosition:-p,side:t?"left":"top"}),!0;r.scrollTo({[t?"left":"top"]:-p,behavior:"smooth"})}return!0}return 0===e?(o.setTransition(0),o.setTranslate(p),s&&(o.emit("beforeTransitionStart",e,a),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(p),s&&(o.emit("beforeTransitionStart",e,a),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(t){o&&!o.destroyed&&t.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,s&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}};function I(t){let{swiper:e,runCallbacks:s,direction:i,step:a}=t;const{activeIndex:o,previousIndex:n}=e;let r=i;if(r||(r=o>n?"next":o<n?"prev":"reset"),e.emit(`transition${a}`),s&&o!==n){if("reset"===r)return void e.emit(`slideResetTransition${a}`);e.emit(`slideChangeTransition${a}`),"next"===r?e.emit(`slideNextTransition${a}`):e.emit(`slidePrevTransition${a}`)}}var k={slideTo:function(t,e,s,i,a){if(void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===s&&(s=!0),"number"!=typeof t&&"string"!=typeof t)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof t}] given.`);if("string"==typeof t){const e=parseInt(t,10);if(!isFinite(e))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=e}const o=this;let n=t;n<0&&(n=0);const{params:r,snapGrid:l,slidesGrid:h,previousIndex:p,activeIndex:d,rtlTranslate:c,wrapperEl:m,enabled:u}=o;if(o.animating&&r.preventInteractionOnTransition||!u&&!i&&!a)return!1;const g=Math.min(o.params.slidesPerGroupSkip,n);let f=g+Math.floor((n-g)/o.params.slidesPerGroup);f>=l.length&&(f=l.length-1),(d||r.initialSlide||0)===(p||0)&&s&&o.emit("beforeSlideChangeStart");const x=-l[f];if(o.updateProgress(x),r.normalizeSlideIndex)for(let t=0;t<h.length;t+=1){const e=-Math.floor(100*x),s=Math.floor(100*h[t]),i=Math.floor(100*h[t+1]);void 0!==h[t+1]?e>=s&&e<i-(i-s)/2?n=t:e>=s&&e<i&&(n=t+1):e>=s&&(n=t)}if(o.initialized&&n!==d){if(!o.allowSlideNext&&x<o.translate&&x<o.minTranslate())return!1;if(!o.allowSlidePrev&&x>o.translate&&x>o.maxTranslate()&&(d||0)!==n)return!1}let y;if(y=n>d?"next":n<d?"prev":"reset",c&&-x===o.translate||!c&&x===o.translate)return o.updateActiveIndex(n),r.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==r.effect&&o.setTranslate(x),"reset"!==y&&(o.transitionStart(s,y),o.transitionEnd(s,y)),!1;if(r.cssMode){const t=o.isHorizontal(),s=c?x:-x;if(0===e){const e=o.virtual&&o.params.virtual.enabled;e&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),m[t?"scrollLeft":"scrollTop"]=s,e&&requestAnimationFrame((()=>{o.wrapperEl.style.scrollSnapType="",o._swiperImmediateVirtual=!1}))}else{if(!o.support.smoothScroll)return b({swiper:o,targetPosition:s,side:t?"left":"top"}),!0;m.scrollTo({[t?"left":"top"]:s,behavior:"smooth"})}return!0}return o.setTransition(e),o.setTranslate(x),o.updateActiveIndex(n),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,i),o.transitionStart(s,y),0===e?o.transitionEnd(s,y):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(t){o&&!o.destroyed&&t.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(s,y))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(t,e,s,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===s&&(s=!0);const a=this;let o=t;return a.params.loop&&(o+=a.loopedSlides),a.slideTo(o,e,s,i)},slideNext:function(t,e,s){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);const i=this,{animating:a,enabled:o,params:n}=i;if(!o)return i;let r=n.slidesPerGroup;"auto"===n.slidesPerView&&1===n.slidesPerGroup&&n.slidesPerGroupAuto&&(r=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<n.slidesPerGroupSkip?1:r;if(n.loop){if(a&&n.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return n.rewind&&i.isEnd?i.slideTo(0,t,e,s):i.slideTo(i.activeIndex+l,t,e,s)},slidePrev:function(t,e,s){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);const i=this,{params:a,animating:o,snapGrid:n,slidesGrid:r,rtlTranslate:l,enabled:h}=i;if(!h)return i;if(a.loop){if(o&&a.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function p(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}const d=p(l?i.translate:-i.translate),c=n.map((t=>p(t)));let m=n[c.indexOf(d)-1];if(void 0===m&&a.cssMode){let t;n.forEach(((e,s)=>{d>=e&&(t=s)})),void 0!==t&&(m=n[t>0?t-1:t])}let u=0;if(void 0!==m&&(u=r.indexOf(m),u<0&&(u=i.activeIndex-1),"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(u=u-i.slidesPerViewDynamic("previous",!0)+1,u=Math.max(u,0))),a.rewind&&i.isBeginning){const a=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(a,t,e,s)}return i.slideTo(u,t,e,s)},slideReset:function(t,e,s){return void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),this.slideTo(this.activeIndex,t,e,s)},slideToClosest:function(t,e,s,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),void 0===i&&(i=.5);const a=this;let o=a.activeIndex;const n=Math.min(a.params.slidesPerGroupSkip,o),r=n+Math.floor((o-n)/a.params.slidesPerGroup),l=a.rtlTranslate?a.translate:-a.translate;if(l>=a.snapGrid[r]){const t=a.snapGrid[r];l-t>(a.snapGrid[r+1]-t)*i&&(o+=a.params.slidesPerGroup)}else{const t=a.snapGrid[r-1];l-t<=(a.snapGrid[r]-t)*i&&(o-=a.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,a.slidesGrid.length-1),a.slideTo(o,t,e,s)},slideToClickedSlide:function(){const t=this,{params:e,$wrapperEl:s}=t,i="auto"===e.slidesPerView?t.slidesPerViewDynamic():e.slidesPerView;let a,o=t.clickedIndex;if(e.loop){if(t.animating)return;a=parseInt(h(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?o<t.loopedSlides-i/2||o>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),o=s.children(`.${e.slideClass}[data-swiper-slide-index="${a}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),d((()=>{t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-i?(t.loopFix(),o=s.children(`.${e.slideClass}[data-swiper-slide-index="${a}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),d((()=>{t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}};var M={loopCreate:function(){const t=this,e=i(),{params:s,$wrapperEl:a}=t,o=a.children().length>0?h(a.children()[0].parentNode):a;o.children(`.${s.slideClass}.${s.slideDuplicateClass}`).remove();let n=o.children(`.${s.slideClass}`);if(s.loopFillGroupWithBlank){const t=s.slidesPerGroup-n.length%s.slidesPerGroup;if(t!==s.slidesPerGroup){for(let i=0;i<t;i+=1){const t=h(e.createElement("div")).addClass(`${s.slideClass} ${s.slideBlankClass}`);o.append(t)}n=o.children(`.${s.slideClass}`)}}"auto"!==s.slidesPerView||s.loopedSlides||(s.loopedSlides=n.length),t.loopedSlides=Math.ceil(parseFloat(s.loopedSlides||s.slidesPerView,10)),t.loopedSlides+=s.loopAdditionalSlides,t.loopedSlides>n.length&&(t.loopedSlides=n.length);const r=[],l=[];n.each(((e,s)=>{const i=h(e);s<t.loopedSlides&&l.push(e),s<n.length&&s>=n.length-t.loopedSlides&&r.push(e),i.attr("data-swiper-slide-index",s)}));for(let t=0;t<l.length;t+=1)o.append(h(l[t].cloneNode(!0)).addClass(s.slideDuplicateClass));for(let t=r.length-1;t>=0;t-=1)o.prepend(h(r[t].cloneNode(!0)).addClass(s.slideDuplicateClass))},loopFix:function(){const t=this;t.emit("beforeLoopFix");const{activeIndex:e,slides:s,loopedSlides:i,allowSlidePrev:a,allowSlideNext:o,snapGrid:n,rtlTranslate:r}=t;let l;t.allowSlidePrev=!0,t.allowSlideNext=!0;const h=-n[e]-t.getTranslate();if(e<i){l=s.length-3*i+e,l+=i;t.slideTo(l,0,!1,!0)&&0!==h&&t.setTranslate((r?-t.translate:t.translate)-h)}else if(e>=s.length-i){l=-s.length+e+i,l+=i;t.slideTo(l,0,!1,!0)&&0!==h&&t.setTranslate((r?-t.translate:t.translate)-h)}t.allowSlidePrev=a,t.allowSlideNext=o,t.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:t,params:e,slides:s}=this;t.children(`.${e.slideClass}.${e.slideDuplicateClass},.${e.slideClass}.${e.slideBlankClass}`).remove(),s.removeAttr("data-swiper-slide-index")}};function L(t){const e=this,s=i(),a=o(),n=e.touchEventsData,{params:r,touches:l,enabled:p}=e;if(!p)return;if(e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let d=t;d.originalEvent&&(d=d.originalEvent);let m=h(d.target);if("wrapper"===r.touchEventsTarget&&!m.closest(e.wrapperEl).length)return;if(n.isTouchEvent="touchstart"===d.type,!n.isTouchEvent&&"which"in d&&3===d.which)return;if(!n.isTouchEvent&&"button"in d&&d.button>0)return;if(n.isTouched&&n.isMoved)return;!!r.noSwipingClass&&""!==r.noSwipingClass&&d.target&&d.target.shadowRoot&&t.path&&t.path[0]&&(m=h(t.path[0]));const u=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,g=!(!d.target||!d.target.shadowRoot);if(r.noSwiping&&(g?function(t,e){return void 0===e&&(e=this),function e(s){return s&&s!==i()&&s!==o()?(s.assignedSlot&&(s=s.assignedSlot),s.closest(t)||e(s.getRootNode().host)):null}(e)}(u,d.target):m.closest(u)[0]))return void(e.allowClick=!0);if(r.swipeHandler&&!m.closest(r.swipeHandler)[0])return;l.currentX="touchstart"===d.type?d.targetTouches[0].pageX:d.pageX,l.currentY="touchstart"===d.type?d.targetTouches[0].pageY:d.pageY;const f=l.currentX,x=l.currentY,b=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,y=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(b&&(f<=y||f>=a.innerWidth-y)){if("prevent"!==b)return;axPreventDefault(t)}if(Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=f,l.startY=x,n.touchStartTime=c(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==d.type){let t=!0;m.is(n.focusableElements)&&(t=!1,"SELECT"===m[0].nodeName&&(n.isTouched=!1)),s.activeElement&&h(s.activeElement).is(n.focusableElements)&&s.activeElement!==m[0]&&s.activeElement.blur();const i=t&&e.allowTouchMove&&r.touchStartPreventDefault;!r.touchStartForcePreventDefault&&!i||m[0].isContentEditable||axPreventDefault(d)}e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",d)}function P(t){const e=i(),s=this,a=s.touchEventsData,{params:o,touches:n,rtlTranslate:r,enabled:l}=s;if(!l)return;let p=t;if(p.originalEvent&&(p=p.originalEvent),!a.isTouched)return void(a.startMoving&&a.isScrolling&&s.emit("touchMoveOpposite",p));if(a.isTouchEvent&&"touchmove"!==p.type)return;const d="touchmove"===p.type&&p.targetTouches&&(p.targetTouches[0]||p.changedTouches[0]),m="touchmove"===p.type?d.pageX:p.pageX,u="touchmove"===p.type?d.pageY:p.pageY;if(p.preventedByNestedSwiper)return n.startX=m,void(n.startY=u);if(!s.allowTouchMove)return h(p.target).is(a.focusableElements)||(s.allowClick=!1),void(a.isTouched&&(Object.assign(n,{startX:m,startY:u,currentX:m,currentY:u}),a.touchStartTime=c()));if(a.isTouchEvent&&o.touchReleaseOnEdges&&!o.loop)if(s.isVertical()){if(u<n.startY&&s.translate<=s.maxTranslate()||u>n.startY&&s.translate>=s.minTranslate())return a.isTouched=!1,void(a.isMoved=!1)}else if(m<n.startX&&s.translate<=s.maxTranslate()||m>n.startX&&s.translate>=s.minTranslate())return;if(a.isTouchEvent&&e.activeElement&&p.target===e.activeElement&&h(p.target).is(a.focusableElements))return a.isMoved=!0,void(s.allowClick=!1);if(a.allowTouchCallbacks&&s.emit("touchMove",p),p.targetTouches&&p.targetTouches.length>1)return;n.currentX=m,n.currentY=u;const g=n.currentX-n.startX,f=n.currentY-n.startY;if(s.params.threshold&&Math.sqrt(g**2+f**2)<s.params.threshold)return;if(void 0===a.isScrolling){let t;s.isHorizontal()&&n.currentY===n.startY||s.isVertical()&&n.currentX===n.startX?a.isScrolling=!1:g*g+f*f>=25&&(t=180*Math.atan2(Math.abs(f),Math.abs(g))/Math.PI,a.isScrolling=s.isHorizontal()?t>o.touchAngle:90-t>o.touchAngle)}if(a.isScrolling&&s.emit("touchMoveOpposite",p),void 0===a.startMoving&&(n.currentX===n.startX&&n.currentY===n.startY||(a.startMoving=!0)),a.isScrolling)return void(a.isTouched=!1);if(!a.startMoving)return;s.allowClick=!1,!o.cssMode&&p.cancelable&&axPreventDefault(p),o.touchMoveStopPropagation&&!o.nested&&p.stopPropagation(),a.isMoved||(o.loop&&!o.cssMode&&s.loopFix(),a.startTranslate=s.getTranslate(),s.setTransition(0),s.animating&&s.$wrapperEl.trigger("webkitTransitionEnd transitionend"),a.allowMomentumBounce=!1,!o.grabCursor||!0!==s.allowSlideNext&&!0!==s.allowSlidePrev||s.setGrabCursor(!0),s.emit("sliderFirstMove",p)),s.emit("sliderMove",p),a.isMoved=!0;let x=s.isHorizontal()?g:f;n.diff=x,x*=o.touchRatio,r&&(x=-x),s.swipeDirection=x>0?"prev":"next",a.currentTranslate=x+a.startTranslate;let b=!0,y=o.resistanceRatio;if(o.touchReleaseOnEdges&&(y=0),x>0&&a.currentTranslate>s.minTranslate()?(b=!1,o.resistance&&(a.currentTranslate=s.minTranslate()-1+(-s.minTranslate()+a.startTranslate+x)**y)):x<0&&a.currentTranslate<s.maxTranslate()&&(b=!1,o.resistance&&(a.currentTranslate=s.maxTranslate()+1-(s.maxTranslate()-a.startTranslate-x)**y)),b&&(p.preventedByNestedSwiper=!0),!s.allowSlideNext&&"next"===s.swipeDirection&&a.currentTranslate<a.startTranslate&&(a.currentTranslate=a.startTranslate),!s.allowSlidePrev&&"prev"===s.swipeDirection&&a.currentTranslate>a.startTranslate&&(a.currentTranslate=a.startTranslate),s.allowSlidePrev||s.allowSlideNext||(a.currentTranslate=a.startTranslate),o.threshold>0){if(!(Math.abs(x)>o.threshold||a.allowThresholdMove))return void(a.currentTranslate=a.startTranslate);if(!a.allowThresholdMove)return a.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,a.currentTranslate=a.startTranslate,void(n.diff=s.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY)}o.followFinger&&!o.cssMode&&((o.freeMode&&o.freeMode.enabled&&s.freeMode||o.watchSlidesProgress)&&(s.updateActiveIndex(),s.updateSlidesClasses()),s.params.freeMode&&o.freeMode.enabled&&s.freeMode&&s.freeMode.onTouchMove(),s.updateProgress(a.currentTranslate),s.setTranslate(a.currentTranslate))}function $(t){const e=this,s=e.touchEventsData,{params:i,touches:a,rtlTranslate:o,slidesGrid:n,enabled:r}=e;if(!r)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),s.allowTouchCallbacks&&e.emit("touchEnd",l),s.allowTouchCallbacks=!1,!s.isTouched)return s.isMoved&&i.grabCursor&&e.setGrabCursor(!1),s.isMoved=!1,void(s.startMoving=!1);i.grabCursor&&s.isMoved&&s.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);const h=c(),p=h-s.touchStartTime;if(e.allowClick){const t=l.path||l.composedPath&&l.composedPath();e.updateClickedSlide(t&&t[0]||l.target),e.emit("tap click",l),p<300&&h-s.lastClickTime<300&&e.emit("doubleTap doubleClick",l)}if(s.lastClickTime=c(),d((()=>{e.destroyed||(e.allowClick=!0)})),!s.isTouched||!s.isMoved||!e.swipeDirection||0===a.diff||s.currentTranslate===s.startTranslate)return s.isTouched=!1,s.isMoved=!1,void(s.startMoving=!1);let m;if(s.isTouched=!1,s.isMoved=!1,s.startMoving=!1,m=i.followFinger?o?e.translate:-e.translate:-s.currentTranslate,i.cssMode)return;if(e.params.freeMode&&i.freeMode.enabled)return void e.freeMode.onTouchEnd({currentPos:m});let u=0,g=e.slidesSizesGrid[0];for(let t=0;t<n.length;t+=t<i.slidesPerGroupSkip?1:i.slidesPerGroup){const e=t<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==n[t+e]?m>=n[t]&&m<n[t+e]&&(u=t,g=n[t+e]-n[t]):m>=n[t]&&(u=t,g=n[n.length-1]-n[n.length-2])}let f=null,x=null;i.rewind&&(e.isBeginning?x=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(f=0));const b=(m-n[u])/g,y=u<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(p>i.longSwipesMs){if(!i.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(b>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?f:u+y):e.slideTo(u)),"prev"===e.swipeDirection&&(b>1-i.longSwipesRatio?e.slideTo(u+y):null!==x&&b<0&&Math.abs(b)>i.longSwipesRatio?e.slideTo(x):e.slideTo(u))}else{if(!i.shortSwipes)return void e.slideTo(e.activeIndex);e.navigation&&(l.target===e.navigation.nextEl||l.target===e.navigation.prevEl)?l.target===e.navigation.nextEl?e.slideTo(u+y):e.slideTo(u):("next"===e.swipeDirection&&e.slideTo(null!==f?f:u+y),"prev"===e.swipeDirection&&e.slideTo(null!==x?x:u))}}function O(){const t=this,{params:e,el:s}=t;if(s&&0===s.offsetWidth)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:a,snapGrid:o}=t;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=a,t.allowSlideNext=i,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}function N(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&axPreventDefault(t),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function z(){const t=this,{wrapperEl:e,rtlTranslate:s,enabled:i}=t;if(!i)return;let a;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,0===t.translate&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();const o=t.maxTranslate()-t.minTranslate();a=0===o?0:(t.translate-t.minTranslate())/o,a!==t.progress&&t.updateProgress(s?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}let H=!1;function q(){}const R=(t,e)=>{const s=i(),{params:a,touchEvents:o,el:n,wrapperEl:r,device:l,support:h}=t,p=!!a.nested,d="on"===e?"addEventListener":"removeEventListener",c=e;if(h.touch){const e=!("touchstart"!==o.start||!h.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};n[d](o.start,t.onTouchStart,e),n[d](o.move,t.onTouchMove,h.passiveListener?{passive:!1,capture:p}:p),n[d](o.end,t.onTouchEnd,e),o.cancel&&n[d](o.cancel,t.onTouchEnd,e)}else n[d](o.start,t.onTouchStart,!1),s[d](o.move,t.onTouchMove,p),s[d](o.end,t.onTouchEnd,!1);(a.preventClicks||a.preventClicksPropagation)&&n[d]("click",t.onClick,!0),a.cssMode&&r[d]("scroll",t.onScroll),a.updateOnWindowResize?t[c](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",O,!0):t[c]("observerUpdate",O,!0)};var V={attachEvents:function(){const t=this,e=i(),{params:s,support:a}=t;t.onTouchStart=L.bind(t),t.onTouchMove=P.bind(t),t.onTouchEnd=$.bind(t),s.cssMode&&(t.onScroll=z.bind(t)),t.onClick=N.bind(t),a.touch&&!H&&(e.addEventListener("touchstart",q),H=!0),R(t,"on")},detachEvents:function(){R(this,"off")}};const B=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;var F={addClasses:function(){const t=this,{classNames:e,params:s,rtl:i,$el:a,device:o,support:n}=t,r=function(t,e){const s=[];return t.forEach((t=>{"object"==typeof t?Object.keys(t).forEach((i=>{t[i]&&s.push(e+i)})):"string"==typeof t&&s.push(e+t)})),s}(["initialized",s.direction,{"pointer-events":!n.touch},{"free-mode":t.params.freeMode&&s.freeMode.enabled},{autoheight:s.autoHeight},{rtl:i},{grids:s.grid&&s.grid.rows>1},{"grid-column":s.grid&&s.grid.rows>1&&"column"===s.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":s.cssMode},{centered:s.cssMode&&s.centeredSlides},{"watch-progress":s.watchSlidesProgress}],s.containerModifierClass);e.push(...r),a.addClass([...e].join(" ")),t.emitContainerClasses()},removeClasses:function(){const{$el:t,classNames:e}=this;t.removeClass(e.join(" ")),this.emitContainerClasses()}};var j={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"ax-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"ax-",slideClass:"ax-slide",slideBlankClass:"ax-slide-invisible-blank",slideActiveClass:"ax-slide-active",slideDuplicateActiveClass:"ax-slide-duplicate-active",slideVisibleClass:"ax-slide-visible",slideDuplicateClass:"ax-slide-duplicate",slideNextClass:"ax-slide-next",slideDuplicateNextClass:"ax-slide-duplicate-next",slidePrevClass:"ax-slide-prev",slideDuplicatePrevClass:"ax-slide-duplicate-prev",wrapperClass:"ax-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Y(t,e){return function(s){void 0===s&&(s={});const i=Object.keys(s)[0],a=s[i];"object"==typeof a&&null!==a?(["navigation","pagination","scrollbar"].indexOf(i)>=0&&!0===t[i]&&(t[i]={auto:!0}),i in t&&"enabled"in a?(!0===t[i]&&(t[i]={enabled:!0}),"object"!=typeof t[i]||"enabled"in t[i]||(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),f(e,s)):f(e,s)):f(e,s)}}const U={eventsEmitter:E,update:A,translate:C,transition:{setTransition:function(t,e){const s=this;s.params.cssMode||s.$wrapperEl.transition(t),s.emit("setTransition",t,e)},transitionStart:function(t,e){void 0===t&&(t=!0);const s=this,{params:i}=s;i.cssMode||(i.autoHeight&&s.updateAutoHeight(),I({swiper:s,runCallbacks:t,direction:e,step:"Start"}))},transitionEnd:function(t,e){void 0===t&&(t=!0);const s=this,{params:i}=s;s.animating=!1,i.cssMode||(s.setTransition(0),I({swiper:s,runCallbacks:t,direction:e,step:"End"}))}},slide:k,loop:M,grabCursor:{setGrabCursor:function(t){const e=this;if(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const s="container"===e.params.touchEventsTarget?e.el:e.wrapperEl;s.style.cursor="move",s.style.cursor=t?"grabbing":"grab"},unsetGrabCursor:function(){const t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t["container"===t.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:V,breakpoints:{setBreakpoint:function(){const t=this,{activeIndex:e,initialized:s,loopedSlides:i=0,params:a,$el:o}=t,n=a.breakpoints;if(!n||n&&0===Object.keys(n).length)return;const r=t.getBreakpoint(n,t.params.breakpointsBase,t.el);if(!r||t.currentBreakpoint===r)return;const l=(r in n?n[r]:void 0)||t.originalParams,h=B(t,a),p=B(t,l),d=a.enabled;h&&!p?(o.removeClass(`${a.containerModifierClass}grids ${a.containerModifierClass}grid-column`),t.emitContainerClasses()):!h&&p&&(o.addClass(`${a.containerModifierClass}grids`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===a.grid.fill)&&o.addClass(`${a.containerModifierClass}grid-column`),t.emitContainerClasses());const c=l.direction&&l.direction!==a.direction,m=a.loop&&(l.slidesPerView!==a.slidesPerView||c);c&&s&&t.changeDirection(),f(t.params,l);const u=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),d&&!u?t.disable():!d&&u&&t.enable(),t.currentBreakpoint=r,t.emit("_beforeBreakpoint",l),m&&s&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-i+t.loopedSlides,0,!1)),t.emit("breakpoint",l)},getBreakpoint:function(t,e,s){if(void 0===e&&(e="window"),!t||"container"===e&&!s)return;let i=!1;const a=o(),n="window"===e?a.innerHeight:s.clientHeight,r=Object.keys(t).map((t=>{if("string"==typeof t&&0===t.indexOf("@")){const e=parseFloat(t.substr(1));return{value:n*e,point:t}}return{value:t,point:t}}));r.sort(((t,e)=>parseInt(t.value,10)-parseInt(e.value,10)));for(let t=0;t<r.length;t+=1){const{point:o,value:n}=r[t];"window"===e?a.matchMedia(`(min-width: ${n}px)`).matches&&(i=o):n<=s.clientWidth&&(i=o)}return i||"max"}},checkOverflow:{checkOverflow:function(){const t=this,{isLocked:e,params:s}=t,{slidesOffsetBefore:i}=s;if(i){const e=t.slides.length-1,s=t.slidesGrid[e]+t.slidesSizesGrid[e]+2*i;t.isLocked=t.size>s}else t.isLocked=1===t.snapGrid.length;!0===s.allowSlideNext&&(t.allowSlideNext=!t.isLocked),!0===s.allowSlidePrev&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}},classes:F,images:{loadImage:function(t,e,s,i,a,n){const r=o();let l;function p(){n&&n()}h(t).parent("picture")[0]||t.complete&&a?p():e?(l=new r.Image,l.onload=p,l.onerror=p,i&&(l.sizes=i),s&&(l.srcset=s),e&&(l.src=e)):p()},preloadImages:function(){const t=this;function e(){null!=t&&t&&!t.destroyed&&(void 0!==t.imagesLoaded&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}t.imagesToLoad=t.$el.find("img");for(let s=0;s<t.imagesToLoad.length;s+=1){const i=t.imagesToLoad[s];t.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,e)}}}},W={};class G{constructor(){let t,e;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];if(1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?e=i[0]:[t,e]=i,e||(e={}),e=f({},e),t&&!e.el&&(e.el=t),e.el&&h(e.el).length>1){const t=[];return h(e.el).each((s=>{const i=f({},e,{el:s});t.push(new G(i))})),t}const o=this;o.__swiper__=!0,o.support=w(),o.device=T({userAgent:e.userAgent}),o.browser=S(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],e.modules&&Array.isArray(e.modules)&&o.modules.push(...e.modules);const n={};o.modules.forEach((t=>{t({swiper:o,extendParams:Y(e,n),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})}));const r=f({},j,n);return o.params=f({},r,W,e),"string"==typeof e.el?(".ax-prev"==o.params.navigation.prevEl&&(o.params.navigation.prevEl=document.querySelector(e.el+" .ax-prev")),".ax-next"==o.params.navigation.nextEl&&(o.params.navigation.nextEl=document.querySelector(e.el+" .ax-next"))):(".ax-prev"==o.params.navigation.prevEl&&(o.params.navigation.prevEl=e.el.querySelector(".ax-prev")),".ax-next"==o.params.navigation.nextEl&&(o.params.navigation.nextEl=e.el.querySelector(".ax-next"))),o.originalParams=f({},o.params),o.passedParams=f({},e),o.params&&o.params.on&&Object.keys(o.params.on).forEach((t=>{o.on(t,o.params.on[t])})),o.params&&o.params.onAny&&o.onAny(o.params.onAny),o.$=h,Object.assign(o,{enabled:o.params.enabled,el:t,classNames:[],slides:h(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===o.params.direction,isVertical:()=>"vertical"===o.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEvents:function(){const t=["touchstart","touchmove","touchend","touchcancel"],e=["pointerdown","pointermove","pointerup"];return o.touchEventsTouch={start:t[0],move:t[1],end:t[2],cancel:t[3]},o.touchEventsDesktop={start:e[0],move:e[1],end:e[2]},o.support.touch||!o.params.simulateTouch?o.touchEventsTouch:o.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:c(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,e){const s=this;t=Math.min(Math.max(t,0),1);const i=s.minTranslate(),a=(s.maxTranslate()-i)*t+i;s.translateTo(a,void 0===e?0:e),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=t.el.className.split(" ").filter((e=>0===e.indexOf("ax")||0===e.indexOf(t.params.containerModifierClass)));t.emit("_containerClasses",e.join(" "))}getSlideClasses(t){const e=this;return e.destroyed?"":t.className.split(" ").filter((t=>0===t.indexOf("ax-slide")||0===t.indexOf(e.params.slideClass))).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=[];t.slides.each((s=>{const i=t.getSlideClasses(s);e.push({slideEl:s,classNames:i}),t.emit("_slideClass",s,i)})),t.emit("_slideClasses",e)}slidesPerViewDynamic(t,e){void 0===t&&(t="current"),void 0===e&&(e=!1);const{params:s,slides:i,slidesGrid:a,slidesSizesGrid:o,size:n,activeIndex:r}=this;let l=1;if(s.centeredSlides){let t,e=i[r].swiperSlideSize;for(let s=r+1;s<i.length;s+=1)i[s]&&!t&&(e+=i[s].swiperSlideSize,l+=1,e>n&&(t=!0));for(let s=r-1;s>=0;s-=1)i[s]&&!t&&(e+=i[s].swiperSlideSize,l+=1,e>n&&(t=!0))}else if("current"===t)for(let t=r+1;t<i.length;t+=1){(e?a[t]+o[t]-a[r]<n:a[t]-a[r]<n)&&(l+=1)}else for(let t=r-1;t>=0;t-=1){a[r]-a[t]<n&&(l+=1)}return l}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:e,params:s}=t;function i(){const e=t.rtlTranslate?-1*t.translate:t.translate,s=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(s),t.updateActiveIndex(),t.updateSlidesClasses()}let a;s.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode&&t.params.freeMode.enabled?(i(),t.params.autoHeight&&t.updateAutoHeight()):(a=("auto"===t.params.slidesPerView||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),a||i()),s.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,e){void 0===e&&(e=!0);const s=this,i=s.params.direction;return t||(t="horizontal"===i?"vertical":"horizontal"),t===i||"horizontal"!==t&&"vertical"!==t||(s.$el.removeClass(`${s.params.containerModifierClass}${i}`).addClass(`${s.params.containerModifierClass}${t}`),s.emitContainerClasses(),s.params.direction=t,s.slides.each((e=>{"vertical"===t?e.style.width="":e.style.height=""})),s.emit("changeDirection"),e&&s.update()),s}mount(t){const e=this;if(e.mounted)return!0;const s=h(t||e.params.el);if(!(t=s[0]))return!1;t.swiper=e;const a=()=>`.${(e.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>{if(t&&t.shadowRoot&&t.shadowRoot.querySelector){const e=h(t.shadowRoot.querySelector(a()));return e.children=t=>s.children(t),e}return s.children(a())})();if(0===o.length&&e.params.createElements){const t=i().createElement("div");o=h(t),t.className=e.params.wrapperClass,s.append(t),s.children(`.${e.params.slideClass}`).each((t=>{o.append(t)}))}return Object.assign(e,{$el:s,el:t,$wrapperEl:o,wrapperEl:o[0],mounted:!0,rtl:"rtl"===t.dir.toLowerCase()||"rtl"===s.css("direction"),rtlTranslate:"horizontal"===e.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===s.css("direction")),wrongRTL:"-webkit-box"===o.css("display")}),!0}init(t){const e=this;if(e.initialized)return e;return!1===e.mount(t)||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.attachEvents(),e.initialized=!0,e.emit("init"),e.emit("afterInit")),e}destroy(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);const s=this,{params:i,$el:a,$wrapperEl:o,slides:n}=s;return void 0===s.params||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),i.loop&&s.loopDestroy(),e&&(s.removeClasses(),a.removeAttr("style"),o.removeAttr("style"),n&&n.length&&n.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),s.emit("destroy"),Object.keys(s.eventsListeners).forEach((t=>{s.off(t)})),!1!==t&&(s.$el[0].swiper=null,function(t){const e=t;Object.keys(e).forEach((t=>{try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}}))}(s)),s.destroyed=!0),null}static extendDefaults(t){f(W,t)}static get extendedDefaults(){return W}static get defaults(){return j}static installModule(t){G.prototype.__modules__||(G.prototype.__modules__=[]);const e=G.prototype.__modules__;"function"==typeof t&&e.indexOf(t)<0&&e.push(t)}static use(t){return Array.isArray(t)?(t.forEach((t=>G.installModule(t))),G):(G.installModule(t),G)}}function X(t,e,s,a){const o=i();return t.params.createElements&&Object.keys(a).forEach((i=>{if(!s[i]&&!0===s.auto){let n=t.$el.children(`.${a[i]}`)[0];n||(n=o.createElement("div"),n.className=a[i],t.$el.append(n)),s[i]=n,e[i]=n}})),s}function _(t){return void 0===t&&(t=""),`.${t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function J(t){const e=this,{$wrapperEl:s,params:i}=e;if(i.loop&&e.loopDestroy(),"object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&s.append(t[e]);else s.append(t);i.loop&&e.loopCreate(),i.observer||e.update()}function Z(t){const e=this,{params:s,$wrapperEl:i,activeIndex:a}=e;s.loop&&e.loopDestroy();let o=a+1;if("object"==typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&i.prepend(t[e]);o=a+t.length}else i.prepend(t);s.loop&&e.loopCreate(),s.observer||e.update(),e.slideTo(o,0,!1)}function K(t,e){const s=this,{$wrapperEl:i,params:a,activeIndex:o}=s;let n=o;a.loop&&(n-=s.loopedSlides,s.loopDestroy(),s.slides=i.children(`.${a.slideClass}`));const r=s.slides.length;if(t<=0)return void s.prependSlide(e);if(t>=r)return void s.appendSlide(e);let l=n>t?n+1:n;const h=[];for(let e=r-1;e>=t;e-=1){const t=s.slides.eq(e);t.remove(),h.unshift(t)}if("object"==typeof e&&"length"in e){for(let t=0;t<e.length;t+=1)e[t]&&i.append(e[t]);l=n>t?n+e.length:n}else i.append(e);for(let t=0;t<h.length;t+=1)i.append(h[t]);a.loop&&s.loopCreate(),a.observer||s.update(),a.loop?s.slideTo(l+s.loopedSlides,0,!1):s.slideTo(l,0,!1)}function Q(t){const e=this,{params:s,$wrapperEl:i,activeIndex:a}=e;let o=a;s.loop&&(o-=e.loopedSlides,e.loopDestroy(),e.slides=i.children(`.${s.slideClass}`));let n,r=o;if("object"==typeof t&&"length"in t){for(let s=0;s<t.length;s+=1)n=t[s],e.slides[n]&&e.slides.eq(n).remove(),n<r&&(r-=1);r=Math.max(r,0)}else n=t,e.slides[n]&&e.slides.eq(n).remove(),n<r&&(r-=1),r=Math.max(r,0);s.loop&&e.loopCreate(),s.observer||e.update(),s.loop?e.slideTo(r+e.loopedSlides,0,!1):e.slideTo(r,0,!1)}function tt(){const t=this,e=[];for(let s=0;s<t.slides.length;s+=1)e.push(s);t.removeSlide(e)}function et(t){const{effect:e,swiper:s,on:i,setTranslate:a,setTransition:o,overwriteParams:n,perspective:r,recreateShadows:l,getEffectParams:h}=t;let p;i("beforeInit",(()=>{if(s.params.effect!==e)return;s.classNames.push(`${s.params.containerModifierClass}${e}`),r&&r()&&s.classNames.push(`${s.params.containerModifierClass}3d`);const t=n?n():{};Object.assign(s.params,t),Object.assign(s.originalParams,t)})),i("setTranslate",(()=>{s.params.effect===e&&a()})),i("setTransition",((t,i)=>{s.params.effect===e&&o(i)})),i("transitionEnd",(()=>{if(s.params.effect===e&&l){if(!h||!h().slideShadows)return;s.slides.each((t=>{s.$(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()})),l()}})),i("virtualUpdate",(()=>{s.params.effect===e&&(s.slides.length||(p=!0),requestAnimationFrame((()=>{p&&s.slides&&s.slides.length&&(a(),p=!1)})))}))}function st(t,e){return t.transformEl?e.find(t.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):e}function it(t){let{swiper:e,duration:s,transformEl:i,allSlides:a}=t;const{slides:o,activeIndex:n,$wrapperEl:r}=e;if(e.params.virtualTranslate&&0!==s){let t,s=!1;t=a?i?o.find(i):o:i?o.eq(n).find(i):o.eq(n),t.transitionEnd((()=>{if(s)return;if(!e||e.destroyed)return;s=!0,e.animating=!1;const t=["webkitTransitionEnd","transitionend"];for(let e=0;e<t.length;e+=1)r.trigger(t[e])}))}}function at(t,e,s){const i="swiper-slide-shadow"+(s?`-${s}`:""),a=t.transformEl?e.find(t.transformEl):e;let o=a.children(`.${i}`);return o.length||(o=h(`<div class="swiper-slide-shadow${s?`-${s}`:""}"></div>`),a.append(o)),o}Object.keys(U).forEach((t=>{Object.keys(U[t]).forEach((e=>{G.prototype[e]=U[t][e]}))})),G.use([function(t){let{swiper:e,on:s,emit:i}=t;const a=o();let n=null,r=null;const l=()=>{e&&!e.destroyed&&e.initialized&&(i("beforeResize"),i("resize"))},h=()=>{e&&!e.destroyed&&e.initialized&&i("orientationchange")};s("init",(()=>{e.params.resizeObserver&&void 0!==a.ResizeObserver?e&&!e.destroyed&&e.initialized&&(n=new ResizeObserver((t=>{r=a.requestAnimationFrame((()=>{const{width:s,height:i}=e;let a=s,o=i;t.forEach((t=>{let{contentBoxSize:s,contentRect:i,target:n}=t;n&&n!==e.el||(a=i?i.width:(s[0]||s).inlineSize,o=i?i.height:(s[0]||s).blockSize)})),a===s&&o===i||l()}))})),n.observe(e.el)):(a.addEventListener("resize",l),a.addEventListener("orientationchange",h))})),s("destroy",(()=>{r&&a.cancelAnimationFrame(r),n&&n.unobserve&&e.el&&(n.unobserve(e.el),n=null),a.removeEventListener("resize",l),a.removeEventListener("orientationchange",h)}))},function(t){let{swiper:e,extendParams:s,on:i,emit:a}=t;const n=[],r=o(),l=function(t,e){void 0===e&&(e={});const s=new(r.MutationObserver||r.WebkitMutationObserver)((t=>{if(1===t.length)return void a("observerUpdate",t[0]);const e=function(){a("observerUpdate",t[0])};r.requestAnimationFrame?r.requestAnimationFrame(e):r.setTimeout(e,0)}));s.observe(t,{attributes:void 0===e.attributes||e.attributes,childList:void 0===e.childList||e.childList,characterData:void 0===e.characterData||e.characterData}),n.push(s)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",(()=>{if(e.params.observer){if(e.params.observeParents){const t=e.$el.parents();for(let e=0;e<t.length;e+=1)l(t[e])}l(e.$el[0],{childList:e.params.observeSlideChildren}),l(e.$wrapperEl[0],{attributes:!1})}})),i("destroy",(()=>{n.forEach((t=>{t.disconnect()})),n.splice(0,n.length)}))}]);const ot=[function(t){let e,{swiper:s,extendParams:i,on:a,emit:o}=t;function n(t,e){const i=s.params.virtual;if(i.cache&&s.virtual.cache[e])return s.virtual.cache[e];const a=i.renderSlide?h(i.renderSlide.call(s,t,e)):h(`<div class="${s.params.slideClass}" data-swiper-slide-index="${e}">${t}</div>`);return a.attr("data-swiper-slide-index")||a.attr("data-swiper-slide-index",e),i.cache&&(s.virtual.cache[e]=a),a}function r(t){const{slidesPerView:e,slidesPerGroup:i,centeredSlides:a}=s.params,{addSlidesBefore:r,addSlidesAfter:l}=s.params.virtual,{from:h,to:p,slides:d,slidesGrid:c,offset:m}=s.virtual;s.params.cssMode||s.updateActiveIndex();const u=s.activeIndex||0;let g,f,x;g=s.rtlTranslate?"right":s.isHorizontal()?"left":"top",a?(f=Math.floor(e/2)+i+l,x=Math.floor(e/2)+i+r):(f=e+(i-1)+l,x=i+r);const b=Math.max((u||0)-x,0),y=Math.min((u||0)+f,d.length-1),v=(s.slidesGrid[b]||0)-(s.slidesGrid[0]||0);function D(){s.updateSlides(),s.updateProgress(),s.updateSlidesClasses(),s.lazy&&s.params.lazy.enabled&&s.lazy.load(),o("virtualUpdate")}if(Object.assign(s.virtual,{from:b,to:y,offset:v,slidesGrid:s.slidesGrid}),h===b&&p===y&&!t)return s.slidesGrid!==c&&v!==m&&s.slides.css(g,`${v}px`),s.updateProgress(),void o("virtualUpdate");if(s.params.virtual.renderExternal)return s.params.virtual.renderExternal.call(s,{offset:v,from:b,to:y,slides:function(){const t=[];for(let e=b;e<=y;e+=1)t.push(d[e]);return t}()}),void(s.params.virtual.renderExternalUpdate?D():o("virtualUpdate"));const w=[],T=[];if(t)s.$wrapperEl.find(`.${s.params.slideClass}`).remove();else for(let t=h;t<=p;t+=1)(t<b||t>y)&&s.$wrapperEl.find(`.${s.params.slideClass}[data-swiper-slide-index="${t}"]`).remove();for(let e=0;e<d.length;e+=1)e>=b&&e<=y&&(void 0===p||t?T.push(e):(e>p&&T.push(e),e<h&&w.push(e)));T.forEach((t=>{s.$wrapperEl.append(n(d[t],t))})),w.sort(((t,e)=>e-t)).forEach((t=>{s.$wrapperEl.prepend(n(d[t],t))})),s.$wrapperEl.children(".swiper-slide").css(g,`${v}px`),D()}i({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}}),s.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]},a("beforeInit",(()=>{s.params.virtual.enabled&&(s.virtual.slides=s.params.virtual.slides,s.classNames.push(`${s.params.containerModifierClass}virtual`),s.params.watchSlidesProgress=!0,s.originalParams.watchSlidesProgress=!0,s.params.initialSlide||r())})),a("setTranslate",(()=>{s.params.virtual.enabled&&(s.params.cssMode&&!s._immediateVirtual?(clearTimeout(e),e=setTimeout((()=>{r()}),100)):r())})),a("init update resize",(()=>{s.params.virtual.enabled&&s.params.cssMode&&x(s.wrapperEl,"--swiper-virtual-size",`${s.virtualSize}px`)})),Object.assign(s.virtual,{appendSlide:function(t){if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&s.virtual.slides.push(t[e]);else s.virtual.slides.push(t);r(!0)},prependSlide:function(t){const e=s.activeIndex;let i=e+1,a=1;if(Array.isArray(t)){for(let e=0;e<t.length;e+=1)t[e]&&s.virtual.slides.unshift(t[e]);i=e+t.length,a=t.length}else s.virtual.slides.unshift(t);if(s.params.virtual.cache){const t=s.virtual.cache,e={};Object.keys(t).forEach((s=>{const i=t[s],o=i.attr("data-swiper-slide-index");o&&i.attr("data-swiper-slide-index",parseInt(o,10)+a),e[parseInt(s,10)+a]=i})),s.virtual.cache=e}r(!0),s.slideTo(i,0)},removeSlide:function(t){if(null==t)return;let e=s.activeIndex;if(Array.isArray(t))for(let i=t.length-1;i>=0;i-=1)s.virtual.slides.splice(t[i],1),s.params.virtual.cache&&delete s.virtual.cache[t[i]],t[i]<e&&(e-=1),e=Math.max(e,0);else s.virtual.slides.splice(t,1),s.params.virtual.cache&&delete s.virtual.cache[t],t<e&&(e-=1),e=Math.max(e,0);r(!0),s.slideTo(e,0)},removeAllSlides:function(){s.virtual.slides=[],s.params.virtual.cache&&(s.virtual.cache={}),r(!0),s.slideTo(0,0)},update:r})},function(t){let{swiper:e,extendParams:s,on:a,emit:n}=t;const r=i(),l=o();function p(t){if(!e.enabled)return;const{rtlTranslate:s}=e;let i=t;i.originalEvent&&(i=i.originalEvent);const a=i.keyCode||i.charCode,o=e.params.keyboard.pageUpDown,h=o&&33===a,p=o&&34===a,d=37===a,c=39===a,m=38===a,u=40===a;if(!e.allowSlideNext&&(e.isHorizontal()&&c||e.isVertical()&&u||p))return!1;if(!e.allowSlidePrev&&(e.isHorizontal()&&d||e.isVertical()&&m||h))return!1;if(!(i.shiftKey||i.altKey||i.ctrlKey||i.metaKey||r.activeElement&&r.activeElement.nodeName&&("input"===r.activeElement.nodeName.toLowerCase()||"textarea"===r.activeElement.nodeName.toLowerCase()))){if(e.params.keyboard.onlyInViewport&&(h||p||d||c||m||u)){let t=!1;if(e.$el.parents(`.${e.params.slideClass}`).length>0&&0===e.$el.parents(`.${e.params.slideActiveClass}`).length)return;const i=e.$el,a=i[0].clientWidth,o=i[0].clientHeight,n=l.innerWidth,r=l.innerHeight,h=e.$el.offset();s&&(h.left-=e.$el[0].scrollLeft);const p=[[h.left,h.top],[h.left+a,h.top],[h.left,h.top+o],[h.left+a,h.top+o]];for(let e=0;e<p.length;e+=1){const s=p[e];if(s[0]>=0&&s[0]<=n&&s[1]>=0&&s[1]<=r){if(0===s[0]&&0===s[1])continue;t=!0}}if(!t)return}e.isHorizontal()?((h||p||d||c)&&axPreventDefault(i),((p||c)&&!s||(h||d)&&s)&&e.slideNext(),((h||d)&&!s||(p||c)&&s)&&e.slidePrev()):((h||p||m||u)&&axPreventDefault(i),(p||u)&&e.slideNext(),(h||m)&&e.slidePrev()),n("keyPress",a)}}function d(){e.keyboard.enabled||(h(r).on("keydown",p),e.keyboard.enabled=!0)}function c(){e.keyboard.enabled&&(h(r).off("keydown",p),e.keyboard.enabled=!1)}e.keyboard={enabled:!1},s({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),a("init",(()=>{e.params.keyboard.enabled&&d()})),a("destroy",(()=>{e.keyboard.enabled&&c()})),Object.assign(e.keyboard,{enable:d,disable:c})},function(t){let{swiper:e,extendParams:s,on:i,emit:a}=t;const n=o();let r;s({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),e.mousewheel={enabled:!1};let l,p=c();const m=[];function u(){e.enabled&&(e.mouseEntered=!0)}function g(){e.enabled&&(e.mouseEntered=!1)}function f(t){return!(e.params.mousewheel.thresholdDelta&&t.delta<e.params.mousewheel.thresholdDelta)&&(!(e.params.mousewheel.thresholdTime&&c()-p<e.params.mousewheel.thresholdTime)&&(t.delta>=6&&c()-p<60||(t.direction<0?e.isEnd&&!e.params.loop||e.animating||(e.slideNext(),a("scroll",t.raw)):e.isBeginning&&!e.params.loop||e.animating||(e.slidePrev(),a("scroll",t.raw)),p=(new n.Date).getTime(),!1)))}function x(t){let s=t,i=!0;if(!e.enabled)return;const o=e.params.mousewheel;e.params.cssMode&&axPreventDefault(s);let n=e.$el;if("container"!==e.params.mousewheel.eventsTarget&&(n=h(e.params.mousewheel.eventsTarget)),!e.mouseEntered&&!n[0].contains(s.target)&&!o.releaseOnEdges)return!0;s.originalEvent&&(s=s.originalEvent);let p=0;const u=e.rtlTranslate?-1:1,g=function(t){let e=0,s=0,i=0,a=0;return"detail"in t&&(s=t.detail),"wheelDelta"in t&&(s=-t.wheelDelta/120),"wheelDeltaY"in t&&(s=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=s,s=0),i=10*e,a=10*s,"deltaY"in t&&(a=t.deltaY),"deltaX"in t&&(i=t.deltaX),t.shiftKey&&!i&&(i=a,a=0),(i||a)&&t.deltaMode&&(1===t.deltaMode?(i*=40,a*=40):(i*=800,a*=800)),i&&!e&&(e=i<1?-1:1),a&&!s&&(s=a<1?-1:1),{spinX:e,spinY:s,pixelX:i,pixelY:a}}(s);if(o.forceToAxis)if(e.isHorizontal()){if(!(Math.abs(g.pixelX)>Math.abs(g.pixelY)))return!0;p=-g.pixelX*u}else{if(!(Math.abs(g.pixelY)>Math.abs(g.pixelX)))return!0;p=-g.pixelY}else p=Math.abs(g.pixelX)>Math.abs(g.pixelY)?-g.pixelX*u:-g.pixelY;if(0===p)return!0;o.invert&&(p=-p);let x=e.getTranslate()+p*o.sensitivity;if(x>=e.minTranslate()&&(x=e.minTranslate()),x<=e.maxTranslate()&&(x=e.maxTranslate()),i=!!e.params.loop||!(x===e.minTranslate()||x===e.maxTranslate()),i&&e.params.nested&&s.stopPropagation(),e.params.freeMode&&e.params.freeMode.enabled){const t={time:c(),delta:Math.abs(p),direction:Math.sign(p)},i=l&&t.time<l.time+500&&t.delta<=l.delta&&t.direction===l.direction;if(!i){l=void 0,e.params.loop&&e.loopFix();let n=e.getTranslate()+p*o.sensitivity;const h=e.isBeginning,c=e.isEnd;if(n>=e.minTranslate()&&(n=e.minTranslate()),n<=e.maxTranslate()&&(n=e.maxTranslate()),e.setTransition(0),e.setTranslate(n),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!h&&e.isBeginning||!c&&e.isEnd)&&e.updateSlidesClasses(),e.params.freeMode.sticky){clearTimeout(r),r=void 0,m.length>=15&&m.shift();const s=m.length?m[m.length-1]:void 0,i=m[0];if(m.push(t),s&&(t.delta>s.delta||t.direction!==s.direction))m.splice(0);else if(m.length>=15&&t.time-i.time<500&&i.delta-t.delta>=1&&t.delta<=6){const s=p>0?.8:.2;l=t,m.splice(0),r=d((()=>{e.slideToClosest(e.params.speed,!0,void 0,s)}),0)}r||(r=d((()=>{l=t,m.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5)}),500))}if(i||a("scroll",s),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),n===e.minTranslate()||n===e.maxTranslate())return!0}}else{const s={time:c(),delta:Math.abs(p),direction:Math.sign(p),raw:t};m.length>=2&&m.shift();const i=m.length?m[m.length-1]:void 0;if(m.push(s),i?(s.direction!==i.direction||s.delta>i.delta||s.time>i.time+150)&&f(s):f(s),function(t){const s=e.params.mousewheel;if(t.direction<0){if(e.isEnd&&!e.params.loop&&s.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&s.releaseOnEdges)return!0;return!1}(s))return!0}return axPreventDefault(s),!1}function b(t){let s=e.$el;"container"!==e.params.mousewheel.eventsTarget&&(s=h(e.params.mousewheel.eventsTarget)),s[t]("mouseenter",u),s[t]("mouseleave",g),s[t]("wheel",x)}function y(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",x),!0):!e.mousewheel.enabled&&(b("on"),e.mousewheel.enabled=!0,!0)}function v(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,x),!0):!!e.mousewheel.enabled&&(b("off"),e.mousewheel.enabled=!1,!0)}i("init",(()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&v(),e.params.mousewheel.enabled&&y()})),i("destroy",(()=>{e.params.cssMode&&y(),e.mousewheel.enabled&&v()})),Object.assign(e.mousewheel,{enable:y,disable:v})},function(t){let{swiper:e,extendParams:s,on:i,emit:a}=t;function o(t){let s;return t&&(s=h(t),e.params.uniqueNavElements&&"string"==typeof t&&s.length>1&&1===e.$el.find(t).length&&(s=e.$el.find(t))),s}function n(t,s){const i=e.params.navigation;t&&t.length>0&&(t[s?"addClass":"removeClass"](i.disabledClass),t[0]&&"BUTTON"===t[0].tagName&&(t[0].disabled=s),e.params.watchOverflow&&e.enabled&&t[e.isLocked?"addClass":"removeClass"](i.lockClass))}function r(){if(e.params.loop)return;const{$nextEl:t,$prevEl:s}=e.navigation;n(s,e.isBeginning&&!e.params.rewind),n(t,e.isEnd&&!e.params.rewind)}function l(t){axPreventDefault(t),(!e.isBeginning||e.params.loop||e.params.rewind)&&e.slidePrev()}function p(t){axPreventDefault(t),(!e.isEnd||e.params.loop||e.params.rewind)&&e.slideNext()}function d(){const t=e.params.navigation;if(e.params.navigation=X(e,e.originalParams.navigation,e.params.navigation,{nextEl:"ax-next",prevEl:"ax-prev"}),!t.nextEl&&!t.prevEl)return;const s=o(t.nextEl),i=o(t.prevEl);s&&s.length>0&&s.on("click",p),i&&i.length>0&&i.on("click",l),Object.assign(e.navigation,{$nextEl:s,nextEl:s&&s[0],$prevEl:i,prevEl:i&&i[0]}),e.enabled||(s&&s.addClass(t.lockClass),i&&i.addClass(t.lockClass))}function c(){const{$nextEl:t,$prevEl:s}=e.navigation;t&&t.length&&(t.off("click",p),t.removeClass(e.params.navigation.disabledClass)),s&&s.length&&(s.off("click",l),s.removeClass(e.params.navigation.disabledClass))}s({navigation:{nextEl:".ax-next",prevEl:".ax-prev",hideOnClick:!1,disabledClass:"ax-disabled",hiddenClass:"ax-hidden",lockClass:"ax-lock"}}),e.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},i("init",(()=>{d(),r()})),i("toEdge fromEdge lock unlock",(()=>{r()})),i("destroy",(()=>{c()})),i("enable disable",(()=>{const{$nextEl:t,$prevEl:s}=e.navigation;t&&t[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),s&&s[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)})),i("click",((t,s)=>{const{$nextEl:i,$prevEl:o}=e.navigation,n=s.target;if(e.params.navigation.hideOnClick&&!h(n).is(o)&&!h(n).is(i)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===n||e.pagination.el.contains(n)))return;let t;i?t=i.hasClass(e.params.navigation.hiddenClass):o&&(t=o.hasClass(e.params.navigation.hiddenClass)),a(!0===t?"navigationShow":"navigationHide"),i&&i.toggleClass(e.params.navigation.hiddenClass),o&&o.toggleClass(e.params.navigation.hiddenClass)}})),Object.assign(e.navigation,{update:r,init:d,destroy:c})},function(t){let{swiper:e,extendParams:s,on:i,emit:a}=t;const o="ax-pages";let n;s({pagination:{el:"."+o,bulletElement:"i",clickable:!0,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`}}),e.pagination={el:null,$el:null,bullets:[]};let r=0;function l(){return!e.params.pagination.el||!e.pagination.el||!e.pagination.$el||0===e.pagination.$el.length}function p(t,s){const{bulletActiveClass:i}=e.params.pagination;t[s]().addClass(`${i}-${s}`)[s]().addClass(`${i}-${s}-${s}`)}function d(){const t=e.rtl,s=e.params.pagination;if(l())return;const i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,o=e.pagination.$el;let d;const c=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(d=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),d>i-1-2*e.loopedSlides&&(d-=i-2*e.loopedSlides),d>c-1&&(d-=c),d<0&&"bullets"!==e.params.paginationType&&(d=c+d)):d=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===s.type&&e.pagination.bullets&&e.pagination.bullets.length>0){const i=e.pagination.bullets;let a,l,c;if(s.dynamicBullets&&(n=i.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),o.css(e.isHorizontal()?"width":"height",n*(s.dynamicMainBullets+4)+"px"),s.dynamicMainBullets>1&&void 0!==e.previousIndex&&(r+=d-(e.previousIndex-e.loopedSlides||0),r>s.dynamicMainBullets-1?r=s.dynamicMainBullets-1:r<0&&(r=0)),a=Math.max(d-r,0),l=a+(Math.min(i.length,s.dynamicMainBullets)-1),c=(l+a)/2),i.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((t=>`${s.bulletActiveClass}${t}`)).join(" ")),o.length>1)i.each((t=>{const e=h(t),i=e.index();i===d&&e.addClass(s.bulletActiveClass),s.dynamicBullets&&(i>=a&&i<=l&&e.addClass(`${s.bulletActiveClass}-main`),i===a&&p(e,"prev"),i===l&&p(e,"next"))}));else{const t=i.eq(d),o=t.index();if(t.addClass(s.bulletActiveClass),s.dynamicBullets){const t=i.eq(a),n=i.eq(l);for(let t=a;t<=l;t+=1)i.eq(t).addClass(`${s.bulletActiveClass}-main`);if(e.params.loop)if(o>=i.length){for(let t=s.dynamicMainBullets;t>=0;t-=1)i.eq(i.length-t).addClass(`${s.bulletActiveClass}-main`);i.eq(i.length-s.dynamicMainBullets-1).addClass(`${s.bulletActiveClass}-prev`)}else p(t,"prev"),p(n,"next");else p(t,"prev"),p(n,"next")}}if(s.dynamicBullets){const a=Math.min(i.length,s.dynamicMainBullets+4),o=(n*a-n)/2-c*n,r=t?"right":"left";i.css(e.isHorizontal()?r:"top",`${o}px`)}}if("fraction"===s.type&&(o.find(_(s.currentClass)).text(s.formatFractionCurrent(d+1)),o.find(_(s.totalClass)).text(s.formatFractionTotal(c))),"progressbar"===s.type){let t;t=s.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";const i=(d+1)/c;let a=1,n=1;"horizontal"===t?a=i:n=i,o.find(_(s.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${a}) scaleY(${n})`).transition(e.params.speed)}"custom"===s.type&&s.renderCustom?(o.html(s.renderCustom(e,d+1,c)),a("paginationRender",o[0])):a("paginationUpdate",o[0]),e.params.watchOverflow&&e.enabled&&o[e.isLocked?"addClass":"removeClass"](s.lockClass)}function c(){const t=e.params.pagination;if(l())return;const s=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el;let o="";if("bullets"===t.type){let a=e.params.loop?Math.ceil((s-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&a>s&&(a=s);for(let s=0;s<a;s+=1)t.renderBullet?o+=t.renderBullet.call(e,s,t.bulletClass):o+=`<${t.bulletElement} class="${t.bulletClass}"></${t.bulletElement}>`;i.html(o),e.pagination.bullets=i.find(_(t.bulletClass))}"fraction"===t.type&&(o=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`,i.html(o)),"progressbar"===t.type&&(o=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`,i.html(o)),"custom"!==t.type&&a("paginationRender",e.pagination.$el[0])}function m(){e.params.pagination=X(e,e.originalParams.pagination,e.params.pagination,{el:"ax-pages"});const t=e.params.pagination;if(!t.el)return;let s=h(t.el);0!==s.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&s.length>1&&(s=e.$el.find(t.el),s.length>1&&(s=s.filter((t=>h(t).parents(".swiper")[0]===e.el)))),"bullets"===t.type&&t.clickable&&s.addClass(t.clickableClass),s.addClass(t.modifierClass+t.type),s.addClass(e.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(s.addClass(`${t.modifierClass}${t.type}-dynamic`),r=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&s.addClass(t.progressbarOppositeClass),t.clickable&&s.on("click",_(t.bulletClass),(function(t){axPreventDefault(t);let s=h(this).index()*e.params.slidesPerGroup;e.params.loop&&(s+=e.loopedSlides),e.slideTo(s)})),Object.assign(e.pagination,{$el:s,el:s[0]}),e.enabled||s.addClass(t.lockClass))}function u(){const t=e.params.pagination;if(l())return;const s=e.pagination.$el;s.removeClass(t.hiddenClass),s.removeClass(t.modifierClass+t.type),s.removeClass(e.isHorizontal()?t.horizontalClass:t.verticalClass),e.pagination.bullets&&e.pagination.bullets.removeClass&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&s.off("click",_(t.bulletClass))}i("init",(()=>{m(),c(),d()})),i("activeIndexChange",(()=>{(e.params.loop||void 0===e.snapIndex)&&d()})),i("snapIndexChange",(()=>{e.params.loop||d()})),i("slidesLengthChange",(()=>{e.params.loop&&(c(),d())})),i("snapGridLengthChange",(()=>{e.params.loop||(c(),d())})),i("destroy",(()=>{u()})),i("enable disable",(()=>{const{$el:t}=e.pagination;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)})),i("lock unlock",(()=>{d()})),i("click",((t,s)=>{const i=s.target,{$el:o}=e.pagination;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&o.length>0&&!h(i).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;const t=o.hasClass(e.params.pagination.hiddenClass);a(!0===t?"paginationShow":"paginationHide"),o.toggleClass(e.params.pagination.hiddenClass)}})),Object.assign(e.pagination,{render:c,update:d,init:m,destroy:u})},function(t){let{swiper:e,extendParams:s,on:a,emit:o}=t;const n=i();let r,l,p,c,m=!1,u=null,g=null;function f(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:t,rtlTranslate:s,progress:i}=e,{$dragEl:a,$el:o}=t,n=e.params.scrollbar;let r=l,h=(p-l)*i;s?(h=-h,h>0?(r=l-h,h=0):-h+l>p&&(r=p+h)):h<0?(r=l+h,h=0):h+l>p&&(r=p-h),e.isHorizontal()?(a.transform(`translate3d(${h}px, 0, 0)`),a[0].style.width=`${r}px`):(a.transform(`translate3d(0px, ${h}px, 0)`),a[0].style.height=`${r}px`),n.hide&&(clearTimeout(u),o[0].style.opacity=1,u=setTimeout((()=>{o[0].style.opacity=0,o.transition(400)}),1e3))}function x(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:t}=e,{$dragEl:s,$el:i}=t;s[0].style.width="",s[0].style.height="",p=e.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,c=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),l="auto"===e.params.scrollbar.dragSize?p*c:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?s[0].style.width=`${l}px`:s[0].style.height=`${l}px`,i[0].style.display=c>=1?"none":"",e.params.scrollbar.hide&&(i[0].style.opacity=0),e.params.watchOverflow&&e.enabled&&t.$el[e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}function b(t){return e.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientX:t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientY:t.clientY}function y(t){const{scrollbar:s,rtlTranslate:i}=e,{$el:a}=s;let o;o=(b(t)-a.offset()[e.isHorizontal()?"left":"top"]-(null!==r?r:l/2))/(p-l),o=Math.max(Math.min(o,1),0),i&&(o=1-o);const n=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*o;e.updateProgress(n),e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}function v(t){const s=e.params.scrollbar,{scrollbar:i,$wrapperEl:a}=e,{$el:n,$dragEl:l}=i;m=!0,r=t.target===l[0]||t.target===l?b(t)-t.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,axPreventDefault(t),t.stopPropagation(),a.transition(100),l.transition(100),y(t),clearTimeout(g),n.transition(0),s.hide&&n.css("opacity",1),e.params.cssMode&&e.$wrapperEl.css("scroll-snap-type","none"),o("scrollbarDragStart",t)}function D(t){const{scrollbar:s,$wrapperEl:i}=e,{$el:a,$dragEl:n}=s;m&&(axPreventDefault(t),y(t),i.transition(0),a.transition(0),n.transition(0),o("scrollbarDragMove",t))}function w(t){const s=e.params.scrollbar,{scrollbar:i,$wrapperEl:a}=e,{$el:n}=i;m&&(m=!1,e.params.cssMode&&(e.$wrapperEl.css("scroll-snap-type",""),a.transition("")),s.hide&&(clearTimeout(g),g=d((()=>{n.css("opacity",0),n.transition(400)}),1e3)),o("scrollbarDragEnd",t),s.snapOnRelease&&e.slideToClosest())}function T(t){const{scrollbar:s,touchEventsTouch:i,touchEventsDesktop:a,params:o,support:r}=e,l=s.$el[0],h=!(!r.passiveListener||!o.passiveListeners)&&{passive:!1,capture:!1},p=!(!r.passiveListener||!o.passiveListeners)&&{passive:!0,capture:!1};if(!l)return;const d="on"===t?"addEventListener":"removeEventListener";r.touch?(l[d](i.start,v,h),l[d](i.move,D,h),l[d](i.end,w,p)):(l[d](a.start,v,h),n[d](a.move,D,h),n[d](a.end,w,p))}function S(){const{scrollbar:t,$el:s}=e;e.params.scrollbar=X(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"ax-scrollbar"});const i=e.params.scrollbar;if(!i.el)return;let a=h(i.el);e.params.uniqueNavElements&&"string"==typeof i.el&&a.length>1&&1===s.find(i.el).length&&(a=s.find(i.el));let o=a.find(`.${e.params.scrollbar.dragClass}`);0===o.length&&(o=h(`<div class="${e.params.scrollbar.dragClass}"></div>`),a.append(o)),Object.assign(t,{$el:a,el:a[0],$dragEl:o,dragEl:o[0]}),i.draggable&&e.params.scrollbar.el&&T("on"),a&&a[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)}function E(){e.params.scrollbar.el&&T("off")}s({scrollbar:{el:".ax-scrollbar",dragSize:"auto",hide:!0,draggable:!0,snapOnRelease:!0,lockClass:"ax-scrollbar-lock",dragClass:"ax-scrollbar-drag"}}),e.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null},a("init",(()=>{S(),x(),f()})),a("update resize observerUpdate lock unlock",(()=>{x()})),a("setTranslate",(()=>{f()})),a("setTransition",((t,s)=>{!function(t){e.params.scrollbar.el&&e.scrollbar.el&&e.scrollbar.$dragEl.transition(t)}(s)})),a("enable disable",(()=>{const{$el:t}=e.scrollbar;t&&t[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)})),a("destroy",(()=>{E()})),Object.assign(e.scrollbar,{updateSize:x,setTranslate:f,init:S,destroy:E})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({parallax:{enabled:!1}});const a=(t,s)=>{const{rtl:i}=e,a=h(t),o=i?-1:1,n=a.attr("data-swiper-parallax")||"0";let r=a.attr("data-swiper-parallax-x"),l=a.attr("data-swiper-parallax-y");const p=a.attr("data-swiper-parallax-scale"),d=a.attr("data-swiper-parallax-opacity");if(r||l?(r=r||"0",l=l||"0"):e.isHorizontal()?(r=n,l="0"):(l=n,r="0"),r=r.indexOf("%")>=0?parseInt(r,10)*s*o+"%":r*s*o+"px",l=l.indexOf("%")>=0?parseInt(l,10)*s+"%":l*s+"px",null!=d){const t=d-(d-1)*(1-Math.abs(s));a[0].style.opacity=t}if(null==p)a.transform(`translate3d(${r}, ${l}, 0px)`);else{const t=p-(p-1)*(1-Math.abs(s));a.transform(`translate3d(${r}, ${l}, 0px) scale(${t})`)}},o=()=>{const{$el:t,slides:s,progress:i,snapGrid:o}=e;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((t=>{a(t,i)})),s.each(((t,s)=>{let n=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(n+=Math.ceil(s/2)-i*(o.length-1)),n=Math.min(Math.max(n,-1),1),h(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((t=>{a(t,n)}))}))};i("beforeInit",(()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)})),i("init",(()=>{e.params.parallax.enabled&&o()})),i("setTranslate",(()=>{e.params.parallax.enabled&&o()})),i("setTransition",((t,s)=>{e.params.parallax.enabled&&function(t){void 0===t&&(t=e.params.speed);const{$el:s}=e;s.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((e=>{const s=h(e);let i=parseInt(s.attr("data-swiper-parallax-duration"),10)||t;0===t&&(i=0),s.transition(i)}))}(s)}))},function(t){let{swiper:e,extendParams:s,on:i,emit:a}=t;const n=o();s({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"ax-zoom",zoomedSlideClass:"ax-slide-zoomed"}}),e.zoom={enabled:!1};let r,l,p,d=1,c=!1;const u={$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},g={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},f={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let x=1;function b(t){if(t.targetTouches.length<2)return 1;const e=t.targetTouches[0].pageX,s=t.targetTouches[0].pageY,i=t.targetTouches[1].pageX,a=t.targetTouches[1].pageY;return Math.sqrt((i-e)**2+(a-s)**2)}function y(t){const s=e.support,i=e.params.zoom;if(l=!1,p=!1,!s.gestures){if("touchstart"!==t.type||"touchstart"===t.type&&t.targetTouches.length<2)return;l=!0,u.scaleStart=b(t)}u.$slideEl&&u.$slideEl.length||(u.$slideEl=h(t.target).closest(`.${e.params.slideClass}`),0===u.$slideEl.length&&(u.$slideEl=e.slides.eq(e.activeIndex)),u.$imageEl=u.$slideEl.find(`.${i.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),u.$imageWrapEl=u.$imageEl.parent(`.${i.containerClass}`),u.maxRatio=u.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==u.$imageWrapEl.length)?(u.$imageEl&&u.$imageEl.transition(0),c=!0):u.$imageEl=void 0}function v(t){const s=e.support,i=e.params.zoom,a=e.zoom;if(!s.gestures){if("touchmove"!==t.type||"touchmove"===t.type&&t.targetTouches.length<2)return;p=!0,u.scaleMove=b(t)}u.$imageEl&&0!==u.$imageEl.length?(s.gestures?a.scale=t.scale*d:a.scale=u.scaleMove/u.scaleStart*d,a.scale>u.maxRatio&&(a.scale=u.maxRatio-1+(a.scale-u.maxRatio+1)**.5),a.scale<i.minRatio&&(a.scale=i.minRatio+1-(i.minRatio-a.scale+1)**.5),u.$imageEl.transform(`translate3d(0,0,0) scale(${a.scale})`)):"gesturechange"===t.type&&y(t)}function D(t){const s=e.device,i=e.support,a=e.params.zoom,o=e.zoom;if(!i.gestures){if(!l||!p)return;if("touchend"!==t.type||"touchend"===t.type&&t.changedTouches.length<2&&!s.android)return;l=!1,p=!1}u.$imageEl&&0!==u.$imageEl.length&&(o.scale=Math.max(Math.min(o.scale,u.maxRatio),a.minRatio),u.$imageEl.transition(e.params.speed).transform(`translate3d(0,0,0) scale(${o.scale})`),d=o.scale,c=!1,1===o.scale&&(u.$slideEl=void 0))}function w(t){const s=e.zoom;if(!u.$imageEl||0===u.$imageEl.length)return;if(e.allowClick=!1,!g.isTouched||!u.$slideEl)return;g.isMoved||(g.width=u.$imageEl[0].offsetWidth,g.height=u.$imageEl[0].offsetHeight,g.startX=m(u.$imageWrapEl[0],"x")||0,g.startY=m(u.$imageWrapEl[0],"y")||0,u.slideWidth=u.$slideEl[0].offsetWidth,u.slideHeight=u.$slideEl[0].offsetHeight,u.$imageWrapEl.transition(0));const i=g.width*s.scale,a=g.height*s.scale;if(!(i<u.slideWidth&&a<u.slideHeight)){if(g.minX=Math.min(u.slideWidth/2-i/2,0),g.maxX=-g.minX,g.minY=Math.min(u.slideHeight/2-a/2,0),g.maxY=-g.minY,g.touchesCurrent.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,g.touchesCurrent.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!g.isMoved&&!c){if(e.isHorizontal()&&(Math.floor(g.minX)===Math.floor(g.startX)&&g.touchesCurrent.x<g.touchesStart.x||Math.floor(g.maxX)===Math.floor(g.startX)&&g.touchesCurrent.x>g.touchesStart.x))return void(g.isTouched=!1);if(!e.isHorizontal()&&(Math.floor(g.minY)===Math.floor(g.startY)&&g.touchesCurrent.y<g.touchesStart.y||Math.floor(g.maxY)===Math.floor(g.startY)&&g.touchesCurrent.y>g.touchesStart.y))return void(g.isTouched=!1)}t.cancelable&&axPreventDefault(t),t.stopPropagation(),g.isMoved=!0,g.currentX=g.touchesCurrent.x-g.touchesStart.x+g.startX,g.currentY=g.touchesCurrent.y-g.touchesStart.y+g.startY,g.currentX<g.minX&&(g.currentX=g.minX+1-(g.minX-g.currentX+1)**.8),g.currentX>g.maxX&&(g.currentX=g.maxX-1+(g.currentX-g.maxX+1)**.8),g.currentY<g.minY&&(g.currentY=g.minY+1-(g.minY-g.currentY+1)**.8),g.currentY>g.maxY&&(g.currentY=g.maxY-1+(g.currentY-g.maxY+1)**.8),f.prevPositionX||(f.prevPositionX=g.touchesCurrent.x),f.prevPositionY||(f.prevPositionY=g.touchesCurrent.y),f.prevTime||(f.prevTime=Date.now()),f.x=(g.touchesCurrent.x-f.prevPositionX)/(Date.now()-f.prevTime)/2,f.y=(g.touchesCurrent.y-f.prevPositionY)/(Date.now()-f.prevTime)/2,Math.abs(g.touchesCurrent.x-f.prevPositionX)<2&&(f.x=0),Math.abs(g.touchesCurrent.y-f.prevPositionY)<2&&(f.y=0),f.prevPositionX=g.touchesCurrent.x,f.prevPositionY=g.touchesCurrent.y,f.prevTime=Date.now(),u.$imageWrapEl.transform(`translate3d(${g.currentX}px, ${g.currentY}px,0)`)}}function T(){const t=e.zoom;u.$slideEl&&e.previousIndex!==e.activeIndex&&(u.$imageEl&&u.$imageEl.transform("translate3d(0,0,0) scale(1)"),u.$imageWrapEl&&u.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,d=1,u.$slideEl=void 0,u.$imageEl=void 0,u.$imageWrapEl=void 0)}function S(t){const s=e.zoom,i=e.params.zoom;if(u.$slideEl||(t&&t.target&&(u.$slideEl=h(t.target).closest(`.${e.params.slideClass}`)),u.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?u.$slideEl=e.$wrapperEl.children(`.${e.params.slideActiveClass}`):u.$slideEl=e.slides.eq(e.activeIndex)),u.$imageEl=u.$slideEl.find(`.${i.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),u.$imageWrapEl=u.$imageEl.parent(`.${i.containerClass}`)),!u.$imageEl||0===u.$imageEl.length||!u.$imageWrapEl||0===u.$imageWrapEl.length)return;let a,o,r,l,p,c,m,f,x,b,y,v,D,w,T,S,E,A;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),u.$slideEl.addClass(`${i.zoomedSlideClass}`),void 0===g.touchesStart.x&&t?(a="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,o="touchend"===t.type?t.changedTouches[0].pageY:t.pageY):(a=g.touchesStart.x,o=g.touchesStart.y),s.scale=u.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,d=u.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,t?(E=u.$slideEl[0].offsetWidth,A=u.$slideEl[0].offsetHeight,r=u.$slideEl.offset().left+n.scrollX,l=u.$slideEl.offset().top+n.scrollY,p=r+E/2-a,c=l+A/2-o,x=u.$imageEl[0].offsetWidth,b=u.$imageEl[0].offsetHeight,y=x*s.scale,v=b*s.scale,D=Math.min(E/2-y/2,0),w=Math.min(A/2-v/2,0),T=-D,S=-w,m=p*s.scale,f=c*s.scale,m<D&&(m=D),m>T&&(m=T),f<w&&(f=w),f>S&&(f=S)):(m=0,f=0),u.$imageWrapEl.transition(300).transform(`translate3d(${m}px, ${f}px,0)`),u.$imageEl.transition(300).transform(`translate3d(0,0,0) scale(${s.scale})`)}function E(){const t=e.zoom,s=e.params.zoom;u.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?u.$slideEl=e.$wrapperEl.children(`.${e.params.slideActiveClass}`):u.$slideEl=e.slides.eq(e.activeIndex),u.$imageEl=u.$slideEl.find(`.${s.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),u.$imageWrapEl=u.$imageEl.parent(`.${s.containerClass}`)),u.$imageEl&&0!==u.$imageEl.length&&u.$imageWrapEl&&0!==u.$imageWrapEl.length&&(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),t.scale=1,d=1,u.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),u.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),u.$slideEl.removeClass(`${s.zoomedSlideClass}`),u.$slideEl=void 0)}function A(t){const s=e.zoom;s.scale&&1!==s.scale?E():S(t)}function C(){const t=e.support;return{passiveListener:!("touchstart"!==e.touchEvents.start||!t.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},activeListenerWithCapture:!t.passiveListener||{passive:!1,capture:!0}}}function I(){return`.${e.params.slideClass}`}function k(t){const{passiveListener:s}=C(),i=I();e.$wrapperEl[t]("gesturestart",i,y,s),e.$wrapperEl[t]("gesturechange",i,v,s),e.$wrapperEl[t]("gestureend",i,D,s)}function M(){r||(r=!0,k("on"))}function L(){r&&(r=!1,k("off"))}function P(){const t=e.zoom;if(t.enabled)return;t.enabled=!0;const s=e.support,{passiveListener:i,activeListenerWithCapture:a}=C(),o=I();s.gestures?(e.$wrapperEl.on(e.touchEvents.start,M,i),e.$wrapperEl.on(e.touchEvents.end,L,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,o,y,i),e.$wrapperEl.on(e.touchEvents.move,o,v,a),e.$wrapperEl.on(e.touchEvents.end,o,D,i),e.touchEvents.cancel&&e.$wrapperEl.on(e.touchEvents.cancel,o,D,i)),e.$wrapperEl.on(e.touchEvents.move,`.${e.params.zoom.containerClass}`,w,a)}function $(){const t=e.zoom;if(!t.enabled)return;const s=e.support;t.enabled=!1;const{passiveListener:i,activeListenerWithCapture:a}=C(),o=I();s.gestures?(e.$wrapperEl.off(e.touchEvents.start,M,i),e.$wrapperEl.off(e.touchEvents.end,L,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,o,y,i),e.$wrapperEl.off(e.touchEvents.move,o,v,a),e.$wrapperEl.off(e.touchEvents.end,o,D,i),e.touchEvents.cancel&&e.$wrapperEl.off(e.touchEvents.cancel,o,D,i)),e.$wrapperEl.off(e.touchEvents.move,`.${e.params.zoom.containerClass}`,w,a)}Object.defineProperty(e.zoom,"scale",{get:()=>x,set(t){if(x!==t){const e=u.$imageEl?u.$imageEl[0]:void 0,s=u.$slideEl?u.$slideEl[0]:void 0;a("zoomChange",t,e,s)}x=t}}),i("init",(()=>{e.params.zoom.enabled&&P()})),i("destroy",(()=>{$()})),i("touchStart",((t,s)=>{e.zoom.enabled&&function(t){const s=e.device;u.$imageEl&&0!==u.$imageEl.length&&(g.isTouched||(s.android&&t.cancelable&&axPreventDefault(t),g.isTouched=!0,g.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,g.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))}(s)})),i("touchEnd",((t,s)=>{e.zoom.enabled&&function(){const t=e.zoom;if(!u.$imageEl||0===u.$imageEl.length)return;if(!g.isTouched||!g.isMoved)return g.isTouched=!1,void(g.isMoved=!1);g.isTouched=!1,g.isMoved=!1;let s=300,i=300;const a=f.x*s,o=g.currentX+a,n=f.y*i,r=g.currentY+n;0!==f.x&&(s=Math.abs((o-g.currentX)/f.x)),0!==f.y&&(i=Math.abs((r-g.currentY)/f.y));const l=Math.max(s,i);g.currentX=o,g.currentY=r;const h=g.width*t.scale,p=g.height*t.scale;g.minX=Math.min(u.slideWidth/2-h/2,0),g.maxX=-g.minX,g.minY=Math.min(u.slideHeight/2-p/2,0),g.maxY=-g.minY,g.currentX=Math.max(Math.min(g.currentX,g.maxX),g.minX),g.currentY=Math.max(Math.min(g.currentY,g.maxY),g.minY),u.$imageWrapEl.transition(l).transform(`translate3d(${g.currentX}px, ${g.currentY}px,0)`)}()})),i("doubleTap",((t,s)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&A(s)})),i("transitionEnd",(()=>{e.zoom.enabled&&e.params.zoom.enabled&&T()})),i("slideChange",(()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&T()})),Object.assign(e.zoom,{enable:P,disable:$,in:S,out:E,toggle:A})},function(t){let{swiper:e,extendParams:s,on:i,emit:a}=t;s({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"ax-lazy",loadingClass:"ax-lazy-loading",loadedClass:"ax-lazy-loaded",preloaderClass:"ax-loading"}}),e.lazy={};let n=!1,r=!1;function l(t,s){void 0===s&&(s=!0);const i=e.params.lazy;if(void 0===t)return;if(0===e.slides.length)return;const o=e.virtual&&e.params.virtual.enabled?e.$wrapperEl.children(`.${e.params.slideClass}[data-swiper-slide-index="${t}"]`):e.slides.eq(t),n=o.find(`.${i.elementClass}:not(.${i.loadedClass}):not(.${i.loadingClass})`);!o.hasClass(i.elementClass)||o.hasClass(i.loadedClass)||o.hasClass(i.loadingClass)||n.push(o[0]),0!==n.length&&n.each((t=>{const n=h(t);n.addClass(i.loadingClass);const r=n.attr("data-background"),p=n.attr("data-src"),d=n.attr("data-srcset"),c=n.attr("data-sizes"),m=n.parent("picture");e.loadImage(n[0],p||r,d,c,!1,(()=>{if(null!=e&&e&&(!e||e.params)&&!e.destroyed){if(r?(n.css("background-image",`url("${r}")`),n.removeAttr("data-background")):(d&&(n.attr("srcset",d),n.removeAttr("data-srcset")),c&&(n.attr("sizes",c),n.removeAttr("data-sizes")),m.length&&m.children("source").each((t=>{const e=h(t);e.attr("data-srcset")&&(e.attr("srcset",e.attr("data-srcset")),e.removeAttr("data-srcset"))})),p&&(n.attr("src",p),n.removeAttr("data-src"))),n.addClass(i.loadedClass).removeClass(i.loadingClass),o.find(`.${i.preloaderClass}`).remove(),e.params.loop&&s){const t=o.attr("data-swiper-slide-index");if(o.hasClass(e.params.slideDuplicateClass)){l(e.$wrapperEl.children(`[data-swiper-slide-index="${t}"]:not(.${e.params.slideDuplicateClass})`).index(),!1)}else{l(e.$wrapperEl.children(`.${e.params.slideDuplicateClass}[data-swiper-slide-index="${t}"]`).index(),!1)}}a("lazyImageReady",o[0],n[0]),e.params.autoHeight&&e.updateAutoHeight()}})),a("lazyImageLoad",o[0],n[0])}))}function p(){const{$wrapperEl:t,params:s,slides:i,activeIndex:a}=e,o=e.virtual&&s.virtual.enabled,n=s.lazy;let p=s.slidesPerView;function d(e){if(o){if(t.children(`.${s.slideClass}[data-swiper-slide-index="${e}"]`).length)return!0}else if(i[e])return!0;return!1}function c(t){return o?h(t).attr("data-swiper-slide-index"):h(t).index()}if("auto"===p&&(p=0),r||(r=!0),e.params.watchSlidesProgress)t.children(`.${s.slideVisibleClass}`).each((t=>{l(o?h(t).attr("data-swiper-slide-index"):h(t).index())}));else if(p>1)for(let t=a;t<a+p;t+=1)d(t)&&l(t);else l(a);if(n.loadPrevNext)if(p>1||n.loadPrevNextAmount&&n.loadPrevNextAmount>1){const t=n.loadPrevNextAmount,e=p,s=Math.min(a+e+Math.max(t,e),i.length),o=Math.max(a-Math.max(e,t),0);for(let t=a+p;t<s;t+=1)d(t)&&l(t);for(let t=o;t<a;t+=1)d(t)&&l(t)}else{const e=t.children(`.${s.slideNextClass}`);e.length>0&&l(c(e));const i=t.children(`.${s.slidePrevClass}`);i.length>0&&l(c(i))}}function d(){const t=o();if(!e||e.destroyed)return;const s=e.params.lazy.scrollingElement?h(e.params.lazy.scrollingElement):h(t),i=s[0]===t,a=i?t.innerWidth:s[0].offsetWidth,r=i?t.innerHeight:s[0].offsetHeight,l=e.$el.offset(),{rtlTranslate:c}=e;let m=!1;c&&(l.left-=e.$el[0].scrollLeft);const u=[[l.left,l.top],[l.left+e.width,l.top],[l.left,l.top+e.height],[l.left+e.width,l.top+e.height]];for(let t=0;t<u.length;t+=1){const e=u[t];if(e[0]>=0&&e[0]<=a&&e[1]>=0&&e[1]<=r){if(0===e[0]&&0===e[1])continue;m=!0}}const g=!("touchstart"!==e.touchEvents.start||!e.support.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};m?(p(),s.off("scroll",d,g)):n||(n=!0,s.on("scroll",d,g))}i("beforeInit",(()=>{e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)})),i("init",(()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?d():p())})),i("scroll",(()=>{e.params.freeMode&&e.params.freeMode.enabled&&!e.params.freeMode.sticky&&p()})),i("scrollbarDragMove resize _freeModeNoMomentumRelease",(()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?d():p())})),i("transitionStart",(()=>{e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!r)&&(e.params.lazy.checkInView?d():p())})),i("transitionEnd",(()=>{e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&(e.params.lazy.checkInView?d():p())})),i("slideChange",(()=>{const{lazy:t,cssMode:s,watchSlidesProgress:i,touchReleaseOnEdges:a,resistanceRatio:o}=e.params;t.enabled&&(s||i&&(a||0===o))&&p()})),Object.assign(e.lazy,{load:p,loadInSlide:l})},function(t){let{swiper:e,extendParams:s,on:i}=t;function a(t,e){const s=function(){let t,e,s;return(i,a)=>{for(e=-1,t=i.length;t-e>1;)s=t+e>>1,i[s]<=a?e=s:t=s;return t}}();let i,a;return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(a=s(this.x,t),i=a-1,(t-this.x[i])*(this.y[a]-this.y[i])/(this.x[a]-this.x[i])+this.y[i]):0},this}function o(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}s({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0},i("beforeInit",(()=>{e.controller.control=e.params.controller.control})),i("update",(()=>{o()})),i("resize",(()=>{o()})),i("observerUpdate",(()=>{o()})),i("setTranslate",((t,s,i)=>{e.controller.control&&e.controller.setTranslate(s,i)})),i("setTransition",((t,s,i)=>{e.controller.control&&e.controller.setTransition(s,i)})),Object.assign(e.controller,{setTranslate:function(t,s){const i=e.controller.control;let o,n;const r=e.constructor;function l(t){const s=e.rtlTranslate?-e.translate:e.translate;"slide"===e.params.controller.by&&(!function(t){e.controller.spline||(e.controller.spline=e.params.loop?new a(e.slidesGrid,t.slidesGrid):new a(e.snapGrid,t.snapGrid))}(t),n=-e.controller.spline.interpolate(-s)),n&&"container"!==e.params.controller.by||(o=(t.maxTranslate()-t.minTranslate())/(e.maxTranslate()-e.minTranslate()),n=(s-e.minTranslate())*o+t.minTranslate()),e.params.controller.inverse&&(n=t.maxTranslate()-n),t.updateProgress(n),t.setTranslate(n,e),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(i))for(let t=0;t<i.length;t+=1)i[t]!==s&&i[t]instanceof r&&l(i[t]);else i instanceof r&&s!==i&&l(i)},setTransition:function(t,s){const i=e.constructor,a=e.controller.control;let o;function n(s){s.setTransition(t,e),0!==t&&(s.transitionStart(),s.params.autoHeight&&d((()=>{s.updateAutoHeight()})),s.$wrapperEl.transitionEnd((()=>{a&&(s.params.loop&&"slide"===e.params.controller.by&&s.loopFix(),s.transitionEnd())})))}if(Array.isArray(a))for(o=0;o<a.length;o+=1)a[o]!==s&&a[o]instanceof i&&n(a[o]);else a instanceof i&&s!==a&&n(a)}})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({a11y:{enabled:!0,notificationClass:"ax-notification",prevSlideMessage:"上一个",nextSlideMessage:"下一个",firstSlideMessage:"这是第一个",lastSlideMessage:"这是最后一个",paginationBulletMessage:"跳转到第{{index}}页",slideLabelMessage:"第{{index}}/{{slidesLength}}页",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}});let a=null;function o(t){const e=a;0!==e.length&&(e.html(""),e.html(t))}function n(t){t.attr("tabIndex","0")}function r(t){t.attr("tabIndex","-1")}function l(t,e){t.attr("role",e)}function p(t,e){t.attr("aria-roledescription",e)}function d(t,e){t.attr("aria-label",e)}function c(t){t.attr("aria-disabled",!0)}function m(t){t.attr("aria-disabled",!1)}function u(t){if(13!==t.keyCode&&32!==t.keyCode)return;const s=e.params.a11y,i=h(t.target);e.navigation&&e.navigation.$nextEl&&i.is(e.navigation.$nextEl)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?o(s.lastSlideMessage):o(s.nextSlideMessage)),e.navigation&&e.navigation.$prevEl&&i.is(e.navigation.$prevEl)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?o(s.firstSlideMessage):o(s.prevSlideMessage)),e.pagination&&i.is(_(e.params.pagination.bulletClass))&&i[0].click()}function g(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function f(){return g()&&e.params.pagination.clickable}const x=(t,e,s)=>{n(t),"BUTTON"!==t[0].tagName&&(l(t,"button"),t.on("keydown",u)),d(t,s),function(t,e){t.attr("aria-controls",e)}(t,e)},b=t=>{const s=t.target.closest(`.${e.params.slideClass}`);if(!s||!e.slides.includes(s))return;const i=e.slides.indexOf(s)===e.activeIndex,a=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(s);i||a||e.slideTo(e.slides.indexOf(s),0)};function y(){const t=e.params.a11y;e.$el.append(a);const s=e.$el;t.containerRoleDescriptionMessage&&p(s,t.containerRoleDescriptionMessage),t.containerMessage&&d(s,t.containerMessage);const i=e.$wrapperEl,o=t.id||i.attr("id")||`ax-wrapper-${n=16,void 0===n&&(n=16),"x".repeat(n).replace(/x/g,(()=>Math.round(16*Math.random()).toString(16)))}`;var n;const r=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";var c;c=o,i.attr("id",c),function(t,e){t.attr("aria-live",e)}(i,r),t.itemRoleDescriptionMessage&&p(h(e.slides),t.itemRoleDescriptionMessage),l(h(e.slides),t.slideRole);const m=e.params.loop?e.slides.filter((t=>!t.classList.contains(e.params.slideDuplicateClass))).length:e.slides.length;let g,y;e.slides.each(((s,i)=>{const a=h(s),o=e.params.loop?parseInt(a.attr("data-swiper-slide-index"),10):i;d(a,t.slideLabelMessage.replace(/\{\{index\}\}/,o+1).replace(/\{\{slidesLength\}\}/,m))})),e.navigation&&e.navigation.$nextEl&&(g=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(y=e.navigation.$prevEl),g&&g.length&&x(g,o,t.nextSlideMessage),y&&y.length&&x(y,o,t.prevSlideMessage),f()&&e.pagination.$el.on("keydown",_(e.params.pagination.bulletClass),u),e.$el.on("focus",b,!0)}i("beforeInit",(()=>{a=h(`<span class="${e.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)})),i("afterInit",(()=>{e.params.a11y.enabled&&y()})),i("fromEdge toEdge afterInit lock unlock",(()=>{e.params.a11y.enabled&&function(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{$nextEl:t,$prevEl:s}=e.navigation;s&&s.length>0&&(e.isBeginning?(c(s),r(s)):(m(s),n(s))),t&&t.length>0&&(e.isEnd?(c(t),r(t)):(m(t),n(t)))}()})),i("paginationUpdate",(()=>{e.params.a11y.enabled&&function(){const t=e.params.a11y;g()&&e.pagination.bullets.each((s=>{const i=h(s);e.params.pagination.clickable&&(n(i),e.params.pagination.renderBullet||(l(i,"button"),d(i,t.paginationBulletMessage.replace(/\{\{index\}\}/,i.index()+1)))),i.is(`.${e.params.pagination.bulletActiveClass}`)?i.attr("aria-current","true"):i.removeAttr("aria-current")}))}()})),i("destroy",(()=>{e.params.a11y.enabled&&function(){let t,s;a&&a.length>0&&a.remove(),e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(s=e.navigation.$prevEl),t&&t.off("keydown",u),s&&s.off("keydown",u),f()&&e.pagination.$el.off("keydown",_(e.params.pagination.bulletClass),u),e.$el.off("focus",b,!0)}()}))},function(t){let{swiper:e,extendParams:s,on:i}=t;s({history:{enabled:!1,root:"",replaceState:!1,key:"slides"}});let a=!1,n={};const r=t=>t.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),l=t=>{const e=o();let s;s=t?new URL(t):e.location;const i=s.pathname.slice(1).split("/").filter((t=>""!==t)),a=i.length;return{key:i[a-2],value:i[a-1]}},h=(t,s)=>{const i=o();if(!a||!e.params.history.enabled)return;let n;n=e.params.url?new URL(e.params.url):i.location;const l=e.slides.eq(s);let h=r(l.attr("data-history"));if(e.params.history.root.length>0){let s=e.params.history.root;"/"===s[s.length-1]&&(s=s.slice(0,s.length-1)),h=`${s}/${t}/${h}`}else n.pathname.includes(t)||(h=`${t}/${h}`);const p=i.history.state;p&&p.value===h||(e.params.history.replaceState?i.history.replaceState({value:h},null,h):i.history.pushState({value:h},null,h))},p=(t,s,i)=>{if(s)for(let a=0,o=e.slides.length;a<o;a+=1){const o=e.slides.eq(a);if(r(o.attr("data-history"))===s&&!o.hasClass(e.params.slideDuplicateClass)){const s=o.index();e.slideTo(s,t,i)}}else e.slideTo(0,t,i)},d=()=>{n=l(e.params.url),p(e.params.speed,e.paths.value,!1)};i("init",(()=>{e.params.history.enabled&&(()=>{const t=o();if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);a=!0,n=l(e.params.url),(n.key||n.value)&&(p(0,n.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",d))}})()})),i("destroy",(()=>{e.params.history.enabled&&(()=>{const t=o();e.params.history.replaceState||t.removeEventListener("popstate",d)})()})),i("transitionEnd _freeModeNoMomentumRelease",(()=>{a&&h(e.params.history.key,e.activeIndex)})),i("slideChange",(()=>{a&&e.params.cssMode&&h(e.params.history.key,e.activeIndex)}))},function(t){let{swiper:e,extendParams:s,emit:a,on:n}=t,r=!1;const l=i(),p=o();s({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}});const d=()=>{a("hashChange");const t=l.location.hash.replace("#","");if(t!==e.slides.eq(e.activeIndex).attr("data-hash")){const s=e.$wrapperEl.children(`.${e.params.slideClass}[data-hash="${t}"]`).index();if(void 0===s)return;e.slideTo(s)}},c=()=>{if(r&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&p.history&&p.history.replaceState)p.history.replaceState(null,null,`#${e.slides.eq(e.activeIndex).attr("data-hash")}`||""),a("hashSet");else{const t=e.slides.eq(e.activeIndex),s=t.attr("data-hash")||t.attr("data-history");l.location.hash=s||"",a("hashSet")}};n("init",(()=>{e.params.hashNavigation.enabled&&(()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;r=!0;const t=l.location.hash.replace("#","");if(t){const s=0;for(let i=0,a=e.slides.length;i<a;i+=1){const a=e.slides.eq(i);if((a.attr("data-hash")||a.attr("data-history"))===t&&!a.hasClass(e.params.slideDuplicateClass)){const t=a.index();e.slideTo(t,s,e.params.runCallbacksOnInit,!0)}}}e.params.hashNavigation.watchState&&h(p).on("hashchange",d)})()})),n("destroy",(()=>{e.params.hashNavigation.enabled&&e.params.hashNavigation.watchState&&h(p).off("hashchange",d)})),n("transitionEnd _freeModeNoMomentumRelease",(()=>{r&&c()})),n("slideChange",(()=>{r&&e.params.cssMode&&c()}))},function(t){let e,{swiper:s,extendParams:a,on:o,emit:n}=t;function r(){const t=s.slides.eq(s.activeIndex);let i=s.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||s.params.autoplay.delay),clearTimeout(e),e=d((()=>{let t;s.params.autoplay.reverseDirection?s.params.loop?(s.loopFix(),t=s.slidePrev(s.params.speed,!0,!0),n("autoplay")):s.isBeginning?s.params.autoplay.stopOnLastSlide?h():(t=s.slideTo(s.slides.length-1,s.params.speed,!0,!0),n("autoplay")):(t=s.slidePrev(s.params.speed,!0,!0),n("autoplay")):s.params.loop?(s.loopFix(),t=s.slideNext(s.params.speed,!0,!0),n("autoplay")):s.isEnd?s.params.autoplay.stopOnLastSlide?h():(t=s.slideTo(0,s.params.speed,!0,!0),n("autoplay")):(t=s.slideNext(s.params.speed,!0,!0),n("autoplay")),(s.params.cssMode&&s.autoplay.running||!1===t)&&r()}),i)}function l(){return void 0===e&&(!s.autoplay.running&&(s.autoplay.running=!0,n("autoplayStart"),r(),!0))}function h(){return!!s.autoplay.running&&(void 0!==e&&(e&&(clearTimeout(e),e=void 0),s.autoplay.running=!1,n("autoplayStop"),!0))}function p(t){s.autoplay.running&&(s.autoplay.paused||(e&&clearTimeout(e),s.autoplay.paused=!0,0!==t&&s.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((t=>{s.$wrapperEl[0].addEventListener(t,m)})):(s.autoplay.paused=!1,r())))}function c(){const t=i();"hidden"===t.visibilityState&&s.autoplay.running&&p(),"visible"===t.visibilityState&&s.autoplay.paused&&(r(),s.autoplay.paused=!1)}function m(t){s&&!s.destroyed&&s.$wrapperEl&&t.target===s.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((t=>{s.$wrapperEl[0].removeEventListener(t,m)})),s.autoplay.paused=!1,s.autoplay.running?r():h())}function u(){s.params.autoplay.disableOnInteraction?h():(n("autoplayPause"),p()),["transitionend","webkitTransitionEnd"].forEach((t=>{s.$wrapperEl[0].removeEventListener(t,m)}))}function g(){s.params.autoplay.disableOnInteraction||(s.autoplay.paused=!1,n("autoplayResume"),r())}s.autoplay={running:!1,paused:!1},a({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}}),o("init",(()=>{if(s.params.autoplay.enabled){l();i().addEventListener("visibilitychange",c),s.params.autoplay.pauseOnMouseEnter&&(s.$el.on("mouseenter",u),s.$el.on("mouseleave",g))}})),o("beforeTransitionStart",((t,e,i)=>{s.autoplay.running&&(i||!s.params.autoplay.disableOnInteraction?s.autoplay.pause(e):h())})),o("sliderFirstMove",(()=>{s.autoplay.running&&(s.params.autoplay.disableOnInteraction?h():p())})),o("touchEnd",(()=>{s.params.cssMode&&s.autoplay.paused&&!s.params.autoplay.disableOnInteraction&&r()})),o("destroy",(()=>{s.$el.off("mouseenter",u),s.$el.off("mouseleave",g),s.autoplay.running&&h();i().removeEventListener("visibilitychange",c)})),Object.assign(s.autoplay,{pause:p,run:r,start:l,stop:h})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"ax-slide-thumb-active",thumbsContainerClass:"ax-thumbs"}});let a=!1,o=!1;function n(){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const s=t.clickedIndex,i=t.clickedSlide;if(i&&h(i).hasClass(e.params.thumbs.slideThumbActiveClass))return;if(null==s)return;let a;if(a=t.params.loop?parseInt(h(t.clickedSlide).attr("data-swiper-slide-index"),10):s,e.params.loop){let t=e.activeIndex;e.slides.eq(t).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,t=e.activeIndex);const s=e.slides.eq(t).prevAll(`[data-swiper-slide-index="${a}"]`).eq(0).index(),i=e.slides.eq(t).nextAll(`[data-swiper-slide-index="${a}"]`).eq(0).index();a=void 0===s?i:void 0===i?s:i-t<t-s?i:s}e.slideTo(a)}function r(){const{thumbs:t}=e.params;if(a)return!1;a=!0;const s=e.constructor;if(t.swiper instanceof s)e.thumbs.swiper=t.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1});else if(u(t.swiper)){const i=Object.assign({},t.swiper);Object.assign(i,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new s(i),o=!0}return e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",n),!0}function l(t){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const i="auto"===s.params.slidesPerView?s.slidesPerViewDynamic():s.params.slidesPerView,a=e.params.thumbs.autoScrollOffset,o=a&&!s.params.loop;if(e.realIndex!==s.realIndex||o){let n,r,l=s.activeIndex;if(s.params.loop){s.slides.eq(l).hasClass(s.params.slideDuplicateClass)&&(s.loopFix(),s._clientLeft=s.$wrapperEl[0].clientLeft,l=s.activeIndex);const t=s.slides.eq(l).prevAll(`[data-swiper-slide-index="${e.realIndex}"]`).eq(0).index(),i=s.slides.eq(l).nextAll(`[data-swiper-slide-index="${e.realIndex}"]`).eq(0).index();n=void 0===t?i:void 0===i?t:i-l==l-t?s.params.slidesPerGroup>1?i:l:i-l<l-t?i:t,r=e.activeIndex>e.previousIndex?"next":"prev"}else n=e.realIndex,r=n>e.previousIndex?"next":"prev";o&&(n+="next"===r?a:-1*a),s.visibleSlidesIndexes&&s.visibleSlidesIndexes.indexOf(n)<0&&(s.params.centeredSlides?n=n>l?n-Math.floor(i/2)+1:n+Math.floor(i/2)-1:n>l&&s.params.slidesPerGroup,s.slideTo(n,t?0:void 0))}let n=1;const r=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(n=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(n=1),n=Math.floor(n),s.slides.removeClass(r),s.params.loop||s.params.virtual&&s.params.virtual.enabled)for(let t=0;t<n;t+=1)s.$wrapperEl.children(`[data-swiper-slide-index="${e.realIndex+t}"]`).addClass(r);else for(let t=0;t<n;t+=1)s.slides.eq(e.realIndex+t).addClass(r)}e.thumbs={swiper:null},i("beforeInit",(()=>{const{thumbs:t}=e.params;t&&t.swiper&&(r(),l(!0))})),i("slideChange update resize observerUpdate",(()=>{l()})),i("setTransition",((t,s)=>{const i=e.thumbs.swiper;i&&!i.destroyed&&i.setTransition(s)})),i("beforeDestroy",(()=>{const t=e.thumbs.swiper;t&&!t.destroyed&&o&&t.destroy()})),Object.assign(e.thumbs,{init:r,update:l})},function(t){let{swiper:e,extendParams:s,emit:i,once:a}=t;s({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(e,{freeMode:{onTouchStart:function(){const t=e.getTranslate();e.setTranslate(t),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})},onTouchMove:function(){const{touchEventsData:t,touches:s}=e;0===t.velocities.length&&t.velocities.push({position:s[e.isHorizontal()?"startX":"startY"],time:t.touchStartTime}),t.velocities.push({position:s[e.isHorizontal()?"currentX":"currentY"],time:c()})},onTouchEnd:function(t){let{currentPos:s}=t;const{params:o,$wrapperEl:n,rtlTranslate:r,snapGrid:l,touchEventsData:h}=e,p=c()-h.touchStartTime;if(s<-e.minTranslate())e.slideTo(e.activeIndex);else if(s>-e.maxTranslate())e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1);else{if(o.freeMode.momentum){if(h.velocities.length>1){const t=h.velocities.pop(),s=h.velocities.pop(),i=t.position-s.position,a=t.time-s.time;e.velocity=i/a,e.velocity/=2,Math.abs(e.velocity)<o.freeMode.minimumVelocity&&(e.velocity=0),(a>150||c()-t.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=o.freeMode.momentumVelocityRatio,h.velocities.length=0;let t=1e3*o.freeMode.momentumRatio;const s=e.velocity*t;let p=e.translate+s;r&&(p=-p);let d,m=!1;const u=20*Math.abs(e.velocity)*o.freeMode.momentumBounceRatio;let g;if(p<e.maxTranslate())o.freeMode.momentumBounce?(p+e.maxTranslate()<-u&&(p=e.maxTranslate()-u),d=e.maxTranslate(),m=!0,h.allowMomentumBounce=!0):p=e.maxTranslate(),o.loop&&o.centeredSlides&&(g=!0);else if(p>e.minTranslate())o.freeMode.momentumBounce?(p-e.minTranslate()>u&&(p=e.minTranslate()+u),d=e.minTranslate(),m=!0,h.allowMomentumBounce=!0):p=e.minTranslate(),o.loop&&o.centeredSlides&&(g=!0);else if(o.freeMode.sticky){let t;for(let e=0;e<l.length;e+=1)if(l[e]>-p){t=e;break}p=Math.abs(l[t]-p)<Math.abs(l[t-1]-p)||"next"===e.swipeDirection?l[t]:l[t-1],p=-p}if(g&&a("transitionEnd",(()=>{e.loopFix()})),0!==e.velocity){if(t=r?Math.abs((-p-e.translate)/e.velocity):Math.abs((p-e.translate)/e.velocity),o.freeMode.sticky){const s=Math.abs((r?-p:p)-e.translate),i=e.slidesSizesGrid[e.activeIndex];t=s<i?o.speed:s<2*i?1.5*o.speed:2.5*o.speed}}else if(o.freeMode.sticky)return void e.slideToClosest();o.freeMode.momentumBounce&&m?(e.updateProgress(d),e.setTransition(t),e.setTranslate(p),e.transitionStart(!0,e.swipeDirection),e.animating=!0,n.transitionEnd((()=>{e&&!e.destroyed&&h.allowMomentumBounce&&(i("momentumBounce"),e.setTransition(o.speed),setTimeout((()=>{e.setTranslate(d),n.transitionEnd((()=>{e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(i("_freeModeNoMomentumRelease"),e.updateProgress(p),e.setTransition(t),e.setTranslate(p),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,n.transitionEnd((()=>{e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(p),e.updateActiveIndex(),e.updateSlidesClasses()}else{if(o.freeMode.sticky)return void e.slideToClosest();o.freeMode&&i("_freeModeNoMomentumRelease")}(!o.freeMode.momentum||p>=o.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}}}})},function(t){let e,s,i,{swiper:a,extendParams:o}=t;o({grid:{rows:1,fill:"column"}}),a.grid={initSlides:t=>{const{slidesPerView:o}=a.params,{rows:n,fill:r}=a.params.grid;s=e/n,i=Math.floor(t/n),e=Math.floor(t/n)===t/n?t:Math.ceil(t/n)*n,"auto"!==o&&"row"===r&&(e=Math.max(e,o*n))},updateSlide:(t,o,n,r)=>{const{slidesPerGroup:l,spaceBetween:h}=a.params,{rows:p,fill:d}=a.params.grid;let c,m,u;if("row"===d&&l>1){const s=Math.floor(t/(l*p)),i=t-p*l*s,a=0===s?l:Math.min(Math.ceil((n-s*p*l)/p),l);u=Math.floor(i/a),m=i-u*a+s*l,c=m+u*e/p,o.css({"-webkit-order":c,order:c})}else"column"===d?(m=Math.floor(t/p),u=t-m*p,(m>i||m===i&&u===p-1)&&(u+=1,u>=p&&(u=0,m+=1))):(u=Math.floor(t/s),m=t-u*s);o.css(r("margin-top"),0!==u?h&&`${h}px`:"")},updateWrapperSize:(t,s,i)=>{const{spaceBetween:o,centeredSlides:n,roundLengths:r}=a.params,{rows:l}=a.params.grid;if(a.virtualSize=(t+o)*e,a.virtualSize=Math.ceil(a.virtualSize/l)-o,a.$wrapperEl.css({[i("width")]:`${a.virtualSize+o}px`}),n){s.splice(0,s.length);const t=[];for(let e=0;e<s.length;e+=1){let i=s[e];r&&(i=Math.floor(i)),s[e]<a.virtualSize+s[0]&&t.push(i)}s.push(...t)}}}},function(t){let{swiper:e}=t;Object.assign(e,{appendSlide:J.bind(e),prependSlide:Z.bind(e),addSlide:K.bind(e),removeSlide:Q.bind(e),removeAllSlides:tt.bind(e)})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({fadeEffect:{crossFade:!1,transformEl:null}}),et({effect:"fade",swiper:e,on:i,setTranslate:()=>{const{slides:t}=e,s=e.params.fadeEffect;for(let i=0;i<t.length;i+=1){const t=e.slides.eq(i);let a=-t[0].swiperSlideOffset;e.params.virtualTranslate||(a-=e.translate);let o=0;e.isHorizontal()||(o=a,a=0);const n=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);st(s,t).css({opacity:n}).transform(`translate3d(${a}px, ${o}px, 0px)`)}},setTransition:t=>{const{transformEl:s}=e.params.fadeEffect;(s?e.slides.find(s):e.slides).transition(t),it({swiper:e,duration:t,transformEl:s,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const a=(t,e,s)=>{let i=s?t.find(".swiper-slide-shadow-left"):t.find(".swiper-slide-shadow-top"),a=s?t.find(".swiper-slide-shadow-right"):t.find(".swiper-slide-shadow-bottom");0===i.length&&(i=h(`<div class="swiper-slide-shadow-${s?"left":"top"}"></div>`),t.append(i)),0===a.length&&(a=h(`<div class="swiper-slide-shadow-${s?"right":"bottom"}"></div>`),t.append(a)),i.length&&(i[0].style.opacity=Math.max(-e,0)),a.length&&(a[0].style.opacity=Math.max(e,0))};et({effect:"cube",swiper:e,on:i,setTranslate:()=>{const{$el:t,$wrapperEl:s,slides:i,width:o,height:n,rtlTranslate:r,size:l,browser:p}=e,d=e.params.cubeEffect,c=e.isHorizontal(),m=e.virtual&&e.params.virtual.enabled;let u,g=0;d.shadow&&(c?(u=s.find(".swiper-cube-shadow"),0===u.length&&(u=h('<div class="swiper-cube-shadow"></div>'),s.append(u)),u.css({height:`${o}px`})):(u=t.find(".swiper-cube-shadow"),0===u.length&&(u=h('<div class="swiper-cube-shadow"></div>'),t.append(u))));for(let t=0;t<i.length;t+=1){const e=i.eq(t);let s=t;m&&(s=parseInt(e.attr("data-swiper-slide-index"),10));let o=90*s,n=Math.floor(o/360);r&&(o=-o,n=Math.floor(-o/360));const h=Math.max(Math.min(e[0].progress,1),-1);let p=0,u=0,f=0;s%4==0?(p=4*-n*l,f=0):(s-1)%4==0?(p=0,f=4*-n*l):(s-2)%4==0?(p=l+4*n*l,f=l):(s-3)%4==0&&(p=-l,f=3*l+4*l*n),r&&(p=-p),c||(u=p,p=0);const x=`rotateX(${c?0:-o}deg) rotateY(${c?o:0}deg) translate3d(${p}px, ${u}px, ${f}px)`;h<=1&&h>-1&&(g=90*s+90*h,r&&(g=90*-s-90*h)),e.transform(x),d.slideShadows&&a(e,h,c)}if(s.css({"-webkit-transform-origin":`50% 50% -${l/2}px`,"transform-origin":`50% 50% -${l/2}px`}),d.shadow)if(c)u.transform(`translate3d(0px, ${o/2+d.shadowOffset}px, ${-o/2}px) rotateX(90deg) rotateZ(0deg) scale(${d.shadowScale})`);else{const t=Math.abs(g)-90*Math.floor(Math.abs(g)/90),e=1.5-(Math.sin(2*t*Math.PI/360)/2+Math.cos(2*t*Math.PI/360)/2),s=d.shadowScale,i=d.shadowScale/e,a=d.shadowOffset;u.transform(`scale3d(${s}, 1, ${i}) translate3d(0px, ${n/2+a}px, ${-n/2/i}px) rotateX(-90deg)`)}const f=p.isSafari||p.isWebView?-l/2:0;s.transform(`translate3d(0px,0,${f}px) rotateX(${e.isHorizontal()?0:g}deg) rotateY(${e.isHorizontal()?-g:0}deg)`),s[0].style.setProperty("--swiper-cube-translate-z",`${f}px`)},setTransition:t=>{const{$el:s,slides:i}=e;i.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.cubeEffect.shadow&&!e.isHorizontal()&&s.find(".swiper-cube-shadow").transition(t)},recreateShadows:()=>{const t=e.isHorizontal();e.slides.each((e=>{const s=Math.max(Math.min(e.progress,1),-1);a(h(e),s,t)}))},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({flipEffect:{slideShadows:!0,limitRotation:!0,transformEl:null}});const a=(t,s,i)=>{let a=e.isHorizontal()?t.find(".swiper-slide-shadow-left"):t.find(".swiper-slide-shadow-top"),o=e.isHorizontal()?t.find(".swiper-slide-shadow-right"):t.find(".swiper-slide-shadow-bottom");0===a.length&&(a=at(i,t,e.isHorizontal()?"left":"top")),0===o.length&&(o=at(i,t,e.isHorizontal()?"right":"bottom")),a.length&&(a[0].style.opacity=Math.max(-s,0)),o.length&&(o[0].style.opacity=Math.max(s,0))};et({effect:"flip",swiper:e,on:i,setTranslate:()=>{const{slides:t,rtlTranslate:s}=e,i=e.params.flipEffect;for(let o=0;o<t.length;o+=1){const n=t.eq(o);let r=n[0].progress;e.params.flipEffect.limitRotation&&(r=Math.max(Math.min(n[0].progress,1),-1));const l=n[0].swiperSlideOffset;let h=-180*r,p=0,d=e.params.cssMode?-l-e.translate:-l,c=0;e.isHorizontal()?s&&(h=-h):(c=d,d=0,p=-h,h=0),n[0].style.zIndex=-Math.abs(Math.round(r))+t.length,i.slideShadows&&a(n,r,i);const m=`translate3d(${d}px, ${c}px, 0px) rotateX(${p}deg) rotateY(${h}deg)`;st(i,n).transform(m)}},setTransition:t=>{const{transformEl:s}=e.params.flipEffect;(s?e.slides.find(s):e.slides).transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),it({swiper:e,duration:t,transformEl:s})},recreateShadows:()=>{const t=e.params.flipEffect;e.slides.each((s=>{const i=h(s);let o=i[0].progress;e.params.flipEffect.limitRotation&&(o=Math.max(Math.min(s.progress,1),-1)),a(i,o,t)}))},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0,transformEl:null}}),et({effect:"coverflow",swiper:e,on:i,setTranslate:()=>{const{width:t,height:s,slides:i,slidesSizesGrid:a}=e,o=e.params.coverflowEffect,n=e.isHorizontal(),r=e.translate,l=n?t/2-r:s/2-r,h=n?o.rotate:-o.rotate,p=o.depth;for(let t=0,e=i.length;t<e;t+=1){const e=i.eq(t),s=a[t],r=(l-e[0].swiperSlideOffset-s/2)/s,d="function"==typeof o.modifier?o.modifier(r):r*o.modifier;let c=n?h*d:0,m=n?0:h*d,u=-p*Math.abs(d),g=o.stretch;"string"==typeof g&&-1!==g.indexOf("%")&&(g=parseFloat(o.stretch)/100*s);let f=n?0:g*d,x=n?g*d:0,b=1-(1-o.scale)*Math.abs(d);Math.abs(x)<.001&&(x=0),Math.abs(f)<.001&&(f=0),Math.abs(u)<.001&&(u=0),Math.abs(c)<.001&&(c=0),Math.abs(m)<.001&&(m=0),Math.abs(b)<.001&&(b=0);const y=`translate3d(${x}px,${f}px,${u}px)  rotateX(${m}deg) rotateY(${c}deg) scale(${b})`;if(st(o,e).transform(y),e[0].style.zIndex=1-Math.abs(Math.round(d)),o.slideShadows){let t=n?e.find(".swiper-slide-shadow-left"):e.find(".swiper-slide-shadow-top"),s=n?e.find(".swiper-slide-shadow-right"):e.find(".swiper-slide-shadow-bottom");0===t.length&&(t=at(o,e,n?"left":"top")),0===s.length&&(s=at(o,e,n?"right":"bottom")),t.length&&(t[0].style.opacity=d>0?d:0),s.length&&(s[0].style.opacity=-d>0?-d:0)}}},setTransition:t=>{const{transformEl:s}=e.params.coverflowEffect;(s?e.slides.find(s):e.slides).transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({creativeEffect:{transformEl:null,limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const a=t=>"string"==typeof t?t:`${t}px`;et({effect:"creative",swiper:e,on:i,setTranslate:()=>{const{slides:t,$wrapperEl:s,slidesSizesGrid:i}=e,o=e.params.creativeEffect,{progressMultiplier:n}=o,r=e.params.centeredSlides;if(r){const t=i[0]/2-e.params.slidesOffsetBefore||0;s.transform(`translateX(calc(50% - ${t}px))`)}for(let s=0;s<t.length;s+=1){const i=t.eq(s),l=i[0].progress,h=Math.min(Math.max(i[0].progress,-o.limitProgress),o.limitProgress);let p=h;r||(p=Math.min(Math.max(i[0].originalProgress,-o.limitProgress),o.limitProgress));const d=i[0].swiperSlideOffset,c=[e.params.cssMode?-d-e.translate:-d,0,0],m=[0,0,0];let u=!1;e.isHorizontal()||(c[1]=c[0],c[0]=0);let g={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};h<0?(g=o.next,u=!0):h>0&&(g=o.prev,u=!0),c.forEach(((t,e)=>{c[e]=`calc(${t}px + (${a(g.translate[e])} * ${Math.abs(h*n)}))`})),m.forEach(((t,e)=>{m[e]=g.rotate[e]*Math.abs(h*n)})),i[0].style.zIndex=-Math.abs(Math.round(l))+t.length;const f=c.join(", "),x=`rotateX(${m[0]}deg) rotateY(${m[1]}deg) rotateZ(${m[2]}deg)`,b=p<0?`scale(${1+(1-g.scale)*p*n})`:`scale(${1-(1-g.scale)*p*n})`,y=p<0?1+(1-g.opacity)*p*n:1-(1-g.opacity)*p*n,v=`translate3d(${f}) ${x} ${b}`;if(u&&g.shadow||!u){let t=i.children(".swiper-slide-shadow");if(0===t.length&&g.shadow&&(t=at(o,i)),t.length){const e=o.shadowPerProgress?h*(1/o.limitProgress):h;t[0].style.opacity=Math.min(Math.max(Math.abs(e),0),1)}}const D=st(o,i);D.transform(v).css({opacity:y}),g.origin&&D.css("transform-origin",g.origin)}},setTransition:t=>{const{transformEl:s}=e.params.creativeEffect;(s?e.slides.find(s):e.slides).transition(t).find(".swiper-slide-shadow").transition(t),it({swiper:e,duration:t,transformEl:s,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})},function(t){let{swiper:e,extendParams:s,on:i}=t;s({cardsEffect:{slideShadows:!0,transformEl:null,rotate:!0}}),et({effect:"cards",swiper:e,on:i,setTranslate:()=>{const{slides:t,activeIndex:s}=e,i=e.params.cardsEffect,{startTranslate:a,isTouched:o}=e.touchEventsData,n=e.translate;for(let r=0;r<t.length;r+=1){const l=t.eq(r),h=l[0].progress,p=Math.min(Math.max(h,-4),4);let d=l[0].swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&e.$wrapperEl.transform(`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(d-=t[0].swiperSlideOffset);let c=e.params.cssMode?-d-e.translate:-d,m=0;const u=-100*Math.abs(p);let g=1,f=-2*p,x=8-.75*Math.abs(p);const b=e.virtual&&e.params.virtual.enabled?e.virtual.from+r:r,y=(b===s||b===s-1)&&p>0&&p<1&&(o||e.params.cssMode)&&n<a,v=(b===s||b===s+1)&&p<0&&p>-1&&(o||e.params.cssMode)&&n>a;if(y||v){const t=(1-Math.abs((Math.abs(p)-.5)/.5))**.5;f+=-28*p*t,g+=-.5*t,x+=96*t,m=-25*t*Math.abs(p)+"%"}if(c=p<0?`calc(${c}px + (${x*Math.abs(p)}%))`:p>0?`calc(${c}px + (-${x*Math.abs(p)}%))`:`${c}px`,!e.isHorizontal()){const t=m;m=c,c=t}const D=p<0?""+(1+(1-g)*p):""+(1-(1-g)*p),w=`\n          translate3d(${c}, ${m}, ${u}px)\n          rotateZ(${i.rotate?f:0}deg)\n          scale(${D})\n        `;if(i.slideShadows){let t=l.find(".swiper-slide-shadow");0===t.length&&(t=at(i,l)),t.length&&(t[0].style.opacity=Math.min(Math.max((Math.abs(p)-.5)/.5,0),1))}l[0].style.zIndex=-Math.abs(Math.round(h))+t.length;st(i,l).transform(w)}},setTransition:t=>{const{transformEl:s}=e.params.cardsEffect;(s?e.slides.find(s):e.slides).transition(t).find(".swiper-slide-shadow").transition(t),it({swiper:e,duration:t,transformEl:s})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}];return G.use(ot),G}));
/*!
* 插件：滚动反弹；使用方法：new axScroll({参数})
*/
class axScroll{constructor(t,e){return!!t&&(this.targetDom=axIdToDom(t),!(!this.targetDom||0===this.targetDom.children.length)&&(this.options=axExtend({wrapper:"",axis:"y",snap:{enable:!1,force:!1,offset:0,snapped:"",unsnapped:""},unbound:{attr:"unbound",selector:""},dampingRatio:.5,transInit:0,toInitMode:"scroll",duration:300,distMouse:0,completedTHR:50,drift:{enable:!0,mode:"free",timeTHR:300,distTHR:20,coef:2},paddingStart:0,paddingEnd:0,mouseINR:300,startINR:300,barShow:!1,insertable:!0,breakpoints:{},onBeforeToStart:"",onBeforeToEnd:"",onInit:"",onAdd:"",onRemove:"",onCompleted:"",onExceed:"",onStart:"",onMove:"",onEnd:"",onToStart:"",onToEnd:"",onTranslated:"",onRefactored:"",onSnap:"",onSnapped:"",onUpdateContent:"",onResized:"",onMouse:"",onScrolled:"",onLocated:"",onClick:"",onDestroy:""},e,this.targetDom,this.constructor.name),this.handlers={},"x"===this.options.axis?this.propsMap={position:"left",axis:"X",overflow:"overflowX",client:"clientX",size:"width",index:4,offset:"offsetLeft"}:"y"===this.options.axis&&(this.propsMap={position:"top",axis:"Y",overflow:"overflowY",client:"clientY",size:"height",index:5,offset:"offsetTop"}),this.scrollObj=axGetScrollObj(),this.wrapperDom=this.options.wrapper?axIdToDom(this.options.wrapper):this.targetDom.firstElementChild,!(!this.wrapperDom||0===this.wrapperDom.children.length)&&(this.getUnbounds(),this.getSnappeds(),this.options.barShow&&(this.scrollThumb=axAddElem("span"),this.scrollTrack=axAddElem("div",{class:"ax-scroll-bar"},this.scrollThumb),this.targetDom.appendChild(this.scrollTrack)),this.isMobi=axIsMobi(),this.started=!1,this.scrolled=!0,this.distJitter=0,this.exceedListen=(t,e)=>{this.handlers.hasOwnProperty("exceed")&&this.emit("exceed",t,e),this.options.onExceed&&this.options.onExceed.call(this,t,e),t>=1&&(this.handlers.hasOwnProperty("completed")&&this.emit("completed",e),this.options.onCompleted&&this.options.onCompleted.call(this,e))},this.startFun=axThrottle((t=>{if(t.stopPropagation(),this.unbounds.length>0&&(this.unbounds.includes(t.target)||this.unbounds.find((e=>e.contains(t.target))))||!this.getInsertable())return!1;if(t.preventDefault(),this.scrollThumb&&(t.target===this.scrollThumb||t.target===this.scrollTrack))return!1;let e=this.startValue=this.getCoordValue(t);this.distStart=e-this.transLast,this.startTime=t.timeStamp,this.started=!0,this.handlers.hasOwnProperty("start")&&this.emit("start",this.transLast),this.options.onStart&&this.options.onStart.call(this,this.transLast)}),this.options.startINR,!0),this.moveFun=t=>{if(t.stopPropagation(),!this.isMobi&&!this.started)return!1;if(this.unbounds.length>0&&(this.unbounds.includes(t.target)||this.unbounds.find((e=>e.contains(t.target))))||!this.getInsertable())return!1;t.preventDefault();let e=this.getCoordValue(t);if(Math.abs(e-this.startValue)<=2)return!1;this.targetDom.setAttribute("moving",""),this.direction=0,this.transNow=e-this.distStart,this.transNow>=this.transLast?this.transNow>this.options.paddingStart&&(this.transNow=this.options.paddingStart+(this.transNow-this.options.paddingStart)*Math.pow(this.options.dampingRatio,2)):this.transNow<=this.difference&&this.difference-this.options.paddingStart<=0&&(this.transNow=this.difference+(this.transNow-this.difference)*Math.pow(this.options.dampingRatio,2)),this.wrapperDom.style.transitionDuration="0ms",this.wrapperDom.style.transform=`translate${this.options.axis}(${this.transNow}px)`,this.handlers.hasOwnProperty("move")&&this.emit("move",this.transNow),this.options.onMove&&this.options.onMove.call(this,this.transNow),this.exceedHandle()},this.endFun=t=>{if(t.stopPropagation(),this.targetDom.removeAttribute("moving"),!this.isMobi&&!this.started)return!1;if(this.unbounds.length>0&&(this.unbounds.includes(t.target)||this.unbounds.find((e=>e.contains(t.target))))||!this.getInsertable())return!1;if(t.preventDefault(),this.started=!1,this.flagDir=this.transNow>=this.transLast?1:-1,this.distJitter=Math.abs(this.transNow-this.transLast),this.transLast=this.transNow,this.distJitter<=2)return this.handlers.hasOwnProperty("click")&&this.emit("click",t.target),this.options.onClick&&this.options.onClick.call(this,t.target),!1;let e=t.timeStamp-this.startTime;if(this.options.drift.enable&&e<this.options.drift.timeTHR&&this.distJitter>this.options.drift.distTHR){let s;if("neighbor"===this.options.drift.mode){let e=null;e=-1===this.flagDir?t.target.nextElementSibling:t.target.previousElementSibling,this.options.snap.enable?this.setSnapped({target:e}):this.scrollTo(e)}else if("snap"===this.options.drift.mode){if(!this.options.snap.enable)return!1;let t=this.snappeds.findIndex((t=>t===this.snapped)),e=null;-1===this.flagDir?t!==this.snappeds.length-1&&(e=this.snappeds[t+1]):0!==t&&(e=this.snappeds[t-1]),this.setSnapped({target:e})}else s=isNaN(this.options.drift.mode)?(this.options.drift.timeTHR-e)*this.options.drift.coef*this.flagDir:this.options.drift.mode<=1?this.options.drift.mode*this.targetDomSize*this.flagDir:this.options.drift.mode*this.flagDir,this.scrollTo(this.transLast+s-this.distJitter*this.flagDir)}else this.options.snap.enable&&this.setSnapped();this.handlers.hasOwnProperty("end")&&this.emit("end",this.transNow),this.options.onEnd&&this.options.onEnd.call(this,this.transNow),this.exceedHandle((t=>{this.options.onBeforeToStart?this.options.onBeforeToStart.call(this,t)&&this.toStart():this.toStart()}),(t=>{this.options.onBeforeToEnd?this.options.onBeforeToEnd.call(this,t)&&this.toEnd():this.toEnd()}))},this.scrollFun=axThrottle((t=>{if(t.stopPropagation(),t.preventDefault(),this.unbounds.length>0&&(this.unbounds.includes(t.target)||this.unbounds.find((e=>e.contains(t.target))))||!this.getInsertable())return!1;let e=axIsScrollUp(t,this.scrollObj.detail),s=e?1:-1,i=null;if("string"!=typeof this.options.distMouse){let t=Math.abs(this.distMouse)*s;i=this.getTranslateValue()-t}else if("neighbor"===this.options.distMouse)i=e?t.target.nextElementSibling:t.target.previousElementSibling;else if("snap"===this.options.distMouse&&this.options.snap.enable){let t=this.snappeds.findIndex((t=>t===this.snapped));e?t!==this.snappeds.length-1&&(i=this.snappeds[t+1]):0!==t&&(i=this.snappeds[t-1])}this.scrollTo(i,this.options.duration),this.handlers.hasOwnProperty("mouse")&&this.emit("mouse",i),this.options.onMouse&&this.options.onMouse.call(this,i)}),this.options.mouseINR,!0),this.transitionendFun=t=>{t.stopPropagation(),0===this.transNow&&(this.handlers.hasOwnProperty("toStart")&&this.emit("toStart",""),this.options.onToStart&&this.options.onToStart.call(this)),this.transNow===this.difference&&(this.handlers.hasOwnProperty("toEnd")&&this.emit("toEnd",""),this.options.onToEnd&&this.options.onToEnd.call(this)),this.scrollTrack&&this.scrollTrack.removeAttribute("shown"),this.options.snap.enable&&this.snapped!==this.getLatestSnap().latest&&this.setSnapped()},void this.init())))}init(t){!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.setAttribute(),this.updateDiff(),this.distStart=0,this.transLast=0;let e=axType(this.options.transInit);if(e.includes("HTML")||"String"===e){let t="String"===e?this.wrapperDom.querySelector(this.options.transInit):this.options.transInit;this.transInit=-t[this.propsMap.offset]+this.options.paddingStart}else this.transInit=this.options.paddingStart>Math.abs(this.options.transInit)?this.options.paddingStart:this.options.transInit;return this.transNow=0,"scroll"===this.options.toInitMode?this.scrollTo(this.transInit):"locate"===this.options.toInitMode&&this.locateTo(this.transInit),this.targetDom.addEventListener(axEventMap[0],this.startFun),this.targetDom.addEventListener(axEventMap[1],this.moveFun),this.targetDom.addEventListener(axEventMap[2],this.endFun),this.StyleObs=new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type){let e=Number(t.target.style.transform.replace(/[^0-9.\-,]/g,""));if(this.options.barShow&&(this.scrollTrack.setAttribute("shown",""),e>=0||this.isBaby()?this.updateScrollBarSize(e):e<=this.difference&&this.updateScrollBarSize(this.difference-e),e<=0)){let t=1-this.scrollThumbSizeRatio,s=Math.abs(e/(this.targetDomSize-this.wrapperDomSize))*t,i=Math.ceil(100*s)+"%";this.scrollThumb.style[this.propsMap.position]=i}this.handlers.hasOwnProperty("translated")&&this.emit("translated",e),this.options.onTranslated&&this.options.onTranslated.call(this,e)}"childList"===t.type&&(this.response(),this.options.unbound&&this.getUnbounds(),this.options.snap.enable&&this.getSnappeds(),this.handlers.hasOwnProperty("refactored")&&this.emit("refactored",""),this.options.onRefactored&&this.options.onRefactored.call(this))}))})),this.StyleObs.observe(this.wrapperDom,{childList:!0,attributes:!0,attributeFilter:["style"]}),this.targetDomSizeObserver=new ResizeObserver(axDebounce((t=>{for(let e of t){if(!e.contentRect.width&&!e.contentRect.height)return!1;this.response(),this.handlers.hasOwnProperty("resized")&&this.emit("resized",e,this.targetDom),this.options.onResized&&this.options.onResized.call(this,e,this.targetDom)}}))),this.targetDomSizeObserver.observe(this.targetDom),this.wrapperDomSizeObserver=new ResizeObserver(axDebounce((t=>{for(let e of t){if(!e.contentRect.width&&!e.contentRect.height)return!1;this.response(),this.handlers.hasOwnProperty("resized")&&this.emit("resized",e,this.wrapperDom),this.options.onResized&&this.options.onResized.call(this,e,this.wrapperDom)}}))),this.wrapperDomSizeObserver.observe(this.wrapperDom),this.isMobi||(this.targetDom.addEventListener("mouseleave",this.endFun),this.targetDom.addEventListener(this.scrollObj.event,this.scrollFun)),this.wrapperDom.addEventListener("transitionend",this.transitionendFun),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),t&&t.call(this),this}getInsertable(){return!!this.options.insertable||!!this.scrolled}setAttribute(){!this.targetDom.classList.contains("ax-scroll")&&this.targetDom.classList.add("ax-scroll"),!this.wrapperDom.classList.contains("ax-scroll-body")&&this.wrapperDom.classList.add("ax-scroll-body"),"hidden"!==axStyle(this.targetDom)[this.propsMap.overflow]&&"hidden"!==axStyle(this.targetDom).overflow&&(this.targetDom.style[this.propsMap.overflow]="hidden"),this.targetDom.setAttribute("axis",this.options.axis)}getUnbounds(){this.unbounds=this.getDomsFromArg(this.options.unbound.selector),this.unbounds.forEach((t=>t.setAttribute(this.options.unbound.attr,"")))}getDomsFromArg(t){let e=[];if(t){let s=axType(t);"String"===s?e=[...this.wrapperDom.querySelectorAll(t)]:"Array"===s?e=t:s.includes("HTML")&&e.push(t)}return e.filter(Boolean)}getSnappeds(){if(this.options.snap.enable){this.unsnappeds=this.getDomsFromArg(this.options.snap.unsnapped);let t=this.getDomsFromArg(this.options.snap.snapped);t.length||(t=[...this.wrapperDom.children]),this.snappeds=t.filter((t=>!this.unsnappeds.includes(t)))}else this.snappeds=[]}getLatestSnap(){let t=this.snappeds.map((t=>({dom:t,offset:Math.abs(this.transNow-this.options.paddingStart+t[this.propsMap.offset])}))),e=null;if(t.sort(((t,e)=>t.offset-e.offset)),this.options.snap.offset){let s=t.find((t=>t.offset<=this.options.snap.offset));e=s?s.dom:null}else e=t[0].dom;return{latest:e,snappeds:t}}setSnapped(t){if(this.destroyed||0===this.wrapperDom.children.length)return this;if(!this.options.snap.enable)return!1;this.scrolled=!1;let e=Object.assign({force:this.options.snap.force},t);if(this.options.snap.enable){let t=this.getLatestSnap(),s=t.snappeds,i=t.latest,a=null,o=e.target?axIdToDom(e.target):null;if(a=o||i,a&&this.scrollTo(a,e.duration,(()=>{a===this.snapped&&(this.handlers.hasOwnProperty("snapped")&&this.emit("snapped",a),this.options.onSnapped&&this.options.onSnapped.call(this,a),e.callback&&e.callback.call(this,a))})),a&&(a!==this.snapped||e.force)){a.setAttribute("snapped","");let t=s.find((t=>t!==a&&t.dom.hasAttribute("snapped")));t&&t.dom.removeAttribute("snapped"),this.snapped=a,this.handlers.hasOwnProperty("snap")&&this.emit("snap",a),this.options.onSnap&&this.options.onSnap.call(this,a)}}}rollback(t,e){e=e||this.options.duration+"ms",setTimeout((()=>{this.wrapperDom.style.transitionDuration=e,this.wrapperDom.style.transform=`translate${this.options.axis}(${t}px)`}),0),setTimeout((()=>{}),parseInt(e))}toStart(t){if(this.destroyed||0===this.wrapperDom.children.length)return this;this.transNow=this.transLast=this.options.paddingStart,this.rollback(this.transNow,t)}toEnd(t){if(this.destroyed||0===this.wrapperDom.children.length)return this;this.transNow=this.transLast=this.difference,this.rollback(this.transNow,t)}getDistMouse(){this.distMouse=0,"string"==typeof this.options.distMouse&&this.options.distMouse||(this.options.distMouse?this.distMouse=this.options.distMouse<=1?parseInt(this.targetDomSize*this.options.distMouse):this.options.distMouse:this.distMouse=parseInt(.25*this.targetDomSize))}getEdgeValue(t){let e,s=axType(t);if(s.includes("HTML")||"String"===s){let s=axIdToDom(t);s?e=-s[this.propsMap.offset]+this.options.paddingStart:this.options.paddingStart}else e=t;return(e||0===e)&&(e>=this.options.paddingStart||this.isBaby()?e=this.options.paddingStart:e<=this.difference&&(e=this.difference)),e}scrollTo(t,e,s){if(this.destroyed||0===this.wrapperDom.children.length)return this;this.scrolled=!1;let i=this.getEdgeValue(t),a=Math.abs(this.transNow-i)/this.targetDomSize,o=e||0==e?`${e}ms`:a>1?Math.trunc(this.options.duration*a)+"ms":`${this.options.duration}ms`;this.wrapperDom.style.transitionDuration=o,this.wrapperDom.style.transform=`translate${this.options.axis}(${i}px)`,this.transLast=this.transNow=i,setTimeout((()=>{this.handlers.hasOwnProperty("scrolled")&&this.emit("scrolled",t,i),this.options.onScrolled&&this.options.onScrolled.call(this,t,i),s&&s.call(this,t,i),this.scrolled=!0}),parseInt(o))}locateTo(t,e=!0,s){if(this.destroyed||0===this.wrapperDom.children.length)return this;let i=this.getEdgeValue(t);this.wrapperDom.style.transitionDuration="0ms",this.wrapperDom.style.transform=`translate${this.options.axis}(${i}px)`,this.transLast=this.transNow=i,e&&this.setSnapped(),this.handlers.hasOwnProperty("located")&&this.emit("located",t,i),this.options.onLocated&&this.options.onLocated.call(this,t,i),s&&s.call(this,t,i)}getCoordValue(t){return this.isMobi?t.changedTouches[0][this.propsMap.client]:t[this.propsMap.client]}exceedHandle(t,e){let s=0;this.transNow>this.options.paddingStart||this.wrapperDomSize<=this.targetDomSize-this.options.paddingStart-this.options.paddingEnd?(s=Math.abs(this.transNow/this.options.completedTHR),t&&t(s.toFixed(2)),this.exceedListen(s.toFixed(2),"start")):this.transNow<this.difference&&(s=Math.abs(this.transNow-this.difference)/this.options.completedTHR,e&&e(s.toFixed(2)),this.exceedListen(s.toFixed(2),"end"))}isBaby(){return this.wrapperDomSize<=this.targetDomSize-this.options.paddingStart-this.options.paddingEnd}addTranslate(t){t&&this.locateTo(this.getTranslateValue()-t)}updateDiff(){let t=axStyle(this.targetDom),e=axStyle(this.wrapperDom),s=parseInt(t.height),i=parseInt(e.height),a=parseInt(t.width),o=parseInt(e.width);"x"===this.options.axis?(this.difference=a-o-this.options.paddingEnd,this.targetDomSize=a,this.wrapperDomSize=o):"y"===this.options.axis&&(this.difference=s-i-this.options.paddingEnd,this.targetDomSize=s,this.wrapperDomSize=i),this.updateScrollBarSize(),this.getDistMouse()}response(){this.updateDiff(),this.isBaby()||this.wrapperDom[this.propsMap.offset]>this.options.paddingStart?this.toStart():this.transNow<this.difference&&this.toEnd()}add(t,e){if(this.destroyed)return this;let s=axType(t),i=[],a=null,o=Object.assign({placement:"end",fixed:!0},e);if("DocumentFragment"===s?i=[...t.children]:"Array"===s?i=t:i.push(t),"start"===o.placement){let t=this.wrapperDom.firstElementChild,e=t?t[this.propsMap.offset]:0;i=[...i].reverse();for(let t of i)this.wrapperDom.insertAdjacentElement("afterbegin",t);if(this.updateDiff(),t)if(o.fixed){let s=e-t[this.propsMap.offset];this.transNow+=s,this.locateTo(this.transNow)}else this.toStart()}else if("end"===o.placement){a=this.wrapperDom.lastElementChild;for(let t of i)this.wrapperDom.insertAdjacentElement("beforeend",t);this.updateDiff(),!o.fixed&&this.toEnd()}else{let t=axType(o.placement);if("Number"===t?a=this.wrapperDom.children[o.placement]:"String"===t?a=this.wrapperDom.querySelector(o.placement):t.includes("HTML")&&(a=o.placement),a){i=[...i].reverse();for(let t of i)a.insertAdjacentElement("afterend",t);this.updateDiff()}}this.handlers.hasOwnProperty("add")&&this.emit("add",i,a),this.options.onAdd&&this.options.onAdd.call(this,i,a),o.callback&&o.callback.call(this,i,a)}remove(t="end",e){if(this.destroyed||0===this.wrapperDom.children.length)return this;let s=null;if("start"===t)s=this.wrapperDom.firstElementChild;else if("end"===t)s=this.wrapperDom.lastElementChild;else{let e=axType(t);"Number"===e?s=this.wrapperDom.children[t]:"String"===e?s=this.wrapperDom.querySelector(t):e.includes("HTML")&&(s=t)}s&&(s.remove(),this.updateDiff(),this.handlers.hasOwnProperty("remove")&&this.emit("remove",s),this.options.onRemove&&this.options.onRemove.call(this,s),e&&e.call(this,s))}updateScrollBarSize(t){if(this.options.barShow){this.scrollThumbSizeRatio=this.targetDomSize/this.wrapperDomSize>=1?1:this.targetDomSize/this.wrapperDomSize;let e=(this.targetDomSize-Math.abs(t/2))/this.targetDomSize;t&&(this.scrollThumbSizeRatio=this.scrollThumbSizeRatio*e),this.scrollThumb.style[this.propsMap.size]=Math.ceil(100*this.scrollThumbSizeRatio)+"%"}}getTranslateValue(){return axStyle(this.wrapperDom).transform.replace(/[^0-9.\-,]/g,"").split(",").map((t=>Number(t)))[this.propsMap.index]||0}updateContent(t,e){if(this.destroyed)return this;let s=axType(t);if(this.wrapperDom.innerHTML="","String"===s)if(axStrType(t)){let e=axIdToDom(t);e&&(this.wrapperDom.innerHTML=e.innerHTML)}else this.wrapperDom.innerHTML=t;else if(s.includes("HTML"))this.wrapperDom.appendChild(t);else if("Array"===s){let e=document.createDocumentFragment();for(let s of t)e.appendChild(s);this.wrapperDom.appendChild(e)}else"DocumentFragment"===s&&this.wrapperDom.appendChild(t);this.updateDiff(),this.handlers.hasOwnProperty("updateContent")&&this.emit("updateContent",""),this.options.onUpdateContent&&this.options.onUpdateContent.call(this),e&&e.call(this)}destroy(t){return this.destroyed||(this.targetDom.removeEventListener(axEventMap[0],this.startFun),this.targetDom.removeEventListener(axEventMap[1],this.moveFun),this.targetDom.removeEventListener(axEventMap[2],this.endFun),this.wrapperDom.removeEventListener("transitionend",this.transitionendFun),this.StyleObs.disconnect(),this.targetDomSizeObserver.disconnect(),this.wrapperDomSizeObserver.disconnect(),this.isMobi||(this.targetDom.removeEventListener("mouseleave",this.endFun),this.targetDom.removeEventListener(this.scrollObj.event,this.scrollFun)),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：兼容手势库；使用方法：new axGesture({参数})
*/class axGesture{constructor(t,e){if(!t)return!1;if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",parent:"",jitterValue:10,origin:null,click:{timeTHR:200,delay:200,dblclickable:!0,holdDelay:1e3,holdToMenu:!0},wheel:{action:"",axis:"y",distance:60,scale:.5,degree:10,duration:500,reverse:!1},translate:{max:1e4,min:-1e4,positionInstead:!1},drift:{enable:!0,timeTHR:300,distTHR:20,coef:1,duration:500},scale:{enable:!1,centered:!0,max:100,min:0},rotate:{enable:!1,max:3600,min:-3600},initial:null,breakpoints:{},onInit:"",onStart:"",onMove:"",onEnd:"",onClick:"",onDblclick:"",onHold:"",onScale:"",onScaling:"",onScaled:"",onRotate:"",onRotating:"",onRotated:"",onTranslate:"",onTranslating:"",onTranslated:"",onDrift:"",onDrifting:"",onDrifted:"",onCancel:"",onReset:"",onDestroy:""},e,this.targetDom,this.constructor.name);let s=this;this.handlers={},this.started=!1,this.eventState="end",this.scrollObj=axGetScrollObj(),this.isMobi=axIsMobi(),this.startTime=0,this.diffTime=0,this.jitterValue=s.options.jitterValue+(this.isMobi?10:0),this.clickCount=0,this.holdHandle=null,this.moveValues={h:0,x:0,y:0,c:{id:0,x:0,y:0},d:{x:"",y:""}},this.diffValues={scale:0,rotate:0,translate:{x:0,y:0,h:0}},this.startCoord={x:0,y:0},this.triangleValues={start:{x:0,y:0,h:0},last:{x:0,y:0,h:0},now:{x:0,y:0,h:0}},this.moveCount=0,this.touchesMoveCount=0,this.paramsFormat={originEvent:null,scale:{direction:0,diff:0,value:{x:1,y:1},translate:{x:0,y:0}},rotate:{direction:0,diff:0,value:0},translate:{direction:{x:0,y:0},diff:{x:0,y:0,h:0},value:{x:0,y:0},isDrift:!1},drift:{duration:0,direction:{x:0,y:0},diff:{x:0,y:0,h:0},value:{x:0,y:0}},wheel:{direction:{x:0,y:0}},coord:{x:0,y:0},target:this.targetDom,name:"",moveStart:!1,touchesStart:!1,moveEnd:!1,moveTime:0},this.params=null,this.endParams={moveStart:!1,touchesStart:!1,moveEnd:!0},this.startFun=function(t){if(t.stopPropagation(),t.cancelable&&t.preventDefault(),s.params=axClone(s.paramsFormat),s.params.originEvent=t,s.isMobi&&t.targetTouches.length>2&&0===t.changedTouches.length)return s.started=!1,!1;s.getStartValues();let e=s.getTouchCoords(t,"targetTouches"),i=s.getTouchCoords(t,"targetTouches"),a={...s.params},o={...s.params},n={...s.params},r={...s.params},l={...s.params};s.startCoord=s.getCenterCoord(e),s.startTime=Date.now(),s.isMobi&&1!==t.targetTouches.length?s.holdHandle&&clearTimeout(s.holdHandle):s.holdHandle=setTimeout((()=>{a.coord={...s.startCoord},a.name="hold",s.handlers.hasOwnProperty("hold")&&s.emit("hold",a),s.options.onHold&&s.options.onHold.call(s,a),clearTimeout(s.holdHandle)}),s.options.click.holdDelay),s.isMobi&&t.targetTouches.length>1&&(s.startCoord=s.getCenterCoord(i),n.coord={...s.startCoord},n.scale.value=s.lastValues.scale,n.name="scale",s.handlers.hasOwnProperty("scale")&&s.emit("scale",n),s.options.onScale&&s.options.onScale.call(s,n),r.coord={...s.startCoord},r.rotate.value=s.lastValues.rotate,r.name="rotate",s.handlers.hasOwnProperty("rotate")&&s.emit("rotate",r),s.options.onRotate&&s.options.onRotate.call(s,r)),o.coord={...s.startCoord},o.translate.value={...s.lastValues.translate},o.name="translate",s.handlers.hasOwnProperty("translate")&&s.emit("translate",o),s.options.onTranslate&&s.options.onTranslate.call(s,o),l.coord={...s.startCoord},l.scale.value=s.lastValues.scale,l.rotate.value=s.lastValues.rotate,l.translate.value={...s.lastValues.translate},l.name="start",s.handlers.hasOwnProperty("start")&&s.emit("start",l),s.options.onStart&&s.options.onStart.call(s,l),s.started=!0,s.eventState="start"},this.moveFun=function(t){if(t.stopPropagation(),t.cancelable&&t.preventDefault(),!s.started)return!1;s.driftListen&&(cancelAnimationFrame(s.driftListen),s.driftListen=null),s.moveCount++,s.params.originEvent=t,s.targetDom.style.transitionDuration="0ms";let e=s.getTouchCoords(t,"targetTouches"),i=1===s.moveCount;s.moveValues=s.getMoveValues(e,s.startCoord);let a={...s.params,coord:s.moveValues.c,moveStart:i},o={...a},n={...a},r={...a},l={...a};s.diffValues.translate={x:~~s.moveValues.x,y:~~s.moveValues.y,h:~~s.moveValues.h},s.updateNowTranslate(s.diffValues.translate),s.moveValues.h>s.jitterValue&&s.holdHandle&&clearTimeout(s.holdHandle),o=axExtend(a,{translate:{diff:{...s.diffValues.translate},value:{...s.nowValues.translate},direction:s.moveValues.d},name:"translating"}),s.handlers.hasOwnProperty("translating")&&s.emit("translating",o),s.options.onTranslating&&s.options.onTranslating.call(s,o),s.isMobi&&t.targetTouches.length>1&&(s.touchesMoveCount++,s.triangleValues.now=s.getTriangleValues(e[0],e[1]),1===s.touchesMoveCount?(s.triangleValues.start={...s.triangleValues.now},s.diffValues.scale=0,s.diffValues.rotate=0,a.touchesStart=!0):(s.diffValues.scale=s.triangleValues.now.h/s.triangleValues.last.h-1,s.diffValues.rotate=s.triangleValues.now.a-s.triangleValues.last.a,s.correctDiffRotate()),s.correctRangeScale(),s.correctRangeRotate(),n=axExtend(a,{scale:{diff:axNumber(s.diffValues.scale),value:{x:axNumber(s.nowValues.scale.x),y:axNumber(s.nowValues.scale.y)},direction:s.diffValues.scale>0?1:s.diffValues.scale<0?-1:0},name:"scaling"}),s.options.scale.centered||(n.scale.translate=s.getTranslate({coord:n.coord,diff:n.scale.diff})),s.handlers.hasOwnProperty("scaling")&&s.emit("scaling",n),s.options.onScaling&&s.options.onScaling.call(s,n),r=axExtend(a,{rotate:{diff:axNumber(s.diffValues.rotate),value:axNumber(s.nowValues.rotate),direction:s.diffValues.rotate>0?1:s.diffValues.rotate<0?-1:0},name:"rotating"}),s.handlers.hasOwnProperty("rotating")&&s.emit("rotating",r),s.options.onRotating&&s.options.onRotating.call(s,r)),l=axExtend(a,{rotate:r.rotate,scale:n.scale,translate:o.translate,name:"move"}),s.handlers.hasOwnProperty("move")&&s.emit("move",l),s.options.onMove&&s.options.onMove.call(s,l),s.triangleValues.last={...s.triangleValues.now},s.eventState="move"},this.endFun=function(t){if(t.stopPropagation(),t.cancelable&&t.preventDefault(),!s.started)return!1;s.moveCount=s.touchesMoveCount=0,s.params.originEvent=t,s.params.moveTime=s.diffTime=Date.now()-s.startTime,s.holdHandle&&clearTimeout(s.holdHandle);let e=s.diffValues.translate.h>s.options.drift.distTHR&&s.diffTime<s.options.drift.timeTHR,i={...s.params,coord:{...s.moveValues.c},translate:{diff:{...s.diffValues.translate},value:{...s.nowValues.translate},direction:{...s.moveValues.d}},...s.endParams},a={...s.params,...s.endParams},o={...a},n={...a},r={...a};if(s.diffValues.translate.h<s.jitterValue&&s.diffTime<s.options.click.timeTHR&&(!s.isMobi&&0===t.button||s.isMobi)){let e=s.getTouchCoords(t,"changedTouches"),i=s.getCenterCoord(e);a.coord=i,a.name="click",s.options.click.dblclickable?(s.clickCount++,1===s.clickCount&&setTimeout((()=>{1===s.clickCount?(s.handlers.hasOwnProperty("click")&&s.emit("click",a),s.options.onClick&&s.options.onClick.call(s,a)):s.clickCount>1&&(a.name="dblclick",s.handlers.hasOwnProperty("dblclick")&&s.emit("dblclick",a),s.options.onDblclick&&s.options.onDblclick.call(s,a)),s.clickCount=0}),s.options.click.delay)):(s.handlers.hasOwnProperty("click")&&s.emit("click",a),s.options.onClick&&s.options.onClick.call(s,a))}if(s.options.drift.enable&&e){let t=~~((s.options.drift.timeTHR-s.diffTime)*s.options.drift.coef),e=~~(t*(s.diffValues.translate.x/s.diffValues.translate.h)),a=~~(t*(s.diffValues.translate.y/s.diffValues.translate.h));i.drift.direction=i.translate.direction,i.drift.diff={x:e,y:a,h:t},i.drift.duration=s.options.drift.duration,i.drift.value={x:i.translate.value.x+e,y:i.translate.value.y+a},i.translate.isDrift=!0,i.name="drift",s.targetDom.style.transitionDuration=`${s.options.drift.duration}ms`,s.handlers.hasOwnProperty("drift")&&s.emit("drift",i),s.options.onDrift&&s.options.onDrift.call(s,i),s.driftListen=axListenAnimation({duration:s.options.drift.duration,doing:()=>{s.handlers.hasOwnProperty("drifting")&&s.emit("drifting",i),s.options.onDrifting&&s.options.onDrifting.call(s,i)},done:()=>{let t=axGetStyleTransform(s.targetDom,["translate"],s.options.translate.positionInstead).translate;i.drift.value.x===t.x&&i.drift.value.y===t.y&&(s.handlers.hasOwnProperty("drifted")&&s.emit("drifted",i),s.options.onDrifted&&s.options.onDrifted.call(s,i))}})}i.name="translated",s.handlers.hasOwnProperty("translated")&&s.emit("translated",i),s.options.onTranslated&&s.options.onTranslated.call(s,i),s.isMobi&&(o.scale.diff=axNumber(s.diffValues.scale),o.scale.value={x:axNumber(s.nowValues.scale.x),y:axNumber(s.nowValues.scale.y)},o.name="scaled",s.handlers.hasOwnProperty("scaled")&&s.emit("scaled",o),s.options.onScaled&&s.options.onScaled.call(s,o),n.rotate.diff=axNumber(s.diffValues.rotate),n.rotate.value=axNumber(s.nowValues.rotate),n.name="rotated",s.handlers.hasOwnProperty("rotated")&&s.emit("rotated",n),s.options.onRotated&&s.options.onRotated.call(s,n),s.lastValues.rotate=s.nowValues.rotate,s.lastValues.scale={...s.nowValues.scale}),r.translate=i.translate,r.drift=i.drift,r.scale=o.scale,r.rotate=n.rotate,r.name="end",s.handlers.hasOwnProperty("end")&&s.emit("end",r),s.options.onEnd&&s.options.onEnd.call(s,r),s.lastValues.translate={...s.nowValues.translate},s.setCompleted()},this.wheelFun=function(t){t.stopPropagation(),t.preventDefault(),s.getStartValues();let e=s.correctWheelDirection(axIsScrollUp(t,s.scrollObj.detail)),i=e?1:-1;s.options.wheel.duration&&(s.targetDom.style.transitionDuration=`${s.options.wheel.duration}ms`),s.params=axClone(s.paramsFormat),s.params=axExtend(s.params,{originEvent:t,coord:{x:t.clientX,y:t.clientY},wheel:{direction:{x:i,y:i}},translate:{value:{...s.nowValues.translate}},scale:{value:{...s.nowValues.scale},direction:i},rotate:{value:s.nowValues.rotate,direction:i},moveTime:1e3*parseFloat(axStyle(s.targetDom).transitionDuration)});let a={...s.params,name:`${s.options.wheel.action}move`},o={...s.params,name:"move"};if("scale"===s.options.wheel.action)s.diffValues.scale=e?s.options.wheel.scale:-s.options.wheel.scale,s.correctRangeScale(),a.scale.diff=axNumber(s.diffValues.scale),a.scale.value={x:axNumber(s.nowValues.scale.x),y:axNumber(s.nowValues.scale.y)},s.options.scale.centered||(a.scale.translate=s.getTranslate({coord:a.coord,diff:a.scale.diff})),s.handlers.hasOwnProperty("scaling")&&s.emit("scaling",a),s.options.onScaling&&s.options.onScaling.call(s,a);else if("rotate"===s.options.wheel.action)s.diffValues.rotate=e?s.options.wheel.degree:-s.options.wheel.degree,s.correctRangeRotate(),a.rotate.diff=axNumber(s.diffValues.rotate),a.rotate.value=axNumber(s.nowValues.rotate),s.handlers.hasOwnProperty("rotating")&&s.emit("rotating",a),s.options.onRotating&&s.options.onRotating.call(s,a);else if("translate"===s.options.wheel.action){let t="y"===s.options.wheel.axis?{x:0,y:-i}:{x:-i,y:0},e=-i*s.options.wheel.distance,o="y"===s.options.wheel.axis?0:e,n="x"===s.options.wheel.axis?0:e;s.diffValues.translate={x:o,y:n,h:s.options.wheel.distance},s.updateNowTranslate(s.diffValues.translate),a.translate.diff=s.diffValues.translate,a.translate.value=s.nowValues.translate,a.translate.direction=t,s.handlers.hasOwnProperty("translating")&&s.emit("translating",a),s.options.onTranslating&&s.options.onTranslating.call(s,a)}o[s.options.wheel.action]=a[s.options.wheel.action],s.handlers.hasOwnProperty("move")&&s.emit("move",o),s.options.onMove&&s.options.onMove.call(s,o),s.lastValues[s.options.wheel.action]={...s.nowValues[s.options.wheel.action]}},this.cancelFun=function(t){t.stopPropagation(),t.preventDefault(),s.setCompleted();let e=Object.assign(axClone(s.paramsFormat),{originEvent:t,coord:{x:t.clientX,y:t.clientY},...s.endParams,name:"cancel"});s.handlers.hasOwnProperty("cancel")&&s.emit("cancel",e),s.options.onCancel&&s.options.onCancel.call(s,e)},this.menuFun=function(t){t.stopPropagation(),t.preventDefault();let e=Object.assign(axClone(s.paramsFormat),{originEvent:t,coord:{x:t.clientX,y:t.clientY},...s.endParams,name:"hold"});s.handlers.hasOwnProperty("hold")&&s.emit("hold",e),s.options.onHold&&s.options.onHold.call(s,e)},this.init()}getStartValues(){this.startValues=axGetStyleTransform(this.targetDom,["translate","scale","rotate"],this.options.translate.positionInstead),this.nowValues={translate:{...this.startValues.translate,h:~~this.calcDistance(this.startValues.translate.x,this.startValues.translate.y)},scale:{...this.startValues.scale},rotate:this.startValues.rotate},this.lastValues=axClone(this.nowValues)}init(t){return axInstance.push(this,this.options.insName,"gesture"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.options.initial&&axSetStyleTransform(this.targetDom,this.options.initial,this.options.translate.positionInstead),this.initialValues=this.options.translate.positionInstead?axGetStyleTransform(this.targetDom,["translate","scale","rotate","skew"],this.options.translate.positionInstead):this.targetDom.style.transform,this.targetDom.addEventListener(axEventMap[0],this.startFun,{passive:!1}),this.targetDom.addEventListener(axEventMap[1],this.moveFun,{passive:!1}),this.targetDom.addEventListener(axEventMap[2],this.endFun,{passive:!1}),this.targetDom.addEventListener(axEventMap[3],this.cancelFun,{passive:!1}),this.isMobi||(this.options.wheel.action&&this.targetDom.addEventListener(this.scrollObj.event,this.wheelFun,{passive:!1}),this.options.click.holdToMenu&&this.targetDom.addEventListener("contextmenu",this.menuFun)),this.parentDom=this.options.parent?axIdToDom(this.options.parent):null,this.setCompleted(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),t&&t.call(this),this}updateNowTranslate(t){let e=this.lastValues.translate.x+t.x,s=this.lastValues.translate.y+t.y;e=axClampValue({value:e,min:this.options.translate.min,max:this.options.translate.max}),s=axClampValue({value:s,min:this.options.translate.min,max:this.options.translate.max}),this.nowValues.translate={x:~~e,y:~~s}}getMoveValues(t,e){let s=this.getCenterCoord(t),i=this.getTriangleValues(s,e),a=~~i.h,o=~~i.x,n=~~i.y;return{c:s,h:a,x:o,y:n,d:{x:o>0?1:o<0?-1:0,y:n>0?1:n<0?-1:0}}}setCompleted(){this.parentDom&&!this.isMobi&&(this.parentDom.addEventListener("mouseleave",this.endFun,{passive:!1}),this.options.wheel.action&&this.parentDom.addEventListener(this.scrollObj.event,this.wheelFun,{passive:!1})),this.started=!1,this.moveCount=this.touchesMoveCount=0,this.diffValues={scale:0,rotate:0,translate:{x:0,y:0,h:0}},this.holdHandle&&clearTimeout(this.holdHandle)}getOrign(t,e){let s=t.x-e.left,i=t.y-e.top;return s<0?s=0:s>e.width&&(s=e.width),i<0?i=0:i>e.height&&(i=e.height),{x:s,y:i}}getTranslate(t){let e=axStyle(this.targetDom),s=parseInt(e.width),i=parseInt(e.height),a=this.options.origin||{x:s/2,y:i/2},o=this.targetDom.getBoundingClientRect(),n=this.getOrign(t.coord,o),r=axGetStyleTransform(this.targetDom,["translate"],this.options.translate.positionInstead),l=e=>(a[e]-("x"===e?s:i)*(t=>{let e=n[t]/o["x"===t?"width":"height"];return e<0?e=0:e>1&&(e=1),e})(e))*t.diff;return{x:~~(r.translate.x+l("x")),y:~~(r.translate.y+l("y"))}}getTouchCoords(t,e="targetTouches"){let s=[];if(this.isMobi)for(let i of t[e])s.push({x:~~i.clientX,y:~~i.clientY});else s.push({x:~~t.clientX,y:~~t.clientY});return s}getCenterCoord(t){let e,s=(e,s)=>{let i=0;for(let a=0;a<e;a++)i+=t[a][s];return i/e};return e=t.length>1?{x:~~s(2,"x"),y:~~s(2,"y")}:1===t.length?t[0]:{x:0,y:0},e}calcDistance(t,e){return Math.sqrt(t*t+e*e)}getTriangleValues(t,e){let s=t.x-e.x,i=t.y-e.y;return{x:s,y:i,h:this.calcDistance(s,i),a:180*Math.atan2(i,s)/Math.PI}}correctRangeRotate(){this.nowValues.rotate=this.correctRangeValue("rotate",this.nowValues.rotate);let t=this.nowValues.rotate+this.diffValues.rotate;t>=this.options.rotate.max?this.diffValues.rotate=this.options.rotate.max-this.nowValues.rotate:t<=this.options.rotate.min&&(this.diffValues.rotate=this.options.rotate.min-this.nowValues.rotate),this.nowValues.rotate+=this.diffValues.rotate}correctDiffRotate(){this.triangleValues.now.a>0&&this.triangleValues.last.a<0?this.triangleValues.now.a>90&&this.triangleValues.last.a<-90?this.diffValues.rotate=360-this.diffValues.rotate:this.triangleValues.now.a<90&&this.triangleValues.last.a>-90&&(this.diffValues.rotate=-this.diffValues.rotate):this.triangleValues.now.a<0&&this.triangleValues.last.a>0&&(this.triangleValues.now.a>-90&&this.triangleValues.last.a<90?value=-this.diffValues.rotate:this.triangleValues.now.a<-90&&this.triangleValues.last.a>90&&(this.diffValues.rotate=-(360+this.diffValues.rotate)))}correctRangeScale(){this.nowValues.scale.x=this.correctRangeValue("scale",this.nowValues.scale.x),this.nowValues.scale.y=this.correctRangeValue("scale",this.nowValues.scale.y);let t=this.nowValues.scale.x+this.diffValues.scale,e=this.nowValues.scale.y+this.diffValues.scale;t>=this.options.scale.max||e>=this.options.scale.max?this.diffValues.scale=Math.min(this.options.scale.max-this.nowValues.scale.x,this.options.scale.max-this.nowValues.scale.y):(t<=this.options.scale.min||e<=this.options.scale.min)&&(this.diffValues.scale=Math.min(this.options.scale.min-this.nowValues.scale.x,this.options.scale.min-this.nowValues.scale.y)),this.nowValues.scale.x+=this.diffValues.scale,this.nowValues.scale.y+=this.diffValues.scale}correctRangeValue(t,e){let s;return s=e<this.options[t].min?this.options[t].min:e>this.options[t].max?this.options[t].max:e,s}keepDiffZero(t){(this.nowValues[t].x===this.options[t].min&&this.nowValues[t].y===this.options[t].min||this.nowValues[t].x===this.options[t].max&&this.nowValues[t].y===this.options[t].max)&&(this.diffValues[t]=0)}correctWheelDirection(t){return this.options.wheel.reverse?!t:t}reset(t){return this.targetDom.style.transform=this.initialValues,this.handlers.hasOwnProperty("reset")&&this.emit("reset",""),this.options.onReset&&this.options.onReset.call(this),t&&t.call(this),this}destroy(t){return this.destroyed||(this.setCompleted(),this.reset(),this.targetDom.removeEventListener(axEventMap[0],this.startFun),this.targetDom.removeEventListener(axEventMap[1],this.moveFun),this.targetDom.removeEventListener(axEventMap[2],this.endFun),this.targetDom.removeEventListener(axEventMap[3],this.cancelFun),this.isMobi||(this.options.wheel.action&&this.targetDom.removeEventListener(this.scrollObj.event,this.wheelFun),this.options.click.holdToMenu&&this.targetDom.removeEventListener("contextmenu",this.menuFun)),this.parentDom&&!this.isMobi&&(this.parentDom.removeEventListener("mouseleave",this.endFun),this.options.wheel.action&&this.parentDom.removeEventListener(this.scrollObj.event,this.wheelFun)),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：轮播；使用方法：new axSwiper('#id',{参数})
 */class axSlider{constructor(t,e){return!!t&&(this.targetDom=axIdToDom(t),!!this.targetDom&&(this.options=axExtend({insName:"",storageName:"",content:"",separator:",",async:{enable:!1,type:"post",source:"json",data:null},lazyShow:!1,lazyload:{visible:[.2],dataName:"src",onAsync:""},active:0,duration:500,throttle:0,slides:1,grouped:!1,loop:!1,unsnappedAttr:"unsnapped",autoHeight:!1,gap:0,centered:!1,centeredFill:!1,divide:1,keyboard:!1,breakpoints:{},autoplay:{enable:!1,delay:4e3,countdown:!1},scroll:{axis:"x",snap:{enable:!0},drift:{timeTHR:200}},scale:{enable:!1,min:1,max:3},scaleGap:50,tools:[],total:{enable:!1,placement:"left-top"},pagination:{enable:!1,className:"",type:"lamp",selector:"",data:[],callback:""},navigation:{enable:!1,className:"",Filled:!1,prev:{selector:"",className:"",text:""},next:{selector:"",className:"",text:""}},integrated:!1,onInit:"",onSlide:"",onSlided:"",onStartPlay:"",onStopPlay:"",onToStart:"",onToEnd:"",onZoomin:"",onZoomout:"",onUpdated:"",onDestroy:"",onSave:""},e,this.targetDom,this.constructor.name),this.handlers={},"x"===this.options.scroll.axis?this.propsMap={position:"left",gap:"marginLeft",client:"clientX",size:"width",offset:"offsetLeft",reverse:{size:"height",gap:"marginTop"}}:"y"===this.options.scroll.axis&&(this.propsMap={position:"top",gap:"marginTop",client:"clientY",size:"height",offset:"offsetTop",reverse:{size:"width",gap:"marginLeft"}}),this.delayScroll=()=>{this.activeIndex>=this.bullets.at(-1).index?(this.stopPlay(),this.toStart((()=>{this.startPlay()}))):(this.setCountdown(),this.toNext())},this.startClone=[],this.endClone=[],this.keyToSwipe=axThrottle((t=>{"ArrowLeft"===t.code&&this.toPrev(),"ArrowRight"===t.code&&this.toNext()}),this.options.throttle,!0),this.init(),this))}begin(){if(this.data=[],this.bullets=[],axInstance.push(this,this.options.insName,"slider"),this.destroyed=!1,this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}this.activeIndex=this.options.active,!0===this.options.pagination?this.options.pagination={enable:!0,type:"lamp"}:!1===this.options.pagination&&(this.options.pagination={enable:!1}),!0===this.options.navigation?this.options.navigation={enable:!0}:!0===this.options.navigation&&(this.options.navigation={enable:!1}),!0===this.options.autoplay?this.options.autoplay={enable:!0,delay:4e3}:!1===this.options.autoplay&&(this.options.autoplay={enable:!1}),this.pause=!0,!0===this.options.total?this.options.total={enable:!0,placement:"left-top"}:!1===this.options.total&&(this.options.total={enable:!1}),!0===this.options.async&&(this.options.async={enable:!0,type:"post",source:"json"}),!0===this.options.scale&&(this.options.scale={enable:!0,min:1,max:3}),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints)}getDistMouse(){let t=0;return this.options.loop||this.options.grouped&&this.options.slides>1?t="snap":this.options.slides>=1&&(t=this.options.gap?this.slideSize+this.options.gap:1/this.options.slides),t}getPaddingStart(){return this.options.slides>=1&&this.options.centered?(this.targetSize-this.slideSize)/2:0}getInitSlide(){return this.options.centered&&this.options.centeredFill?this.options.slides>1&&this.activeIndex<~~(this.options.slides/2)&&(this.activeIndex=~~(this.options.slides/2)):this.activeIndex>this.slides.length-1&&(this.activeIndex=this.slides.length-1),this.slides[this.activeIndex].dom}init(){this.begin(),this.createWrapper(),this.setAttribute(),this.spyIns=new axSpy(this.targetDom,{visible:[1],onShown:()=>{this.options.keyboard&&window.addEventListener("keydown",this.keyToSwipe)},onOut:()=>{this.options.keyboard&&window.removeEventListener("keydown",this.keyToSwipe)}}),this.getSlidersData((t=>(this.slides=t,this.setSlidesObserve(),this.fillTarget(),this.setScroll(),this.setCage(),this.setLoopPlay(),this.setAutoPlay(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this)))}getUnbounds(){return[...this.scrollIns.unbounds,this.prevDom,this.nextDom,this.toolsDom,this.countdownDom,...this.bullets.map((t=>t.dom))].filter(Boolean)}setScroll(){this.scrollOpt=axExtend({wrapper:this.wrapperDom,transInit:this.getInitSlide(),duration:this.options.duration,distMouse:this.getDistMouse(),paddingStart:this.getPaddingStart(),paddingEnd:this.getPaddingStart(),insertable:!this.options.loop},this.options.scroll),this.options.grouped&&this.options.slides>1&&(this.scrollOpt.snap.unsnapped=`[${this.options.unsnappedAttr}]`),this.options.slides>=1&&(this.scrollOpt.drift.mode=this.options.gap?this.targetSize+this.options.gap:1),this.scrollIns=new axScroll(this.targetDom,this.scrollOpt),this.scrollIns.unbounds=this.getUnbounds(),this.scrollIns.on("snap",(t=>{this.slided=!1;let e=this.bullets.find((e=>e.target.dom===t));e&&(this.activeIndex=e.index,this.numeratorDom&&(this.numeratorDom.innerHTML=this.activeIndex+1),this.setBulletActive(e),this.setNavState(),this.options.autoHeight&&(this.targetDom.style.height=axStyle(e.target.dom).height),this.handlers.hasOwnProperty("slide")&&this.emit("slide",e),this.options.onSlide&&this.options.onSlide.call(this,e),this.save());let s=this.slides.filter((t=>t.scaled));s.length>0&&s.forEach((t=>{this.toZoomout(t)}))})),this.scrollIns.on("snapped",(t=>{let e=this.slides.findIndex((e=>e.dom===t)),s=this.bullets.find((e=>e.target.dom===t));if(-1===e)if(this.endClone.length>0&&this.endClone.includes(t)){let e=this.endClone.findIndex((e=>e===t));this.scrollIns.locateTo(this.slides.at(e-this.totalClone).dom)}else if(this.startClone.length>0&&this.startClone.includes(t)){let e=this.startClone.findIndex((e=>e===t));this.scrollIns.locateTo(this.slides[e].dom)}s&&(this.handlers.hasOwnProperty("slided")&&this.emit("slided",s),this.options.onSlided&&this.options.onSlided.call(this,s),s===this.bullets[0]?(this.handlers.hasOwnProperty("toStart")&&this.emit("toStart",s),this.options.onToStart&&this.options.onToStart.call(this,s)):s===this.bullets.at(-1)&&(this.handlers.hasOwnProperty("toEnd")&&this.emit("toEnd",s),this.options.onToEnd&&this.options.onToEnd.call(this,s)))})),this.scrollIns.on("move",(t=>{this.options.loop&&(t>0?this.scrollIns.locateTo(this.slides.at(-this.totalClone).dom):t<this.scrollIns.difference&&this.scrollIns.locateTo(this.slides[0].dom)),this.stopPlay(!0)})),this.scrollIns.on("resized",((t,e)=>{e===this.targetDom&&(this.resetSlidesSize(t),this.scrollIns.setSnapped())})),this.scrollIns.on("mouse",(()=>{this.stopPlay(!0)}))}setCage(){if(!this.options.scale.enable)return!1;for(let t of this.slides)t.dom.hasAttribute("unscalable")||0===t.dom.children.length||(t.cage=new axCage(t.dom,{init:!1,drift:{enable:!0},scale:this.options.scale,completedTHR:this.options.scaleGap,onCompleted:t=>{"x"===this.options.scroll.axis?"left"===t?this.toNext():"right"===t&&this.toPrev():"y"===this.options.scroll.axis&&("top"===t?this.toNext():"bottom"===t&&this.toPrev())}}),t.dom.ondblclick=()=>{if(0===t.dom.children.length)return!1;t.scaled?this.toZoomout(t):this.toZoomin(t)})}scaleToggle(t,e){"destroy"===e?(t.cage.destroy(),Reflect.deleteProperty(t,"scaled")):(t.cage.init((()=>{t.cage.setValues({value:this.options.scale.max,type:"scale"})})),t.scaled=!0)}findSlide(t){let e=axType(t),s=null;return t?"Number"===e?s=this.slides[t]:"Object"===e?s=t:e.includes("HTML")&&(s=this.slides.find((e=>e.dom===t))):s=this.slides[this.activeIndex],s}toZoomin(t,e){let s=this.findSlide(t);(s||s.children.length>0)&&(this.scaleToggle(s,"init"),e&&e.call(this),this.handlers.hasOwnProperty("zoomin")&&this.emit("zoomin",s),this.options.onZoomin&&this.options.onZoomin.call(this,s))}toZoomout(t,e){let s=this.findSlide(t);(s||s.children.length>0)&&(this.scaleToggle(s,"destroy"),e&&e.call(this),this.handlers.hasOwnProperty("zoomout")&&this.emit("zoomout",s),this.options.onZoomout&&this.options.onZoomout.call(this,s))}setAttribute(){!this.targetDom.classList.contains("ax-slider")&&this.targetDom.classList.add("ax-slider"),this.options.divide>1&&this.targetDom.setAttribute("display","grid"),this.targetDom.setAttribute("axis",this.options.scroll.axis),this.targetDom.setAttribute("slides",this.options.slides)}createSliderDom(t){let e;if("image"===t.type)props={type:"image"},e=this.options.lazyShow?`<img src="${axImage.blank}" data-${this.options.lazyload.dataName}="${t.content}"/>`:`<img src="${t.content}"/>`,t.dom=axAddElem("li",{type:"image"},e);else if("video"===t.type)e=this.options.lazyShow?`<video controls="controls" data-${this.options.lazyload.dataName}="${t.content}"></video>`:`<video controls="controls" src="${t.content}"></video>`,t.dom=axAddElem("li",{type:"video"},e);else if("audio"===t.type)e=this.options.lazyShow?`<audio controls="controls" data-${this.options.lazyload.dataName}="${t.content}"></audio>`:`<audio controls="controls" src="${t.content}"></audio>`,t.dom=axAddElem("li",{type:"audio"},e);else if("url"===t.type)e=this.options.lazyShow?`<iframe data-${this.options.lazyload.dataName}="${t.content}" frameborder="0"></iframe>`:`<iframe src="${t.content}" frameborder="0"></iframe>`,t.dom=axAddElem("li",{type:"url"},e);else if("node"===t.type)"LI"===t.content.nodeName?(t.dom=t.content,t.dom.setAttribute("type","node")):(t.dom=axAddElem("li",{type:"node"}),t.dom.appendChild(t.content));else if("async"===t.type)if(this.options.lazyShow){let e={type:"async"};e[`data-${this.options.lazyload.dataName}`]=t.content,!axIsEmpty(t.data)&&(e["data-async"]=JSON.stringify(t.data)),t.dom=axAddElem("li",e)}else t.dom=axAddElem("li",{type:"async"}),axAjax({url:t.content,type:this.options.async.type,data:t.data,before:()=>{t.dom.setAttribute("loading","")},success:e=>{t.dom.removeAttribute("loading"),"string"==typeof e.content?t.dom.innerHTML=e.content:t.callback&&t.callback.call(this,e.content,t)}});else"text"!==t.type&&t.type||(t.type="text",t.content=t.content.trim(),e=axStrType(t.content)?document.querySelector(t.content).innerHTML:t.content,t.dom=axAddElem("li",{type:"text"},e))}getSlidersData(t){let e=[];if(this.wrapperDom.innerHTML)e=[...this.wrapperDom.children].map((t=>{let e={dom:t};if(t.getAttribute("label")&&(e.label=t.getAttribute("label")),1===t.children.length){let s=t.children[0],i=s.nodeName;"IMG"===i?(e.type="image",e.content=s.src,e.label=s.alt||s.title||t.getAttribute("label")||"",e.poster=t.getAttribute("poster")||""):"IFRAME"===i?(e.type="url",e.content=s.src,e.label=s.alt||s.title||t.getAttribute("label")||"",e.poster=t.getAttribute("poster")||""):"VIDEO"===i?(e.type="video",e.content=s.src,e.label=t.getAttribute("label")||"",e.poster=s.getAttribute("poster")||t.getAttribute("poster")||""):"AUDIO"===i&&(e.type="audio",e.content=s.src,e.label=t.getAttribute("label")||"",e.poster=t.getAttribute("poster")||"")}else e.type="text",e.content=t.innerHTML,e.label=t.getAttribute("label")||"",e.poster=t.getAttribute("poster")||"";return e})),t(e);else{let s,i=axType(this.options.content);if("String"===i)this.options.async.enable?axAjax({url:this.options.content,type:this.options.async.type,data:this.options.async.data,before:()=>{this.targetDom.setAttribute("loading","")},success:s=>{this.targetDom.removeAttribute("loading"),s.content.forEach((t=>{this.createSliderDom(t)})),e=s.content,t(e)}}):(e=this.options.content.split(this.options.separator).map((t=>(s=this.options.lazyShow?`<img src="${axImage.blank}" data-${this.options.lazyload.dataName}="${t}"/>`:`<img src="${t}"/>`,{type:"image",content:t,dom:axAddElem("li",{type:"image"},s)}))),t(e));else if("Array"===i){let i=axType(this.options.content[0]);"String"===i?e=this.options.content.map((t=>(s=this.options.lazyShow?`<img src="${axImage.blank}" data-${this.options.lazyload.dataName}="${t}"/>`:`<img src="${t}"/>`,{type:"image",content:t,dom:axAddElem("li",{type:"image"},s)}))):i.includes("HTML")?e=this.options.content.map((t=>{let e={type:"node",content:t};return"LI"===t.nodeName?(e.dom=t,e.dom.setAttribute("type","node")):(e.dom=axAddElem("li",{type:"node"}),e.dom.appendChild(t)),e})):"Object"===i&&(this.options.content.forEach((t=>{this.createSliderDom(t)})),e=this.options.content),t(e)}}}getAccuracy(t,e=!0){return(t.toString().split(".")[1]?t.toString().split(".")[1].length:0)>3?axNumber(t+(e?.1:0),{mode:e?"ceil":"floor",places:1}):t}getSingleSize(){let t=(this.targetSize-this.options.gap*(this.options.slides-1))/this.options.slides;if(this.slideSize=this.getAccuracy(t,!(this.options.gap>0)),this.options.divide>1){let t=(parseInt(axStyle(this.targetDom)[this.propsMap.reverse.size])-this.options.gap*(this.options.divide-1))/this.options.divide;this.slideSizeDivide=this.getAccuracy(t,!(this.options.gap>0))}}setSingleSize(t){this.options.slides>0&&(t.dom.style[this.propsMap.size]=this.slideSize+"px")}setSingleGap(t,e){e=0===e?0:e||this.slides.findIndex((e=>e===t)),this.options.divide>1?(t.dom.style[this.propsMap.reverse.size]=this.getAccuracy(this.slideSizeDivide,!1)+"px",e%this.options.divide!=0&&this.options.gap&&(t.dom.style[this.propsMap.reverse.gap]=this.options.gap+"px"),e>=this.options.divide&&(t.dom.style[this.propsMap.gap]=this.options.gap+"px")):0!==e&&(t.dom.style[this.propsMap.gap]=this.options.gap+"px")}resetSlidesSize(t){let e=axIsEmpty(t)?"":t[this.propsMap.size];this.getTargetSize(e),this.getSingleSize(),this.setSlidersSize()}resetSlidesGap(){this.options.slides>0&&(this.options.divide>1?this.slides.forEach(((t,e)=>{this.setSingleGap(t,e)})):this.options.gap>0&&this.slides.forEach((t=>{this.setSingleGap(t)})))}getTargetSize(t){let e=axStyle(this.targetDom),s=parseInt(e.height),i=parseInt(e.width);"x"===this.options.scroll.axis?this.targetSize=t||i:"y"===this.options.scroll.axis&&(this.targetSize=t||s)}setSlidersSize(){this.options.slides>0&&(this.slides.forEach((t=>{this.setSingleSize(t)})),this.resetSlidesGap())}createWrapper(){this.targetDom.querySelector(".ax-slider-wrapper")?this.wrapperDom=this.targetDom.querySelector(".ax-slider-wrapper"):(this.wrapperDom=axAddElem("ul",{class:"ax-slider-wrapper"},""),this.targetDom.appendChild(this.wrapperDom)),this.targetDom.querySelector(".ax-slider-navigation")?this.navigationDom=this.targetDom.querySelector(".ax-slider-navigation"):this.options.integrated&&(this.navigationDom=axAddElem("div",{class:"ax-slider-navigation"},""),this.targetDom.appendChild(this.navigationDom))}fillTarget(){if(this.options.content){let t=document.createDocumentFragment();for(let e of this.slides)t.appendChild(e.dom);this.wrapperDom.appendChild(t)}this.resetSlidesSize(),this.lazyIns=this.options.lazyShow?new axLazyload(this.wrapperDom,axExtend({parent:this.targetDom},this.options.lazyload)):null,this.getBullets(),this.fillNavigation(),this.fillPagination(),this.fillTotal(),this.fillTools()}setSlidesObserve(){this.slidesObserve=new axObserve(this.slides),this.slidesObserve.instance.on("complete",(t=>{this.resetSlidesGap(),this.getBullets(),this.fillPagination(),this.setNavState(),this.scrollIns.unbounds=this.getUnbounds(),this.resetTotal(),this.scrollIns.setSnapped({force:!0})}))}getBullets(){this.bullets=[],this.paginationDom&&(this.paginationDom.innerHTML="");let t=this.slides.length,e=this.wrapperDom.getBoundingClientRect()[this.propsMap.size];"auto"===this.options.slides?this.slides.forEach(((t,s)=>{t.dom[this.propsMap.offset]<=e-this.targetSize&&this.bullets.push({target:t,dom:axAddElem("li"),index:s})})):this.slides.forEach(((e,s)=>{let i={target:e,dom:axAddElem("li"),index:s};this.options.centered&&this.options.slides>0?this.bullets.push(i):this.options.loop?this.options.grouped&&this.options.slides>1?s%this.options.slides==0?this.bullets.push(i):e.dom.setAttribute(this.options.unsnappedAttr,""):this.bullets.push(i):this.options.grouped&&this.options.slides>1?s%this.options.slides==0&&this.slides.length-s>=this.options.slides||s===t-this.options.slides?this.bullets.push(i):e.dom.setAttribute(this.options.unsnappedAttr,""):s<=t-this.options.slides&&this.bullets.push(i)}))}fillPagination(){if(!this.options.pagination.enable)return!1;if(this.pagesIns=null,this.targetDom.querySelector(".ax-slider-pagination"))this.paginationDom=this.targetDom.querySelector(".ax-slider-pagination");else if(this.options.pagination.selector){let t=axType(this.options.pagination.selector);t.includes("HTML")?this.paginationDom=this.options.pagination.selector:"String"===t?axStrType(this.options.pagination.selector)?this.paginationDom=axIdToDom(this.options.pagination.selector):(this.pagesIns=axInstance.find(this.options.pagination.selector,"slider"),this.pagesIns&&(this.paginationDom=this.pagesIns.wrapperDom)):"Object"===t&&(this.pagesIns=this.options.pagination.selector,this.paginationDom=this.pagesIns.wrapperDom)}else this.paginationDom=axAddElem("ul",{class:"ax-slider-pagination"},""),this.navigationDom&&this.prevDom?this.prevDom.insertAdjacentElement("afterend",this.paginationDom):this.targetDom.appendChild(this.paginationDom);if(this.paginationDom){if(this.options.pagination.type&&this.paginationDom.setAttribute("type",this.options.pagination.type),this.options.pagination.className&&axClass.add(this.paginationDom,this.options.pagination.className),this.paginationDom.children.length)this.bullets.forEach(((t,e)=>{this.paginationDom.children[e]&&(t.dom=this.paginationDom.children[e],e===this.activeIndex&&this.setBulletActive(t))}));else{let t=this.bullets.length,e=document.createDocumentFragment();this.bullets.forEach(((s,i)=>{let a;switch(i===this.activeIndex&&this.setBulletActive(s),this.options.pagination.type){case"text":a=s.target.label||this.options.pagination.data[i];break;case"thumb":a=`<img src="${s.target.poster||this.options.pagination.data[i]}"/>`;break;case"index":a=i+1;break;default:a=""}this.options.pagination.callback?this.options.pagination.callback.call(this,{index:i,total:t,data:s,parent:this.paginationDom}):s.dom.innerHTML=a,e.appendChild(s.dom)})),this.paginationDom.appendChild(e)}this.bullets.forEach(((t,e)=>{t.dom.onclick=()=>{this.setBulletActive(t),this.scrollIns.scrollTo(t.target.dom,this.options.duration),this.stopPlay(!0)}}))}}setNavState(){if(0===this.slides.length)return this.prevDom.setAttribute("disabled",""),this.nextDom.setAttribute("disabled",""),!1;this.options.loop||(this.prevDom&&(this.activeIndex===this.bullets[0].index?this.prevDom.setAttribute("disabled",""):this.prevDom.removeAttribute("disabled")),this.nextDom&&(this.activeIndex>=this.bullets.at(-1).index?this.nextDom.setAttribute("disabled",""):this.nextDom.removeAttribute("disabled")))}fillNavigation(){if(!this.options.navigation.enable)return!1;let t=t=>{let e,s=null;return e="prev"===t?"x"===this.options.scroll.axis?"left":"up":"next"===t?"x"===this.options.scroll.axis?"right":"down":"",this.targetDom.querySelector(`.ax-slider-${t}`)?s=this.targetDom.querySelector(`.ax-slider-${t}`):this.options.navigation[t]&&this.options.navigation[t].selector?s=axIdToDom(this.options.navigation[t].selector):(s=axAddElem("i",{class:`ax-slider-${t}`},e),this.navigationDom?this.navigationDom.appendChild(s):this.targetDom.appendChild(s)),s&&(this.options.navigation[t]&&this.options.navigation[t].className&&axClass.add(s,this.options.navigation[t].className),this.options.navigation[t]&&this.options.navigation[t].text&&(s.innerHTML=this.options.navigation[t].text),this.options.navigation.className&&axClass.add(s,this.options.navigation.className),this.options.navigation.filled&&s.setAttribute("filled",""),this.options.loop||("prev"===t&&0===this.activeIndex||"next"===t&&this.activeIndex>=this.bullets.length-1)&&s.setAttribute("disabled","")),s};this.options.navigation.enable&&(this.prevDom=t("prev"),this.nextDom=t("next"),this.prevDom&&(this.prevDom.onclick=axThrottle((()=>{this.toPrev(),this.stopPlay(!0)}),this.options.throttle,!0)),this.nextDom&&(this.nextDom.onclick=axThrottle((()=>{this.toNext(),this.stopPlay(!0)}),this.options.throttle,!0)))}resetTotal(t){if(!this.options.total.enable)return!1;0===(t=t||this.getTotal()).pages?this.numeratorDom.innerHTML=this.denominatorDom.innerHTML=0:(this.numeratorDom.innerHTML=t.current+1,this.denominatorDom.innerHTML=t.pages)}fillTotal(){if(!this.options.total.enable)return!1;let t=this.getTotal();this.totalDom=axAddElem("span",{class:"ax-slider-total"},"<i></i><s>/</s><u></u>"),this.numeratorDom=this.totalDom.querySelector("i"),this.denominatorDom=this.totalDom.querySelector("u"),this.resetTotal(t),this.options.total.placement&&this.totalDom.setAttribute("placement",this.options.total.placement),this.targetDom.appendChild(this.totalDom)}getTotal(){return{snapped:this.activeIndex,slides:this.slides.length,current:this.bullets.findIndex((t=>t.active)),pages:this.bullets.length}}createTool(t){let e=axType(t.action);t.dom=axAddElem("a",axIsEmpty(t.props)?{}:t.props,t.text?t.text:""),t.icon&&t.dom.classList.add("ax-iconfont",t.icon),t.disabled&&t.dom.setAttribute("inert",""),"String"===e?t.dom.href=t.action:"Function"===e&&(t.dom.onclick=()=>{t.action.call(this,this.bullets.find((t=>t.active)),t),t.dom.setAttribute("active",""),this.options.tools.forEach((e=>{e.dom!==t.dom&&e.dom.removeAttribute("active")}))}),this.toolsDom.appendChild(t.dom)}fillTools(){if(0===!this.options.tools.length)return!1;this.targetDom.querySelector(".ax-slider-tools")?this.toolsDom=this.targetDom.querySelector(".ax-slider-tools"):(this.toolsDom=axAddElem("span",{class:"ax-slider-tools"}),this.targetDom.appendChild(this.toolsDom)),this.options.tools.forEach((t=>{this.createTool(t)}))}toolDisabledToggle(t,e=!0){let s=this.options.tools.find((e=>e.name===t));s&&(e?(s.disabled=!0,s.dom.setAttribute("inert","")):(Reflect.deleteProperty(s,"disabled"),s.dom.removeAttribute("inert","")))}toPrev(t){if(this.destroyed)return this;let e=this.findOneSnap("prev");if(!this.options.loop&&this.scrollIns.snapped===this.bullets[0].target)return!1;this.scrollIns.setSnapped({target:e,callback:e=>{t&&t.call(this,this.bullets.find((t=>t.target.dom===e)))}})}toNext(t){if(this.destroyed)return this;let e=this.findOneSnap("next");if(!this.options.loop&&this.scrollIns.snapped===this.bullets.at(-1).target)return!1;this.scrollIns.setSnapped({target:e,callback:e=>{t&&t.call(this,this.bullets.find((t=>t.target.dom===e)))}})}toStart(t){if(this.destroyed)return this;let e=this.bullets[0];if(e.active)return!1;this.toBullet(e,{complete:e=>{t&&t.call(this,e)}})}toEnd(t){if(this.destroyed)return this;let e=this.bullets.at(-1);if(e.active)return!1;this.toBullet(e,{complete:e=>{t&&t.call(this,e)}})}findOneSnap(t="next"){let e=this.scrollIns.snappeds.findIndex((t=>t===this.scrollIns.snapped)),s=null;return"next"===t?e!==this.scrollIns.snappeds.length-1&&(s=this.scrollIns.snappeds[e+1]):"prev"===t?0!==e&&(s=this.scrollIns.snappeds[e-1]):"start"===t?s=this.scrollIns.snappeds[0]:"end"===t&&(s=this.scrollIns.snappeds.at(-1)),s}toBullet(t,e={before:null,complete:null}){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s,i=axType(t);if(s="Number"===i?t>=this.bullets.length-1?this.bullets.at(-1):t<=0?this.bullets[0]:this.bullets[t]:t,s===this.bullets.find((t=>t.active)))return!1;this.setBulletActive(s),e.before&&e.before.call(this,s),this.scrollIns.scrollTo(s.target.dom,this.options.duration,(()=>{e.complete&&e.complete.call(this,s)}))}setBulletActive(t){if(t.active)return!1;t.active=!0,t.dom.setAttribute("active",""),t.target.dom.setAttribute("snapped",""),t.target.snapped=!0,this.activeIndex=t.index;let e=this.bullets.find((e=>e!==t&&e.active));if(e&&(Reflect.deleteProperty(e,"active"),e.dom.removeAttribute("active"),Reflect.deleteProperty(e.target,"snapped"),e.target.dom.removeAttribute("snapped")),this.pagesIns&&this.pagesIns.options.slides>0){let t=this.pagesIns.activeIndex,e=this.bullets.findIndex((t=>t.active));this.pagesIns.activeIndex+this.pagesIns.options.slides<=e?t=e-this.pagesIns.options.slides+1:e<this.pagesIns.activeIndex&&(t=e),this.pagesIns.scrollIns.setSnapped({target:this.pagesIns.slides[t].dom})}}setLoopPlay(){if(!1===this.options.loop)return!1;"auto"===this.options.slides?(this.startClone=this.slides.map((t=>t.dom.cloneNode(!0))),this.endClone=this.slides.map((t=>t.dom.cloneNode(!0))),this.totalClone=this.slides.length):(this.startClone=this.slides.slice(0,this.options.slides).map((t=>t.dom.cloneNode(!0))),this.endClone=this.slides.slice(this.slides.length-this.options.slides).map((t=>t.dom.cloneNode(!0))),this.totalClone=this.options.slides),this.scrollIns.add(this.endClone,{placement:"start"}),this.scrollIns.add(this.startClone,{placement:"end"})}setCountdown(){this.countdownIns&&(axIsVnode(this.countdownDom)&&this.targetDom.appendChild(this.countdownDom),this.countdownIns.done(),this.countdownIns.set(0,this.options.autoplay.delay),this.countdownDom.onclick=()=>{let t=this.countdownDom.getAttribute("state");"pause"===t?this.startPlay():"play"===t&&this.stopPlay()})}setAutoPlay(){if(!this.options.autoplay.enable)return!1;this.options.autoplay.countdown&&(this.countdownDom=axAddElem("div",{class:"ax-progress"}),this.countdownIns=new axProgress(this.countdownDom,{labelShow:!1,value:100,type:"circle",curve:"linear"}),this.targetDom.appendChild(this.countdownDom)),this.startPlay()}startPlay(t){return this.destroyed||!this.pause?this:!!this.options.autoplay.enable&&(this.interval&&clearInterval(this.interval),this.interval=setInterval(this.delayScroll,this.options.autoplay.delay),this.setCountdown(),this.countdownDom&&this.countdownDom.setAttribute("state","play"),this.pause=!1,this.options.onStartPlay&&this.options.onStartPlay.call(this),this.handlers.hasOwnProperty("startPlay")&&this.emit("startPlay",""),t&&t.call(this),this)}stopPlay(t=!1,e){return this.destroyed||this.pause?this:!!this.options.autoplay.enable&&(this.countdownIns&&this.countdownIns.set(0,0),clearInterval(this.interval),t&&this.countdownDom&&this.countdownDom.remove(),this.countdownDom&&this.countdownDom.setAttribute("state","pause"),this.pause=!0,this.options.onStopPlay&&this.options.onStopPlay.call(this),this.handlers.hasOwnProperty("stopPlay")&&this.emit("stopPlay",""),e&&e.call(this),this)}add(t,e="end",s){if(this.destroyed)return this;let i=axType(t).includes("HTML")?{type:"node",content:t}:t;this.createSliderDom(i),this.setSingleSize(i),this.scrollIns.add(i.dom,{placement:e,callback:(t,s)=>{if("start"===e)this.slidesObserve.proxy.unshift(i);else if("end"===e)this.slidesObserve.proxy.push(i);else{let t=this.slides.findIndex((t=>t.dom===s));this.slidesObserve.proxy.splice(t+1,0,i)}}}),this.handlers.hasOwnProperty("add")&&this.emit("add",i),this.options.onAdd&&this.options.onAdd.call(this,i),s&&s.call(this,i)}remove(t="end",e){if(this.destroyed||0===this.slides.length)return this;let s="Object"===axType(t)?t:null;this.scrollIns.remove(s?s.dom:t,(t=>{let i=s||this.slides.find((e=>e.dom===t)),a=this.slides.findIndex((e=>e.dom===t));this.slidesObserve.proxy.splice(a,1),this.handlers.hasOwnProperty("remove")&&this.emit("remove",i),this.options.onRemove&&this.options.onRemove.call(this,i),e&&e.call(this,i)}))}save(t,e){if(this.destroyed)return this;if(!this.options.storageName)return!1;t?(t.active=this.activeIndex,axLocalStorage.set(this.options.storageName,axExtend(this.options,t),{cover:!1})):axLocalStorage.set(this.options.storageName,axExtend(this.options,{active:this.activeIndex}),{cover:!1});let s=axLocalStorage.get(this.options.storageName);return"save"in this.handlers&&this.emit("save",s),this.options.onSave&&this.options.onSave.call(this,s),e&&e.call(this,s),this}destroy(t){return this.destroyed||(this.slides.forEach((t=>{t.cage&&(t.cage.destroy(),t.dom.ondblclick=null)})),this.scrollIns.destroy(),this.spyIns&&this.spyIns.destroy(),this.lazyIns&&this.lazyIns.destroy(),this.countdownIns&&this.countdownIns.destroy(),window.removeEventListener("keydown",this.keyToSwipe),this.bullets.forEach((t=>{t.dom.onclick=null})),this.prevDom&&(this.prevDom.onclick=null),this.nextDom&&(this.nextDom.onclick=null),this.toolsDom&&this.options.tools.forEach((t=>{t.dom.onclick=null})),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this)),this}update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.save(),this.init(),this.options.onUpdated&&this.options.onUpdated.call(this,t),this.handlers.hasOwnProperty("updated")&&this.emit("updated",t),e&&e.call(this,t)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 设置多久后过期时间，返回过期时间（国标时间），
 */const axExpires=(t="d",e=365)=>{let s;if(i=e,isNaN(i)&&!isNaN(Date.parse(i)))s=new Date(e).toUTCString();else{let i=new Date;"second"==t||"s"==t?(i.setSeconds(i.getSeconds()+~~e),s=i.toUTCString()):"minute"==t||"m"==t?(i.setMinutes(i.getMinutes()+~~e),s=i.toUTCString()):"hour"==t||"h"==t?(i.setHours(i.getHours()+~~e),s=i.toUTCString()):(i.setDate(i.getDate()+~~e),s=i.toUTCString())}var i;return s}
/*!
 * 定义cookie方法
 * 支持axCookie.set、axCookie.get、axCookie.del三个方法
 * set方法支持options参数，支持追加path、domain、secure和sameSite属性
 * 默认过期时间是365天
 */,axCookie={set:function(t,e,s={type:"d",expires:365}){if(!t)return!1;let i=Object.assign({},s),a=i.path?";path="+i.path:"";return a+=i.domain?";domain="+i.domain:"",a+=i.secure?";secure="+i.secure:"",a+=i.sameSite?";sameSite="+i.sameSite:"",i.expires=axExpires(s.type,s.expires),(s.expires<0||null===e)&&this.get(t)?this.del(t):document.cookie=t+"="+encodeURIComponent(e)+";expires="+i.expires+a,this},get:function(t){let e=document.cookie.replace(/;\s*/,";").split(";"),s="";for(let i=0;i<e.length;i++){let a=e[i].split("=")[0],o=e[i].split("=")[1];if(a==t){s=o;break}}return!!s&&decodeURIComponent(s)},remove:function(t){return document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT",this}}
/*!
 * 定义localStorage本地存储
 * 支持set、get、del、clear、key五个方法
 * set方法支持options参数，type和expires
 * 默认过期时间是0，即永不过期
 */,axLocalStorage={set:function(t,e="",s={type:"d",expires:0,cover:!0}){if("string"!=typeof t&&!t)return!1;let i=axClone(e),a=axType(e),o=t=>(Object.keys(t).forEach((e=>{let s=t[e];("Array"===axType(s)||"Object"===axType(s))&&o(s),(axType(s).includes("HTML")||"Function"===axType(s))&&delete t[e]})),t);"Array"!==a&&"Object"!==a||axIsEmpty(i)||o(i);let n=0!==s.expires?axExpires(s.type,s.expires):0,r=axLocalStorage.get(t),l={data:!s.cover&&axLocalStorage.get(t)?axExtend(r,i):i,expires:n};return(s.expires<0||null===i)&&this.get(t)?this.del(t):window.localStorage.setItem(t,JSON.stringify(l)),this},get:function(t){if(axIsEmpty(t))return!1;let e=(new Date).toUTCString(),s=JSON.parse(window.localStorage.getItem(t));return s?0===s.expires||e<=s.expires?s.data:(window.localStorage.removeItem(t),null):null},remove:function(t){if(axIsEmpty(t))return!1;let e=[];return Array.isArray(t)?e=t:e.push(t),e.forEach((t=>{window.localStorage.removeItem(t)})),this},key:function(t){return"number"==typeof t&&window.localStorage.key(t)},clear:function(){return window.localStorage.clear(),this}}
/*!
* 插件：告示；使用方法：new axAlert('#id',{参数})
*/;class axAlert{constructor(t,e){if(!t)return!1;this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",caption:"",content:"",theme:"warning",borderless:!1,square:!1,className:"",closable:!1,style:"simple",icon:"",iconShow:!0,notable:!1,display:"",breakpoints:{},onInit:"",onShow:"",onHide:"",onUpdate:"",onUpdateContent:"",onClear:"",onDestroy:""},e,this.targetDom,this.constructor.name),this.handlers={},this.init()}init(){return this.shown=!0,axInstance.push(this,this.options.insName,"alert"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.render(),this.setAttribute(),this.close&&(this.close.onclick=()=>{this.hide()}),this.options.onInit&&this.options.onInit.call(this),this}render(){if(!this.targetDom.innerHTML.trim()){let t="";"simple"!=this.options.style&&this.options.style?"complex"==this.options.style&&(this.targetDom.innerHTML.trim()||(t=`${this.options.icon&&this.options.iconShow?'<i class="ax-iconfont '+this.options.icon+'" icon></i>':""}\n                    <div wrapper>\n                        ${this.options.caption?"<div caption>"+this.options.caption+"</div>":""}\n                        <div content>${this.options.content}</div>\n                    </div>\n                    ${this.options.closable?"<i close></i>":""}\n                    `)):(this.content=this.targetDom.innerHTML.trim()?this.targetDom.innerHTML:this.options.content,t=this.options.icon&&this.options.iconShow?`<i class="ax-iconfont ${this.options.icon}" icon></i><span content>${this.content}</span>`:`<span content>${this.content}</span>${this.options.closable?"<i close></i>":""}`),this.targetDom.innerHTML=t}this.close=this.targetDom.querySelector("[close]"),this.icon=this.targetDom.querySelector("[icon]"),this.wrapper=this.targetDom.querySelector("[wrapper]"),this.caption=this.targetDom.querySelector("[caption]"),this.content=this.targetDom.querySelector("[content]")}setAttribute(){!this.targetDom.classList.contains("ax-alert")&&this.targetDom.classList.add("ax-alert"),axClass.add(this.targetDom,this.options.className),this.options.theme&&this.targetDom.setAttribute("theme",this.options.theme),this.options.borderless&&this.targetDom.setAttribute("borderless",""),this.options.notable&&"complex"===this.options.style&&this.targetDom.setAttribute("notable",""),this.options.square&&this.targetDom.setAttribute("square","")}update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.targetDom.removeAttribute("class"),this.targetDom.removeAttribute("theme"),this.targetDom.removeAttribute("borderless"),this.targetDom.removeAttribute("square"),this.targetDom.removeAttribute("notable"),this.targetDom.innerHTML="",this.init(),e&&e.call(this),this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","")),this}updateContent(t,e){return this.destroyed||(this.content.innerHTML=t,e&&e.call(this),this.options.onUpdateContent&&this.options.onUpdateContent.call(this),"updateContent"in this.handlers&&this.emit("updateContent","")),this}show(t){return this.destroyed||this.shown||(this.options.display?this.targetDom.style.display=this.options.display:this.targetDom.style.cssText=this.targetDom.style.cssText.replace("display: none;",""),this.shown=!0,this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),t&&t.call(this)),this}hide(t){return this.destroyed||!this.shown||(this.targetDom.style.display="none",this.shown=!1,this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),t&&t.call(this)),this}clear(t){return this.destroyed||(this.targetDom.removeAttribute("class"),this.targetDom.removeAttribute("theme"),this.targetDom.removeAttribute("borderless"),this.targetDom.removeAttribute("square"),this.targetDom.removeAttribute("notable"),this.targetDom.innerHTML="",t&&t.call(this),this.options.onClear&&this.options.onClear.call(this),"clear"in this.handlers&&this.emit("clear","")),this}destroy(t){return this.close&&(this.close.onclick=null),this.destroyed=!0,this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：Tags标签；使用方法：new axTags('#id',{参数})
*/class axTags{constructor(t,e){if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",content:"",theme:"",borderless:!1,compact:!1,text:!1,corner:"",className:"",removeNode:"i",removable:!1,separator:",",unique:!1,emptyShow:!0,emptyTip:'<i class="ax-color-ignore">还没有创建标签！</i>',edit:{enable:!1,addable:!0,deletable:!0,input:"",placeholder:"输入关键字..."},breakpoints:{},onInit:"",onBeforeAdd:"",onAdd:"",onBeforeRemove:"",onRemove:"",onUpdate:"",onUClear:"",onDestroy:""},e,this.targetDom,this.constructor.name),this.handlers={},this.maxIndex=0,this.emptyDom=axAddElem("span",{emptyTip:""},this.options.emptyTip),this.inputEdit=t=>{let e=this.inputDom.value,s=this.content.find((t=>t.dom.hasAttribute("selected")));if(!this.options.edit.input&&(this.inputDom.style.width=e.length+"em"),e)this.options.edit.addable&&"Enter"===t.code&&(axIsEmpty(this.options.onBeforeAdd)?(this.add(this.inputDom.value.trim()),this.inputDom.value=""):this.options.onBeforeAdd.call(this,this.inputDom.value.trim())),s&&s.dom.removeAttribute("selected");else if(this.options.edit.deletable&&"Backspace"===t.code&&this.content.length>0){let t=this.content.slice(-1)[0];t.dom.hasAttribute("selected")?axIsEmpty(this.options.onBeforeRemove)?this.remove(t.dom):this.options.onBeforeRemove.call(this,this.content.find((e=>e.dom==t.dom))):t.dom.setAttribute("selected",""),this.toggleEmpty()}else s&&s.dom.removeAttribute("selected")},this.init()}init(){return axInstance.push(this,this.options.insName,"tags"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.content=[],this.contentProxy=new axObserve(this.content,{deep:!0}),this.contentProxy.proxy.push(...this.getSource(this.options.content)),this.render(this.content),this.observeInput(),this.setAttribute(),this.renderFinish(),this.options.onInit&&this.options.onInit.call(this),this}renderFinish(){this.content.forEach((t=>{t.dom.onclick=()=>{t.dom.setAttribute("selected",""),this.content.filter((e=>e!==t)).forEach((t=>{t.dom.removeAttribute("selected")}))}}))}getSource(t){let e=[];if(!axIsEmpty(t))if(Array.isArray(t))e="string"==typeof t[0]?t.map((t=>({value:t,theme:""}))):t;else if("object"==typeof t)e=[t];else if("string"==typeof t){e=t.trim().split(this.options.separator).map((t=>({value:t,theme:""})))}return e=e.filter(Boolean),e.forEach(((t,e)=>{!t.hasOwnProperty("id")&&(t.id=this.maxIndex+e),!t.hasOwnProperty("theme")&&(t.theme="")})),this.maxIndex+=e.length,e}render(t){if(this.toggleEmpty(),axIsEmpty(t))return!1;let e=document.createDocumentFragment();t.forEach((t=>{let s=this.createTag(t);t.dom=s,e.appendChild(s)})),this.targetDom.appendChild(e),this.inputDom&&!this.options.edit.input&&(this.targetDom.appendChild(this.inputDom),this.inputDom.focus())}createTag(t){let e=axAddElem("span",{class:"ax-tag"},t.value),s=axAddElem(this.options.removeNode,{remove:""});return!this.options.theme&&t.theme&&e.setAttribute("theme",t.theme),this.options.removable&&(e.appendChild(s),s.onclick=()=>{axIsEmpty(this.options.onBeforeRemove)?this.remove(e):this.options.onBeforeRemove.call(this,this.content.find((t=>t.dom==e)))}),t.dom=e,e}getTag(t){if(axIsEmpty(t))return!1;let e,s,i=axType(t);if("Object"===i){let i="";(t.id||0==t.id)&&(i+="item.id == obj.id "),t.value&&(i+="&& item.value == obj.value "),t.dom&&(i+="&& item.dom == obj.dom"),i.startsWith("&&")&&(i="true "+i),e=new Function("data","obj",`return data.filter(item =>${i})`)(this.content,t),e.length>0&&(s=e[0])}else i.includes("HTML")?s=this.content.find((e=>e.dom===t)):"String"===i?s=this.content.find((e=>e.value===t)):"Number"===i&&(s=this.content.find((e=>e.id==t)));return{item:s,id:this.content.findIndex((t=>t===s))}}setAttribute(){!this.targetDom.classList.contains("ax-tags")&&this.targetDom.classList.add("ax-tags"),axClass.add(this.targetDom,this.options.className),this.options.theme&&this.targetDom.setAttribute("theme",this.options.theme),this.options.borderless&&this.targetDom.setAttribute("borderless",""),this.options.compact&&this.targetDom.setAttribute("compact",""),this.options.text&&this.targetDom.setAttribute("text",""),this.options.corner&&this.targetDom.setAttribute("corner",this.options.corner)}observeInput(){if(!this.options.edit.enable||this.destroyed)return!1;this.options.edit.input?(this.inputDom=axIdToDom(this.options.edit.input),!this.inputDom.hasAttribute("placeholder")&&this.inputDom.setAttribute("placeholder",this.options.edit.placeholder)):(this.inputDom=axAddElem("input",{type:"text",placeholder:this.options.edit.placeholder}),this.targetDom.appendChild(this.inputDom)),this.inputDom&&this.inputDom.addEventListener("keyup",this.inputEdit)}toggleEmpty(){if(!this.options.emptyShow)return!1;0===this.content.length?(this.targetDom.insertAdjacentElement("afterbegin",this.emptyDom),this.maxIndex=0):this.emptyDom.remove()}update(t,e){return axIsEmpty(t)||this.destroyed||(this.options=axExtend(this.options,t),this.targetDom.innerHTML="",this.inputDom&&!this.options.edit.input&&this.targetDom.appendChild(this.inputDom),this.init(),e&&e.call(this),this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","")),this}add(t,e){if(axIsEmpty(t)||this.destroyed)return this;let s=this.getSource(t),i=this.content.map((t=>t.value));if(this.options.unique){s=axUnique(s,"value");for(let t=0;t<s.length;t++)i.includes(s[t].value)&&s.splice(t--,1);0===s.length&&new axMessage({content:"不可添加重复的标签!",result:"warning",iconShow:!0}).show()}return 0!==s.length&&(this.contentProxy.proxy.push(...s),this.render(s),this.renderFinish(),this.options.onAdd&&this.options.onAdd.call(this,s),"add"in this.handlers&&this.emit("add",s),e&&e.call(this,s),this)}remove(t,e){if(axIsEmpty(t)||this.destroyed)return this;let s=[],i=[],a=axType(t);if("Array"===a&&t.length>0)t.forEach((t=>{let e=this.getTag(t);e.item&&(s.push(e.item),i.push(e.id))}));else if("String"===a){let e=t.split(this.options.separator);s=this.content.filter((t=>e.includes(t.value))),i=s.map((t=>this.content.findIndex((e=>e===t))))}else{let e=this.getTag(t);e.item&&(s.push(e.item),i.push(e.id))}s.forEach((t=>{t.dom.remove()}));let o=s.map((t=>t.dom));return this.contentProxy.proxy.forEach(((t,e)=>{o.includes(t.dom)&&this.contentProxy.proxy.splice(e--,1)})),this.toggleEmpty(),this.options.onRemove&&this.options.onRemove.call(this,s,i),"remove"in this.handlers&&this.emit("remove",s,i),e&&e.call(this,s,i),this}clear(t){return this.destroyed||(this.contentProxy.proxy.splice(0),this.maxIndex=0,this.targetDom.innerHTML="",this.inputDom&&!this.options.edit.input&&this.targetDom.appendChild(this.inputDom),this.toggleEmpty(),this.options.onClear&&this.options.onClear.call(this),"clear"in this.handlers&&this.emit("clear",""),t&&t.call(this)),this}destroy(t){return this.content.forEach((t=>{let e=t.dom.querySelector("[remove]");e&&(e.onclick=null)})),this.inputDom&&this.inputDom.removeEventListener("keyup",this.inputEdit,!1),this.destroyed=!0,this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：定义效果更好Hover操作；使用方法：new axHover('#id',{参数})
*/class axHover{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({timeout:50,interval:50,threshold:7,enter:()=>{},leave:()=>{},hold:""},e),this.curX,this.curY,this.preX,this.preY,this.enterTimer,this.leaveTimer,this.isActive=!1,this.options.hold?this.hold=axIdToDom(this.options.hold):this.hold="",this.event=(t,e,s)=>{"enter"===t?(this.options.enter.call(this,e,s),this.isActive=!0):"leave"===t&&(this.options.leave.call(this,e,s),this.isActive=!1)},this.enterCompare=(t,e)=>{let s=this.preX-this.curX,i=this.preY-this.curY;Math.sqrt(s**2+i**2)<this.options.threshold?this.isActive||this.event("enter",t,e):(this.preX=this.curX,this.preY=this.curY,this.enterTimer=setTimeout((()=>{this.enterCompare(t,e)}),this.options.interval))},this.init()}init(){let t=this;this.targetDom.addEventListener("mousemove",(t=>{this.curX=t.pageX,this.curY=t.pageY})),this.targetDom.addEventListener("mouseenter",(function(e){clearTimeout(t.leaveTimer),t.preX=e.pageX,t.preY=e.pageY,t.enterTimer=setTimeout((()=>{t.enterCompare(this,e)}),t.options.interval)})),this.targetDom.addEventListener("mouseleave",(function(e){clearTimeout(t.enterTimer),t.leaveTimer=setTimeout((()=>{t.event("leave",this,e)}),t.options.timeout)})),this.hold&&(t.hold.onmouseenter=function(e){clearTimeout(t.leaveTimer)},t.hold.onmouseleave=function(e){clearTimeout(t.enterTimer),t.leaveTimer=setTimeout((()=>{t.event("leave",t.targetDom,e)}),t.options.timeout)})}}
/*!
 * 插件：查看更多；使用方法：new axMore('#id',{参数})
 */const axMores=[];class axMore{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",length:60,textFold:"展开",textUnfold:"收起",classFold:"ax-color-primary",classUnfold:"ax-color-primary",breakpoints:{}},e,this.targetDom,"axMore"),this.handlers={},this.html=this.targetDom.innerHTML,this.pureHtml=this.targetDom.textContent;let s=this,i=!0;this.event=function(){i?(s.targetDom.removeChild(this.previousSibling),this.innerHTML=s.options.textUnfold,this.setAttribute("class",s.options.classUnfold),this.insertAdjacentHTML("beforeBegin",s.text),i=!1,"unfold"in s.handlers&&s.emit("unfold","")):(s.targetDom.removeChild(this.previousSibling),this.innerHTML=s.options.textFold,this.setAttribute("class",s.options.classFold),this.insertAdjacentHTML("beforeBegin",s.ell),i=!0,"fold"in s.handlers&&s.emit("fold",""))},this.targetDom.getAttribute("axMore")?this.referName=this.targetDom.getAttribute("axMore"):this.referName="",this.init()}init(){axInstance.push(this,this.options.insName,"more"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.text=this.pureHtml.trim().replace(/<[^>]+>/g,"").replace(/ +/g," "),this.ell=this.text.substring(0,this.options.length)+"...";let t=[...this.text].length,e=`<a href="###" class="${this.options.classFold}">${this.options.textFold}</a>`;return t>this.options.length&&(this.targetDom.innerHTML=this.ell+e),this.targetDom.lastChild.onclick=this.event,this.referName&&(axIsEmpty(axMores)?axMores.push({name:this.referName,instance:this}):axMores.some((t=>t.name==this.referName))||axMores.push({name:this.referName,instance:this})),"load"in this.handlers&&this.emit("load",""),this}destroy(t){this.targetDom.lastChild.removeEventListener("click",this.event,!1),this.targetDom.innerHTML=this.html,t&&t.call(this)}updateContent(t,e){return t="string"==typeof t?"#"==t.substr(0,1)?document.querySelector(t).textContent:t:t.textContent,this.pureHtml=t,this.init(),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}update(t,e){return this.options=axExtend(this.options,t),this.init(),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：手风琴折叠；使用方法：new axAccordion('#id',{参数})
 */class axAccordion{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",storageName:"",content:"",dispose:!1,active:"",disabled:"",multiple:!1,collapseAll:!0,borderShow:!1,ajaxType:"post",trigger:"click",max:0,headerBreakShow:!0,bodyBreakShow:!0,targetClass:"",itemNode:"li",arrow:{enable:!0,rotate:180,iconClose:"ax-icon-up",iconOpen:"ax-icon-up",position:"end"},tipPosition:"begin",addToActive:!0,breakpoints:{},onInit:"",onAdd:"",onRemove:"",onDisable:"",onEnable:"",onDisableALL:"",onEnableAll:"",onExpand:"",onExpanded:"",onCollapse:"",onCollapsed:"",onUpdate:"",onUpdateContent:"",onDestroy:"",onSave:"",onExpandAll:"",onCollapseAll:""},e,this.targetDom,this.constructor.name);let s=this;this.handlers={},this.triggerShow=function(){s.toggle(this)},this.init()}init(){if(axInstance.push(this,this.options.insName,"accordion"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.data=[],this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}return this.setAttribute(),this.initDataStd(),this.options.onInit&&this.options.onInit.call(this),this}async initDataStd(){if(axIsEmpty(this.options.content)){if(this.targetDom.innerHTML){let t=[...this.targetDom.children];for(let e in t){if(e>=this.options.max&&0!==this.options.max)break;let s=t[e],i=s.querySelector(".ax-accordion-header"),a=s.querySelector("[flex]"),o=s.querySelector(".ax-accordion-body"),n=s.querySelector(".ax-accordion-content"),r=i.querySelector("[label]"),l=i.querySelector("[arrow]"),h=s.querySelector("[tip]"),p=s.querySelector("[legend]"),d=i.nextElementSibling&&i.nextElementSibling.classList.contains("ax-break-line")?i.nextElementSibling:null,c=n.nextElementSibling&&n.nextElementSibling.classList.contains("ax-break-line")?n.nextElementSibling:null,m={label:r.innerHTML.trim(),content:n.innerHTML.trim(),wrapperDom:s,flexDom:a,labelDom:r,headerDom:i,bodyDom:o,contentDom:n,arrowDom:l,tipDom:h,legendDom:p,headerBreakDom:d,bodyBreakDom:c};s.hasAttribute("active")&&(m.active=!0),s.hasAttribute("disabled")&&(m.disabled=!0),this.data.push(m)}}}else this.targetDom.innerHTML="","string"==typeof this.options.content?await this.getAsyncData((t=>{this.initRender(t)})):(this.data=this.options.content,this.data.length>0&&this.initRender(this.data));this.renderFinish()}getAsyncData(t){return axAjax({type:this.options.ajaxType,url:this.options.content,opened:t=>{this.contentXhr=t.xhr},success:e=>{if(axIsEmpty(e.content))return!1;this.targetDom.innerHTML="",this.data=e.content,t&&t(this.data)}},this.targetDom)}initRender(t){for(let e in t){if(e>=this.options.max&&0!==this.options.max)break;this.appendItem(t[e])}this.disable(this.options.disabled)}appendItem(t,e){let s;s="async"===t.type||"url"===t.type?"":"node"===t.type?axIdToDom(t.content):"string"==typeof t.content?axStrType(t.content)?axIdToDom(t.content).innerHTML:t.content:t.content||"";let i=axAddElem(this.options.itemNode),a=axAddElem("div",{flex:""}),o=axAddElem("i",{label:""},t.label),n=axAddElem("div",{class:"ax-accordion-header"},o),r=axAddElem("div",{class:"ax-accordion-body"}),l=axAddElem("hr"),h=axAddElem("hr"),p=axAddElem("url"===t.type?"iframe":"div","url"===t.type?{class:"ax-accordion-content",frameborder:0}:{class:"ax-accordion-content"},s);if(a.appendChild(o),n.appendChild(a),i.appendChild(n),this.options.headerBreakShow?(n.insertAdjacentElement("afterend",l),t.headerBreakDom=l):t.headerBreakDom=null,r.appendChild(p),this.options.bodyBreakShow?(r.insertAdjacentElement("beforeend",h),t.bodyBreakDom=h):t.bodyBreakDom=null,i.appendChild(r),t.wrapperDom=i,t.headerDom=n,t.bodyDom=r,t.contentDom=p,t.labelDom=o,t.headerBreakDom=l,t.disabled&&i.setAttribute("disabled",""),!axIsEmpty(t.props))for(let e in t.props)i.setAttribute(e,t.props[e]);if(t.tip){let e=axAddElem("i",{tip:""},t.tip);"begin"===this.options.tipPosition?o.insertAdjacentElement("afterend",e):"end"===this.options.tipPosition&&n.insertAdjacentElement("beforeend",e),t.tipDom=e}if(t.legend){let e=axAddElem("i",{legend:"",class:t.legend?"ax-iconfont "+t.legend:"ax-iconfont"});n.insertAdjacentElement("afterbegin",e),t.legendDom=e}if(this.options.arrow.enable){let e=axAddElem("i",{arrow:"",class:`ax-iconfont ${this.options.arrow.iconClose}`});"begin"===this.options.arrow.position?n.insertAdjacentElement("afterbegin",e):"end"===this.options.arrow.position&&n.insertAdjacentElement("beforeend",e),t.arrowDom=e}this.targetDom.appendChild(i),e&&e(t)}initActive(){if(0===this.data.length)return!1;if(this.options.multiple&&!this.options.collapseAll)this.expandAll();else{let t=this.data.filter((t=>t.active));if(""!==this.options.active){let e=[...axValueToArr(this.options.active).map((t=>axFindItem(t,this.data))),...t].filter(Boolean);e.length>0&&(this.options.multiple?e.forEach((t=>{this.expand(t)})):this.expand(e[0]))}else this.options.multiple?t.forEach((t=>{this.expand(t)})):this.expand(t[0])}}asyncActive(t,e){if(t.contentDom.innerHTML.trim())return!1;"async"===t.type&&t.content&&"string"==typeof t.content&&axAjax({url:t.content,type:this.options.ajaxType,success:function(s){t.contentDom.innerHTML=s,e&&e(s)}})}setAttribute(){!this.targetDom.classList.contains("ax-accordion")&&this.targetDom.classList.add("ax-accordion"),this.options.targetClass&&axClass.add(this.targetDom,this.options.targetClass),this.options.borderShow&&axClass.add(this.targetDom,"ax-border"),this.options.arrow.enable&&this.options.arrow.rotate&&this.targetDom.setAttribute("rotate",this.options.arrow.rotate)}renderFinish(){this.initActive(),this.options.dispose||this.data.forEach((t=>{t.disabled||t.headerDom.addEventListener(this.options.trigger,this.triggerShow,!1)})),this.save()}workToggle(t,e="disable"){"enable"===e&&t.disabled?(delete t.disabled,t.wrapperDom.removeAttribute("disabled"),t.headerDom.addEventListener(this.options.trigger,this.triggerShow,!1)):"disable"!==e||t.disabled||(t.disabled=!0,t.wrapperDom.setAttribute("disabled",""),t.headerDom.removeEventListener(this.options.trigger,this.triggerShow,!1)),this.save()}getDisabled(){return this.data.filter((t=>t.disabled))}getActive(){return this.data.filter((t=>t.active))}collapseAll(t){if(this.destroyed)return this;this.data.filter((t=>t.active)).forEach((t=>{this.collapse(t)})),"collapseAll"in this.handlers&&this.emit("collapseAll",""),this.options.onCollapseAll&&this.options.onCollapseAll.call(this),t&&t.call(this)}expandAll(t){if(this.destroyed||!this.options.multiple)return this;this.data.forEach((t=>{this.expand(t)})),"expandAll"in this.handlers&&this.emit("expandAll",""),this.options.onExpandAll&&this.options.onExpandAll.call(this),t&&t.call(this)}disable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.data);e&&this.workToggle(e,"disable")};Array.isArray(t)?t.forEach((t=>{s(t)})):s(t),this.save();let i=this.data.filter((t=>t.disabled));"disable"in this.handlers&&this.emit("disable",i),this.options.onDisable&&this.options.onDisable.call(this,i),e&&e.call(this,i)}disableAll(t){this.disable(this.data),"disableAll"in this.handlers&&this.emit("disableAll",""),this.options.onDisableAll&&this.options.onDisableAll.call(this),t&&t.call(this)}enable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.data);e&&this.workToggle(e,"enable")};Array.isArray(t)?t.forEach((t=>{s(t)})):s(t),this.save();let i=this.data.filter((t=>!t.disabled));"enable"in this.handlers&&this.emit("enable",i),this.options.onEnable&&this.options.onEnable.call(this,i),e&&e.call(this,i)}enableAll(t){this.enable(this.data),"enableAll"in this.handlers&&this.emit("enableAll",""),this.options.onEnableAll&&this.options.onEnableAll.call(this),t&&t.call(this)}updateContent(t,e,s){if(this.destroyed)return this;let i=axFindItem(t,this.data);i&&(i.contentDom.innerHTML="",e&&(i.content=e),"url"===i.type?i.contentDom.src=e:"async"===i.type?this.asyncActive(i):axType(i.conten).includes("HTML")?i.contentDom.appendChild(i.content):i.contentDom.innerHTML=i.content,this.save()),"updateContent"in this.handlers&&this.emit("updateContent",i),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i),s&&s.call(this,i)}toggle(t){let e=axFindItem(t,this.data);e.active?this.collapse(e):this.expand(e)}collapse(t,e){let s="Object"===axType(t)?t:axFindItem(t,this.data);if(!s||!s.shown)return!1;"collapse"in this.handlers&&this.emit("collapse",s),this.options.onCollapse&&this.options.onCollapse.call(this,s),delete s.active,s.wrapperDom.removeAttribute("active"),this.options.arrow.enable&&!this.options.arrow.rotate&&(s.arrowDom.classList.remove(this.options.arrow.iconOpen),s.arrowDom.classList.add(this.options.arrow.iconClose)),axSlideUp(s.bodyDom,"",(()=>{Reflect.deleteProperty(s,"shown"),"collapsed"in this.handlers&&this.emit("collapsed",s),this.options.onCollapsed&&this.options.onCollapsed.call(this,s),e&&e.call(this,s)})),this.save()}slideDown(t,e){let s="Object"===axType(t)?t:axFindItem(t,this.data);if(!s||s.shown)return!1;s.active=!0,s.wrapperDom.setAttribute("active",""),this.options.arrow.enable&&!this.options.arrow.rotate&&(s.arrowDom.classList.remove(this.options.arrow.iconClose),s.arrowDom.classList.add(this.options.arrow.iconOpen)),axSlideDown(s.bodyDom,"",(()=>{s.shown=!0,"expanded"in this.handlers&&this.emit("expanded",s),this.options.onExpanded&&this.options.onExpanded.call(this,s),e&&e.call(this,s)}))}expand(t,e){if(this.destroyed)return this;let s,i=axFindItem(t,this.data);axIsEmpty(i)||("expand"in this.handlers&&this.emit("expand",i),this.options.onExpand&&this.options.onExpand.call(this,i),"async"!==i.type||i.contentDom.innerHTML?("url"!==i.type||i.contentDom.getAttribute("src")||i.contentDom.setAttribute("src",i.content),this.slideDown(i,(()=>{e&&e.call(this,i)}))):(i.arrowDom&&i.arrowDom.setAttribute("loading",""),this.asyncActive(i,(()=>{this.slideDown(i,(()=>{e&&e.call(this,i)})),i.arrowDom&&i.arrowDom.removeAttribute("loading")}))),this.options.multiple||(s=this.data.filter((t=>t!==i&&t.active)),s.forEach((t=>{this.collapse(t)}))),this.save())}add(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(this.data.length>=this.options.max&&0!==this.options.max)return!1;let s=axType(t),i=[],a=t=>{-1===this.data.findIndex((e=>e.label===t.label))&&this.appendItem(t,(()=>{this.data.push(t),i.push(t)}))};return"Object"===s&&a(t),"Array"===s&&t.length>0&&t.forEach((t=>{a(t)})),i.length>0&&(this.options.addToActive&&(this.options.multiple?i.forEach((t=>{this.expand(t)})):this.expand(i[i.length-1])),this.renderFinish()),this.save(),"add"in this.handlers&&this.emit("add",i),this.options.onAdd&&this.options.onAdd.call(this,i),e&&e.call(this,i),this}remove(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(0===this.data.length)return!1;let s=t=>{let e=axFindItem(t,this.data);e&&(e.headerDom.removeEventListener(this.options.trigger,this.triggerShow,!1),e.wrapperDom.remove(),this.data=this.data.filter((t=>t!==e)))};return Array.isArray(t)?t.forEach((t=>{s(t)})):s(t),this.save(),"remove"in this.handlers&&this.emit("remove",""),this.options.onRemove&&this.options.onRemove.call(this),e&&e.call(this),this}save(t,e){return this.destroyed?this:!!this.options.storageName&&void setTimeout((()=>{let s=this.data.filter((t=>t.active)).map((t=>t.id)).filter(Boolean),i=this.data.filter((t=>t.disabled)).map((t=>t.id)).filter(Boolean);t?(!t.hasOwnProperty("active")&&(t.active=s),!t.hasOwnProperty("disabled")&&(t.disabled=i),!t.hasOwnProperty("content")&&(t.content=this.data),axLocalStorage.set(this.options.storageName,t)):axLocalStorage.set(this.options.storageName,{active:s,disabled:i,content:this.data});let a=axLocalStorage.get(this.options.storageName);return"save"in this.handlers&&this.emit("save",a),this.options.onSave&&this.options.onSave.call(this,a),e&&e.call(this,a),this}),0)}destroy(t){return this.data.forEach((t=>{t.headerDom.removeEventListener(this.options.trigger,this.triggerShow)})),this.destroyed=!0,this.contentXhr&&this.contentXhr.abort(),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),"destroy"in this.handlers&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),this.init(),"update"in this.handlers&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：页签切换；使用方法：axTab('#id',{参数})
 */class axTab{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",storageName:"",trigger:"click",disabled:"",active:0,content:"",ajaxType:"post",headerNode:"ul",bodyNode:"ul",headerChildNode:"li",bodyChildNode:"li",max:0,removable:!1,updatable:!1,wrapperClass:"",headerClass:"ax-tab-group",bodyClass:"",sticky:0,slider:{enable:!1,arrowShow:!1,options:{slides:"auto",scroll:{drift:{mode:"free",coef:1}}}},menu:{enable:!1,options:{columns:4,size:"lg"}},addToActive:!0,breakpoints:{},onInit:"",onAdd:"",onBeforeRemove:"",onRemove:"",onDisable:"",onEnable:"",onDisableALL:"",onEnableAll:"",onActive:"",onUpdate:"",onUpdateContent:"",onDestroy:"",onSave:""},e,this.targetDom,this.constructor.name);let s=this;this.handlers={},this.sliderDom=null,this.sliderIns=null,this.maxIndex=0,this.triggerShow=function(){s.active(this)},this.labelRemove=t=>{if(this.options.onBeforeRemove){this.options.onBeforeRemove.call(this,t)&&this.remove(t)}else this.remove(t)},this.init()}init(){if(axInstance.push(this,this.options.insName,"tab"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.data=[],this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}return this.initDataStd(),this.options.onInit&&this.options.onInit.call(this),this}async initDataStd(){if(axIsEmpty(this.options.content)){if(!this.targetDom.classList.contains("ax-tab")&&this.targetDom.classList.add("ax-tab"),this.targetDom.querySelector(".ax-tab-header")&&this.targetDom.querySelector(".ax-tab-body")){this.navDom=this.targetDom.querySelector("[nav]"),this.prevDom=this.navDom?this.navDom.querySelector("[prev]"):null,this.nextDom=this.navDom?this.navDom.querySelector("[next]"):null,this.menuDom=this.navDom?this.navDom.querySelector("[menu]"):null,this.sliderDom=this.targetDom.querySelector(".ax-slider"),this.headerWrapperDom=this.targetDom.querySelector(".ax-tab-header"),this.bodyWrapperDom=this.targetDom.querySelector(".ax-tab-body");let t=[...this.headerWrapperDom.children],e=[...this.bodyWrapperDom.children];for(let s=0,i=t.length;s<i&&!(s>=this.options.max&&0!==this.options.max);s++){let i=t[s],a=i.querySelector("[label]"),o=i.querySelector("[remove]"),n=i.querySelector("[update]"),r=e[s];if(r){let t={label:a?a.innerText:i.innerHTML,content:r.innerHTML,labelDom:a,headerDom:i,bodyDom:r};i.hasAttribute("active")&&(t.active=!0),i.hasAttribute("disabled")&&(t.disabled=!0),t.index=this.maxIndex,this.data.push(t),n&&(t.updateDom=n),o&&(this.isSticky(t)?o.remove():t.removeDom=o)}this.maxIndex++}this.createSlider(),this.initActive()}}else this.targetDom.innerHTML="","string"==typeof this.options.content?await axAjax({url:this.options.content,type:this.options.ajaxType,success:t=>{this.targetDom.innerHTML="",this.data=t.content}},this.targetDom):this.data=this.options.content,this.data.length>0&&this.initRender(this.data);this.renderFinish()}initRender(t){this.headerWrapperDom=axAddElem(this.options.headerNode,{class:"ax-tab-header"}),this.bodyWrapperDom=axAddElem(this.options.bodyNode,{class:"ax-tab-body"});for(let e=0,s=t.length;e<s&&!(e>=this.options.max&&0!==this.options.max);e++)this.appendItem(t[e]);this.initActive(),this.disable(this.options.disabled),this.setAttribute(),this.options.slider.enable?(this.headerWrapperDom.classList.add("ax-slider-wrapper"),this.sliderDom=axAddElem("div",{class:"ax-slider"},this.headerWrapperDom),this.navDom=axAddElem("div",{class:"ax-tab-slider"},this.sliderDom),this.options.slider.arrowShow&&(this.prevDom=axAddElem("i",{prev:""}),this.nextDom=axAddElem("i",{next:""}),this.navDom.insertAdjacentElement("afterbegin",this.prevDom),this.navDom.insertAdjacentElement("beforeend",this.nextDom)),this.options.menu.enable&&(this.menuDom=axAddElem("i",{menu:""}),this.navDom.insertAdjacentElement("beforeend",this.menuDom)),this.targetDom.appendChild(this.navDom),this.createSlider()):this.targetDom.appendChild(this.headerWrapperDom),this.targetDom.appendChild(this.bodyWrapperDom)}isSticky(t){return"string"==typeof this.options.sticky?this.options.sticky===t.label:this.options.sticky===t.index}appendItem(t,e){if(!t.label)return!1;let s;s="async"===t.type||"url"===t.type?"":"node"===t.type?axIdToDom(t.content):"string"==typeof t.content?axStrType(t.content)?axIdToDom(t.content).innerHTML:t.content:t.content||"";let i=axAddElem(this.options.headerChildNode),a=axAddElem("i",{label:""},t.label),o=axAddElem("url"===t.type?"iframe":this.options.bodyChildNode,"url"===t.type?{src:t.content,frameborder:0}:"",s),n=axAddElem("i",{remove:""}),r=axAddElem("i",{update:""});if(t.index=this.maxIndex,i.appendChild(a),t.active&&(i.setAttribute("active",""),o.setAttribute("active","")),t.disabled&&i.setAttribute("disabled",""),!axIsEmpty(t.props))for(let e in t.props)o.setAttribute(e,t.props[e]);t.headerDom=i,t.labelDom=a,t.bodyDom=o,this.headerWrapperDom.appendChild(i),this.options.updatable&&(t.updateDom=r,i.appendChild(r)),this.options.removable&&!this.isSticky(t)&&(t.removeDom=n,i.appendChild(n)),this.maxIndex++,e&&e(t)}initActive(){if(0===this.data.length)return!1;let t=this.data.find((t=>t.active))||this.data[0];this.options.active?this.active(this.options.active):this.active(t)}asyncActive(t,e){if(t.bodyDom.innerHTML.trim())return!1;"async"===t.type&&t.content&&"string"==typeof t.content&&axAjax({url:t.content,type:this.options.ajaxType,success:function(s){t.bodyDom.innerHTML=s.content,e&&e(s.content)}},t.bodyDom)}getDropDownData(){return this.data.map((t=>({value:t.label,label:t.label})))}createSlider(){if(!this.sliderDom)return!1;let t=this.options.slider.options;this.prevDom&&this.nextDom&&(t.navigation={enable:!0,prev:{selector:this.prevDom},next:{selector:this.nextDom}}),this.sliderIns=new axSlider(this.sliderDom,t),this.menuDom&&setTimeout((()=>{this.dropdown=new axDropdown(this.menuDom,{arrowShow:!1,grid:{enable:0!==this.options.menu.options.columns&&1!==this.options.menu.options.columns,columns:this.options.menu.options.columns,fenceShow:!0},type:"button",popup:{size:this.options.menu.options.size},content:this.getDropDownData()}),this.dropdown.popup.on("show",(()=>{this.getActive()&&this.getActive().label&&this.dropdown.updateValues(this.getActive().label)})),this.dropdown.on("set",(t=>{(t||0===t)&&this.active(t),this.sliderIns.toBullet(this.getIndexActive())}))}),0)}setAttribute(){!this.targetDom.classList.contains("ax-tab")&&this.targetDom.classList.add("ax-tab"),this.options.wrapperClass&&axClass.add(this.targetDom,this.options.wrapperClass),this.options.headerClass&&axClass.add(this.headerWrapperDom,this.options.headerClass),this.options.bodyClass&&axClass.add(this.bodyWrapperDom,this.options.bodyClass)}renderFinish(){this.data.forEach((t=>{if(!t.disabled){(t.labelDom?t.labelDom:t.headerDom).addEventListener(this.options.trigger,this.triggerShow,!1),t.updateDom&&(t.updateDom.onclick=()=>{this.updateContent(t)}),t.removeDom&&(t.removeDom.onclick=()=>{this.labelRemove(t)})}})),this.save()}workToggle(t,e="disable"){let s=t.labelDom?t.labelDom:t.headerDom;"enable"===e&&t.disabled?(delete t.disabled,t.headerDom.removeAttribute("disabled"),t.bodyDom.removeAttribute("disabled"),s.addEventListener(this.options.trigger,this.triggerShow,!1),t.removeDom&&(t.removeDom.onclick=()=>{this.labelRemove(t)}),t.updateDom&&(t.updateDom.onclick=()=>{this.updateContent(t)})):"disable"!==e||t.disabled||(t.disabled=!0,t.headerDom.setAttribute("disabled",""),t.bodyDom.setAttribute("disabled",""),s.removeEventListener(this.options.trigger,this.triggerShow,!1),t.removeDom&&(t.removeDom.onclick=null),t.updateDom&&(t.updateDom.onclick=null)),this.save()}getIndexActive(){return this.data.findIndex((t=>t.active))}getDisabled(){return this.data.filter((t=>t.disabled))}getActive(){return this.data.find((t=>t.active))}disable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.data);e&&this.workToggle(e,"disable")};Array.isArray(t)?t.forEach((t=>{s(t)})):s(t);let i=this.data.filter((t=>t.disabled));"disable"in this.handlers&&this.emit("disable",i),this.options.onDisable&&this.options.onDisable.call(this,i),e&&e.call(this,i)}disableAll(t){this.disable(this.data),"disableAll"in this.handlers&&this.emit("disableAll",""),this.options.onDisableAll&&this.options.onDisableAll.call(this),t&&t.call(this)}enable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.data);e&&this.workToggle(e,"enable")};Array.isArray(t)?t.forEach((t=>{s(t)})):s(t);let i=this.data.filter((t=>!t.disabled));"enable"in this.handlers&&this.emit("enable",i),this.options.onEnable&&this.options.onEnable.call(this,i),e&&e.call(this,i)}enableAll(t){this.enable(this.data),"enableAll"in this.handlers&&this.emit("enableAll",""),this.options.onEnableAll&&this.options.onEnableAll.call(this),t&&t.call(this)}updateContent(t,e,s){if(this.destroyed)return this;let i=axFindItem(t,this.data);i&&(i.bodyDom.innerHTML="",e&&(i.content=e),"url"===i.type?i.bodyDom.src=e:"async"===i.type?this.asyncActive(i):axType(i.content).includes("HTML")?i.bodyDom.appendChild(i.content):i.bodyDom.innerHTML=i.content,this.save()),"updateContent"in this.handlers&&this.emit("updateContent",i),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i),s&&s.call(this,i)}active(t,e){if(this.destroyed)return this;let s,i=axType(t).includes("HTML")&&t.hasAttribute("label")?axFindItem(t,this.data,{dom:"labelDom"}):axFindItem(t,this.data);axIsEmpty(i)||(!i.active&&(i.active=!0),i.headerDom.setAttribute("active",""),i.bodyDom.setAttribute("active",""),axIsVnode(i.bodyDom)&&this.bodyWrapperDom.appendChild(i.bodyDom),"async"===i.type&&this.asyncActive(i),s=this.data.filter((t=>t!==i)),s.forEach((t=>{t.active&&delete t.active,t.headerDom.removeAttribute("active"),t.bodyDom.removeAttribute("active")})),this.save()),"active"in this.handlers&&this.emit("active",i),this.options.onActive&&this.options.onActive.call(this,i),e&&e.call(this,i)}add(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(this.data.length>=this.options.max&&0!==this.options.max)return!1;let s=axType(t),i=[],a=t=>{-1===this.data.findIndex((e=>e.label===t.label))&&this.appendItem(t,(()=>{this.data.push(t),i.push(t),this.sliderIns&&this.sliderIns.add(t.headerDom)}))};return"Object"===s&&a(t),"Array"===s&&t.length>0&&t.forEach((t=>{a(t)})),i.length>0&&(this.options.addToActive&&(this.active(i[i.length-1]),this.sliderIns&&this.sliderIns.toBullet(i.length-1)),this.renderFinish(),this.dropdown&&this.dropdown.updateContent(this.getDropDownData())),"add"in this.handlers&&this.emit("add",i),this.options.onAdd&&this.options.onAdd.call(this,i),e&&e.call(this,i),this}remove(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(0===this.data.length)return!1;let s=t=>{let e=axFindItem(t,this.data);e&&(!e.labelDom&&e.headerDom.removeEventListener(this.options.trigger,this.triggerShow,!1),e.headerDom.remove(),e.bodyDom.remove(),this.data=this.data.filter((t=>t!==e)),this.sliderIns&&this.sliderIns.remove(e.headerDom))};return Array.isArray(t)?t.forEach((t=>{s(t)})):s(t),this.save(),this.dropdown&&this.dropdown.updateContent(this.getDropDownData()),"remove"in this.handlers&&this.emit("remove",""),this.options.onRemove&&this.options.onRemove.call(this),e&&e.call(this),this}save(t,e){return this.destroyed?this:!!this.options.storageName&&void setTimeout((()=>{let s=this.getIndexActive(),i=this.data.filter((t=>t.disabled)).map((t=>t.id)).filter(Boolean);t?(!t.hasOwnProperty("active")&&(t.active=s),!t.hasOwnProperty("disabled")&&(t.disabled=i),!t.hasOwnProperty("content")&&(t.content=this.data),axLocalStorage.set(this.options.storageName,t)):axLocalStorage.set(this.options.storageName,{active:s,disabled:i,content:this.data});let a=axLocalStorage.get(this.options.storageName);return"save"in this.handlers&&this.emit("save",a),this.options.onSave&&this.options.onSave.call(this,a),e&&e.call(this,a),this}),0)}update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),this.init(),"update"in this.handlers&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this)),this}destroy(t){return this.data.forEach((t=>{(t.labelDom?t.labelDom:t.headerDom).removeEventListener(this.options.trigger,this.triggerShow),t.removeDom&&(t.removeDom.onclick=null),t.updateDom&&(t.updateDom.onclick=null)})),this.sliderIns&&this.sliderIns.destroy(),this.dropdown&&this.dropdown.popup.destroy(),this.destroyed=!0,this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),"destroy"in this.handlers&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：抽屉侧边窗；使用方法：new axDrawer({参数},'#id')；#id是可选参数，可以从该dom获取参数值
*/class axDrawer{constructor(t,e){return this.options=axExtend({insName:"",title:"",titleBreak:!0,overlay:!0,overlayClose:!0,duration:0,placement:"right",size:"sm",padding:"ax-padding",offset:"100px",content:"",type:"html",url:"",btnClass:"ax-opened",rel:"",close:!0,footerType:"center",footerShow:!0,footerBreak:!1,note:"",ajaxType:"post",zIndex:0,onInit:"",onShow:"",onShown:"",onHide:"",onHidden:"",onUpdate:"",onUpdated:"",onUpdateContent:"",onDestroy:"",breakpoints:{},confirm:{text:"确定",classname:"",icon:"",type:"close",url:"",callback:""},cancel:{text:"关闭",classname:"",icon:"",callback:""},diy:{text:"",classname:"",icon:"",url:"",target:"",callback:""}},t,e,this.constructor.name),this.handlers={},this.form=null,e&&(this.button=axIdToDom(e)),this.state="hidden",this.sequenceShow=(t,e)=>{t.style[e]?t.style[e]=.6*parseInt(t.style[e])+parseInt(this.options.offset)+"px":t.style[e]=this.options.offset},this.sequenceHide=(t,e)=>{if(t.style[e])t.style[e]==this.options.offset?t.removeAttribute("style"):t.style[e]=(parseInt(t.style[e])-parseInt(this.options.offset))/.6+"px";else{let s="left"===e||"right"===e?"width":"height";t.style[e]="-"+getComputedStyle(t)[s]}},this.init(),this}async init(){if(axInstance.push(this,this.options.insName,"drawer"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.rel=axAllToDoms(this.options.rel),this.renderDom(),this.setAttribute(),1===this.options.content.nodeType)this.content.innerHTML="",this.content.appendChild(this.options.content),this.form=this.content.querySelector("form");else if("form"===this.options.type&&"string"==typeof this.options.content&&"#"===this.options.content.substr(0,1)){if(this.form=document.querySelector(this.options.content).querySelector("form"),!this.form)return!1;this.content.innerHTML="",this.content.appendChild(this.form)}else{let t;t="async"===this.options.type&&this.options.url?await axCreateContent(this.options,this):axCreateContent(this.options,this),"function"==typeof this.options.content?this.content.innerHTML=this.options.content.call(this,t.content):this.content.innerHTML=t.content,this.form=this.content.querySelector("form")}return this.footer.innerHTML=axFooterBtns(this.options),this.targetDom.querySelectorAll("[confirm]").forEach((t=>{t.onclick=e=>{if("submit"==this.options.confirm.type){if(!this.form||"form"!=this.options.type)return!1;axValidRepeat(e,this.form,(()=>{this.form.submit()})),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")}else if("async"==this.options.confirm.type){if(!this.form||"form"!=this.options.type||!this.options.confirm.url)return!1;axValidRepeat(e,this.form,(()=>{axAjaxSubmit(this.options.confirm.url,this.form,t,{type:this.options.ajaxType,opened:t=>{this.submitXhr=t.xhr},success:e=>{this.options.confirm.callback&&this.options.confirm.callback.call(this,t,e.content)}})}))}else"prevent"==this.options.confirm.type?(axPreventDefault(e),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")):(this.hide(),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,""))}})),this.targetDom.querySelectorAll("[diy]").forEach((t=>{t.onclick=()=>{this.options.diy.callback&&this.options.diy.callback.call(this,t)}})),this.targetDom.querySelectorAll("[cancel]").forEach((t=>{t.onclick=()=>{this.hide(),this.options.cancel.callback&&this.options.cancel.callback.call(this,t)}})),this.targetDom.querySelectorAll("[close]").forEach((t=>{t.addEventListener("click",(()=>{this.hide()}),!1)})),this.button&&(this.button.onclick=()=>{this.show()}),this.rel.length>0&&this.rel.forEach((t=>{t.onclick=()=>{this.show()}})),this.options.onInit&&this.options.onInit.call(this),this}createTemplate(){return'\n                    <div class="ax-drawer" data-overlay="true">\n                        <# if(this.overlay){ #><div class="ax-drawer-overlay" <# if(this.overlayClose){ #>close<# } #>></div><# } #>\n                        <div class="ax-drawer-wrapper">\n                            <# if(this.close){ #> <a href="###" class="ax-drawer-close" close><i class="ax-iconfont ax-icon-close"></i></a><# } #>\n                            <# if(this.title){ #><div class="ax-drawer-header"><div class="ax-col ax-align-center"><# this.title #></div></div><# } #>\n                            <# if(this.title && this.titleBreak){ #><div class="ax-break-line"></div><# } #>\n                            <div class="ax-drawer-body">\n                                <# if(this.padding){ #><div class="<# this.padding #>" <# if(this.type == \'iframe\'){ #>style="height:100%;"<# } #>> <# } #>\n                                    <div class="ax-drawer-content" <# if(this.type == \'iframe\'){ #>style="height:100%;"<# } #>></div>\n                                <# if(this.padding){ #></div><# } #>\n                            </div>\n                            <div class="ax-drawer-footer">\n                            </div>\n                        </div>\n                    </div>\n                  '}renderDom(){this.template=axTplEngine(this.createTemplate(),this.options),this.targetDom=axStrToDom(this.template),this.wrapper=this.targetDom.querySelector(".ax-drawer-wrapper"),this.targetDom.querySelector(".ax-drawer-overlay")&&(this.overlay=this.targetDom.querySelector(".ax-drawer-overlay")),this.content=this.targetDom.querySelector(".ax-drawer-content"),this.body=this.targetDom.querySelector(".ax-drawer-body"),this.targetDom.querySelector(".ax-drawer-footer")&&(this.footer=this.targetDom.querySelector(".ax-drawer-footer")),this.width=window.getComputedStyle(this.wrapper).width,this.height=window.getComputedStyle(this.wrapper).height,this.left=window.getComputedStyle(this.wrapper).left,this.right=window.getComputedStyle(this.wrapper).right,this.top=window.getComputedStyle(this.wrapper).top,this.bottom=window.getComputedStyle(this.wrapper).bottom}setAttribute(){if("left"==this.options.placement)this.targetDom.setAttribute("data-placement","left");else if("right"==this.options.placement)this.targetDom.setAttribute("data-placement","right");else if("top"==this.options.placement)this.targetDom.setAttribute("data-placement","top");else{if("bottom"!=this.options.placement)return;this.targetDom.setAttribute("data-placement","bottom")}if("sm"==this.options.size)this.targetDom.setAttribute("data-size","sm");else if("md"==this.options.size)this.targetDom.setAttribute("data-size","md");else{if("lg"!=this.options.size)return;this.targetDom.setAttribute("data-size","lg")}this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex)}show(t){return this.destroyed||"hidden"!==this.state||(this.state="ing",document.body.appendChild(this.targetDom),this.options.duration?this.duration=this.options.duration:this.duration=1e3*parseFloat(axStyle(this.wrapper).animationDuration),axInstance.data.filter((t=>"drawer"===t.type&&!t.instance.destroyed)).forEach((t=>{"shown"===t.instance.state&&t.instance.options.placement===this.options.placement&&this.sequenceShow(t.instance.wrapper,this.options.placement)})),this.targetDom.classList.add("ax-show"),this.button&&this.button.classList.add(this.options.btnClass),this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),setTimeout((()=>{this.state="shown",this.options.onShown&&this.options.onShown.call(this),"shown"in this.handlers&&this.emit("shown","")}),this.duration),t&&t.call(this)),this}hide(t){return this.destroyed||"shown"!==this.state||(this.state="ing",this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),this.button&&this.button.classList.remove(this.options.btnClass),this.overlay&&(this.overlay.style.opacity=0),this.sequenceHide(this.wrapper,this.options.placement),setTimeout((()=>{this.state="hidden",this.targetDom.classList.remove("ax-show"),this.overlay&&this.overlay.removeAttribute("style"),this.wrapper.removeAttribute("style"),this.targetDom.remove(),this.options.onHidden&&this.options.onHidden.call(this),"hidden"in this.handlers&&this.emit("hidden","")}),this.duration),axInstance.data.filter((t=>"drawer"===t.type&&!t.instance.destroyed)).forEach((t=>{"shown"===t.instance.state&&t.instance.options.placement===this.options.placement&&t.instance!==this&&this.sequenceHide(t.instance.wrapper,this.options.placement)})),this.targetDom.querySelectorAll("video,audio").forEach((t=>{t.pause()})),this.button&&this.button.classList.remove(this.options.btnClass),t&&t.call(this)),this}destroy(t){return this.targetDom.remove(),this.button.onclick=null,this.rel.forEach((t=>{t.onclick=null})),this.contentXhr&&this.contentXhr.abort(),this.submitXhr&&this.submitXhr.abort(),this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),this.destroyed=!0,t&&t.call(this),this}update(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.targetDom,i=axClone(this.options),a=axExtend(this.options,t),o=!1;return t&&JSON.stringify(a)!=JSON.stringify(i)&&(this.options=a,"shown"===this.state?this.init().show():"hidden"===this.state&&this.init(),s.remove(),o=!0),e&&e.call(this,o,i,a),this.options.onUpdated&&this.options.onUpdated.call(this,o,i,a),"updated"in this.handlers&&this.emit("updated",o,i,a),this}updateContent(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.content.innerHTML,i=!1;return"String"===axType(t)?axStrType(t)?this.content.innerHTML=axIdToDom(t)?axIdToDom(t).innerHTML:"":this.content.innerHTML=t:axType(t).includes("HTML")?(this.content.innerHTML="",this.content.appendChild(t)):this.content.innerHTML="No data to update!",i=this.content.innerHTML!=s,e&&e.call(this,i,s,this.content.innerHTML),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i,s,this.content.innerHTML),"updateContent"in this.handlers&&this.emit("updateContent",i,s,this.content.innerHTML),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：对话弹窗；使用方法：new axDialog({参数},'#id')；#id是可选参数，可以从该dom获取参数值
 */class axDialog{constructor(t,e){return this.options=axExtend({insName:"",title:"",titleBreak:!1,overlay:!0,overlayClose:!0,duration:0,placement:"center",in:"springIn",out:"scaleOut",multiple:!0,size:"md",padding:"ax-padding",drag:!1,content:"",type:"html",url:"",btnClass:"ax-opened",rel:"",name:"",width:"",height:"",close:!0,closePlace:"inside",footerShow:!0,footerType:"center",footerBreak:!1,note:"",ajaxType:"post",zIndex:0,onDrag:"",onDragged:"",onInit:"",onShow:"",onShown:"",onHide:"",onHidden:"",onUpdate:"",onUpdated:"",onUpdateContent:"",onDestroy:"",breakpoints:{},confirm:{text:"确定",classname:"",icon:"",type:"close",url:"",callback:""},cancel:{text:"关闭",classname:"",icon:"",callback:""},diy:{text:"",classname:"",icon:"",url:"",target:"",callback:""}},t,e,this.constructor.name),this.wrapper="",this.content="",this.overlay="",this.handlers={},this.wrapPosition="",this.wrapLeft="",this.wrapTop="",this.form=null,e&&(this.button=axIdToDom(e)),this.state="hidden",this.init(),this}async init(){if(axInstance.push(this,this.options.insName,"dialog"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.rel=axAllToDoms(this.options.rel),"phone"===axClient()&&(this.options.placement="center"),this.renderDom(),this.setAttribute(),1===this.options.content.nodeType)this.content.innerHTML="",this.content.appendChild(this.options.content),this.form=this.content.querySelector("form");else if("form"===this.options.type&&"string"==typeof this.options.content&&"#"===this.options.content.substr(0,1)){if(this.form=document.querySelector(this.options.content).querySelector("form"),!this.form)return!1;this.content.innerHTML="",this.content.appendChild(this.form)}else{let t;t="async"===this.options.type&&this.options.url?await axCreateContent(this.options,this):axCreateContent(this.options,this),"function"==typeof this.options.content?this.content.innerHTML=this.options.content.call(this,t.content):this.content.innerHTML=t.content,this.form=this.content.querySelector("form")}return this.footer.innerHTML=axFooterBtns(this.options),this.options.drag&&this.drag(),this.targetDom.querySelectorAll("[confirm]").forEach((t=>{t.onclick=e=>{if("submit"==this.options.confirm.type){if(!this.form||"form"!=this.options.type)return!1;axValidRepeat(e,this.form,(()=>{this.form.submit()})),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")}else if("async"==this.options.confirm.type){if(!this.form||"form"!=this.options.type||!this.options.confirm.url)return!1;axValidRepeat(e,this.form,(()=>{axAjaxSubmit(this.options.confirm.url,this.form,t,{type:this.options.ajaxType,opened:t=>{this.submitXhr=t.xhr},success:e=>{this.options.confirm.callback&&this.options.confirm.callback.call(this,t,e.content)}})}))}else"prevent"==this.options.confirm.type?(axPreventDefault(e),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")):(this.hide(),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,""))}})),this.targetDom.querySelectorAll("[diy]").forEach((t=>{t.onclick=()=>{this.options.diy.callback&&this.options.diy.callback.call(this,t)}})),this.targetDom.querySelectorAll("[cancel]").forEach((t=>{t.onclick=()=>{this.hide(),this.options.cancel.callback&&this.options.cancel.callback.call(this,t)}})),this.targetDom.querySelectorAll("[close]").forEach((t=>{t.addEventListener("click",(()=>{this.hide()}),!1)})),this.button&&(this.button.onclick=()=>{this.show()}),this.rel.length>0&&this.rel.forEach((t=>{t.onclick=()=>{this.show()}})),this.options.onInit&&this.options.onInit.call(this),this}createTemplate(){return'\n        <div class="ax-dialog" data-overlay="true">\n        <# if(this.overlay){ #><div class="ax-dialog-overlay" <# if(this.overlayClose){ #>close<# } #>></div><# } #>\n            <div class="ax-dialog-wrapper">\n                <# if(this.close){ #><a href="###" class="ax-dialog-close" close><i class="ax-iconfont ax-icon-close"></i></a><# } #>\n                <# if(this.title){ #><div class="ax-dialog-header"><# this.title #></div><# } #>\n                <# if(this.titleBreak){ #><div class="ax-break-line"></div><# } #>\n                <div class="ax-dialog-body">\n                    <# if(typeof this.padding == \'string\'){ #><div class="<# this.padding #>"> <# }else if(this.padding){ #><div class="ax-padding"> <# } #>\n                    <div class="ax-dialog-content"></div>\n                    <# if(this.padding){ #></div><# } #>\n                </div>\n                <div class="ax-dialog-footer">\n                </div>\n            </div>\n        </div>\n      '}renderDom(){this.template=axTplEngine(this.createTemplate(),this.options),this.targetDom=axStrToDom(this.template),this.wrapper=this.targetDom.querySelector(".ax-dialog-wrapper"),this.header=this.targetDom.querySelector(".ax-dialog-header"),this.content=this.targetDom.querySelector(".ax-dialog-content"),this.body=this.targetDom.querySelector(".ax-dialog-body"),this.overlay=this.targetDom.querySelector(".ax-dialog-overlay"),this.footer=this.targetDom.querySelector(".ax-dialog-footer")}setAttribute(){this.options.size&&this.targetDom.setAttribute("data-size",this.options.size),this.options.footerType&&this.targetDom.setAttribute("data-footerType",this.options.footerType),this.options.height&&(this.content.style.height=this.options.height),this.oldStyle=this.options.width?`width:${this.options.width};`:null,this.options.type&&this.targetDom.setAttribute("data-type",this.options.type),!this.options.overlay&&this.targetDom.setAttribute("data-overlay","false"),!this.options.title&&this.options.close?"lg"==this.options.size?this.targetDom.setAttribute("data-closePlace","bottom"):this.options.title||"inside"!=this.options.closePlace?this.targetDom.setAttribute("data-closePlace",this.options.closePlace):this.targetDom.setAttribute("data-closePlace","outside"):this.options.closePlace&&this.options.close&&this.targetDom.setAttribute("data-closePlace",this.options.closePlace),this.targetDom.setAttribute("placement",this.options.placement),this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex)}drag(t){if(this.destroyed)return!1;if(!this.options.title)return!1;{let e=this,s=this.targetDom.querySelector(".ax-dialog-header");this.targetDom.setAttribute("data-drag",this.options.drag),s.onmousedown=function(t){e.options.onDrag&&e.options.onDrag.call(this),"drag"in e.handlers&&e.emit("drag",""),this.style.cursor="move";let s=this.parentNode;s.style.cssText+="position:fixed ;",e.wrapPosition="fixed";let i=t.clientX-s.offsetLeft,a=t.clientY-s.offsetTop;document.onmousemove=function(t){let o=t.clientX-i,n=t.clientY-a,r=document.documentElement.clientWidth-s.clientWidth,l=document.documentElement.clientHeight-s.clientHeight;o<0&&(o=0),o>r&&(o=r),n<0&&(n=0),n>l&&(n=l),s.style.left=o+"px",s.style.top=n+"px",e.wrapLeft=s.style.left,e.wrapTop=s.style.top}},s.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,e.options.onDragged&&e.options.onDragged.call(this),"dragged"in e.handlers&&e.emit("dragged","")},s.ondragstart=function(t){axPreventDefault(t)},s.ondragend=function(t){axPreventDefault(t)},t&&t.call(this)}return this}update(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.targetDom,i=axClone(this.options),a=axExtend(this.options,t),o=!1;return t&&JSON.stringify(a)!=JSON.stringify(i)&&(this.options=a,"shown"===this.state?this.init().show():"hidden"===this.state&&this.init(),s.remove(),o=!0),e&&e.call(this,o,i,a),this.options.onUpdated&&this.options.onUpdated.call(this,o,i,a),"updated"in this.handlers&&this.emit("updated",o,i,a),this}updateContent(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.content.innerHTML,i=!1;return"String"===axType(t)?axStrType(t)?this.content.innerHTML=axIdToDom(t)?axIdToDom(t).innerHTML:"":this.content.innerHTML=t:axType(t).includes("HTML")?(this.content.innerHTML="",this.content.appendChild(t)):this.content.innerHTML="No data to update!",i=this.content.innerHTML!=s,e&&e.call(this,i,s,this.content.innerHTML),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i,s,this.content.innerHTML),"updateContent"in this.handlers&&this.emit("updateContent",i,s,this.content.innerHTML),this}destroy(t){return this.targetDom.remove(),this.button.onclick=null,this.rel.forEach((t=>{t.onclick=null})),this.contentXhr&&this.contentXhr.abort(),this.submitXhr&&this.submitXhr.abort(),this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),this.destroyed=!0,t&&t.call(this),this}show(t){if(this.destroyed||"hidden"!==this.state)return this;if(this.state="ing",document.body.appendChild(this.targetDom),this.wrapperHeight=axArrHeight(this.wrapper).height,this.options.duration?this.duration=this.options.duration:this.wrapperHeight?this.duration=Math.floor(this.wrapperHeight/3+250):this.duration=1e3*parseFloat(axStyle(this.wrapper).animationDuration),!this.options.multiple){axInstance.data.filter((t=>t.type.dialog&&t.instance!==this&&t.instance.isShow)).forEach((t=>{t.instance.hide()}))}this.targetDom.classList.remove("ax-hide"),this.targetDom.classList.add("ax-show"),this.button&&this.button.classList.add(this.options.btnClass),this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show","");let e="";return this.wrapPosition&&(e=`position:${this.wrapPosition};left:${this.wrapLeft};top:${this.wrapTop};`),"slideDown"==this.options.in?axHeightDown(this.wrapper,{height:this.wrapperHeight},"",this.duration):(this.options.duration&&(this.targetDom.style.animationDuration=`${this.options.duration}ms`),this.options.in&&(this.wrapper.style.cssText=`animation-name: ${this.options.in};${e};${this.oldStyle}`)),setTimeout((()=>{this.state="shown",this.options.onShown&&this.options.onShown.call(this),"shown"in this.handlers&&this.emit("shown","")}),this.duration),t&&t.call(this),this}hide(t){if(this.destroyed||"shown"!==this.state)return this;this.state="ing",this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),this.button&&this.button.classList.remove(this.options.btnClass),this.options.duration&&(this.targetDom.style.animationDuration=this.options.duration),this.targetDom.classList.add("ax-hide");let e="";return this.wrapPosition&&(e=`position:${this.wrapPosition};left:${this.wrapLeft};top:${this.wrapTop};`),"slideUp"==this.options.out?axHeightUp(this.wrapper,{height:this.wrapperHeight},"",this.duration):this.options.out&&(this.wrapper.style.cssText=`animation-name: ${this.options.out};${e};${this.oldStyle}`),this.targetDom.querySelectorAll("video,audio").forEach((t=>{t.pause()})),setTimeout((()=>{this.state="hidden",this.targetDom.classList.remove("ax-show"),this.targetDom.remove(),this.options.onHidden&&this.options.onHidden.call(this),"hidden"in this.handlers&&this.emit("hidden",""),this.wrapper.style.cssText=this.oldStyle}),this.duration),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：气泡定位；使用方法：new axPosition(btnDom, boxDom,{参数})
*/class axPosition{constructor(t,e,s){if(!t||!e)return!1;this.btnDom=axIdToDom(t),this.boxDom=axIdToDom(e),this.options=axExtend({placement:"top-center",arrowShow:!0,arrowOffset:"2.8rem",gap:".8rem",parent:document.body,btnObserve:{attrs:["class","style","size","width","height"],size:!0},boxObserve:{attrs:["class","style","size","width","height"],size:!0},delay:20,onInit:"",onUpdated:""},s),this.handlers={},"left"===this.options.placement?this.options.placement="left-center":"right"===this.options.placement?this.options.placement="right-center":"top"===this.options.placement?this.options.placement="top-center":"bottom"===this.options.placement&&(this.options.placement="bottom-center"),this.gap=this.strToNum(this.options.gap),this.parent=axIdToDom(this.options.parent),this.placement=this.options.placement,this.observerCount=0,this.completeCount=0,this.trigger=()=>{this.observerCount++,this.complete(this.observerCount)},this.btnAttrsObserver=new MutationObserver((t=>{for(let e of t)this.options.btnObserve.attrs.includes(e.attributeName)&&this.trigger()})),this.btnSizeObserver=new ResizeObserver((()=>{this.trigger()})),this.boxAttrsObserver=new MutationObserver((t=>{for(let e of t)this.options.boxObserve.attrs.includes(e)&&this.trigger()})),this.boxSizeObserver=new ResizeObserver((()=>{this.trigger()})),this.parentObserver=new MutationObserver((()=>{!this.unsettable("btn")&&this.btnData&&(axOffset(this.btnDom).left===this.btnData.left&&axOffset(this.btnDom).top===this.btnData.top||this.trigger())})),this.init()}init(){return"center"!==this.placement&&this.createArrow(),this.setAttribute(),this.resetPlacement(),window.addEventListener("resize",this.trigger),window.addEventListener("scroll",this.trigger),this.options.btnObserve.attrs.length>0&&this.btnAttrsObserver.observe(this.btnDom,{attributes:!0}),this.options.btnObserve.size&&this.btnSizeObserver.observe(this.btnDom),this.options.boxObserve.attrs.length>0&&this.boxAttrsObserver.observe(this.boxDom,{attributes:!0}),this.options.boxObserve.size&&this.boxSizeObserver.observe(this.boxDom),this.parent&&this.parentObserver.observe(this.parent,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.options.onInit&&this.options.onInit.call(this,this.placement),this.handlers.hasOwnProperty("init")&&this.emit("init",this.placement),this}complete(t){setTimeout((()=>{this.observerCount===t&&this.resetPlacement()}),this.options.delay)}strToNum(t){if(!t)return 0;let e;return e=t.endsWith("rem")||t.endsWith("REM")?10*t.replace("rem","").replace("REM",""):t.endsWith("px")||t.endsWith("PX")?~~t.replace("px","").replace("PX",""):~~t,e}setAttribute(){"absolute"!==getComputedStyle(this.boxDom).position&&(this.boxDom.style.position="absolute")}createArrow(){this.options.arrowShow&&(this.arrow=axAddElem("i",{style:"position:absolute",arrow:""}),this.boxDom.appendChild(this.arrow))}setArrow(t){let e=this.btnData.width>this.boxData.width/2,s=this.btnData.height>this.boxData.height/2,i=this.strToNum(getComputedStyle(this.arrow).width)/2;this.boxDom.setAttribute("placement",t),t.includes("top")||t.includes("bottom")?t.includes("start")?e?(this.arrow.style.left=this.options.arrowOffset,this.arrow.style.right="auto"):(this.arrow.style.left=Math.floor(this.btnData.width/2-i)+"px",this.arrow.style.right="auto"):t.includes("end")?e?(this.arrow.style.left="auto",this.arrow.style.right=this.options.arrowOffset):(this.arrow.style.left="auto",this.arrow.style.right=Math.floor(this.btnData.width/2-i)+"px"):this.arrow.style.left=this.boxData.width/2-1-i+"px":(t.includes("left")||t.includes("right"))&&(t.includes("start")?s?(this.arrow.style.top=this.options.arrowOffset,this.arrow.style.bottom="auto"):(this.arrow.style.top=Math.floor(this.btnData.height/2-i)+"px",this.arrow.style.bottom="auto"):t.includes("end")?s?(this.arrow.style.top="auto",this.arrow.style.bottom=this.options.arrowOffset):(this.arrow.style.top="auto",this.arrow.style.bottom=Math.floor(this.btnData.height/2-i)+"px"):this.arrow.style.top=this.boxData.height/2-1-i+"px")}getRectsData(){this.browserData={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};let t=this.btnDom.getBoundingClientRect();this.btnData={width:t.width,height:t.height,offsetLeft:t.left,offsetRight:t.right,offsetTop:t.top,offsetBottom:t.bottom,gapRight:this.browserData.width-t.right,gapBottom:this.browserData.height-t.bottom,...axOffset(this.btnDom)};let e=this.boxDom.getBoundingClientRect();this.boxData={width:e.width,height:e.height,offsetLeft:e.left,offsetRight:e.right,offsetTop:e.top,offsetBottom:e.bottom,gapRight:this.browserData.width-e.right,gapBottom:this.browserData.height-e.bottom}}setPlacement(t){let[e,s,i,a]=["auto","auto","auto","auto"];t.includes("bottom")?(e="bottom"===t||"bottom-center"===t?this.btnData.left-(this.boxData.width-this.btnData.width)/2:"bottom-start"===t?this.btnData.left:"bottom-end"===t?this.btnData.left+this.btnData.width-this.boxData.width:0,i=`${Math.ceil(this.btnData.top+this.btnData.height+this.gap)}px`,e=`${Math.ceil(e)}px`):t.includes("top")?(e="top"===t||"top-center"===t?this.btnData.left-(this.boxData.width-this.btnData.width)/2:"top-start"===t?this.btnData.left:"top-end"===t?this.btnData.left+this.btnData.width-this.boxData.width:0,a=this.browserData.height-this.btnData.top+this.gap,a=`${Math.ceil(a)}px`,e=`${Math.ceil(e)}px`):t.includes("left")?("left"===t||"left-center"===t?i=`${Math.ceil(this.btnData.top-(this.boxData.height-this.btnData.height)/2)}px`:"left-start"===t?i=`${Math.ceil(this.btnData.top)}px`:"left-end"===t&&(a=`${Math.ceil(this.browserData.height-this.btnData.top-this.btnData.height)}px`),s=`${Math.ceil(this.browserData.width-this.btnData.left+this.gap)}px`):t.includes("right")?("right"===t||"right-center"===t?i=`${Math.ceil(this.btnData.top-(this.boxData.height-this.btnData.height)/2)}px`:"right-start"===t?i=`${Math.ceil(this.btnData.top)}px`:"right-end"===t&&(a=`${Math.ceil(this.browserData.height-this.btnData.top-this.btnData.height)}px`),e=`${Math.ceil(this.btnData.left+this.btnData.width+this.gap)}px`):"center"===t&&(this.boxDom.style.position="fixed",e="50%",i="50%",this.boxDom.style.marginLeft=`-${Math.ceil(this.boxData.width/2)}px`,this.boxDom.style.marginTop=`-${Math.ceil(this.boxData.height/2)}px`),this.boxDom.style.left=e,this.boxDom.style.right=s,this.boxDom.style.top=i,this.boxDom.style.bottom=a,this.arrow&&this.setArrow(t)}getSurroundGap(){let t=this.btnData.offsetLeft-this.boxData.width-this.gap,e=this.btnData.offsetTop-this.boxData.height-this.gap,s=this.browserData.width-this.btnData.offsetRight-this.boxData.width-this.gap,i=this.browserData.height-this.btnData.offsetBottom-this.boxData.height-this.gap,a=this.btnData.offsetTop,o=this.browserData.height-(a+this.boxData.height),n=this.btnData.offsetTop-(this.boxData.height-this.btnData.height)/2,r=this.browserData.height-(n+this.boxData.height),l=this.btnData.offsetBottom-this.boxData.height,h=this.browserData.height-this.btnData.offsetBottom,p=this.btnData.offsetLeft,d=this.browserData.width-(p+this.boxData.width),c=this.btnData.offsetLeft-(this.boxData.width-this.btnData.width)/2;return{left:t,right:s,top:e,bottom:i,start:{left:p,right:d,top:a,bottom:o},center:{left:c,right:this.browserData.width-(c+this.boxData.width),top:n,bottom:r},end:{left:this.btnData.offsetRight-this.boxData.width,right:this.browserData.width-this.btnData.offsetRight,top:l,bottom:h}}}fixPlacement(){if(this.btnData.gapRight>this.browserData.width||this.btnData.offsetLeft>this.browserData.width)return this;let t=this.getSurroundGap();this.placement.includes("top")&&t.top<0&&t.bottom>=0?this.placement=this.placement.replace("top","bottom"):this.placement.includes("bottom")&&t.bottom<0&&t.top>=0?this.placement=this.placement.replace("bottom","top"):this.placement.includes("left")&&t.left<0&&t.right>=0?this.placement=this.placement.replace("left","right"):this.placement.includes("right")&&t.right<0&&t.left>=0&&(this.placement=this.placement.replace("right","left")),(this.placement.includes("top")||this.placement.includes("bottom"))&&this.boxData.width<this.browserData.width&&(this.boxData.width>this.btnData.width?this.btnData.offsetLeft<0&&this.btnData.gapRight<this.browserData.width?this.placement=this.placement.replace("end","start").replace("center","start"):this.btnData.gapRight<0&&this.btnData.offsetLeft<this.browserData.width?this.placement=this.placement.replace("start","end").replace("center","end"):(t.end.left<0&&t.center.left<0?this.placement=this.placement.replace("end","start").replace("center","start"):t.end.left<0&&this.placement.includes("end")?this.placement=this.placement.replace("end","center"):t.end.left<0&&t.center.left>0&&this.placement.includes("start")&&(this.options.placement.includes("end")||this.options.placement.includes("center"))?this.placement=this.placement.replace("start","center"):t.end.left>0&&this.placement.includes("center")&&this.options.placement.includes("end")&&(this.placement=this.placement.replace("center","end")),t.start.right<0&&t.center.right<0?this.placement=this.placement.replace("start","end").replace("center","end"):t.start.right<0&&this.placement.includes("start")?this.placement=this.placement.replace("start","center"):t.start.right<0&&t.center.right>0&&this.placement.includes("end")&&(this.options.placement.includes("start")||this.options.placement.includes("center"))?this.placement=this.placement.replace("end","center"):t.start.right>0&&this.placement.includes("center")&&this.options.placement.includes("start")&&(this.placement=this.placement.replace("center","start"))):(t.start.left<0&&t.center.left<0?this.placement=this.placement.replace("start","end").replace("center","end"):t.start.left<0&&this.placement.includes("start")?this.placement=this.placement.replace("start","center"):t.start.left<0&&t.center.left>0&&this.placement.includes("end")&&(this.options.placement.includes("start")||this.options.placement.includes("center"))?this.placement=this.placement.replace("end","center"):t.start.left>0&&this.placement.includes("center")&&this.options.placement.includes("start")&&(this.placement=this.placement.replace("center","start")),t.end.right<0&&t.center.right<0?this.placement=this.placement.replace("end","start").replace("center","start"):t.end.right<0&&this.placement.includes("end")?this.placement=this.placement.replace("end","center"):t.end.right<0&&t.center.right>0&&this.placement.includes("start")&&(this.options.placement.includes("end")||this.options.placement.includes("center"))?this.placement=this.placement.replace("start","center"):t.end.right>0&&this.placement.includes("center")&&this.options.placement.includes("end")&&(this.placement=this.placement.replace("center","end")))),(this.placement.includes("left")||this.placement.includes("right"))&&this.boxData.height<this.browserData.height&&(this.boxData.height>this.btnData.height?this.btnData.offsetTop<0&&this.btnData.gapBottom<this.browserData.height?this.placement=this.placement.replace("end","start").replace("center","start"):this.btnData.gapBottom<0&&this.btnData.offsetTop<this.browserData.height?this.placement=this.placement.replace("start","end").replace("center","end"):(t.end.top<0&&t.center.top<0?this.placement=this.placement.replace("end","start").replace("center","start"):t.end.top<0&&this.placement.includes("end")?this.placement=this.placement.replace("end","center"):t.end.top<0&&t.center.top>0&&this.placement.includes("start")&&(this.options.placement.includes("end")||this.options.placement.includes("center"))?this.placement=this.placement.replace("start","center"):t.end.top>0&&this.placement.includes("center")&&this.options.placement.includes("end")&&(this.placement=this.placement.replace("center","end")),t.start.bottom<0&&t.center.bottom<0?this.placement=this.placement.replace("start","end").replace("center","end"):t.start.bottom<0&&this.placement.includes("start")?this.placement=this.placement.replace("start","center"):t.start.bottom<0&&t.center.bottom>0&&this.placement.includes("end")&&(this.options.placement.includes("start")||this.options.placement.includes("center"))?this.placement=this.placement.replace("end","center"):t.start.bottom>0&&this.placement.includes("center")&&this.options.placement.includes("start")&&(this.placement=this.placement.replace("center","start"))):(t.start.top<0&&t.center.top<0?this.placement=this.placement.replace("start","end").replace("center","end"):t.start.top<0&&this.placement.includes("start")?this.placement=this.placement.replace("start","center"):t.start.top<0&&t.center.top>0&&this.placement.includes("end")&&(this.options.placement.includes("start")||this.options.placement.includes("center"))?this.placement=this.placement.replace("end","center"):t.start.top>0&&this.placement.includes("center")&&this.options.placement.includes("start")&&(this.placement=this.placement.replace("center","start")),t.end.bottom<0&&t.center.bottom<0?this.placement=this.placement.replace("end","start").replace("center","start"):t.end.bottom<0&&this.placement.includes("end")?this.placement=this.placement.replace("end","center"):t.end.bottom<0&&t.center.bottom>0&&this.placement.includes("start")&&(this.options.placement.includes("end")||this.options.placement.includes("center"))?this.placement=this.placement.replace("start","center"):t.end.bottom>0&&this.placement.includes("center")&&this.options.placement.includes("end")&&(this.placement=this.placement.replace("center","end")))),this.fullyExpose(t)}fullyExpose(t){if(this.placement===this.options.placement)return;let e=this.placement.split("-"),s=e[0],i=e[1];s=this.options.placement.includes("top")&&t.top>=0?"top":this.options.placement.includes("bottom")&&t.bottom>=0?"bottom":this.options.placement.includes("left")&&t.left>=0?"left":this.options.placement.includes("right")&&t.right>=0?"right":e[0],this.options.placement.includes("top")||this.options.placement.includes("bottom")?this.options.placement.includes("start")&&t.start[this.boxData.width>this.btnData.width?"right":"left"]>=0?i="start":this.options.placement.includes("end")&&t.end[this.boxData.width>this.btnData.width?"left":"right"]>=0?i="end":this.options.placement.includes("center")&&t.center.left>=0&&t.center.right>=0&&(i="center"):(this.options.placement.includes("left")||this.options.placement.includes("right"))&&(this.options.placement.includes("start")&&t.start[this.boxData.height>this.btnData.height?"bottom":"top"]>=0?i="start":this.options.placement.includes("end")&&t.end[this.boxData.height>this.btnData.height?"top":"bottom"]>=0?i="end":this.options.placement.includes("center")&&t.center.top>=0&&t.center.bottom>=0&&(i="center")),this.placement=`${s}-${i}`}unsettable(t){let e="btn"===t?this.btnDom:this.boxDom;return axIsVnode(e)||"none"===getComputedStyle(e).display}resetPlacement(){return this.destroyed?this:!this.unsettable()&&(this.getRectsData(),this.fixPlacement(),this.setPlacement(this.placement),this.options.onUpdated&&this.options.onUpdated.call(this,this.placement),void(this.handlers.hasOwnProperty("updated")&&this.emit("updated",this.placement)))}update(t){return this.destroyed||(this.resetPlacement(),t&&t.call(this,this.placement)),this}change(t,e){return this.destroyed||(this.btnDom=axIdToDom(t),this.resetPlacement(),e&&e.call(this,this.placement)),this}destroy(){return this.destroyed||(this.interact.disconnect(),this.options.btnObserve.attrs.length>0&&this.btnAttrsObserver.disconnect(),this.options.btnObserve.size&&this.btnResizeObserver.unobserve(),this.options.boxObserve.attrs.length>0&&this.boxAttrsObserver.disconnect(),this.options.boxObserve.size&&this.boxResizeObserver.unobserve(),this.parent&&this.parentObserver.disconnect(),window.removeEventListener("resize",this.trigger),window.removeEventListener("scorll",this.trigger),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),callback&&callback.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：气泡弹窗；使用方法：new axPopup('#id',{参数})
*/class axPopup{constructor(t,e){this.options=axExtend({insName:"",title:"",titleBreak:!1,placement:"top",arrow:!0,trigger:"click",pageClose:!0,size:"md",duration:0,in:"fadeIn",out:"fadeOut",multiple:!1,offsetShow:!0,rel:"",triggerRel:"click",theme:"",stay:!1,fixDistance:"2.4rem",name:"",width:"",height:"",padding:"ax-padding",content:"",type:"html",url:"",btnClass:"ax-opened",close:!0,closePlace:"inside",triggerShowOnly:!1,triggerStrict:!1,footerShow:!0,footerType:"line",footerBreak:!1,note:"",ajaxType:"post",zIndex:0,response:!0,onInit:"",onShow:"",onShown:"",onHide:"",onHidden:"",onUpdate:"",onUpdated:"",onUpdateContent:"",onUpdatePosition:"",onDestroy:"",breakpoints:{},position:{},confirm:{text:"确定",classname:"",icon:"",type:"close",url:"",callback:""},cancel:{text:"关闭",classname:"",icon:"",callback:""},diy:{text:"",classname:"",icon:"",url:"",target:"",callback:""}},e,t,this.constructor.name);let s=this;return this.handlers={},this.form=null,this.button=axIdToDom(t),this.state="hidden",this.bound=!1,this.triggerShow=function(t){if(s.options.triggerStrict&&![...s.rel,s.button].includes(t.target))return!1;if("click"===s.options.trigger||"click"===this.trigger)if("hidden"===s.state){if(s.show(),!s.options.multiple){axInstance.data.filter((t=>"popup"===t.type&&t.instance!==s&&t.instance.isShow)).forEach((t=>{t.instance.hide()}))}}else"shown"===s.state&&!s.options.triggerShowOnly&&s.hide();else"input"===s.options.trigger&&(s.button.value?s.show():!s.options.triggerShowOnly&&s.hide())},this.toggleShow=t=>{let e=!0;for(let s=0;s<this.rel.length;s++)if(!axIsOutside(t,this.rel[s])){e=!1;break}axIsOutside(t,this.targetDom)&&axIsOutside(t,this.button)&&e&&"shown"===this.state&&this.hide()},this.init(),this}async init(){if(axInstance.push(this,this.options.insName,"popup"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.rel=axAllToDoms(this.options.rel),this.renderDom(),this.setAttribute(),1===this.options.content.nodeType)this.content.innerHTML="",this.content.appendChild(this.options.content),this.form=this.content.querySelector("form");else if("form"===this.options.type&&"string"==typeof this.options.content&&"#"===this.options.content.substr(0,1)){if(this.form=document.querySelector(this.options.content).querySelector("form"),!this.form)return!1;this.content.innerHTML="",this.content.appendChild(this.form)}else{let t;t="async"===this.options.type&&this.options.url?await axCreateContent(this.options,this):axCreateContent(this.options,this),"function"==typeof this.options.content?this.content.innerHTML=this.options.content.call(this,t.content):this.content.innerHTML=t.content,this.form=this.content.querySelector("form")}return this.footer.innerHTML=axFooterBtns(this.options),this.createPopup(),this.targetDom.querySelectorAll("[confirm]").forEach((t=>{t.onclick=e=>{if("submit"==this.options.confirm.type){if(!this.form||"form"!=this.options.type)return!1;axValidRepeat(e,this.form,(()=>{this.form.submit()})),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")}else if("async"==this.options.confirm.type){if(!this.form||"form"!=this.options.type||!this.options.confirm.url)return!1;axValidRepeat(e,this.form,(()=>{axAjaxSubmit(this.options.confirm.url,this.form,t,{type:this.options.ajaxType,opened:t=>{this.submitXhr=t.xhr},success:e=>{this.options.confirm.callback&&this.options.confirm.callback.call(this,t,e.content)}})}))}else"prevent"===this.options.confirm.type?(axPreventDefault(e),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,"")):(this.hide(),this.options.confirm.callback&&this.options.confirm.callback.call(this,t,""))}})),this.targetDom.querySelectorAll("[diy]").forEach((t=>{t.onclick=()=>{this.options.diy.callback&&this.options.diy.callback.call(this,t)}})),this.targetDom.querySelectorAll("[cancel]").forEach((t=>{t.onclick=()=>{this.hide(),this.options.cancel.callback&&this.options.cancel.callback.call(this,t)}})),this.targetDom.querySelectorAll("[close]").forEach((t=>{t.addEventListener("click",(()=>{this.hide()}),!1)})),this.showEvent(),this.options.onInit&&this.options.onInit.call(this),this}createTemplate(){return`\n                            <div class="ax-popup" id="popup${(new Date).getTime()}">\n                                <div class="ax-popup-wrapper">\n                                    <# if(this.close){ #><i close></i><# } #>\n                                    <# if(this.title){ #><div class="ax-popup-header"><# this.title #></div><# } #>\n                                    <# if(this.titleBreak){ #><div class="ax-break-line"></div><# } #>\n                                    <div class="ax-popup-body">\n                                        <# if(typeof this.padding === 'string'){ #><div class="<# this.padding #>"> <# }else if(this.padding){ #><div class="ax-padding"> <# } #>\n                                        <# this.media #>\n                                        <div class="ax-popup-content"></div>\n                                        <# if(this.padding){ #></div><# } #>\n                                    </div>\n                                    <div class="ax-popup-footer">\n                                    </div>\n                                </div>\n                            </div>\n                            `}renderDom(){this.template=axTplEngine(this.createTemplate(),this.options),this.targetDom=axStrToDom(this.template),this.wrapper=this.targetDom.querySelector(".ax-popup-wrapper"),this.content=this.targetDom.querySelector(".ax-popup-content"),this.body=this.targetDom.querySelector(".ax-popup-body"),this.targetDom.querySelector(".ax-popup-header")&&(this.header=this.targetDom.querySelector(".ax-popup-header")),this.footer=this.targetDom.querySelector(".ax-popup-footer")}setAttribute(){this.options.size&&this.targetDom.setAttribute("size",this.options.size),this.options.type&&this.targetDom.setAttribute("type",this.options.type),this.options.footerType&&this.targetDom.setAttribute("footerType",this.options.footerType),this.options.height&&(this.content.style.height=this.options.height),this.options.theme&&this.targetDom.setAttribute("theme",this.options.theme),this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex),this.options.close&&this.targetDom.setAttribute("closePlace",this.options.closePlace)}createPopup(){let t;t="center"===this.options.placement||this.options.response&&axIsMobi()?"center":this.options.placement,this.popupPosition=new axPosition(this.button,this.targetDom,axExtend({placement:t,arrowShow:this.options.arrow,gap:this.options.arrow?".8rem":".4rem",arrowOffset:this.options.fixDistance,btnObserve:{attrs:[],size:!1},boxObserve:{attrs:[],size:!1},delay:0,parent:null},this.options.position)),this.oldStyle=this.options.width?`width:${this.options.width};`:""}showEvent(){"click"===this.options.trigger||"input"===this.options.trigger?(!this.bound&&this.button.addEventListener(this.options.trigger,this.triggerShow,!1),this.rel.length>0&&this.rel.forEach((t=>{this.bound||(t.trigger=this.options.triggerRel||this.options.trigger,t.addEventListener(this.options.triggerRel||this.options.trigger,this.triggerShow,!1))}))):"hover"===this.options.trigger?this.hover=new axHover(this.button,{enter:()=>{this.show()},leave:()=>{!this.options.triggerShowOnly&&this.hide()},hold:this.targetDom}):"sticky"===this.options.trigger&&this.show(),this.options.pageClose&&!this.options.multiple&&!this.bound&&document.addEventListener("click",this.toggleShow,!1),this.bound=!0}update(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=axClone(this.options),i=axExtend(this.options,t),a=!1;return t&&JSON.stringify(i)!=JSON.stringify(s)&&(this.options=i,this.targetDom.remove(),this.popupPosition.destroy(),this.popupPosition=null,"shown"===this.state?this.init().show():"hidden"===this.state&&this.init(),a=!0),e&&e.call(this,a,s,i),this.options.onUpdated&&this.options.onUpdated.call(this,a,s,i),"updated"in this.handlers&&this.emit("updated",a,s,i),this}updateContent(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=this.content.innerHTML,i=!1;return"String"===axType(t)?axStrType(t)?this.content.innerHTML=axIdToDom(t)?axIdToDom(t).innerHTML:"":this.content.innerHTML=t:axType(t).includes("HTML")?(this.content.innerHTML="",this.content.appendChild(t)):this.content.innerHTML="No data to update!",i=this.content.innerHTML!=s,e&&e.call(this,i,s,this.content.innerHTML),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i,s,this.content.innerHTML),"updateContent"in this.handlers&&this.emit("updateContent",i,s,this.content.innerHTML),this}updatePosition(t,e){if(this.destroyed)return this;this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update","");let s=axIdToDom(t);return this.popupPosition.change(s,(t=>{this.options.onUpdatePosition&&this.options.onUpdatePosition.call(this,t),"updatePosition"in this.handlers&&this.emit("updatePosition",t)})),e&&e.call(this),this}show(t){return this.destroyed||"hidden"!==this.state||(this.state="ing",getComputedStyle(this.targetDom).display||document.body.appendChild(this.targetDom),this.wrapperHeight=axArrHeight(this.wrapper).height,this.options.duration?this.duration=this.options.duration:this.wrapperHeight?this.duration=Math.floor(this.wrapperHeight/3+250):this.duration=1e3*parseFloat(axStyle(this.targetDom).animationDuration),this.popupPosition.update(),this.targetDom.classList.add("ax-show"),this.button&&this.button.classList.add(this.options.btnClass),this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),"slideDown"===this.options.in?axHeightDown(this.wrapper,{height:this.wrapperHeight},"",this.duration):(this.options.duration&&(this.targetDom.style.animationDuration=`${this.options.duration}ms`),this.options.in&&(this.targetDom.style.animationName=this.options.in)),this.targetDom.style.cssText+=`;${this.oldStyle}`,this.hover&&(this.hover.isActive=!0),setTimeout((()=>{this.state="shown",this.options.onShown&&this.options.onShown.call(this),"shown"in this.handlers&&this.emit("shown","")}),this.duration),t&&t.call(this)),this}hide(t){return this.destroyed||"shown"!==this.state||(this.state="ing",this.options.stay||(this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),this.button&&this.button.classList.remove(this.options.btnClass),"slideUp"===this.options.out?axHeightUp(this.wrapper,{height:this.wrapperHeight},"",this.duration):this.options.out&&(this.targetDom.style.animationName=this.options.out),this.targetDom.style.cssText+=`;${this.oldStyle}`,this.targetDom.querySelectorAll("video,audio").forEach((t=>{t.pause()})),this.hover&&(this.hover.isActive=!1),setTimeout((()=>{this.state="hidden",this.targetDom.classList.remove("ax-show"),this.targetDom.remove(),this.options.onHidden&&this.options.onHidden.call(this),"hidden"in this.handlers&&this.emit("hidden",""),"slideUp"===this.options.out&&(this.wrapper.style.height="auto")}),this.duration),t&&t.call(this))),this}destroy(t){return this.targetDom.remove(),this.popupPosition.destroy(),this.popupPosition=null,this.hover=null,this.button.removeEventListener(this.options.trigger,this.triggerShow),this.rel.forEach((t=>{t.removeEventListener(this.options.triggerRel||this.options.trigger,this.triggerShow)})),this.toggleShow&&document.removeEventListener("click",this.toggleShow),this.bound=!1,this.contentXhr&&this.contentXhr.abort(),this.submitXhr&&this.submitXhr.abort(),this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),this.destroyed=!0,t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：小窗文字提示；使用方法：axTooltip('#id',{参数})
 */class axTooltip{constructor(t,e){this.button=axIdToDom(t),this.options=axExtend({insName:"",placement:"top",arrow:!0,trigger:"hover",size:"",multiple:!0,theme:"text",content:"",breakpoints:{}},e,this.button,this.constructor.name),this.init()}init(){axInstance.push(this,this.options.insName,"tooltip"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints);let t=this.button.getAttribute("axTooltip");!this.options.content&&t&&!t.includes(":")&&(this.options.content=t);let e=Object.assign({type:"html",close:!1,footerShow:!1,padding:!1},this.options);this.popup=new axPopup(this.button,e),this.content=this.popup.content,this.setAttribute()}setAttribute(){this.popup.targetDom.classList.add("ax-tooltip"),this.options.theme&&this.popup.targetDom.setAttribute("theme",this.options.theme)}updateContent(t,e){return this.content.innerHTML=t,e&&e.call(this,update,before,this.content.innerHTML,this.options.content),"updated"in this.handlers&&this.emit("updated",""),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：文件上传；使用方法：new axUpload('#id',{参数})
 */class axUpload{constructor(t,e){this.targetDom=t?axIdToDom(t):"",this.options=axExtend({insName:"",type:"beautify",accept:"jpg,jpeg,gif,png,svg,doc,docx,xls,xlsx,txt,mp4,mp3,pdf",mime:"",multiple:!0,name:"",separator:",",columns:0,min:0,max:0,size:0,url:"",fileType:[],action:"auto",tipsShow:!0,summaryShow:!1,cloud:"",pastable:{before:"请点击使用ctrl+v粘贴上传",ing:"使用ctrl+v粘贴进来",after:"ctrl+v粘贴上传成功"},icons:{file:"ax-iconfont ax-icon-file-text",attach:"ax-iconfont ax-icon-attach",image:"ax-iconfont ax-icon-image",video:"ax-iconfont ax-icon-video",audio:"ax-iconfont ax-icon-music"},beautify:{placeholder:"请选择文件...",text:"选择文件",className:"ax-file",display:"",callback:""},message:{passed:"通过文件校验!",exceeded:"超过了文件数量限制!",tooLarge:"文件体积太大了!",errorSuffix:"不支持该文件格式!",success:"上传成功!",failed:"提交地址可能错误!"},chooseBtn:{icon:'<i class="ax-iconfont ax-icon-plus"></i>',text:"选择文件",className:"",props:{},show:!0},uploadBtn:{icon:'<i class="ax-iconfont ax-icon-upload"></i>',text:"立即上传",className:"",props:{},show:!1},clearBtn:{icon:'<i class="ax-iconfont ax-icon-trash"></i>',text:"删除全部",className:"",props:{},show:!1},cubeBtn:{icon:'<i class="ax-iconfont ax-icon-plus-t"></i>',text:"",className:"",props:{},show:!0},boxBtn:{icon:'<i class="ax-iconfont ax-icon-addpic"></i>',text:"点击或拖拽上传",className:"",props:{},show:!0},breakpoints:{},onRendered:"",onPasted:"",onDropped:"",onUploading:"",onUploaded:"",onAllUploaded:"",onError:"",onCompleted:"",onAllCompleted:"",onChanged:"",onShow:"",onRemove:"",onClear:"",onBeforeRemove:"",onBeforeClear:"",onBeforeUpload:""},e,this.targetDom,this.constructor.name),this.name=this.targetDom&&"INPUT"==this.targetDom.nodeName?this.targetDom.getAttribute("name"):this.options.name,this.handlers={},this.sizeLimit=1024*this.options.size*1024;let s=[{name:"image",icon:this.options.icons.image,suffix:["png","jpg","jpeg","bmp","gif","webp","svg","tiff"]},{name:"video",icon:this.options.icons.video,suffix:["mp4","mpeg","avi","wmv","mov","m4v","flv","rmvb","3gp"]},{name:"audio",icon:this.options.icons.audio,suffix:["mp3","wma","m4a","ogg"]}];axIsEmpty(this.options.fileType)?this.fileTypes=[...s]:this.fileTypes=[...this.options.fileType,...s],this.files=[],this.details=[],this.history=[],this.value=[],this.inputValue="",this.summary=axAddElem("div",{summary:""}),this.init()}init(){return axInstance.push(this,this.options.insName,"upload"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.createTips(),this.createButton(),this.createSkeleton(),this.setAttribute(),"beautify"!=this.options.type&&(this.chooseBtn.onclick=()=>{this.inputFile.click()},this.readyUpload(),this)}createTips(){this.tipsText="",this.options.size&&(this.tipsText+=`要求大小不超过${this.options.size}MB,`),this.options.min&&(this.tipsText+=`至少上传${this.options.min}个文件,`),this.options.max&&(this.tipsText+=`最多上传${this.options.max}个文件`),this.tips=axAddElem("div",{tips:""},this.tipsText)}createButton(){"gallery"==this.options.type?this.chooseBtn=axAddElem("div",Object.assign({choose:""},this.options.boxBtn.props),this.options.boxBtn.icon+"<div text>"+this.options.boxBtn.text+"</div>"):"picture"==this.options.type?this.chooseBtn=axAddElem("li",Object.assign(this.options.cubeBtn.className?{class:this.options.cubeBtn.className}:{choose:""},this.options.cubeBtn.props),this.options.cubeBtn.icon+this.options.cubeBtn.text):this.chooseBtn=axAddElem("a",Object.assign({href:"###",class:this.options.chooseBtn.className?"ax-btn "+this.options.chooseBtn.className:"ax-btn",choose:""},this.options.chooseBtn.props),this.options.chooseBtn.icon+this.options.chooseBtn.text)}createSkeleton(){if(this.targetDom?"INPUT"==this.targetDom.nodeName&&"file"==this.targetDom.type?(this.inputFile=this.targetDom,this.inputFile.name&&this.inputFile.setAttribute("name",this.name),this.parent=axAddElem("div",{class:"ax-upload"}),this.inputFile.insertAdjacentElement("beforeBegin",this.parent)):"INPUT"!=this.targetDom.nodeName||"hidden"!=this.targetDom.type&&"text"!=this.targetDom.type?(this.parent=this.targetDom,this.inputFile=axAddElem("input",{type:"file"}),this.inputText=axAddElem("input",{type:"hidden",readonly:"",name:this.name}),this.options.multiple&&this.inputFile.setAttribute("multiple","")):(this.inputText=this.targetDom,this.inputText.name&&this.inputText.setAttribute("name",this.name),this.inputText.setAttribute("readonly",""),this.inputFile=axAddElem("input",{type:"file"}),this.parent=axAddElem("div",{class:"ax-upload"}),this.inputText.insertAdjacentElement("beforeBegin",this.parent),this.options.multiple&&this.inputFile.setAttribute("multiple","")):(this.parent=axAddElem("div",{class:"ax-upload"}),this.inputFile=axAddElem("input",{type:"file"}),this.options.multiple&&this.inputFile.setAttribute("multiple",""),this.inputText=axAddElem("input",{type:"hidden",readonly:"",name:this.options.name})),this.options.mime&&this.inputFile.setAttribute("accept",this.options.mime),this.parent.appendChild(this.inputFile),"beautify"==this.options.type)this.parent.appendChild(this.inputFile),this.parent.dataset.placeholder=this.options.beautify.placeholder,this.parent.dataset.text=this.options.beautify.text,this.parent.classList.add(this.options.beautify.className),this.fileChange(this.parent,this.inputFile);else{this.list=axAddElem("ul"),this.parent.appendChild(this.list),this.parent.appendChild(this.inputText);let t=axAddElem("div",{info:""}),e=axAddElem("div",{footer:""},t);if(this.options.tipsShow&&this.tipsText&&(t.appendChild(this.tips),this.parent.setAttribute("withtips","")),this.options.summaryShow&&(t.appendChild(this.summary),this.summary.innerHTML=this.getSummary(),this.parent.setAttribute("withtips","")),"gallery"==this.options.type)this.createCtrlv(),this.parent.appendChild(e),this.parent.insertAdjacentElement("afterBegin",this.chooseBtn),this.list.classList.add("ax-grid","ax-space-xs"),this.options.columns&&this.list.classList.add("ax-grid-"+this.options.columns),this.options.clearBtn.show&&(this.clearBtn=axAddElem("a",Object.assign({href:"###",class:this.options.clearBtn.className?"ax-btn "+this.options.clearBtn.className:"ax-btn",clear:""},this.options.clearBtn.props),this.options.clearBtn.icon+this.options.clearBtn.text),e.appendChild(this.clearBtn),this.parent.setAttribute("withtips","")),this.options.uploadBtn.show&&(this.uploadBtn=axAddElem("a",Object.assign({href:"###",class:this.options.uploadBtn.className?"ax-btn "+this.options.uploadBtn.className:"ax-btn",upload:""},this.options.uploadBtn.props),this.options.uploadBtn.icon+this.options.uploadBtn.text),e.appendChild(this.uploadBtn),this.parent.setAttribute("withtips",""));else if("picture"==this.options.type)this.parent.appendChild(e),this.list.appendChild(this.chooseBtn),this.options.clearBtn.show&&(this.clearBtn=axAddElem("li",Object.assign({class:this.options.clearBtn.className,clear:""},this.options.clearBtn.props),this.options.clearBtn.icon+this.options.clearBtn.text),this.chooseBtn.insertAdjacentElement("afterEnd",this.clearBtn)),this.options.uploadBtn.show&&(this.uploadBtn=axAddElem("li",Object.assign({class:this.options.uploadBtn.className,upload:""},this.options.uploadBtn.props),this.options.uploadBtn.icon+this.options.uploadBtn.text),this.chooseBtn.insertAdjacentElement("afterEnd",this.uploadBtn));else{let t=axAddElem("div",{header:""});this.list.insertAdjacentElement("beforeBegin",e),this.parent.insertAdjacentElement("afterBegin",t),t.appendChild(this.chooseBtn),this.options.uploadBtn.show&&(this.uploadBtn=axAddElem("a",Object.assign({href:"###",class:this.options.uploadBtn.className?"ax-btn "+this.options.uploadBtn.className:"ax-btn",upload:""},this.options.uploadBtn.props),this.options.uploadBtn.icon+this.options.uploadBtn.text),t.appendChild(this.uploadBtn)),this.options.clearBtn.show&&(this.clearBtn=axAddElem("a",Object.assign({href:"###",class:this.options.clearBtn.className?"ax-btn "+this.options.clearBtn.className:"ax-btn",clear:""},this.options.clearBtn.props),this.options.clearBtn.icon+this.options.clearBtn.text),t.appendChild(this.clearBtn))}}}createCtrlv(){this.options.pastable&&(this.ctrlv=axAddElem("i",{ctrlv:""},this.options.pastable.before),this.parent.appendChild(this.ctrlv),this.parent.onclick=()=>{this.ctrlv.innerHTML=this.options.pastable.ing},this.parent.onmouseleave=()=>{this.ctrlv.innerHTML=this.options.pastable.before})}sizeStr(t){let e="";return e=t/1024>=1024?"<i>"+(t/1048576).toFixed(2)+"</i>MB":t/1024>=1?"<i>"+(t/1024).toFixed(2)+"</i>KB":"<i>"+t+"</i>B",e}getSummary(){let t,e=0,s=this.details.length,i=this.details.filter((t=>"uploaded"==t.progress)),a=i.length;return i.forEach((t=>{e+=t.file.size})),t=this.sizeStr(e),`提交了<i>${s}</i>个文件,成功上传了<i>${a}</i>个,共${t}`}createItem(t,e){let s="";s="gallery"==this.options.type?`\n            <li valid=${e&&!e.valid?"error":"success"}>\n                <div file>\n                    <div overlay>\n                        <i view class="ax-iconfont ax-icon-zoomin"></i>\n                        <a down href="###" class="ax-iconfont ax-icon-download"></a>\n                        <i remove class="ax-iconfont ax-icon-trash"></i>\n                    </div>\n                    <div track><div bar></div></div>\n                    <i percent></i>\n                    <div message>${e&&!e.valid?e.message:""}</div>\n                </div>\n                <div info>\n                    <div title>${t.name}</div>\n                    <div size>${this.sizeStr(t.size)}</div>\n                    <div url></div>\n                </div>\n            </li>\n            `:"picture"==this.options.type?`\n            <li valid=${e&&!e.valid?"error":"success"}>\n                <div file></div>\n                <div overlay>\n                    <i view class="ax-iconfont ax-icon-zoomin"></i>\n                    <a down href="###" class="ax-iconfont ax-icon-download"></a>\n                    <i remove class="ax-iconfont ax-icon-trash"></i>\n                </div>\n                <div track><div bar></div></div>\n                <i percent></i>\n                <div message>${e&&!e.valid?e.message:""}</div>\n            </li>\n            `:"info"==this.options.type?`\n            <li valid=${e&&!e.valid?"error":"success"}>\n                <a href="###" file></a>\n                <div info>\n                    <a href="###" title>${t.name}</a>\n                </div>\n                <div track><div bar></div></div>\n                <i percent></i>\n                <i message>${e&&!e.valid?e.message:""}</i>\n                <i remove class="ax-iconfont ax-icon-trash"></i>\n            </li>\n            `:`\n            <li valid=${e&&!e.valid?"error":"success"}>\n                <i icon class="${this.options.icons.attach}"></i>\n                <div info>\n                    <a href="###" title>${t.name}</a>\n                </div>\n                <div track><div bar></div></div>\n                <i percent></i>\n                <i message>${e&&!e.valid?e.message:""}</i>\n                <i remove class="ax-iconfont ax-icon-trash"></i>\n            </li>\n            `;let i=axStrToDom(s),a=i.querySelector("[file]");return a&&this.fillHeader(t,a),"picture"==this.options.type?this.chooseBtn.insertAdjacentElement("beforeBegin",i):this.list.appendChild(i),i}fileChange(t,e){let s,i=this,a=t.getAttribute("data-text"),o=t.getAttribute("data-placeholder");a||t.classList.add("ax-simple"),e.classList.contains("ax-xs")?t.classList.add("ax-xs"):e.classList.contains("ax-sm")?t.classList.add("ax-sm"):e.classList.contains("ax-lg")&&t.classList.add("ax-lg"),this.options.beautify.display&&(s=axIdToDom(this.options.beautify.display)),e.addEventListener("change",(function(){t.classList.add("ax-active"),t.setAttribute("data-placeholder",this.value.replace(/.*(\/|\\)/,"")),this.value||(t.setAttribute("data-placeholder",o),t.classList.remove("ax-active")),[...this.files].length>0&&([...this.files].forEach((t=>{i.value.push({name:t.name,size:t.size,time:t.lastModified,url:""})})),s&&(s.innerHTML="",[...this.files].forEach((t=>{t.type.startsWith("image")&&i.readFile(t,(t=>{s.appendChild(axAddElem("img",{src:t}))}))})))),i.options.beautify.callback&&i.options.beautify.callback.call(i,this.files),i.options.onChange&&i.options.onChange.call(i,this.files),"changed"in i.handlers&&i.emit("changed",this.files),i.options.onChanged&&i.options.onChanged.call(i,this.files)}),!1),e.onfocus=()=>{t.classList.add("ax-focus")},e.onblur=()=>{t.classList.remove("ax-focus")}}setAttribute(){this.options.type&&this.parent.setAttribute("type",this.options.type),this.options.pastable&&this.parent.setAttribute("pastable",""),this.parent.setAttribute("state","ready")}readyUpload(){this.inputFile.addEventListener("change",(()=>{let t=[...this.inputFile.files];this.renderList(t),this.inputFile.value="","changed"in this.handlers&&this.emit("changed",t),this.options.changed&&this.options.changed.call(this,t)}),!1),this.options.pastable&&this.parent.addEventListener("paste",(t=>{let e=t.clipboardData?t.clipboardData:window.clipboardData;if(e){let t=e.items[0];t&&"file"===t.kind&&t.type.includes("image")&&(this.renderList([t.getAsFile()]),this.ctrlv&&(this.ctrlv.innerHTML=this.options.pastable.after)),"pasted"in this.handlers&&this.emit("pasted",t),this.options.onPasted&&this.options.onPasted.call(this,t)}}),!1),this.parent.addEventListener("dragleave",(t=>{t.preventDefault(),this.parent.removeAttribute("drag")})),this.parent.addEventListener("dragover",(t=>{t.preventDefault()})),this.parent.addEventListener("dragenter",(t=>{t.preventDefault(),this.parent.setAttribute("drag","")})),this.parent.addEventListener("drop",(t=>{t.preventDefault(),this.parent.removeAttribute("drag");let e=t.dataTransfer.items;for(let t=0;t<e.length;t++){let s=e[t];if("file"===s.kind){let t=s.webkitGetAsEntry();this.getEntries(t)}}"dropped"in this.handlers&&this.emit("dropped",e),this.options.onDropped&&this.options.onDropped.call(this,e)}),!1),this.clearBtn&&(this.clearBtn.onclick=()=>{if(0==this.details.length)return!1;this.options.onBeforeClear?this.options.onBeforeClear.call(this):this.clear.call(this)})}renderItem(t){let e,s=this.fileValid(t),i={file:t,state:s};s.valid?(this.files.push(t),e=this.createItem(t)):e=this.createItem(t,s),((t,e)=>{t.dom=e,t.progress="rendered",e.setAttribute("progress","rendered")})(i,e),this.details.push(i);let a=e.querySelector("[remove]");return a&&(a.onclick=()=>{this.options.onBeforeRemove?this.options.onBeforeRemove.call(this,i):this.remove(i.file)}),"rendered"in this.handlers&&this.emit("rendered",i),this.options.onRendered&&this.options.onRendered.call(this,i),e}getEntries(t){if(t.isFile)t.file((t=>this.renderList([t])));else{t.createReader().readEntries((t=>{t.forEach((t=>this.getEntries(t)))}))}}renderList(t,e){if(0==t.length)return!1;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(0==this.history.length)this.history.push(s),this.renderItem(s);else{if(!this.history.every((t=>t.name!=s.name&&t.size!=s.size)))continue;this.history.push(s),this.renderItem(s)}}"auto"==this.options.action?this.upload():this.uploadBtn&&(this.uploadBtn.onclick=()=>{this.upload()}),this.parent.setAttribute("state","processing"),e&&e.call(this)}upload(t){if(!this.options.url)return!1;let e=this.globalValid();if(!e.valid)return new axMessage({content:e.message,result:"error"}).show(),!1;let s=this.getUploadingFiles();if(this.options.onBeforeUpload&&!this.options.onBeforeUpload.call(this,s))return!1;s.forEach((t=>{this.uploadFile(t)})),"uploading"in this.handlers&&this.emit("uploading",""),this.options.onUploading&&this.options.onUploading.call(this),t&&t.call(this)}getUploadingFiles(){return this.details.filter((t=>t.state.valid&&"uploaded"!=t.progress))}activeOperate(t,e,s,i){e.setAttribute("valid","success"),e.setAttribute("progress","uploaded"),e.querySelector("[state]")||e.querySelector("[percent]").insertAdjacentHTML("afterend",'<i state class="ax-iconfont ax-icon-check"></i>'),this.options.cloud&&(s=this.options.cloud.server+s);let a=e.querySelector("[down]"),o=e.querySelector("[view]");if(a&&(this.options.cloud?a.onclick=()=>{this.downloadFile(s,t.name)}:(a.setAttribute("download",""),a.setAttribute("href",s))),o){let e={media:s,caption:i,type:""};"image"==this.h5Type(t)?e.type="image":"video"==this.h5Type(t)?e.type="video":"audio"==this.h5Type(t)&&(e.type="audio"),e.type&&(o.onclick=function(){new axLightbox({src:e}).init().show()})}if("text"==this.options.type||"info"==this.options.type){let t=e.querySelector("[title]"),i=e.querySelector("[file]");t.setAttribute("href",s),t.setAttribute("target","_blank"),i&&(i.setAttribute("href",s),i.setAttribute("target","_blank"))}}downloadFile(t,e){let s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="blob",s.onload=function(){let t=window.URL.createObjectURL(s.response),i=axAddElem("a");i.href=t,i.download=e,i.click()},s.send()}uploadFile(t){let e=new FormData,s=t.file,i=t.dom,a=t.state.valid,o=(t,e,i,a)=>{t?this.activeOperate(s,a,e,s.name):(a.setAttribute("valid","error"),a.querySelector("[message]").innerText=i),this.options.summaryShow&&(this.summary.innerHTML=this.getSummary())};if(!a||"uploaded"==t.progress)return!1;if(t.progress="uploading",i.setAttribute("progress","uploading"),this.options.cloud){e.append(this.options.cloud.field?this.options.cloud.field:"file",s);for(let t in this.options.cloud.append)e.append(t,this.options.cloud.append[t])}else e.append(this.name?this.name:"file",s);axAjax({url:this.options.url,data:e,uploading:e=>{i.querySelector("[percent]").innerText=e.result,i.querySelector("[bar]").style.width=e.result,e.percent>=100&&(i.setAttribute("completed",""),t.completed=!0,this.handlers.hasOwnProperty("completed")&&this.emit("completed",t),this.options.onCompleted&&this.options.onCompleted.call(this,t),this.details.every((t=>t.state.valid&&t.completed))&&(this.handlers.hasOwnProperty("allCompleted")&&this.emit("allCompleted",""),this.options.onAllCompleted&&this.options.onAllCompleted.call(this)))},success:e=>{let a,n="",r="",l=0,h=0,p=(t,e)=>{if(!e)return"";if(!e.includes("."))return t[e];let s,i=e.split(".");return s=1==i.length?t[i[0]]:2==i.length?t[i[0]][i[1]]:"",s};if(this.options.cloud){let t=this.options.cloud.keys;r=p(e.content,t.url),l=p(e.content,t.size),h=p(e.content,t.time),n=p(e.content,t.message),a=this.options.cloud.code==e.content.code}else r=e.content.url,l=s.size,h=e.content.time,n=e.content.message,a=!0===e.content.valid;t.state.valid=a,t.state.time=h,t.state.url=r,t.state.message=n,a?(this.value.push({name:s.name,url:r,size:l,time:h}),this.valueToValue(this.value),t.progress="uploaded",this.handlers.hasOwnProperty("uploaded")&&this.emit("uploaded",t,e.content),this.options.onUploaded&&this.options.onUploaded.call(this,t,e.content),this.details.every((t=>t.state.valid&&"uploaded"==t.progress))&&(this.handlers.hasOwnProperty("allUploaded")&&this.emit("allUploaded",e.content),this.options.onAllUploaded&&this.options.onAllUploaded.call(this,t,e.content))):(this.files=this.files.filter((t=>t!=s)),this.handlers.hasOwnProperty("error")&&this.emit("error",t,e.content),this.options.onError&&this.options.onError.call(this,t,e.content)),o(a,r,n,i)},error:()=>{o(!1,"",this.options.message.failed,i)}})}valueToValue(t){let e=[];t.forEach((t=>{e.push(t.url)})),this.inputValue=e.join(this.options.separator),this.inputText&&(this.inputText.value=this.inputValue,this.inputText.onchange&&this.inputText.onchange())}getSuffix(t){return t.name.substring(t.name.lastIndexOf(".")+1)}h5Type(t){let e;return t.type.startsWith("image")?e="image":["mp4","ogg","webm"].includes(this.getSuffix(t))?e="video":["mp3","ogg","wav"].includes(this.getSuffix(t))&&(e="audio"),e}readFile(t,e){let s=new FileReader;s.readAsDataURL(t),s.onload=t=>{e(t.target.result)}}fillHeader(t,e){let s,i=this.h5Type(t),a=this.fileTypes.filter((e=>e.suffix.includes(this.getSuffix(t))))[0];"image"==i?this.readFile(t,(t=>{s=axAddElem("img",{src:t}),e.appendChild(s)})):"video"==i?this.readFile(t,(t=>{s=axAddElem("video",{src:t,controls:""}),e.appendChild(s)})):"audio"==i?this.readFile(t,(t=>{s=axAddElem("audio",{src:t,controls:""}),e.appendChild(s)})):(s=axAddElem("i",{class:a?a.icon:this.options.icons.file,icon:""}),e.appendChild(s))}fileValid(t){let e=this.options.message.passed,s=!0,i=this.getSuffix(t);return this.history.length>this.options.max&&this.options.max||this.history.length<this.options.min&&this.options.min?(e=this.options.message.exceeded,s=!1):this.sizeLimit&&t.size>this.sizeLimit?(e=this.options.message.tooLarge,s=!1):this.options.accept.includes(i)||(e=this.options.message.errorSuffix,s=!1),{valid:s,message:e}}globalValid(){let t=this.options.message.passed,e=!0;return this.history.length<this.options.min?(t=`请至少上传${this.options.min}个文件!`,e=!1):this.history.length<this.options.min&&(t=`最多只能上传${this.options.max}个文件!`,e=!1),{valid:e,message:t}}remove(t,e){this.history=this.history.filter((e=>e!=t)),this.files=this.files.filter((e=>e!=t));let s=this.details.find((e=>e.file==t)),i=t.name,a=t.size,o=s.state.url,n=s.state.time;s.dom.remove(),this.details=this.details.filter((e=>e.file!=t)),0==this.details.length&&this.parent.setAttribute("state","ready"),this.value=this.value.filter((t=>t.time!=n)),this.valueToValue(this.value),this.options.summaryShow&&(this.summary.innerHTML=this.getSummary()),this.options.onRemove&&this.options.onRemove.call(this,o,i,a),"remove"in this.handlers&&this.emit("remove",o,i,a),e&&e.call(this,o,i,a)}clear(t){return this.details.forEach((t=>{t.dom.remove()})),this.details=[],this.history=[],this.files=[],this.value=[],this.valueToValue(this.value),this.parent.setAttribute("state","ready"),this.options.summaryShow&&(this.summary.innerHTML=this.getSummary()),this.options.onClear&&this.options.onClear.call(this),"clear"in this.handlers&&this.emit("clear",""),t&&t.call(this),this}getUrlFile(t,e,s){axAjax({url:t,responseType:"blob",headers:{Accept:""},success:t=>{let i=new File([t.content],e,{type:t.content.type});s&&s(i)}})}show(t){let e=[];if("string"==typeof t){t.trim().split(",").forEach((t=>{let s={url:t,name:t};e.push(s)}))}else Array.isArray(t)&&"string"==typeof t[0]?t.forEach((t=>{let s={url:t,name:t};e.push(s)})):e=t;return 0!=e.length&&(this.parent.setAttribute("state","processing"),e.forEach(((t,s)=>{this.getUrlFile(t.url,t.name,(i=>{this.history.push(i);let a=this.renderItem(i),o=this.details.find((t=>t.file==i));o.progress="uploaded",o.state.message=this.options.message.success,o.state.url=t.url,o.state.time=t.time||i.lastModified,this.activeOperate(i,a,t.url,t.name||t.url),a.setAttribute("completed",""),this.options.summaryShow&&(this.summary.innerHTML=this.getSummary()),s===e.length-1&&(this.details.forEach((t=>{let e={name:t.file.name,url:t.state.url,size:t.file.size,time:t.state.time};this.value.push(e)})),this.valueToValue(this.value),this.options.onShow&&this.options.onShow.call(this,this.details),this.handlers.hasOwnProperty("show")&&this.emit("show",this.details))}))})),this)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：即时消息/警告小窗；使用方法：new axMessage({参数})
*/const axMessages=[];class axMessage{constructor(t){this.options=axExtend({insName:"",className:"",placement:"center-top",content:"",result:"info",delay:3e3,progress:!0,title:{warning:"操作警告！",success:"操作成功！",error:"操作失败！",question:"操作疑问！",info:"信息提示！"},breakpoints:{},close:!1,iconShow:!1,style:"simple",zIndex:0,icon:"",onShown:"",onHidden:"",onUpdated:""},t),this.handlers={},this.timeout=null,this.setOutFun=()=>{this.timeout=setTimeout((()=>{this.hide()}),this.options.delay)},this.clearOutFun=()=>{this.timeout&&clearTimeout(this.timeout)},this.init()}init(){if(axInstance.push(this,this.options.insName,"message"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),"simple"!=this.options.style&&this.options.style){if("complex"==this.options.style)switch(this.options.result){case"success":this.options.icon=axIcon.svg.success;break;case"error":this.options.icon=axIcon.svg.error;break;case"question":this.options.icon=axIcon.svg.question;break;case"warning":this.options.icon=axIcon.svg.warning;break;default:this.options.icon=axIcon.svg.info}}else switch(this.options.result){case"success":this.options.icon=axIcon.font.success,!this.options.content&&(this.options.content=this.options.title.success);break;case"error":this.options.icon=axIcon.font.error,!this.options.content&&(this.options.content=this.options.title.error);break;case"question":this.options.icon=axIcon.font.question,!this.options.content&&(this.options.content=this.options.title.question);break;case"warning":this.options.icon=axIcon.font.warning,!this.options.content&&(this.options.content=this.options.title.warning);break;default:this.options.icon=axIcon.font.info,!this.options.content&&(this.options.content=this.options.title.info)}switch("simple"!=this.options.style&&this.options.style?"complex"==this.options.style&&(this.template=axTplEngine('\n            <section data-style="complex">\n                <div class="ax-message-content">\n                    <div class="ax-message-header">\n                    <# if(this.iconShow){ #><span class="ax-result ax-result-show" legend><# this.icon #></span><# } #>\n                    <span class="ax-message-title"><# if(this.result == \'success\'){ #> <# this.title.success #> <# }else if(this.result == \'error\'){ #> <# this.title.error #> <# }else if(this.result == \'question\'){#> <# this.title.question #> <# }else if(this.result == \'warning\'){#> <# this.title.warning #> <# } else {#> <# this.title.info #> <# } #></span></div>\n                    <div class="ax-message-body"><# this.content #></div>\n                </div>\n                <# if(this.close){ #><i close></i> <# } #>\n                <# if(this.progress){ #><div class="ax-message-progress" style="transition-duration:<# this.delay #>ms;"></div><# } #>\n            </section>\n            ',this.options)):this.template=axTplEngine('\n            <section data-style="simple">\n                <div class="ax-message-content">\n                    <# if(this.iconShow){ #><span legend><# this.icon #></span><# } #>\n                    <div class="ax-message-body"><# this.content #></div>\n                    <# if(this.close){ #><i close></i> <# } #>\n                </div>\n            </section>\n            ',this.options),this.targetDom=axStrToDom(this.template),this.contentDom=this.targetDom.querySelector(".ax-message-body"),this.titleDom=this.targetDom.querySelector(".ax-message-title"),this.closeDom=this.targetDom.querySelector("[close]"),this.progressDom=this.targetDom.querySelector(".ax-message-progress"),this.legendDom=this.targetDom.querySelector("[legend]"),this.options.result){case"success":this.targetDom.setAttribute("data-result","success");break;case"error":this.targetDom.setAttribute("data-result","error");break;case"question":this.targetDom.setAttribute("data-result","question");break;case"warning":this.targetDom.setAttribute("data-result","warning");break;default:this.targetDom.setAttribute("data-result","info")}let t="";switch(t=this.options.className?"":" "+this.options.className,this.options.close&&this.targetDom.setAttribute("data-close","true"),this.contentDom.innerHTML=this.options.content,this.wrapperDom="",this.shown=!1,this.event=e=>{let s=axMessages.find((t=>t.position===e));s?this.wrapperDom=s.parent:(this.wrapperDom=axAddElem("div",{class:"ax-message"+t,"data-placement":e}),axMessages.push({position:e,parent:this.wrapperDom}))},this.options.placement){case"left-top":this.event("left-top");break;case"center-top":this.event("center-top");break;case"right-top":this.event("right-top");break;case"left-center":this.event("left-center");break;case"center-center":this.event("center-center");break;case"right-center":this.event("right-center");break;case"left-bottom":this.event("left-bottom");break;case"center-bottom":this.event("center-bottom");break;case"right-bottom":this.event("right-bottom");break;case"left":this.event("left-top");break;case"top":this.event("center-top");break;case"right":this.event("right-top");break;case"center":this.event("center-center");break;default:this.event("center-top")}return this.closeDom&&(this.closeDom.onclick=()=>{this.hide()}),new axHover(this.targetDom,{enter:()=>{this.clearOutFun()},leave:()=>{this.setOutFun()}}),this.options.zIndex&&(this.wrapperDom.style.zIndex=this.options.zIndex),axIsVnode(this.wrapperDom)&&document.body.appendChild(this.wrapperDom),this}show(t){return!this.shown&&(this.wrapperDom.appendChild(this.targetDom),axSlideDown(this.targetDom,"",(()=>{this.shown=!0,this.handlers.hasOwnProperty("shown")&&this.emit("shown",""),this.options.onShown&&this.options.onShown.call(this),t&&t.call(this),this.options.close||(this.options.progress&&this.progressDom&&(this.progressDom.style.cssText+="width:0;"),this.setOutFun())})),this)}hide(t){return!!this.shown&&(axSlideUp(this.targetDom,"",(()=>{this.targetDom.remove(),this.shown=!1,this.handlers.hasOwnProperty("hidden")&&this.emit("hidden",""),this.options.onHidden&&this.options.onHidden.call(this),t&&t.call(this)})),this)}update(t,e){return this.targetDom.remove(),this.options=axExtend(this.options,t),this.init(),this.handlers.hasOwnProperty("updated")&&this.emit("updated",""),this.options.onUpdated&&this.options.onUpdated.call(this),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：表单校验；使用方法：new axValid('#id',{参数})
 */const axValids=[];class axValid{constructor(t,e){return this.targetDom=axIdToDom(t),!!this.targetDom.getAttribute("name")&&(this.options=axExtend({insName:"",label:"",mode:"newline",url:"",iconShow:!0,type:"",parent:"",error:"",success:"通过验证！",rule:{},number:"",max:"",min:"",length:"",maxLength:"",minLength:"",include:[],exclude:[],date:"",earliest:"",latest:"",compare:"",compareLabel:"",least:1,most:2,separator:"",successShow:!0,message:{},popup:{},format:"",inputSuccess:"ax-check-primary",inputError:"ax-check-error",boxSuccess:"ax-color-primary",boxError:"ax-color-error",chars:"~!@#",charsShow:!1,trigger:"blur",ajaxType:"post",breakpoints:{},immediately:!0,language:{required:"这是必填项！",requiredWithLabel:"<# this.label #>是必填项！",email:"<# this.label #>请填写正确的邮箱！",telephone:"<# this.label #>请填写11位手机号！",landline:"<# this.label #>请填写正确的座机号码！",ip:"<# this.label #>请填写正确的IP地址！",idCard:"<# this.label #>请填写正确的身份证号！",zip:"<# this.label #>只能填写6位数字邮编！",url:"<# this.label #>请填写正确的域名！",plate:"<# this.label #>请填写正确的车牌号！",chinese:"<# this.label #>只能填写中文！",letter:"<# this.label #>只能填写大小写英文字母！",string:"<# this.label #>只能填写大小写英文字母和数字！",password:"<# this.label #>只能填写大小写英文字母、数字以及特殊字符！",ymdhms:"<# this.label #>只能填写类似2022-11-13 2:56:12的日期格式！",ymd:"<# this.label #>只能填写类似2022-11-13的日期格式！",hms:"<# this.label #>只能填写类似2:56:12的日期格式！",ym:"<# this.label #>只能填写类似2022-11的日期格式！",y:"<# this.label #>只能填写4位数字年份！",m:"<# this.label #>只能填写1~12月份！",d:"<# this.label #>只能填写1~31日！",date:"<# this.label #>请填写有效的日期！",earlier:"<# this.label #>不可晚于<# this.value #>",later:"<# this.label #>不可早于<# this.value #>",dateRange:"<# this.label #>不可早于<# this.max #>，且不可晚于<# this.min #>",integer:"<# this.label #>只能填写非0开头的正整数！",number:"<# this.label #>只能填写数字，包括正数、负数、整数、小数！",moreThan:"<# this.label #>需要大于<# this.value #>",moreEqual:"<# this.label #>需要大于或等于<# this.value #>",lessThan:"<# this.label #>需要小于<# this.value #>",lessEqual:"<# this.label #>需要小于或等于<# this.value #>",equal:"<# this.label #>需要等于<# this.value #>",range:"<# this.label #>需要大于等于<# this.min #>并小于<# this.max #>",length:"<# this.label #>只能填写<# this.value #>个字符！",lengthMore:"<# this.label #>字符数量不可少于<# this.value #>个！",lengthLess:"<# this.label #>字符数量不可多于<# this.value #>个！",lengthRange:"<# this.label #>字符数量不可少于<# this.min #>个，且不可多余<# this.max #>个！",include:"<# this.label #>填写的值在指定内容中不存在！",exclude:"<# this.label #>不可填写该值！",oneChecked:"<# this.label #>必须且只能选择1项！",leastChecked:"<# this.label #>至少选择<# this.value #>项！",mostChecked:"<# this.label #>最多选择<# this.value #>项！",rangeChecked:"<# this.label #>至少选择<# this.min #>项，且不能多于<# this.max #>项！",same:"两个字段值不一致！",sameWithLabel:"<# this.label #>与<# this.value #>不一致！",strong:{az:"小写字母",AZ:"大写字母",number:"数字",char:"特殊字符",chinese:"中文",and:"和",require:"必须是",requireMore:"并且要求",least:"至少",unit:"个字符，",select:"中至少选择",group:"种字符。",total:"总共只能是<# this.value #>个字符。",totalMore:"总共至少<# this.value #>个字符。",totalRange:"总共至少<# this.min #>个字符，且不能超过<# this.max #>个字符。"},message:{strongError:"随机字符类型必须有1种，并且不能超过允许字符类型范围！"}},onTrigger:"",onChange:"",onInit:""},e,this.targetDom,this.constructor.name),this.options.parent?this.parent=axIdToDom(this.options.parent):this.parent=this.targetDom.closest("form")?this.targetDom.closest("form"):document,this.options.compare&&("string"==typeof this.options.compare?this.compare=this.parent.querySelector("[name="+this.options.compare+"]"):this.compare=axIdToDom(this.options.compare)),this.options.compareLabel?this.compareLabel=this.options.compareLabel:this.compare&&this.compare.getAttribute("data-label")&&(this.compareLabel=this.compare.getAttribute("data-label")),this.handlers={},this.strong=0,this.msgBox=axAddElem("div",{valid:""}),this.value=null,this.label=this.options.label,this.name=this.targetDom.getAttribute("name"),this.type=this.targetDom.getAttribute("type")?this.targetDom.getAttribute("type"):this.targetDom.type,this.text="",this.verified=null,this.verifieds=[],this.getRules(),this.strongParse=this.parseFormat(),this.checks={required:function(t){return t?{verified:!0,message:""}:{verified:!1,message:this.label?axTplEngine(this.options.language.requiredWithLabel,{label:this.label}):this.options.language.required}},email:function(t){return this.doTest(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/,t,axTplEngine(this.options.language.email,{label:this.label}))},telephone:function(t){return this.doTest(/^[1][3456789][0-9]{9}$/,t,axTplEngine(this.options.language.telephone,{label:this.label}))},landline:function(t){return this.doTest(/^([0-9]{3,4}-)?[0-9]{7,8}$/,t,axTplEngine(this.options.language.landline,{label:this.label}))},ip:function(t){return this.doTest(/^\d+\.\d+\.\d+\.\d+$/,t,axTplEngine(this.options.language.ip,{label:this.label}))},plate:function(t){let e="";return e=8==t.length?/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/:/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/,this.doTest(e,t,axTplEngine(this.options.language.plate,{label:this.label}))},idCard:function(t){return this.doTest(/^(([1][1-5])|([2][1-3])|([3][1-7])|([4][1-6])|([5][0-4])|([6][1-5])|([7][1])|([8][1-2]))\d{4}(([1][9]\d{2})|([2]\d{3}))(([0][1-9])|([1][0-2]))(([0][1-9])|([1-2][0-9])|([3][0-1]))\d{3}[0-9xX]$/,t,axTplEngine(this.options.language.idCard,{label:this.label}))},zip:function(t){return this.doTest(/^\d{6}$/,t,axTplEngine(this.options.language.zip,{label:this.label}))},url:function(t){return this.doTest(/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*$/,t,axTplEngine(this.options.language.url,{label:this.label}))},chinese:function(t){return this.doTest(/^[\u0391-\uFFE5]+$/,t,axTplEngine(this.options.language.chinese,{label:this.label}))},letter:function(t){return this.doTest(/^[a-zA-Z]+$/,t,axTplEngine(this.options.language.letter,{label:this.label}))},string:function(t){return this.doTest(/^[a-zA-Z0-9]+$/,t,axTplEngine(this.options.language.string,{label:this.label}))},password:function(t){let e=new RegExp("^[a-zA-Z0-9"+this.options.chars+"]+$");return this.doTest(e,t,axTplEngine(this.options.language.password,{label:this.label}))},ymdhms:function(t){return this.doTest(/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,t,axTplEngine(this.options.language.ymdhms,{label:this.label}))},ymd:function(t){return this.doTest(/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2})$/,t,axTplEngine(this.options.language.ymd,{label:this.label}))},hms:function(t){return this.doTest(/^((20|21|22|23|[0-1]\d)\:[0-5][0-9])(\:[0-5][0-9])?$/,t,axTplEngine(this.options.language.hms,{label:this.label}))},ym:function(t){return this.doTest(/^(\d{4})(-|\/)(\d{1,2})$/,t,axTplEngine(this.options.language.ym,{label:this.label}))},y:function(t){return this.doTest(/^(\d{4})$/,t,axTplEngine(this.options.language.y,{label:this.label}))},m:function(t){return this.doTest(/^(0?[1-9]|1[0-2])$/,t,axTplEngine(this.options.language.m,{label:this.label}))},d:function(t){return this.doTest(/^((0?[1-9])|((1|2)[0-9])|30|31)$/,t,axTplEngine(this.options.language.d,{label:this.label}))},date:function(t){return/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)||/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/.test(t)||/^(\d{1,4})(-|\/)(\d{1,2})$/.test(t)||/^(\d{4})$/.test(t)?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.date,{label:this.label})}},earlier:function(t){if(!this.options.date||isNaN(Date.parse(this.options.date)))return;if(isNaN(Date.parse(t)))return;return axLocalTime(t)<axLocalTime(this.options.date)?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.earlier,{label:this.label,value:this.options.date})}},later:function(t){if(!this.options.date||isNaN(Date.parse(this.options.date)))return;if(isNaN(Date.parse(t)))return;return axLocalTime(t)>axLocalTime(this.options.date)?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.later,{label:this.label,value:this.options.date})}},dateRange:function(t){if(!this.options.earliest||isNaN(Date.parse(this.options.earliest)))return;if(!this.options.latest||isNaN(Date.parse(this.options.latest)))return;if(isNaN(Date.parse(t)))return;let e=axLocalTime(t),s=axLocalTime(this.options.earliest),i=axLocalTime(this.options.latest);return e>s&&e<i?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.dateRange,{label:this.label,min:this.options.earliest,max:this.options.latest})}},integer:function(t){return this.doTest(/^[1-9]d*$/,t,axTplEngine(this.options.language.integer,{label:this.label}))},number:function(t){return this.doTest(/^(-?\d+)\.?(\d*)$/,t,axTplEngine(this.options.language.number,{label:this.label}))},moreThan:function(t){return/^(-?\d+)\.?(\d*)$/.test(t)&&t>this.options.number?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.moreThan,{label:this.label,value:this.options.number})}},moreEqual:function(t){return/^(-?\d+)\.?(\d*)$/.test(t)&&t>=this.options.number?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.moreEqual,{label:this.label,value:this.options.number})}},lessThan:function(t){return/^(-?\d+)\.?(\d*)$/.test(t)&&t<this.options.number?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.lessThan,{label:this.label,value:this.options.number})}},lessEqual:function(t){return/^(-?\d+)\.?(\d*)$/.test(t)&&t<=this.options.number?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.lessEqual,{label:this.label,value:this.options.number})}},equal:function(t){return/^(-?\d+)\.?(\d*)$/.test(t)&&t==this.options.number?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.equal,{label:this.label,value:this.options.number})}},range:function(t){return/^(-?\d+)\.?(\d*)$/.test(t)&&t>=this.options.min&&t<this.options.max?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.range,{label:this.label,min:this.options.min,max:this.options.max})}},length:function(t){let e=new RegExp("^.{"+this.options.length+"}$");return this.doTest(e,t,axTplEngine(this.options.language.length,{label:this.label,value:this.options.length}))},lengthMore:function(t){let e=new RegExp("^.{"+this.options.length+",}$");return this.doTest(e,t,axTplEngine(this.options.language.lengthMore,{label:this.label,value:this.options.length}))},lengthLess:function(t){let e=new RegExp("^.{0,"+this.options.length+"}$");return this.doTest(e,t,axTplEngine(this.options.language.lengthLess,{label:this.label,value:this.options.length}))},lengthRange:function(t){let e=new RegExp("^.{"+this.options.minLength+","+this.options.maxLength+"}$");return this.doTest(e,t,axTplEngine(this.options.language.lengthRange,{label:this.label,min:this.options.minLength,max:this.options.maxLength}))},include:function(t){if(!axIsEmpty(this.options.include))return this.options.include.includes(t)?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.include,{label:this.label})}},exclude:function(t){if(!axIsEmpty(this.options.exclude))return this.options.exclude.includes(t)?{verified:!1,message:axTplEngine(this.options.language.exclude,{label:this.label})}:{verified:!0,message:""}},strong:function(t){if(!this.options.format)return;this.getStrong(t);let e=new RegExp(this.strongParse.pattern);return this.doTest(e,t,this.strongParse.message)},async:function(t){if(!this.options.format)return;this.getStrong(t);let e=new RegExp(this.strongParse.pattern);return this.doTest(e,t,this.strongParse.message)},oneChecked:function(t){if(Array.isArray(t))return 1==t.length?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.oneChecked,{label:this.label})}},leastChecked:function(t){if(Array.isArray(t))return this.options.least&&t.length>=this.options.least?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.leastChecked,{label:this.label,value:this.options.least})}},mostChecked:function(t){if(Array.isArray(t))return!this.options.most||this.options.most&&t.length<=this.options.most?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.mostChecked,{label:this.label,value:this.options.most})}},rangeChecked:function(t){if(Array.isArray(t))return this.options.least&&this.options.most&&this.options.most>this.options.least?t.length>=this.options.least&&t.length<=this.options.most?{verified:!0,message:""}:{verified:!1,message:axTplEngine(this.options.language.rangeChecked,{label:this.label,min:this.options.least,max:this.options.most})}:void 0},same:function(t){if(this.compare){if(t==this.compare.value)return{verified:!0,message:""};return{verified:!1,message:this.compareLabel?axTplEngine(this.options.language.samedWithLabel,{label:this.label,value:this.compareLabel}):this.options.language.samed}}}},Object.assign(this.checks,this.options.extend),this.init(),this)}init(t){axInstance.push(this,this.options.insName,"valid"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints);let e={dom:this.targetDom,name:this.name,instance:this};if(axIsEmpty(axValids))this.parent&&axValids.push({parent:this.parent,children:[e]});else if(axValids.some((t=>t.parent==this.parent))){let t=axValids.findIndex((t=>t.parent==this.parent)),s=axValids[t].children;if(s.some((t=>t.name==this.name))){for(let t=0;t<s.length;t++)if(s[t].name==this.name){s[t]=e;break}}else s.push(e)}else axValids.push({parent:this.parent,children:[e]});let s=async()=>{if(!axIsEmpty(this.options.extend))for(let t in this.options.extend)this.rules[t]=["",this.options.success];let s="";"radio"==this.type||"checkbox"==this.type||"select-multiple"==this.type||"file"==this.type?s=axMultiValues(this.name,this.type,this.parent):(s=this.targetDom.value.trim(),this.options.separator&&(s=s.split(this.options.separator)));let i=Object.keys(this.rules).length,a=0;this.value=s;for(let t in this.rules){a++;let e=this.rules[t][0],o=this.rules[t][1];if(axIsEmpty(s)){if("required"==t){this.text=e||this.checks[t].call(this,"").message,this.verified=!1;break}"oneChecked"==t||"leastChecked"==t||"rangeChecked"==t?(this.text=e||this.checks[t].call(this,[]).message,this.verified=!1):(this.text=o,this.verified=!0)}else if(this.options.type){let n=this.checks[t].call(this,s);if(!n.verified){this.text=e||n.message,this.verified=!1;break}a==i&&(this.text=o,this.verified=!0)}}this.options.url&&!this.options.type&&await axAjax({url:this.options.url,data:{name:this.name,value:this.value,parent:this.parent},type:this.options.ajaxType,success:t=>{this.verified=t.content.verified,this.text=t.content.text}}),this.refreshDom(this.options.mode),e.verified=this.verified;let o=[this.verified,this.text,this.strong];return t&&t.call(this,...o),this.options.onTrigger&&this.options.onTrigger.call(this,...o),this.handlers.hasOwnProperty("trigger")&&this.emit("trigger",...o),this.verifieds.unshift(this.verified),this.verifieds.length>=2&&(this.verifieds.length>2&&this.verifieds.splice(2),this.verifieds[0]!=this.verifieds[1]&&(this.options.onChange&&this.options.onChange.call(this,...o),"change"in this.handlers&&this.emit("change",...o))),o};return"submit"==this.options.trigger?s():"listen"==this.options.trigger?this.targetDom.onchange=()=>{s()}:this.targetDom.addEventListener(this.options.trigger,s,!1),this.options.immediately&&s().then((t=>{this.options.onInit&&this.options.onInit.call(this,...t),this.handlers.hasOwnProperty("init")&&this.emit("init",...t)})),this}parseFormat(){if(this.options.format){let t="",e="",s="",i="",a="",o="",n="",r={},l=[],h={},p="",d="",c=[],m="",u=null,g="",f="",x="";if(g=this.options.format.split("#")[0],this.options.format.split("#")[1]?(f=this.options.format.split("#")[1],o=f.split(",")[0],-1==f.indexOf(",")?(u=!0,n=""):n=-1!==f.indexOf(",")&&f.split(",")[1]?f.split(",")[1]:""):(o="",n=""),this.options.format.split("#")[2]&&(x=this.options.format.split("#")[2],-1!==x.indexOf("a")&&(h.lower=this.options.language.strong.az,p+="a-z",c.push("a-z"),l.push(h.lower)),-1!==x.indexOf("A")&&(h.upper=this.options.language.strong.AZ,p+="A-Z",c.push("A-Z"),l.push(h.upper)),-1!==x.indexOf("9")&&(h.number=this.options.language.strong.number,p+="0-9",c.push("0-9"),l.push(h.number)),-1!==x.indexOf("~")&&(h.char=this.options.charsShow?`${this.options.language.strong.char}"${this.options.chars}"`:this.options.language.strong.char,p+=this.options.chars,c.push(this.options.chars),l.push(h.char)),-1!==x.indexOf("中")&&(h.cn=this.options.language.strong.chinese,p+="一-龥",c.push("一-龥"),l.push(h.cn)),l=l.length>2?axRangeReplace(l.join(),this.options.language.strong.and,l.join().lastIndexOf(",")):l.join(),l=l.replaceAll(",","、"),!axIsEmpty(l)&&(m+=`${this.options.language.strong.require}${l}，${this.options.language.strong.requireMore}`)),axIsEmpty(this.options.format.split("#")[0])&&this.options.format.split("#")[3]&&(this.options.format.split("#")[3]<x.length&&this.options.format.split("#")[3]>0?2==this.options.format.split("#")[3]?c.forEach((t=>{d+="(?!["+t+"]+$)"})):3==this.options.format.split("#")[3]?axArrange(c,2).forEach((t=>{d+="(?!["+t.join().replaceAll(",","")+"]+$)"})):4==this.options.format.split("#")[3]&&axArrange(d,3).forEach((t=>{d+="(?!["+t.join().replaceAll(",","")+"]+$)"})):new axMessage({result:"error",content:this.options.language.strongError}).show(),m=`${l}${this.options.language.strong.select}${this.options.format.split("#")[3]}${this.options.language.strong.group}`),-1!==g.indexOf("a")){let t=g.lastIndexOf("a");r.lower=this.options.language.strong.az,e=parseInt(g.substring(t+1,t+2)),m+=`${r.lower}${this.options.language.strong.least}${e}${this.options.language.strong.unit}`}if(-1!==g.indexOf("A")){let e=g.lastIndexOf("A");r.upper=this.options.language.strong.AZ,t=parseInt(g.substring(e+1,e+2)),m+=`${r.upper}${this.options.language.strong.least}${t}${this.options.language.strong.unit}`}if(-1!==g.indexOf("9")){let t=g.lastIndexOf("9");r.number=this.options.language.strong.number,s=parseInt(g.substring(t+1,t+2)),m+=`${r.number}${this.options.language.strong.least}${s}${this.options.language.strong.unit}`}if(-1!==g.indexOf("~")){let t=g.lastIndexOf("~");r.char=this.options.charsShow?`${this.options.language.strong.char}"${this.options.chars}"`:this.options.language.strong.char,i=parseInt(g.substring(t+1,t+2)),m+=`${r.char}${this.options.language.strong.least}${i}${this.options.language.strong.unit}`}if(-1!==g.indexOf("中")){let t=g.lastIndexOf("中");r.cn=this.options.language.strong.chinese,a=parseInt(g.substring(t+1,t+2)),m+=`${r.cn}${this.options.language.strong.least}${a}${this.options.language.strong.unit}`}return e&&(d+="(?="+Array(e+1).join(".*?[a-z]")+")"),t&&(d+="(?="+Array(t+1).join(".*?[A-Z]")+")"),s&&(d+="(?="+Array(s+1).join(".*?[0-9]")+")"),i&&(d+="(?="+Array(i+1).join(".*?["+this.options.chars+"]")+")"),a&&(d+="(?="+Array(a+1).join(".*?[一-龥]")+")"),axIsEmpty(p)?axIsEmpty(p)&&o?d+=".":d+=".{0,}":d+=o?"["+p+"]":"["+p+"]+",o&&u&&!n?(d+="{"+o+"}",m+=axTplEngine(this.options.language.strong.total,{value:o})):o&&!n?(d+="{"+o+",}",m+=axTplEngine(this.options.language.strong.totalMore,{value:o})):o&&n&&(d+="{"+o+","+n+"}",m+=axTplEngine(this.options.language.strong.totalRange,{min:o,max:n})),d="^"+d+"$",{pattern:d,message:m}}return{}}getStrong(t){let e=0,s=0,i=0,a=0,o=0,n=0;if(this.options.format){let r=this.options.format.split("#")[1].split(",")[0];t&&t.match(new RegExp("[a-z]"))&&(s=1),t&&t.match(new RegExp("[A-Z]"))&&(e=1),t&&t.match(new RegExp("[0-9]"))&&(i=1),t&&t.match(new RegExp("["+this.options.chars+"]"))&&(a=1),t&&t.match(new RegExp("[一-龥]"))&&(o=1),t&&r&&t.length>=r&&(n=1)}return this.strong=e+s+i+a+o+n,this.strong}doTest(t,e,s){return t.test(e)?{verified:!0,message:""}:{verified:!1,message:s}}getRules(){this.rules={};let t=this.options.type.trim().split(",");if("required"!=t[0]&&t.includes("required")){for(let e=0;e<t.length;e++)if("required"===t[e]){t.splice(e,1);break}t.unshift("required")}return t.forEach((t=>{this.rules[t]=["",""],axIsEmpty(this.options.rule)||this.options.rule[t]&&(this.rules[t]=this.options.rule[t]),!this.rules[t][0]&&(this.rules[t][0]=this.options.error),!this.rules[t][1]&&(this.rules[t][1]=this.options.success)})),this.rules}refreshText(){let t=this.verified?axIcon.font.successFill:axIcon.font.errorFill;this.options.iconShow?this.msgBox.innerHTML=t+" "+this.text:this.msgBox.innerHTML=this.text}refreshDom(t){let e=()=>{this.verified?(this.msgBox.classList.remove(this.options.boxError),this.msgBox.classList.add(this.options.boxSuccess),this.targetDom.classList.remove(this.options.inputError),this.targetDom.classList.add(this.options.inputSuccess)):(this.msgBox.classList.remove(this.options.boxSuccess),this.msgBox.classList.add(this.options.boxError),this.targetDom.classList.remove(this.options.inputSuccess),this.targetDom.classList.add(this.options.inputError))};if(this.refreshText(),1==this.options.mode.nodeType||"#"==t.substr(0,1)){let s=axIdToDom(t);this.msgBox.parentNode||s.appendChild(this.msgBox),e()}else if("note"==t){this.msgBox.classList.add("ax-form-txt");let t=this.targetDom.closest(".ax-form-con"),s=t.nextElementSibling;"raido"==this.type||"checkbox"==this.type?(s&&s.hasAttribute("valid")&&s.remove(),t.insertAdjacentElement("afterend",this.msgBox)):s!=this.msgBox&&t.insertAdjacentElement("afterend",this.msgBox),e()}else if("popup"==t)this.popup?(this.popup.content.innerHTML="",this.popup.content.appendChild(this.msgBox)):this.popup=new axPopup(this.targetDom.closest(".ax-form-input"),axExtend({content:this.msgBox,padding:!1,placement:"bottom-start",offsetShow:!1,arrow:!1,close:!1,footerShow:!1,theme:"crude",stay:!0},this.options.popup)).show(),e();else if("message"==t)this.verified?this.options.successShow&&new axMessage(axExtend({content:this.text,result:"success",iconShow:this.options.iconShow},this.options.message)).show():new axMessage(axExtend({content:this.text,result:"error",iconShow:this.options.iconShow},this.options.message)).show(),e();else{let t=this.targetDom.closest(".ax-form-input");"radio"==this.type||"checkbox"==this.type?(t.nextElementSibling&&t.nextElementSibling.hasAttribute("valid")&&t.nextElementSibling.remove(),t.insertAdjacentElement("afterend",this.msgBox)):t!=this.msgBox&&t.insertAdjacentElement("afterend",this.msgBox),this.msgBox.classList.add("ax-valid"),e()}}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}const axValidRepeat=(t,e,s,i={data:axValids,interval:100})=>{if(!e)return!1;if(axIsEmpty(i.data))return!1;if(axIsEmpty(i.data.filter((t=>t.parent==e))))return!1;let a=[...i.data].filter((t=>t.parent==e))[0].children,o=0;a.forEach(((n,r)=>{n.instance.options.trigger="submit",setTimeout((()=>{o++,n.instance.init((function(){o==a.length&&(i.data.filter((t=>t.parent==e))[0].children.some((t=>!t.verified))?axPreventDefault(t):s&&s())}))}),i.interval*r)}))};(()=>{if([...document.querySelectorAll("[axValid]")].filter((t=>t.getAttribute("name"))).forEach((t=>{new axValid(t)})),!axIsEmpty(axValids)){[...axValids].forEach((t=>{"FORM"==t.parent.nodeName&&t.parent.addEventListener("submit",(function(e){axPreventDefault(e),axValidRepeat(e,t.parent,(()=>{t.parent.submit()}))}),!1)}))}})();
/*!
 * 插件：折叠菜单；使用方法：new axMenu('#id',{参数})
 */
class axMenu{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",storageName:"",theme:"light",content:"",dispose:!1,active:"",disabled:"",multiple:!1,collapseAll:!0,ajaxType:"post",zIndex:0,trigger:"click",rootStart:-1,idStart:0,arrowShow:!0,max:0,targetClass:"",addToActive:!0,gapless:!1,lamp:"",full:!1,nav:{enable:!1,headerWidth:"",bodyWidth:"",marginLeft:"",marginRight:"",align:"left"},breakpoints:{},onInit:"",onTreeCompleted:"",onPlanted:"",onTrigger:"",onAdd:"",onRemove:"",onDisable:"",onEnable:"",onDisableALL:"",onEnableAll:"",onExpand:"",onExpanded:"",onCollapse:"",onCollapsed:"",onSelected:"",onUpdate:"",onUpdateContent:"",onDestroy:"",onSave:"",onExpandAll:"",onCollapseAll:""},e,this.targetDom,this.constructor.name);let s=this;this.handlers={},this.triggerShow=function(){s.toggle(this)},this.triggerSelected=t=>{t.headerDom.setAttribute("selected",""),t.selected=!0,this.flatData.filter((e=>e!==t&&e.selected&&!e.children)).forEach((t=>{t.headerDom.removeAttribute("selected"),delete t.selected})),this.options.onSelected&&this.options.onSelected.call(this,t),"selected"in this.handlers&&this.emit("selected",t),"trigger"in this.handlers&&this.emit("trigger",t),this.options.onTrigger&&this.options.onTrigger.call(this,t),this.save()},this.rawHTML="",this.init()}init(){if(axInstance.push(this,this.options.insName,"menu"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.flatData=[],this.treeData=[],this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}return this.resolveSource(),this}async resolveSource(){if(axIsEmpty(this.options.content))this.targetDom.innerHTML&&(this.rawHTML=this.targetDom.innerHTML,this.treeData=this.ulToArr(),this.treeData=axTreeMethod.addPath(this.treeData,this.options.rootStart,this.options.idStart).data);else{if(this.targetDom.innerHTML="","String"===axType(this.options.content))await axTreeMethod.getFullData({source:this.options.content,ajaxType:this.options.ajaxType,async:!0,rootStart:this.options.rootStart,idStart:this.options.idStart,opened:t=>{this.contentXhr=t.xhr},before:t=>{this.targetDom.innerHTML=t.content},success:()=>{this.targetDom.innerHTML=""}}).then((t=>{this.treeData=t.data}));else if("Array"===axType(this.options.content)){if(0===this.options.content.length)return!1;await axTreeMethod.getFullData({source:this.options.content,rootStart:this.options.rootStart,idStart:this.options.idStart}).then((t=>{this.treeData=t.data}))}this.arrayToDom(this.treeData)}this.options.onTreeCompleted&&this.options.onTreeCompleted.call(this,this.treeData),"treeCompleted"in this.handlers&&this.emit("treeCompleted",this.treeData),this.processDataFormat(this.treeData)}processDataFormat(t){this.flatData=axArrToFlat(t),this.initParms(),this.renderFinish(),this.options.onInit&&this.options.onInit.call(this),"init"in this.handlers&&this.emit("init","")}initParms(){this.initAttribute(),this.initActive(),this.initDisabled()}ulToArr(){let t=[],e=this.options.idStart,s=(t,i)=>{let a={},o=t.querySelector("ul");return a.id=i,a.wrapperDom=t,a.headerDom=t.firstElementChild,a.labelDom=a.headerDom.querySelector("[label]"),a.label=a.labelDom.textContent.trim(),a.tipDom=a.headerDom.querySelector("[tip]"),a.tip=a.tipDom?a.tipDom.textContent.trim():"",a.url=a.labelDom.href&&!a.labelDom.href.includes("##")?a.labelDom.href:"",a.target=a.labelDom.target,a.arrowDom=a.headerDom.querySelector("[arrow]"),a.legendDom=a.headerDom.querySelector("[legend]"),a.legendDom&&(a.legend=a.legendDom.getAttribute("class")),t.hasAttribute("expanded")&&(a.expanded=!0),a.headerDom.hasAttribute("selected")&&(a.selected=!0),a.headerDom.hasAttribute("disabled")&&(a.disabled=!0),o&&(a.children=[],a.bodyDom=o,[...o.children].forEach((t=>{e++,a.children.push(s(t,e))}))),a};return(()=>{[...this.targetDom.children].forEach((i=>{t.push(s(i,e)),e++}))})(),t}childToParent(t){return t.headerDom.onclick=null,t.expanded=!0,t.wrapperDom.setAttribute("expanded",""),t.arrowDom=this.options.arrowShow&&t.children?axAddElem("i",{arrow:"",class:"ax-iconfont ax-icon-right"}):null,t.headerDom.appendChild(t.arrowDom),t.bodyDom=axAddElem("ul",{style:"display:block"}),t}createHeaderDom(t){t.labelDom=axAddElem(t.url?"a":"i",{label:""},t.label),t.url&&(t.labelDom.href=t.url),t.target&&(t.labelDom.target=t.target),t.legendDom=t.legend?axAddElem("i",{legend:"",class:`ax-iconfont ${t.legend}`}):null,t.arrowDom=this.options.arrowShow&&t.children?axAddElem("i",{arrow:"",class:"ax-iconfont ax-icon-right"}):null,t.headerDom=axAddElem("div"),t.tipDom=t.tip?axAddElem("i",{tip:""},t.tip):null,t.wrapperDom=axAddElem("li"),t.wrapperDom.appendChild(t.headerDom),t.legendDom&&t.headerDom.appendChild(t.legendDom),t.headerDom.appendChild(t.labelDom),t.tipDom&&t.headerDom.appendChild(t.tipDom),t.arrowDom&&t.headerDom.appendChild(t.arrowDom)}arrayToDom(t){let e=axAddElem("ul"),s=document.createDocumentFragment(),i=(t,e)=>{let s=axAddElem("ul");return e.forEach((t=>{this.createHeaderDom(t),t.hasOwnProperty("children")&&(t.bodyDom=i(t.wrapperDom,t.children)),s.appendChild(t.wrapperDom)})),t.appendChild(s),s};i(e,t),[...e.childNodes[0].childNodes].forEach((t=>{s.appendChild(t)})),this.targetDom.appendChild(s),this.options.onPlanted&&this.options.onPlanted.call(this),"planted"in this.handlers&&this.emit("planted","")}initAttribute(){if(!this.targetDom.classList.contains("ax-menu")&&this.targetDom.classList.add("ax-menu"),this.options.targetClass&&axClass.add(this.targetDom,this.options.targetClass),this.targetDom.setAttribute("theme",this.options.theme),this.options.gapless&&this.targetDom.setAttribute("gapless",""),this.options.lamp&&this.targetDom.setAttribute("lamp",this.options.lamp),this.options.full&&!this.options.nav.enable&&this.targetDom.setAttribute("full",""),this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex),this.options.nav.enable){if(this.targetDom.setAttribute("nav",""),this.options.nav.align&&this.targetDom.setAttribute("align",this.options.nav.align),this.options.nav.headerWidth){this.flatData.filter((t=>1===t.floor)).forEach((t=>{t.wrapperDom.style.width=this.options.nav.headerWidth}))}this.options.nav.bodyWidth&&this.flatData.forEach((t=>{t.bodyDom&&(t.bodyDom.style.width=this.options.nav.bodyWidth)})),this.options.nav.marginLeft&&this.flatData.filter((t=>1===t.floor)).forEach((t=>{t.wrapperDom.style.marginLeft=this.options.nav.marginLeft})),this.options.nav.marginRight&&this.flatData.filter((t=>1===t.floor)).forEach((t=>{t.wrapperDom.style.marginRight=this.options.nav.marginRight}))}}getPathIds(t){if(0===t.length)return[];let e=[];return(this.options.multiple?t:t.slice(0,1)).forEach((t=>{let s,i=axFindItem(t,this.flatData);i&&(s=i.path.split(">"),e.push(...s))})),[...new Set(e)].map((t=>parseInt(t)))}initActive(){if(0===this.flatData.length)return!1;if(this.options.multiple&&!this.options.collapseAll)this.expandAll();else{let t,e=""!==this.options.active?axValueToArr(this.options.active):[];e.push(...this.flatData.filter((t=>t.selected)),...this.flatData.filter((t=>t.expanded))),t=this.getPathIds(e),this.flatData.forEach((e=>{t.includes(e.id)&&(e.children?this.expand(e):this.triggerSelected(e))}))}}initDisabled(){if(0===this.flatData.length)return!1;let t=this.flatData.filter((t=>t.disabled)),e=""!==this.options.disabled?axValueToArr(this.options.disabled):[];e.push(...t),e.forEach((t=>{let e=axFindItem(t,this.flatData);e&&(e.disabled=!0,e.headerDom.setAttribute("disabled",""))}))}renderFinish(){this.options.dispose||this.flatData.forEach((t=>{if(t.children){if(!t.disabled){let e=t.url&&t.arrowDom?t.arrowDom:t.headerDom;"click"===this.options.trigger?e.addEventListener(this.options.trigger,this.triggerShow,!1):"hover"===this.options.trigger&&(this.hover=new axHover(t.wrapperDom,{enter:()=>{this.expand(t),"trigger"in this.handlers&&this.emit("trigger",t),this.options.onTrigger&&this.options.onTrigger.call(this,t)},leave:()=>{this.collapse(t)}}))}}else t.disabled||(t.headerDom.onclick=()=>{this.triggerSelected(t)});t.callback&&t.callback.call(this,t)})),this.save()}workToggle(t,e="disable"){let s=t.url&&t.arrowDom?t.arrowDom:t.headerDom;"enable"===e?(t.disabled&&delete t.disabled,t.headerDom.removeAttribute("disabled"),t.children?s.addEventListener(this.options.trigger,this.triggerShow,!1):t.headerDom.onclick=()=>{this.triggerSelected(t)}):"disable"===e&&(t.disabled=!0,t.headerDom.setAttribute("disabled",""),t.children?s.removeEventListener(this.options.trigger,this.triggerShow,!1):t.headerDom.onclick=null),this.save()}getDisabled(){return this.flatData.filter((t=>t.disabled))}getExpanded(){return this.flatData.filter((t=>t.expanded))}getActive(){return this.flatData.filter((t=>t.expanded||t.selected))}getSelected(){return this.flatData.find((t=>t.selected))}collapseAll(t){if(this.destroyed)return this;this.flatData.filter((t=>t.expanded)).forEach((t=>{this.collapse(t)})),"collapseAll"in this.handlers&&this.emit("collapseAll",""),this.options.onCollapseAll&&this.options.onCollapseAll.call(this),t&&t.call(this)}expandAll(t){if(this.destroyed||!this.options.multiple)return this;this.flatData.forEach((t=>{this.expand(t)})),"expandAll"in this.handlers&&this.emit("expandAll",""),this.options.onExpandAll&&this.options.onExpandAll.call(this),t&&t.call(this)}disable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.flatData);e&&this.workToggle(e,"disable")};Array.isArray(t)?t.forEach((t=>{s(t)})):s(t),this.save();let i=this.flatData.filter((t=>t.disabled));"disable"in this.handlers&&this.emit("disable",i),this.options.onDisable&&this.options.onDisable.call(this,i),e&&e.call(this,i)}disableAll(t){this.disable(this.flatData),"disableAll"in this.handlers&&this.emit("disableAll",""),this.options.onDisableAll&&this.options.onDisableAll.call(this),t&&t.call(this)}enable(t,e){if(this.destroyed)return this;if(0!==t&&axIsEmpty(t))return!1;let s=t=>{let e=axFindItem(t,this.flatData);e&&this.workToggle(e,"enable")};Array.isArray(t)?t.forEach((t=>{s(t)})):s(t),this.save();let i=this.flatData.filter((t=>!t.disabled));"enable"in this.handlers&&this.emit("enable",i),this.options.onEnable&&this.options.onEnable.call(this,i),e&&e.call(this,i)}enableAll(t){this.enable(this.flatData),"enableAll"in this.handlers&&this.emit("enableAll",""),this.options.onEnableAll&&this.options.onEnableAll.call(this),t&&t.call(this)}toggle(t){let e=axFindItem(t,this.flatData)||axFindItem(t,this.flatData,{dom:"arrowDom"});e.expanded?this.collapse(e):this.expand(e),"trigger"in this.handlers&&this.emit("trigger",e),this.options.onTrigger&&this.options.onTrigger.call(this,e)}collapse(t,e){let s="Object"===axType(t)?t:axFindItem(t,this.flatData);if(!s||!s.children||!s.shown)return!1;"collapse"in this.handlers&&this.emit("collapse",s),this.options.onCollapse&&this.options.onCollapse.call(this,s),delete s.expanded,s.wrapperDom.removeAttribute("expanded"),axSlideUp(s.bodyDom,"",(()=>{Reflect.deleteProperty(s,"shown"),"collapsed"in this.handlers&&this.emit("collapsed",s),this.options.onCollapsed&&this.options.onCollapsed.call(this,s),e&&e.call(this,s)})),this.save()}expand(t,e){if(this.destroyed)return this;let s,i=axFindItem(t,this.flatData);if(i.shown)return!1;!axIsEmpty(i)&&i.children&&("expand"in this.handlers&&this.emit("expand",i),this.options.onExpand&&this.options.onExpand.call(this,i),i.expanded=!0,i.wrapperDom.setAttribute("expanded",""),axSlideDown(i.bodyDom,"",(()=>{i.shown=!0,"expanded"in this.handlers&&this.emit("expanded",i),this.options.onExpanded&&this.options.onExpanded.call(this,i),e&&e.call(this,i)})),this.options.multiple||(s=this.flatData.filter((t=>t!==i&&t.expanded&&t.floor===i.floor&&t.children)),s.forEach((t=>{this.collapse(t)}))),this.save())}active(t,e){if(this.destroyed)return this;let s=[],i=[],a=t=>{let e=axFindItem(t,this.flatData);if(e){let t=e.path.split(">").map((t=>parseInt(t)));t.forEach((t=>{this.expand(t)})),e.children||this.triggerSelected(e)}};s=Array.isArray(t)?this.options.multiple?t:t.slice(0,1):[t],i=s.map((t=>axFindItem(t,this.flatData))).filter(Boolean),s.forEach((t=>{a(t)})),"active"in this.handlers&&this.emit("active",i),this.options.onActive&&this.options.onActive.call(this,i),e&&e.call(this,i),this.save()}add(t,e,s=!1,i=!1,a){if(this.destroyed)return this;if(this.flatData.length>=this.options.max&&0!==this.options.max)return!1;let o=axType(t),n=[],r=(t,e,s,i)=>{let a;t.hasOwnProperty("pId")&&t.pId!==this.options.rootStart?(a=axFindItem(t.pId,this.flatData),s=!0):void 0===e||"end"===e?a=this.flatData.filter((t=>1===t.floor)).slice(-1)[0]:"start"===e?(a=this.flatData.filter((t=>1===t.floor))[0],i=!0):a=axFindItem(e,this.flatData);let o=axTreeMethod.createData(t,a,this.flatData,s);if(this.createHeaderDom(o),s)a.children?axTreeMethod.existChildPush(o,a):axTreeMethod.noExistChildPush(o,a,(()=>this.childToParent(a)));else{let t=this.flatData.find((t=>t.id==a.pId)),e=t?t.children:this.treeData,s=e.indexOf(a);i?(0==s?e.unshift(o):e.splice(s,0,o),a.wrapperDom.insertAdjacentElement("beforeBegin",o.wrapperDom)):(e.splice(s+1,0,o),a.wrapperDom.insertAdjacentElement("afterEnd",o.wrapperDom))}this.flatData.push(o),n.push(o)};if("Array"===o&&t.length>0?t.forEach((t=>{r(t,e,s,i)})):r(t,e,s,i),n.length>0){if(this.options.addToActive)if(this.options.multiple)n.forEach((t=>{t.children&&this.expand(t)}));else{let t=n[n.length-1];t.children&&this.expand(t)}this.renderFinish()}return"add"in this.handlers&&this.emit("add",n),this.options.onAdd&&this.options.onAdd.call(this,n),a&&a.call(this,n),this}remove(t,e){if(this.destroyed)return this;if(axIsEmpty(t))return!1;if(0===this.flatData.length)return!1;let s=t=>{let e,s=axFindItem(t,this.flatData);s&&(e=axTreeMethod.remove(s,this.flatData,this.treeData),this.flatData=e.flat,this.treeData=e.tree)};return Array.isArray(t)?t.forEach((t=>{s(t)})):s(t),this.save(),"remove"in this.handlers&&this.emit("remove",""),this.options.onRemove&&this.options.onRemove.call(this),e&&e.call(this),this}save(t,e){return this.destroyed?this:!!this.options.storageName&&void setTimeout((()=>{let s=[...this.flatData.filter((t=>t.selected)),...this.flatData.filter((t=>t.expanded))].filter(Boolean).map((t=>t.id)),i=this.flatData.filter((t=>t.disabled)).map((t=>t.id));t?(!t.hasOwnProperty("active")&&(t.active=s),!t.hasOwnProperty("disabled")&&(t.disabled=i),!t.hasOwnProperty("content")&&(t.content=this.flatData),axLocalStorage.set(this.options.storageName,t)):axLocalStorage.set(this.options.storageName,{active:s,disabled:i,content:this.flatData});let a=axLocalStorage.get(this.options.storageName);return"save"in this.handlers&&this.emit("save",a),this.options.onSave&&this.options.onSave.call(this,a),e&&e.call(this,a),this}),0)}destroy(t){return this.flatData.forEach((t=>{let e=t.url&&t.arrowDom?t.arrowDom:t.headerDom;e.removeEventListener(this.options.trigger,this.triggerShow),e.onclick=null,t.headerDom.onclick=null})),this.destroyed=!0,this.contentXhr&&this.contentXhr.abort(),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),"destroy"in this.handlers&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}updateContent(t,e,s){if(this.destroyed)return this;let i=axFindItem(t,this.flatData);return i&&("String"===axType(e)?(i.label=e,i.labelDom.innerHTML=e):"Object"===axType(e)&&(e.label&&(i.label=e.label,i.labelDom.innerHTML=e.label),e.url&&i.url&&(i.url=e.url,i.labelDom.href=e.url),e.target&&i.url&&(i.target=e.target,i.labelDom.target=e.target)),"updateContent"in this.handlers&&this.emit("updateContent",i),this.options.onUpdateContent&&this.options.onUpdateContent.call(this,i),s&&s.call(this,i),this.save()),this}update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),this.targetDom.innerHTML=this.rawHTML?this.rawHTML:"",this.init(),"update"in this.handlers&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：黏住顶部或盒子；使用方法：new axStick('#id',{参数})
*/const axSticks=[];class axStick{constructor(t,e){return this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",refer:"body",space:"0px",width:"",zIndex:"",breakpoints:{}},e,this.targetDom,this.constructor.name),this.handlers={},this.height=this.targetDom.offsetHeight,this.width=this.targetDom.offsetWidth,this.left=axOffset(this.targetDom).left,this.top=axOffset(this.targetDom).top,this.bottom=axOffset(this.targetDom).top+this.height,this.style=this.targetDom.getAttribute("style"),this.placeholder=axAddElem("DIV",{style:`width:${this.width}px;height:${this.height}px;display:none;`}),this.targetDom.insertAdjacentElement("beforebegin",this.placeholder),this.init(),this}init(){return axInstance.push(this,this.options.insName,"stick"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.refer=this.targetDom.closest(this.options.refer),this.referHeight=this.refer.offsetHeight,this.referWidth=this.refer.offsetWidth,this.referLeft=axOffset(this.refer).left,this.referTop=axOffset(this.refer).top,this.referBottom=axOffset(this.refer).top+this.referHeight,"body"===this.options.refer||"fixed"===getComputedStyle(this.refer).position&&"absolute"===getComputedStyle(this.refer).position||(this.refer.style.position="relative"),this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex),"none"!==getComputedStyle(this.targetDom).float&&(this.placeholder.style.float=getComputedStyle(this.targetDom).float),window.addEventListener("scroll",(()=>{this.height>window.innerHeight?this.bottom<document.documentElement.scrollTop+window.innerHeight&&this.referBottom>document.documentElement.scrollTop+window.innerHeight?(this.targetDom.style.cssText+=`width:${this.targetDom.offsetWidth}px;`,this.targetDom.style.cssText+=`left:${axOffset(this.targetDom).left}px;`,this.targetDom.style.cssText+=`position:fixed;bottom:${this.options.space};margin:0;`,this.placeholder.style.display="block","sticked"in this.handlers&&this.emit("sticked","fixed")):this.referBottom<document.documentElement.scrollTop+window.innerHeight?(this.targetDom.style.position="absolute",this.targetDom.style.left=this.left-this.referLeft+"px",this.targetDom.style.cssText+=`position:absolute;bottom:${this.options.space};margin:0;`,this.placeholder.style.display="none","sticked"in this.handlers&&this.emit("sticked","absolute")):axOffset(this.refer).top>document.documentElement.scrollTop&&(this.targetDom.setAttribute("style",this.style),this.placeholder.style.display="none","unsticked"in this.handlers&&this.emit("unsticked","")):this.top<document.documentElement.scrollTop?(this.options.width?(this.targetDom.style.cssText+=`width:${this.options.width};`,this.targetDom.style.cssText+=`left:calc(50% - ${this.options.width}/2);`):(this.targetDom.style.cssText+=`width:${this.targetDom.offsetWidth}px;`,this.targetDom.style.cssText+=`left:${this.left}px;`),this.targetDom.style.cssText+=`position:fixed;top:${this.options.space};bottom:auto;margin:0;`,this.placeholder.style.display="block","sticked"in this.handlers&&this.emit("sticked","fixed"),this.height>this.referBottom-document.documentElement.scrollTop&&(this.targetDom.style.position="absolute",this.targetDom.style.left=this.left-this.referLeft+"px",this.targetDom.style.top="auto",this.targetDom.style.bottom=0,"sticked"in this.handlers&&this.emit("sticked","absolute"))):(this.targetDom.setAttribute("style",this.style),this.placeholder.style.display="none","unsticked"in this.handlers&&this.emit("unsticked",""))}),!1),this}destroy(t){this.targetDom.lastChild.removeEventListener("click",this.event,!1),this.targetDom.innerHTML=this.html,t&&t.call(this)}update(t,e){return this.targetDom.style=this.style,this.options=axExtend(this.options,t),this.init(),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：下拉菜单单选和多选；使用方法：axSelect('#id',{参数})
 */class axSelect{constructor(t,e){return this.inputDom=axIdToDom(t),!!this.inputDom&&(this.options=axExtend({insName:"",storageName:"",least:0,most:0,content:"",async:!1,trigger:"click",selected:"",disabled:"",clearShow:!1,removable:!1,separator:",",dropdownShow:!0,ajaxType:"post",absentAddable:!1,idStart:0,width:"",size:"md",readonly:!1,enterSelect:!0,displayProp:"",singleClose:!0,className:"",language:{inputPlaceholder:"请选择...",searchPlaceholder:"输入关键字...",editPlaceholder:"输入关键字...",absent:'列表中没有"<# this.value #>"可供选择！',absentAddable:'列表中没有"<# this.value #>"，但是作为新项加入了列表！',empty:'没有找到符合"<# this.value #>"的选项！',emptyAddable:'没有找到符合"<# this.value #>"的选项，请使用回车键添加！',most:'只能最多选择"<# this.value #>"项！',addFail:'添加失败！列表中已经有了"<# this.value #>"这一项。'},search:{enable:!1,fuzzy:!0,limit:0,reorder:!1,editable:!0},dialog:{},popup:{},breakpoints:{},onInit:"",onBeforeAdd:"",onAdd:"",onBeforeRemove:"",onRemove:"",onSelect:"",onUnselect:"",onDisabled:"",onEnabled:"",onClear:"",onAbsentSelect:"",onToggleSelect:"",onMost:"",onLeast:"",onUpdate:"",onDestroy:"",onSave:""},e,this.inputDom,this.constructor.name),this.handlers={},"SELECT"===this.inputDom.nodeName?this.inputDom.hasAttribute("multiple")?this.inputType="select-multiple":this.inputType="select-single":"INPUT"===this.inputDom.nodeName&&(this.inputType="input"),this.clickSelect=t=>{if(~~t.disabled||t.children)return!1;let e=this.getDisplayValue(t),s={id:t.id,value:e};if("select-single"===this.inputType){if(~~t.selected)return!1;this.toggleList(t,this.data),this.tagsIns.clear(),this.tagsIns.add(s),this.options.singleClose&&this.popupIns.hide()}else this.selectedAttrToggle(t,!~~t.selected),~~t.selected?this.tagsIns.add(s):this.tagsIns.remove(s)},this.keydownSelect=t=>{if(axIsEmpty(t))return document.onkeydown=null,!1;document.onkeydown=e=>{let s=t.filter((t=>!t.children&&!~~t.disabled)),i=s.find((t=>t.active)),a=s.findIndex((t=>t===i))||0;"ArrowDown"===e.code?(axPreventDefault(e),this.keyToggleActive("down",i,a,s)):"ArrowUp"===e.code?(axPreventDefault(e),this.keyToggleActive("up",i,a,s)):"Enter"===e.code&&i&&this.options.enterSelect&&("select-single"===this.inputType?this.select(i):~~i.selected?this.unselect(i):this.select(i))}},this.bodyClickBlur=t=>{this.selectDom.contains(t.target)||(this.selectDom.classList.remove("ax-opened"),document.removeEventListener("click",this.bodyClickBlur))},this.init(),this)}beforeInit(){!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.selectDom&&(this.tagsIns.destroy(),this.tagsIns=null,this.popupIns&&(this.popupIns.destroy(),this.popupIns=null),this.tagsDom.innerHTML="",this.listDom.innerHTML="",this.searchDom&&this.searchDom.remove())}async init(){if(this.beforeInit(),axInstance.push(this,this.options.insName,"select"),this.destroyed=!1,this.maxIndex=this.options.idStart,this.value="",this.selected=[],this.searchResult=[],this.data=[],this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}this.inputDom.style.width&&!this.options.width&&(this.options.width=this.inputDom.style.width),this.createSkeleton();let t=axType(this.options.content);return"input"===this.inputType&&"String"===t&&this.options.async?await this.getAsyncData((t=>{this.data=axArrToFlat(t)})):this.inputType.includes("select")?this.getDataFromNode(this.inputDom):"input"===this.inputType&&(axIsEmpty(this.options.content)?this.inputDom.value&&this.getDataFromStr(this.inputDom.value):"String"===t?this.options.content.trim().startsWith("#")?this.getDataFromNode(this.options.content):this.getDataFromStr(this.options.content):"Array"===t?(this.data=axArrToFlat(this.options.content),!isNaN(this.data[0].id)&&(this.maxIndex=Math.max(...this.data.map((t=>t.id)))+1)):t.includes("HTML")&&this.getDataFromNode(this.options.content)),this.initRender(),this.renderFinish(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}getDisplayValue(t){return this.options.displayProp?t[this.options.displayProp]:t.label}getAsyncData(t){return axAjax({type:this.options.ajaxType,url:this.options.content,opened:t=>{this.contentXhr=t.xhr},success:e=>{if(axIsEmpty(e.content)&&!Array.isArray(e.content))return!1;this.tagsDom.innerHTML="",this.listDom.innerHTML="",t&&t(e.content)}},this.tagsDom)}getDataFromNode(t){let e,s=axIdToDom(t);if("UL"===s.nodeName)e=axUlToArr(s,0);else{if("SELECT"!==s.nodeName&&"DATALIST"!==s.nodeName)return!1;e=axSelectToArr(s,0)}this.data=axArrToFlat(e.data),this.maxIndex=e.index}getDataFromStr(t){let e=t.split(this.options.separator);this.data=e.map(((t,e)=>({id:e,label:t,value:t}))),this.maxIndex=e.length+1}setAttribute(){this.options.className&&axClass.add(this.selectDom,this.options.className),this.selectDom.setAttribute("type",this.inputType),this.options.width&&(this.selectDom.style.width=this.options.width),!axIsMobi()&&this.selectDom.getBoundingClientRect().width&&(this.options.popup.width=this.selectDom.getBoundingClientRect().width+"px"),this.selectDom.setAttribute("size",this.options.size),this.options.readonly&&this.readonly()}initDataStd(){let t=axType(this.options.selected),e=axType(this.options.disabled),s=(t,e)=>{let s,i=axType(t);"Number"===i||"Object"===i?s=axFindItem(t,this.data):"String"===i&&(s=axFindItem(t,this.data)||axFindItem(t,this.data,{string:"value"})),s&&(s[e]=!0,s.dom.setAttribute(e,""))};if("Array"===t)for(let t of this.options.selected)s(t,"selected");else"String"===t?this.options.selected.split(",").forEach((t=>{s(t,"selected")})):s(this.options.selected,"selected");if("Array"===e)for(let t of this.options.disabled)s(t,"disabled");else"String"===e?this.options.disabled.split(",").forEach((t=>{s(t,"disabled")})):s(this.options.disabled,"disabled")}createSkeleton(){this.selectDom||(this.selectDom=axAddElem("div",{class:"ax-select"}),this.inputDom.style.display="none",this.inputDom.insertAdjacentElement("beforebegin",this.selectDom),this.selectDom.appendChild(this.inputDom),this.tagsDom=axAddElem("div",{class:"ax-tags"}),this.selectDom.appendChild(this.tagsDom),this.options.dropdownShow&&(this.arrowDom=axAddElem("i",{arrow:""}),this.selectDom.appendChild(this.arrowDom),this.wrapperDom=axAddElem("div",{class:"ax-select-wrapper"}),this.listDom=axAddElem("ul"),this.wrapperDom.appendChild(this.listDom))),this.selectDom.contains(this.clearDom)||(this.clearDom=axAddElem("i",{clear:""}),this.options.clearShow&&this.arrowDom.insertAdjacentElement("beforebegin",this.clearDom)),this.setAttribute()}initRender(){this.data.forEach((t=>{this.fillItem(t,this.listDom)}))}fillItem(t,e,s="end"){t.dom=axAddElem("li","",`${t.legend?'<i class="ax-iconfont '+t.legend+'" legend></i>':""}${t.image?'<i image><img src="'+t.image+'"/></i>':""}<i label>${t.label}</i>${t.tip?"<i tip>"+t.tip+"</i>":""}`),t.children?t.dom.setAttribute("parent",""):(~~t.selected&&t.dom.setAttribute("selected",""),~~t.disabled&&t.dom.setAttribute("disabled","")),e&&("end"!==s?e.insertAdjacentElement("afterbegin",t.dom):e.appendChild(t.dom))}reRenderList(t){this.initDataStd(),this.listDom.innerHTML="",t[0].hasOwnProperty("weight")?t.forEach((t=>{let e=new RegExp(t.keys.join("|"),"g"),s=t.source.dom.querySelector("[label]");s.innerHTML=s.innerHTML.replace(/<[^>]+>/g,"").replace(e,(t=>`<s>${t}</s>`)),this.listDom.appendChild(t.source.dom)})):t.forEach((t=>{t.dom.querySelector("[label]").innerHTML=t.dom.querySelector("[label]").innerHTML.replace(/<[^>]+>/g,""),this.listDom.appendChild(t.dom)}))}selectedAttrToggle(t,e){if(e){if(!~~t.selected){if("single-multiple"!==this.inputType&&0!==this.options.most&&this.data.filter((t=>~~t.selected)).length>=this.options.most)return new axMessage({content:axTplEngine(this.options.language.most,{value:this.options.most}),result:"error",iconShow:!0}).show(),this.handlers.hasOwnProperty("most")&&this.emit("most",this.options.most),this.options.onMost&&this.options.onMost.call(this,this.options.most),!1;Reflect.set(t,"selected",!0),t.dom.setAttribute("selected",""),this.inputType.includes("select")&&t.node&&t.node.setAttribute("selected","")}}else~~t.selected&&(Reflect.deleteProperty(t,"selected"),t.dom.removeAttribute("selected"),this.inputType.includes("select")&&t.node&&t.node.removeAttribute("selected"));"toggleSelect"in this.handlers&&this.emit("toggleSelect",t),this.options.onToggleSelect&&this.options.onToggleSelect.call(this,t)}toggleList(t,e){this.selectedAttrToggle(t,!0);let s=e.find((e=>e!=t&&~~e.selected));s&&this.selectedAttrToggle(s,!1)}keyToggleActive(t,e,s,i){if("hidden"===this.popupIns.state)this.popupIns.show(),e||(i[0].active=!0,i[0].dom.setAttribute("active",""));else if("shown"===this.popupIns.state){let a,o=0;"up"===t?s>0&&(e&&(Reflect.deleteProperty(e,"active"),e.dom.removeAttribute("active")),a=i[s-1],a.active=!0,a.dom.setAttribute("active",""),s--,a.dom.offsetTop>this.wrapperDom.clientHeight&&(o=a.dom.offsetTop+a.dom.getBoundingClientRect().height-this.wrapperDom.clientHeight),axScrollTo(o,{parent:this.wrapperDom,duration:200})):"down"===t&&s+1<i.length&&(e&&(Reflect.deleteProperty(e,"active"),e.dom.removeAttribute("active")),a=i[s+1],a.active=!0,a.dom.setAttribute("active",""),s++,axChildVisible(a.dom,this.wrapperDom)||(o=a.dom.offsetTop+a.dom.getBoundingClientRect().height-this.wrapperDom.clientHeight),axScrollTo(o,{parent:this.wrapperDom,duration:200}))}}renderFinish(){this.rawData=[...this.data];let t="";if(t=this.options.most>0&&this.options.least>0?`最多选择${this.options.most}项，至少选择${this.options.least}项`:this.options.most>0?`最多选择${this.options.most}项`:this.options.most>0?`至少选择${this.options.most}项`:this.options.language.inputPlaceholder,this.tagsIns=new axTags(this.tagsDom,{content:this.data.filter((t=>~~t.selected)).map((t=>({id:t.id,value:this.getDisplayValue(t)}))),removable:"select-single"!==this.inputType&&this.options.removable,compact:"select-single"!==this.inputType,text:"select-single"===this.inputType,theme:"select-single"===this.inputType?"auto":"light",emptyShow:!(!this.inputType.includes("select")&&("input"!==this.inputType||this.options.search.enable)),emptyTip:`<i class="ax-color-ignore">${t}</i>`,edit:{enable:!this.inputType.includes("select")&&this.options.search.enable,addable:this.options.search.editable,deletable:this.options.search.editable,placeholder:this.options.language.editPlaceholder}}),this.inputType.includes("select")?this.searchDom=axAddElem("input",{type:"text",placeholder:this.options.language.searchPlaceholder}):"input"===this.inputType&&(this.searchDom=this.tagsIns.inputDom),this.options.dropdownShow){this.options.search.enable&&this.inputType.includes("select")&&this.wrapperDom.insertAdjacentElement("afterbegin",this.searchDom),this.popupIns=new axPopup(this.selectDom,axExtend({content:this.wrapperDom,trigger:this.options.trigger,footerShow:!1,close:!1,padding:!1,triggerStrict:!0,arrow:!1,theme:"select",placement:"bottom-start"},this.options.popup)),this.popupIns.on("show",(()=>{this.searchDom&&"input"===this.inputType&&this.searchDom.focus()})),this.popupIns.on("shown",(()=>{this.searchDom&&this.inputType.includes("select")&&this.searchDom.focus()})),this.popupIns.on("hide",(()=>{this.keydownSelect()})),this.popupIns.on("hidden",(()=>{})),this.selectDom.onclick=()=>{this.keydownSelect(this.searchResult.length>0?this.searchResult.map((t=>t.source)):this.data)},this.clearDom&&(this.clearDom.onclick=()=>{this.clear()}),"input"===this.inputType&&this.searchDom&&(this.searchDom.onclick=()=>{"hidden"===this.popupIns.state&&this.popupIns.show()});for(let t of this.data)~~t.disabled||t.children||(t.dom.onclick=()=>{this.clickSelect(t),"select-multiple"===this.inputType&&0!==this.options.least&&this.data.filter((t=>~~t.selected)).length<this.options.least&&(new axMessage({content:`至少选择${this.options.least}项!`,result:"warning",iconShow:!0}).show(),this.handlers.hasOwnProperty("least")&&this.emit("least",this.options.least),this.options.onLeast&&this.options.onLeast.call(this,this.options.least))});this.tagsIns.on("remove",(t=>{t.forEach((t=>{let e=axFindItem({id:t.id,value:t.value},this.data);e&&this.selectedAttrToggle(e,!1)}))})),this.searchDom&&(this.searchDom.oninput=axDebounce((()=>{let t=this.searchDom.value;t?(this.searchResult=axArrSearch(t,"label",this.data,{fuzzy:this.options.search.fuzzy,reorder:this.options.search.reorder,limit:this.options.search.limit}),0===this.searchResult.length?("input"===this.inputType?(this.options.enterSelect&&this.searchDom.addEventListener("keyup",this.tagsIns.inputEdit),this.listDom.innerHTML=`<li message><i label>${axTplEngine(this.options.language.emptyAddable,{value:t})}</i></li>`):this.listDom.innerHTML=`<li message><i label>${axTplEngine(this.options.language.empty,{value:t})}</i></li>`,this.keydownSelect()):("input"===this.inputType&&this.options.enterSelect&&this.searchDom.removeEventListener("keyup",this.tagsIns.inputEdit),this.reRenderList(this.searchResult),this.keydownSelect(this.searchResult.map((t=>t.source))))):(this.reRenderList(this.data),this.keydownSelect(this.data))}))),this.tagsIns.contentProxy.instance.on("complete",(t=>{this.selected=t.target.map((t=>({id:t.id,value:t.value}))),this.value=t.target.map((t=>t.value)).join(this.options.separator),"input"===this.inputType&&(this.inputDom.value=this.value),"select-single"!==this.inputType&&this.popupIns&&this.popupIns.popupPosition.update(),this.save()}))}else this.selectDom.onclick=()=>{this.selectDom.classList.contains("ax-opened")||this.selectDom.classList.add("ax-opened"),this.searchDom&&"input"===this.inputType&&this.searchDom.focus(),document.addEventListener("click",this.bodyClickBlur,!1)}}select(t,e){if(axIsEmpty(t)||this.destroyed)return this;let s=axType(t),i=[],a=[],o=t=>{let e=axFindItem(t,this.data);if(e){i.push(e);let t={id:e.id,value:this.getDisplayValue(e)};~~e.selected||("select-single"===this.inputType?(this.toggleList(e,this.data),this.tagsIns.clear(),this.tagsIns.add(t)):(this.selectedAttrToggle(e,!~~e.selected),this.tagsIns.add(t)))}else a.push(t)};if("Array"===s?t.forEach((t=>{o(t)})):"String"===s?t.split(",").forEach((t=>{o(t)})):o(t),a.length>0){let t=a.map((t=>t.label||t)).join(",");this.options.absentAddable?new axDialog(axExtend({content:axTplEngine(this.options.language.absentAddable,{value:t}),confirm:{callback:()=>{a.forEach((t=>{this.add(t,"end",(t=>{t.forEach((e=>{e.dom.setAttribute("selected",""),e.selected=!0,this.tagsIns.add({id:e.id,value:this.getDisplayValue(e)}),i.push(...t)}))}))})),this.handlers.hasOwnProperty("absentSelect")&&this.emit("absentSelect",i),this.options.onAbsentSelect&&this.options.onAbsentSelect.call(this,i)}}},this.options.dialog)).show():new axMessage({content:axTplEngine(this.options.language.absent,{value:t}),iconShow:!0}).show()}return this.handlers.hasOwnProperty("select")&&this.emit("select",i),this.options.onSave&&this.options.onSave.call(this,i),e&&e.call(this,i),this}unselect(t,e){if(this.destroyed)return this;let s=axType(t),i=[],a=t=>{let e=axFindItem(t,this.data);if(e){i.push(e);let t={id:e.id,value:e.value};~~e.selected&&(this.selectedAttrToggle(e,!1),this.tagsIns.remove(t))}else this.tagsIns.remove(t)};return"Array"===s?t.forEach((t=>{a(t)})):"String"===s?t.split(",").forEach((t=>{a(t)})):a(t),this.handlers.hasOwnProperty("unselect")&&this.emit("unselect",i),this.options.onSave&&this.options.onSave.call(this,i),e&&e.call(this,i),this}arrAdd(t,e){t.forEach((t=>{this.fillItem(t,this.listDom,e),"end"!==e?this.data.unshift(t):this.data.push(t),t.dom.onclick=()=>{this.clickSelect(t)}}))}add(t,e="end",s){if(axIsEmpty(t)||this.destroyed)return this;let i=axType(t),a=[],o=t=>{let e=axType(t);if("String"===e){let e=t.split(this.options.separator),s=new axMessage({content:"",result:"error",iconShow:!0});for(let t of e)this.data.find((e=>e.label===t))?s.update({content:axTplEngine(this.options.language.addFail,{value:t})}).show():(a.push({id:this.maxIndex,label:t,value:t}),this.maxIndex++)}else"Object"===e&&(axFindItem(t,this.data)?msgIns.update({content:axTplEngine(this.options.language.addFail,{value:t.label})}).show():(t.hasOwnProperty("id")||(t.id=this.maxIndex,this.maxIndex++),a.push(t)))};return"Array"===i?t.forEach((t=>{o(t)})):"String"===i&&o(t),this.options.onBeforeAdd?this.options.onBeforeAdd.call(a):this.arrAdd(a,e),this.handlers.hasOwnProperty("add")&&this.emit("add",a),this.options.onAdd&&this.options.onAdd.call(this,a),s&&s.call(this,a),this.save(),this}arrRemove(t){t.length>0&&(t.forEach((t=>{t.dom.remove()})),this.data=this.data.filter((e=>!t.includes(e))))}remove(t,e){if(axIsEmpty(t)||this.destroyed)return this;let s=axType(t),i=[],a=t=>{let e=axFindItem(t,this.data);e&&i.push(e)};return"Array"===s?t.forEach((t=>{a(t)})):"String"===s?t.split(",").forEach((t=>{a(t)})):a(t),this.options.onBeforeRemove?this.options.onBeforeRemove.call(i):this.arrRemove(i),this.handlers.hasOwnProperty("remove")&&this.emit("remove",i),this.options.onRemove&&this.options.onRemove.call(this,i),e&&e.call(this,i),this.save(),this}clear(t){this.tagsIns.clear();for(let t of this.data)~~t.selected&&(Reflect.deleteProperty(t,"selected"),t.dom.removeAttribute("selected"),t.node&&t.node.removeAttribute("selected"));return this.handlers.hasOwnProperty("clear")&&this.emit("clear",""),this.options.onClear&&this.options.onClear.call(this),t&&t.call(this),this}readonly(t){return this.inputDom.setAttribute("readonly",""),this.selectDom.setAttribute("readonly",""),t&&t.call(this),this}readable(t){return this.inputDom.removeAttribute("readonly"),this.selectDom.removeAttribute("readonly"),t&&t.call(this),this}disable(t,e){if(this.destroyed)return this;let s=axType(t),i=[],a=t=>{let e=axFindItem(t,this.data);e&&i.push(e)};return"Array"===s?t.forEach((t=>{a(t)})):"String"===s?t.split(",").forEach((t=>{a(t)})):a(t),i.forEach((t=>{~~t.disabled||(t.dom.setAttribute("disabled",""),t.disabled=!0)})),this.handlers.hasOwnProperty("disabled")&&this.emit("disabled",i),this.options.onDisabled&&this.options.onDisabled.call(this,i),e&&e.call(this,i),this.save(),this}enable(t,e){if(this.destroyed)return this;let s=axType(t),i=[],a=t=>{let e=axFindItem(t,this.data);e&&i.push(e)};return"Array"===s?t.forEach((t=>{a(t)})):"String"===s?t.split(",").forEach((t=>{a(t)})):a(t),i.forEach((t=>{~~t.disabled&&(t.dom.removeAttribute("disabled"),Reflect.deleteProperty(t,"disabled"))})),this.handlers.hasOwnProperty("enabled")&&this.emit("enabled",i),this.options.onEnabled&&this.options.onEnabled.call(this,i),e&&e.call(this,i),this.save(),this}save(t,e){if(this.destroyed)return this;if(!this.options.storageName)return!1;t?axLocalStorage.set(this.options.storageName,t):(this.options.content=this.data,axLocalStorage.set(this.options.storageName,this.options));let s=axLocalStorage.get(this.options.storageName);return this.handlers.hasOwnProperty("save")&&this.emit("save",s),this.options.onSave&&this.options.onSave.call(this,s),e&&e.call(this,s),this}async update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.save(),await this.init(),this.handlers.hasOwnProperty("update")&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this)),this}destroy(t){return this.selectDom.onclick=null,this.clearDom&&(this.clearDom.onclick=null),this.searchDom&&(this.searchDom.onclick=null),this.searchDom&&this.searchDom.removeEventListener("keyup",this.tagsIns.inputEdit),document.removeEventListener("click",this.bodyClickBlur),this.contentXhr&&this.contentXhr.abort(),this.popupIns&&this.popupIns.destroy(),this.tagsIns.destroy(),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：查看更多；使用方法：new axDropdown('#id',{参数})
 */class axDropdown{constructor(t,e){return this.targetDom=axIdToDom(t),this.options=axExtend({type:"list",content:"",node:"a",nowrap:!0,breakShow:!0,arrowShow:!0,grid:{enable:!1,columns:0,fenceShow:!1},onInit:"",onBeforeSet:"",onAfterSet:"",onConfirm:"",onUpdate:"",onUpdateContent:"",breakpoints:{},plugin:{value:""},popup:{in:"slideDown",out:"slideUp",size:"sm",placement:"bottom-start",close:!1}},e,this.targetDom,this.constructor.name),this.handlers={},this.init(),this}init(){if(axInstance.push(this,this.options.insName,"dropdown"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.plugin=null,this.popup=null,this.value="",this.valueArr=[],this.list=[],this.options.plugin.value?this.initValue=this.options.plugin.value:this.initValue="","INPUT"!=this.targetDom.nodeName&&"TEXTAREA"!=this.targetDom.nodeName||(this.targetDom.setAttribute("readonly",""),this.targetDom.value?(this.options.plugin.value=this.targetDom.value,this.initValue=this.targetDom.value):this.initValue&&(this.targetDom.value=this.initValue)),"checkbox"===this.options.type||"radio"===this.options.type)axIsEmpty(this.options.content)||(this.options.plugin.children=this.options.content),this.options.plugin.type=this.options.type,this.options.grid.enable?(this.options.plugin.display="grid",this.options.grid.columns&&(this.options.plugin.columns=this.options.grid.columns),this.options.grid.fenceShow&&(this.options.plugin.parentClass="ax-fence",this.options.plugin.childClass="ax-padding-left",this.options.popup.padding=!1)):this.options.plugin.display="block",this.plugin=new axCheckbox("",this.options.plugin),this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{content:this.plugin.parent,cancel:"",diy:{text:"重置",callback:()=>{this.plugin.reset()}},confirm:{type:"prevent",callback:()=>{this.value=this.plugin.getValues("string"),this.valueArr=this.plugin.getValues("array"),this.options.onBeforeSet?this.options.onBeforeSet.call(this,this.value):this.setToHide(this.value),this.options.onConfirm&&this.options.onConfirm.call(this,this.value),"confirm"in this.handlers&&this.emit("confirm",this.value)}}})),this.popup.on("show",(()=>{"INPUT"!==this.targetDom.nodeName&&"TEXTAREA"!==this.targetDom.nodeName||!this.targetDom.value||this.targetDom.value!=this.plugin.getValues("string")&&this.updateValues(this.targetDom.value)}));else if("list"===this.options.type){this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{footerShow:!1,padding:!1}));let t=null;"String"===axType(this.options.content)?axStrType(this.options.content)?(t=axIdToDom(this.options.content),this.popup.content.innerHTML=axIdToDom(this.options.content).innerHTML):this.popup.content.innerHTML=this.options.content:axType(this.options.content).includes("HTML")?this.popup.content.innerHTML=this.options.content.innerHTML:"Array"===axType(this.options.content)&&(t=axAddElem("div",{class:"ax-list-wrapper"}),this.renderList(this.options.content,t),this.popup.content.innerHTML="",this.popup.content.appendChild(t))}else if("button"===this.options.type){this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{footerShow:!1,padding:!1}));let t=axAddElem("div",{class:"ax-list-wrapper"});this.renderList(this.options.content,t),this.list.forEach((t=>{t.props.disabled||(t.dom.onclick=e=>{axPreventDefault(e),this.value=t.props.value,this.valueArr=[t.props.value],t.dom.setAttribute("checked",""),this.list.filter((e=>e.dom!=t.dom)).forEach((t=>{t.dom.removeAttribute("checked")})),this.options.onBeforeSet?this.options.onBeforeSet.call(this,t.props.value):this.setToHide(t.props.value)})})),this.popup.content.innerHTML="",this.popup.content.appendChild(t),this.initValue&&this.updateValues(this.initValue),this.popup.on("show",(()=>{"INPUT"!==this.targetDom.nodeName&&"TEXTAREA"!==this.targetDom.nodeName||!this.targetDom.value||this.updateValues(this.targetDom.value)}))}else"text"===this.options.type||"textarea"===this.options.type?(this.options.plugin.type=this.options.type,this.options.content&&(this.options.plugin.value=this.options.content),this.plugin=new axInput("",this.options.plugin),this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{content:this.plugin.parent,cancel:"",diy:{text:"重置",callback:()=>{this.plugin.set(this.initValue)}},confirm:{type:"prevent",callback:()=>{this.value=this.plugin.getValues("string"),this.valueArr=this.plugin.getValues("array"),this.options.onBeforeSet?this.options.onBeforeSet.call(this,this.value):this.setToHide(this.value),this.options.onConfirm&&this.options.onConfirm.call(this,this.value),"confirm"in this.handlers&&this.emit("confirm",this.value)}}})),this.popup.on("show",(()=>{"INPUT"!==this.targetDom.nodeName&&"TEXTAREA"!==this.targetDom.nodeName||!this.targetDom.value||this.targetDom.value!=this.plugin.getValues()&&this.updateValues(this.targetDom.value),setTimeout((()=>{let t=this.plugin.field.value;this.plugin.field.value="",this.plugin.field.focus(),this.plugin.field.value=t}),100)})),"text"===this.options.type&&(this.plugin.field.onkeyup=t=>{"Enter"===t.code&&this.popup.options.confirm.callback()})):"number"===this.options.type?(this.options.plugin.width="100%",this.plugin=new axAmount("",this.options.plugin),this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{content:this.plugin.parent,cancel:"",diy:{text:"重置",callback:()=>{this.plugin.reset()}},confirm:{type:"prevent",callback:()=>{this.value=this.plugin.value,this.valueArr.push(this.plugin.value),this.options.onBeforeSet?this.options.onBeforeSet.call(this,this.value):this.setToHide(this.value),this.options.onConfirm&&this.options.onConfirm.call(this,this.value),"confirm"in this.handlers&&this.emit("confirm",this.value)}}})),this.popup.on("show",(()=>{"INPUT"!==this.targetDom.nodeName&&"TEXTAREA"!==this.targetDom.nodeName||!this.targetDom.value||this.targetDom.value!=this.plugin.value&&this.updateValues(this.targetDom.value)})),setTimeout((()=>{let t=this.plugin.field.value;this.plugin.field.value="",this.plugin.field.focus(),this.plugin.field.value=t}),100),this.plugin.field.onkeyup=t=>{"Enter"===t.code&&this.popup.options.confirm.callback()}):"switch"===this.options.type||"html"===this.options.type&&(this.popup=new axPopup(this.targetDom,Object.assign(this.options.popup,{footerShow:!1,content:this.options.content})));this.setAttribute(),this.options.onInit&&this.options.onInit.call(this)}setAttribute(){if(this.options.arrowShow&&this.targetDom&&!this.targetDom.querySelector(".ax-at-right")){let t=axAddElem("i",{class:"ax-dropdown-arrow"});this.targetDom.appendChild(t)}this.popup.targetDom.classList.add("ax-dropdown")}setToHide(t,e){t=t||this.value,"INPUT"===this.targetDom.nodeName&&(this.targetDom.value=t),this.options.onAfterSet&&this.options.onAfterSet.call(this,t),"set"in this.handlers&&this.emit("set",t),e&&e.call(this,t),this.popup.hide()}updateToShow(t){this.popup.show(),setTimeout((()=>{this.updateValues(t)}),100)}updateValues(t){if(["checkbox","radio","text","textarea","number"].includes(this.options.type))this.plugin.set(t);else if("button"===this.options.type){let e="";e=Array.isArray(t)?t[0]:t,this.list.forEach((t=>{t.props.value===e?t.dom.setAttribute("checked",""):t.dom.removeAttribute("checked")}))}}getValues(t="string"){return"string"===t?this.value:"array"===t?this.valueArr:void 0}renderList(t,e){if(this.options.grid.enable){let t="ax-grid";this.options.grid.columns&&(t+=` ax-grid-${this.options.grid.columns}`),this.options.grid.fenceShow&&(t+=" ax-fence"),axClass.add(e,t)}t.forEach(((t,s)=>{let i=axAddElem(this.options.node,{class:"ax-bulletin ax-hover",...t.props},'<div class="ax-bulletin-body"></div>'),a=i.querySelector(".ax-bulletin-body"),o=null;t.disabled&&i.setAttribute("disabled",""),"a"===this.options.node&&("list"===this.options.type?(i.target=t.target?t.target:"_blank",i.href=t.url?t.url:"###"):i.href="###"),this.options.nowrap?("a"!=this.options.node&&t.url?(o=axAddElem("a",{caption:""},t.label),"list"===this.options.type?(o.target=t.target?t.target:"_blank",o.href=t.url?t.url:"###"):o.href="###"):o=axAddElem("i",{caption:""},t.label),a.appendChild(o)):a.textContent=t.label,axIsEmpty(t.prefix)||("legend"===t.prefix.type?a.insertAdjacentElement("beforebegin",axAddElem("i",{class:"ax-iconfont "+t.prefix.data,legend:""})):"avatar"===t.prefix.type?a.insertAdjacentElement("beforebegin",axAddElem("i",{avatar:""},`<img src="${t.prefix.data}" />`)):"image"===t.prefix.type&&a.insertAdjacentElement("beforebegin",axAddElem("i",{image:""},`<img src="${t.prefix.data}"/>`))),t.suffix&&a.insertAdjacentElement("afterend",axAddElem("i",{arrow:""},t.suffix)),e.appendChild(i),!this.options.grid.enable&&this.options.breakShow&&s+1!=this.options.content.length&&e.insertAdjacentHTML("beforeend","<hr/>"),this.list.push({props:t,dom:i}),t.disabled||t.callback&&t.callback(i,t)}))}update(t,e){return this.popup.targetDom.remove(),this.popup.destroy(),this.options.content=axExtend(this.options.content,t),this.init(),this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update"),e&&e.call(this),this}updateContent(t,e){return this.popup.targetDom.remove(),this.popup.destroy(),this.options.content=t,this.init(),this.options.onUpdateContent&&this.options.onUpdateContent.call(this),"updateContent"in this.handlers&&this.emit("updateContent"),e&&e.call(this),this}show(t){return this.popup.show(),t&&t.call(this),this}hide(t){return this.popup.hide(),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：表单数量步进增减；使用方法：new axAmount('#id',{参数})
*/const axAmounts=[];class axAmount{constructor(t,e){this.targetDom=t?axIdToDom(t):"",this.options=axExtend({insName:"",width:"",placeholder:"输入数量",value:"",min:"",max:"",step:1,precision:0,rule:"",disabled:!1,increase:!0,decrease:!0,cookie:"",breakpoints:{},onInit:"",onMined:"",onMaxed:"",onUpdated:"",onChanged:""},e,this.targetDom,this.constructor.name),this.handlers={},this.value="",this.activeIn=!0,this.activeDe=!0,this.init()}init(){if(axInstance.push(this,this.options.insName,"amount"),""!==this.options.min&&""!==this.options.mam&&this.options.min>this.options.mam)return!1;!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.createSkeleton(),this.ruleToSet(),this.initValue(),this.getCookie(),this.rawValue=this.value,this.setAttribute();let t=t=>{"ArrowUp"===t.code||"ArrowRight"===t.code?(t.preventDefault(),e()):"ArrowLeft"!==t.code&&"ArrowDown"!==t.code||(t.preventDefault(),s())},e=()=>{this.activeDe||(this.options.decrease=!0,this.decrease.removeAttribute("disabled"));let t=Number(this.field.value),e=Number(this.field.value);(""===this.options.max||""!==this.options.max&&t<this.options.max)&&(t+=this.options.step),""!==this.options.max&&t+this.options.step>this.options.max&&(this.options.increae=!1,this.increase.setAttribute("disabled","true"),this.activeIn=!1,this.options.onMaxed&&this.options.onMaxed.call(this),"maxed"in this.handlers&&this.emit("maxed","")),this.field.value=t.toFixed(this.options.precision),this.value=this.field.value,this.setCookie(),this.field.value>e&&(this.options.onChanged&&this.options.onChanged.call(this,e,this.field.value),"changed"in this.handlers&&this.emit("changed",e,this.field.value))},s=()=>{this.activeIn||(this.options.increae=!0,this.increase.removeAttribute("disabled"));let t=Number(this.field.value),e=Number(this.field.value);(""===this.options.min||""!==this.options.min&&t>this.options.min)&&(t-=this.options.step),""!==this.options.min&&t-this.options.step<this.options.min&&(this.options.decreae=!1,this.decrease.setAttribute("disabled","true"),this.activeDe=!1,this.options.onMined&&this.options.onMined.call(this),"mined"in this.handlers&&this.emit("mined","")),this.field.value=t.toFixed(this.options.precision),this.value=this.field.value,this.setCookie(),this.field.value<e&&(this.options.onChanged&&this.options.onChanged.call(this,e,this.field.value),"changed"in this.handlers&&this.emit("changed",e,this.field.value))};return this.options.disabled||this.field.hasAttribute("disabled")?(this.increase.removeEventListener("click",e,!1),this.decrease.removeEventListener("click",s,!1),this.field.setAttribute("disabled","")):(!this.options.increase||this.increase.hasAttribute("disabled")?(this.increase.removeEventListener("click",e,!1),this.increase.setAttribute("disabled","")):(this.increase.addEventListener("click",e,!1),this.field.addEventListener("keydown",t,!1)),!this.options.decrease||this.decrease.hasAttribute("disabled")?(this.decrease.removeEventListener("click",s,!1),this.decrease.setAttribute("disabled","")):(this.decrease.addEventListener("click",s,!1),this.field.addEventListener("keydown",t,!1)),this.field.onblur=()=>{this.value=this.correctValue(Number(this.field.value)),this.field.value=this.value,this.setCookie()},this.field.addEventListener("keyup",(t=>{"Enter"===t.code&&this.field.blur()}),!1)),this.options.onInit&&this.options.onInit.call(this),this}ruleToSet(){switch(this.options.rule){case"currency":this.options.min=0,this.options.max="",this.options.step=.01,this.options.precision=2;break;case"quantity":this.options.min=1,this.options.max=999,this.options.step=1,this.options.precision=0;break;case"percent":this.options.min=0,this.options.max=100,this.options.step=1,this.options.precision=0;break;case"month":this.options.min=1,this.options.max=12,this.options.step=1,this.options.precision=0;break;case"day":this.options.min=1,this.options.max=31,this.options.step=1,this.options.precision=0;break;case"hour":this.options.min=0,this.options.max=24,this.options.step=1,this.options.precision=0;break;case"minute":this.options.min=0,this.options.max=59,this.options.step=1,this.options.precision=0;break;case"second":this.options.min=0,this.options.max=59,this.options.step=1,this.options.precision=0;break}}initValue(){""!==this.options.value?(""!==this.options.min&&this.options.value<this.options.min?this.value=this.options.min:""!==this.options.max&&this.options.value>this.options.max?this.value=this.options.max:this.value=this.options.value,this.field.value=this.value):this.field.value&&(""!==this.options.min&&this.options.min>Number(this.field.value)&&(this.field.value=this.options.min),""!==this.options.max&&this.options.max<Number(this.field.value)&&(this.field.value=this.options.max),this.value=this.field.value)}getCookie(){let t=axCookie.get(this.options.cookie);this.options.cookie&&t&&(this.value=t,this.field.value=t)}setCookie(){this.options.cookie&&axCookie.set(this.options.cookie,Number(this.field.value))}setAttribute(){this.options.disabled&&(this.field.setAttribute("disabled","true"),this.increase.setAttribute("diabled","true"),this.decrease.setAttribute("diabled","true")),this.options.increase||this.increase.setAttribute("diabled","true"),this.options.decrease||this.decrease.setAttribute("diabled","true"),!this.field.getAttribute("placeholder")&&this.field.setAttribute("placeholder",this.options.placeholder),this.options.width&&(this.parent.style.width=this.options.width)}createSkeleton(){this.targetDom&&"INPUT"!==this.targetDom.nodeName?(this.parent=this.targetDom,this.field=this.parent.querySelector("input"),this.increase=this.parent.querySelector("[increase]"),this.decrease=this.parent.querySelector("[decrease]")):(this.parent=axAddElem("div",{class:"ax-amount"}),this.field=this.targetDom?this.targetDom:axAddElem("input",{type:"text"}),this.decrease=axAddElem("a",{href:"###",decrease:""},'<i class="ax-iconfont ax-icon-minus"></i>'),this.increase=axAddElem("a",{href:"###",increase:""},'<i class="ax-iconfont ax-icon-plus"></i>'),this.field.insertAdjacentElement("beforeBegin",this.parent),this.parent.appendChild(this.field),this.parent.appendChild(this.decrease),this.parent.appendChild(this.increase))}correctValue(t){return""!==this.options.min&&t<this.options.min?t=this.options.min:""!==this.options.max&&t>this.options.max&&(t=this.options.max),t}set(t,e){return t=this.correctValue(t),this.field.value=t,this.value=t,this.options.cookie&&(this.value=axCookie.set(this.options.cookie,t)),e&&e.call(this,t),this}reset(t){return this.set(this.rawValue),t&&t.call(this,this.rawValue),this.options.cookie&&(this.value=axCookie.set(this.options.cookie,this.rawValue)),this}update(t,e){return this.options=axExtend(this.options,t),this.options.onUpdated&&this.options.onUpdated.call(this),"updated"in this.handlers&&this.emit("updated",""),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：页面社交分享；使用方法：new axShare('#id',{参数})
*/class axShare{constructor(t,e){this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",source:"",title:"",des:"",url:window.location.href,image:"",key:"",origin:window.location.origin,qrTitle:"<p>在微信里点击“发现”，再点击“扫一扫，”<br />便可将本文分享至朋友圈。</p>",qrSize:180,newPage:!0,dialogText:"确定分享本页面？",onShare:"",breakpoints:{}},e,this.targetDom,"axShare"),this.handlers={},this.options.source||(this.options.source=document.querySelector('meta[name="site"]')||document.title),this.options.title||(this.options.title=document.querySelector('meta[name="title"]')||document.title),this.options.des||(this.options.des=document.querySelector('meta[name="description"]')||""),this.options.image||(this.options.image=(document.images[0]||0).src||""),this.init()}init(){axInstance.push(this,this.options.insName,"share"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.shareUrl={qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+this.options.url+"&title="+this.options.title+"&desc="+this.options.des+"&summary="+this.options.summary+"&site="+this.options.source+"&pics="+this.options.image,youdao:"http://note.youdao.com/memory/?title="+this.options.title+"&pic="+this.options.image+"&summary="+this.options.des+"&url="+this.options.url,qq:"http://connect.qq.com/widget/shareqq/index.html?url="+this.options.url+"&title="+this.options.title+"&source="+this.options.source+"&desc="+this.options.des+"&pics="+this.options.image+"&summary="+this.options.summary,weibo:"https://service.weibo.com/share/share.php?url="+this.options.url+"&title="+this.options.title+"&pic="+this.options.image+"&appkey="+this.options.key,daoban:"http://shuo.douban.com/!service/share?href="+this.options.url+"&name="+this.options.title+"&text="+this.options.des+"&image="+this.options.image+"&starid=0&aid=0&style=11",linkedin:"http://www.linkedin.com/shareArticle?mini=true&ro=true&title="+this.options.title+"&url="+this.options.url+"&summary="+this.options.summary+"&source="+this.options.source+"&armin=armin",facebook:"https://www.facebook.com/sharer/sharer.php?u="+this.options.url,twitter:"https://twitter.com/intent/tweet?text="+this.options.title+"&url="+this.options.url+"&via="+this.options.origin,google:"https://plus.google.com/share?url="+this.options.url,pinterest:"https://www.pinterest.com/pin/create/button/?url="+this.options.url+"&description="+this.options.des+"&media="+this.options.image,tumblr:"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&url="+this.options.url+"&title="+this.options.title};for(let t in this.shareUrl)this.changeHref(t);if(this.targetDom.querySelector('[share="wechat"]')){if("undefined"==typeof QRCode)return!1;this.createQrcode()}}changeHref(t){let e=this.targetDom.querySelector("[share="+t+"]");e&&(e.hasAttribute("confirm")?e.addEventListener("click",(e=>{axPreventDefault(e),new axDialog({content:this.options.dialogText,footerType:"right",confirm:{callback:()=>{this.options.newPage?(window.open(this.shareUrl[t]),this.hide()):window.location.href=this.shareUrl[t],this.options.onShare&&this.options.onShare.call(this,t)}}}).show()}),!1):(this.options.newPage?e.setAttribute("target","_blank"):e.removeAttribute("target"),e.setAttribute("href",this.shareUrl[t]),e.addEventListener("click",(e=>{this.options.onShare&&this.options.onShare.call(this,t)}),!1)))}createQrcode(){let t=this.targetDom.querySelector('[share="wechat"]');if(0===t.length)return!1;let e=axAddElem("div",{class:"ax-qrcode"}),s=axAddElem("div",{class:"ax-qrcode-body"}),i=axAddElem("div",{class:"ax-qrcode-title"},this.options.qrTitle);new QRCode(s,{text:this.options.url,width:this.options.qrSize,height:this.options.qrSize}),e.appendChild(s),e.appendChild(i),new axPopup(t,{content:e,padding:!0,placement:"bottom",close:!1,footerShow:!1})}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：自动完成插件；使用方法：new axComplete('#id',{参数})
*/class axComplete{constructor(t,e){return this.inputDom=axIdToDom(t),!!this.inputDom&&(this.options=axExtend({insName:"",content:"",async:"",ajaxType:"post",fuzzy:!0,reorder:!1,limit:20,ignore:!0,keys:"label",template:"",className:"",breakShow:!0,msgShow:!0,msgPlace:"inside",highlight:!0,fill:"label",idStart:0,language:{message:"共有<# this.value #>个结果符合要求"},breakpoints:{},popup:{rel:"",triggerRel:"click"},onInit:"",onSearch:"",onSelected:"",onUpdate:"",onDestroy:""},e,this.inputDom,this.constructor.name),this.handlers={},this.inputEdit=()=>{let t=this.inputDom.value;this.search(t)},this.init(),this)}beforeInit(){this.inputDom.removeEventListener("input",this.inputEdit),this.popupIns&&(this.popupIns.destroy(),this.popupIns=null),this.contentXhr&&this.contentXhr.abort()}async init(){return this.beforeInit(),axInstance.push(this,this.options.insName,"complete"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.createSkeleton(),this.setAttribute(),this.popupIns=new axPopup(this.inputDom,axExtend({content:this.wrapperDom,trigger:"input",padding:!1,placement:"bottom-start",close:!1,footerShow:!1},this.options.popup)),this.popupIns.on("show",(()=>{let t=this.inputDom.value;this.inputDom.value="",this.inputDom.focus(),this.inputDom.value=t})),this.popupIns.on("hidden",(()=>{!this.inputDom.value&&this.reset()})),this.inputDom.addEventListener("input",this.inputEdit,!1),this.rawData=[],this.sliceData=[],this.filterData=[],"String"===axType(this.options.content)&&this.options.async?await this.getAsyncData(this.options.async,"",(t=>{this.getRawData(t)})):this.getRawData(this.options.content),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}createSkeleton(){this.wrapperDom=axAddElem("div",{class:"ax-complete"}),this.listDom=axAddElem("ul"),this.wrapperDom.appendChild(this.listDom),this.msgDom=axAddElem("div",{class:"ax-complete-msg"},axTplEngine(this.options.language.message,{value:0})),this.options.msgShow&&("newline"===this.options.msgPlace?this.inputDom.insertAdjacentElement("afterend",this.msgDom):axStrType(this.options.msgPlace)?axIdToDom(this.options.msgPlace).appendChild(this.msgDom):this.wrapperDom.insertAdjacentElement("afterbegin",this.msgDom))}setAttribute(){this.options.className&&axClass.add(this.wrapperDom,this.options.className),this.inputDom.setAttribute("autocomplete","off")}getRawData(t){let e=axType(t);if("String"===e)if(axStrType(t))this.rawData=axSelectToArr(t,this.options.idStart).data;else{let e=axSplitToArr(t);this.rawData=e.map(((t,e)=>({id:this.options.idStart+e,label:t,value:t})))}else"Array"===e&&("object"==typeof t[0]?(t.forEach(((t,e)=>{!t.hasOwnProperty("id")&&(t.id=this.options.idStart+e),!t.hasOwnProperty("value")&&(t.value=t.label)})),this.rawData=t):"string"==typeof t[0]&&(this.rawData=t.map(((t,e)=>({id:this.options.idStart+e,label:t,value:t})))));this.rawData.forEach((t=>{t.dom=axStrToDom(axTplEngine(this.getTemplate(),t)),t.dom.onclick=()=>{this.inputDom.value=t[this.options.fill],this.popupIns.hide(),this.handlers.hasOwnProperty("selected")&&this.emit("selected",t),this.options.onSelected&&this.options.onSelected.call(this,t)}})),this.sliceData=this.getSliceData(),this.reRenderList(this.sliceData)}getSliceData(){return this.options.limit>0?this.rawData.slice(0,this.options.limit):this.rawData}getFilterData(t){this.filterData=axArrSearch(t,this.options.keys,this.rawData,{fuzzy:this.options.fuzzy,reorder:this.options.reorder,limit:this.options.limit,ignore:this.options.ignore})}getAsyncData(t="json",e,s){return axAjax({data:"sql"===t?{value:axSplitToArr(e," ","one").join(","),keys:this.options.keys,fuzzy:this.options.fuzzy,limit:this.options.limit,reorder:this.options.reorder,ignore:this.options.ignore}:"",type:this.options.ajaxType,url:this.options.content,opened:t=>{this.contentXhr=t.xhr},success:t=>{if(axIsEmpty(t.content))return!1;this.listDom.innerHTML="",s&&s(t.content)}},this.listDom)}reRenderList(t){if(this.listDom.innerHTML="",axIsEmpty(t))return!1;let e=document.createDocumentFragment();t[0].hasOwnProperty("weight")?(t.forEach((t=>{if(this.options.highlight){let e=new RegExp(t.keys.join("|"),"g"),s=t.source.dom.querySelector("[label]")||t.source.dom.querySelector("[caption]");s.innerHTML=s.innerHTML.replace(/<[^>]+>/g,"").replace(e,(t=>`<s>${t}</s>`))}e.appendChild(t.source.dom)})),this.output=t):t.forEach((t=>{if(this.options.highlight){let e=t.dom.querySelector("[label]")||t.dom.querySelector("[caption]");e.innerHTML=e.innerHTML.replace(/<[^>]+>/g,"")}e.appendChild(t.dom)})),this.listDom.appendChild(e)}getTemplate(){let t=`<li>\n                        ${this.options.breakShow?"<hr/>":""}\n                        <div class="ax-bulletin ax-hover">\n                            <div class="ax-bulletin-body"><i caption><# this.label #></i></div>\n                        </div>\n                    </li>\n                        `;return this.options.template||t}async search(t,e){if(this.destroyed)return this;let s=[];return t?("String"==typeof this.options.content&&"sql"===this.options.async?await this.getAsyncData("sql",t,(t=>{this.getRawData(t),this.popupIns.show(),s=this.sliceData,this.msgDom.innerHTML=axTplEngine(this.options.language.message,{value:s.length})})):(this.getFilterData(t),0===this.filterData.length?this.listDom.innerHTML="":(this.reRenderList(this.filterData),this.popupIns.show(),s=this.filterData)),!(0!==s.length||"inside"===this.options.msgPlace&&this.options.msgShow)&&this.popupIns.hide(),this.msgDom.innerHTML=axTplEngine(this.options.language.message,{value:s.length})):this.popupIns.hide(),this.handlers.hasOwnProperty("search")&&this.emit("search",s),this.options.onSearch&&this.options.onSearch.call(this,s),e&&e.call(this,data),this}async update(t,e){return this.destroyed||(this.options.content=t,"String"==typeof this.options.content&&"sql"===this.options.async?await this.getAsyncData("sql","",(t=>{this.getRawData(t)})):this.getRawData(this.options.content),this.handlers.hasOwnProperty("update")&&this.emit("update",this.sliceData),this.options.onUpdate&&this.options.onUpdate.call(this,this.sliceData),e&&e.call(this,this.sliceData)),this}async reset(t){return this.destroyed||(this.inputDom.value="","String"==typeof this.options.content&&"sql"===this.options.async?await this.getAsyncData("sql","",(t=>{this.getRawData(t)})):this.getRawData(this.sliceData),this.handlers.hasOwnProperty("reset")&&this.emit("reset",this.sliceData),this.options.onReset&&this.options.onReset.call(this,this.sliceData),t&&t.call(this,this.sliceData)),this}destroy(t){return this.beforeInit(),this.destroyed=!0,this.contentXhr&&this.contentXhr.abort(),this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：页签切换；使用方法：axDate('#id',{参数})
 */class axDate{constructor(t,e){this.inputDom=axIdToDom(t),this.options=axExtend({insName:"",storageName:"",content:"",format:"YYYY/MM/DD",mode:"single",maxSelection:100,rows:1,cols:1,minDate:"",maxDate:"",flexible:!1,footerShow:!0,nowToHide:!1,nowShow:!1,clearShow:!0,closeShow:!0,cancelShow:!1,resultShow:!1,confirmToHide:!0,autoFill:!1,autoCorrect:!0,forceSelect:!1,language:{month:["01","02","03","04","05","06","07","08","09","10","11","12"],week:["一","二","三","四","五","六","日"],year:{prev:"上一页",next:"下一页",placeholder:"输入年份"},range:"至",unit:{Y:"年",M:"月",D:"日",h:"时",m:"分",s:"秒"},time:{select:"时间选择",start:"开始时间",end:"结束时间"},button:{clear:"清除",close:"关闭",cancel:"取消",now:"现在",confirm:"确定"},toolTip:{restore:"还原",reset:"归零",now:"现在",close:"关闭"},empty:'<i class="ax-color-ignore">还未选择日期!</i>',message:{requireTwoValue:"区间模式至少需要选择两个日期！",requireYearFormat:"请填入3或4位年份数字!",requireOneSelected:"请至少选择一个日期!"},noEvent:'<i class="ax-color-ignore">今天没有需要安排的事项!</i>'},weekStart:"monday",separator:",",buttonDom:"",positionDom:"",display:"popup",toDrawer:!0,bubble:{},fillNow:!1,next:"",lunar:{enable:!1,handler:"",map:{},template:"<div>农历：<#this.animal#>年 <#this.month#><#this.date#></div>\n                        <div>干支：<#this.gzYear#>年 <#this.gzMonth#>月 <#this.gzDate#>日</div>\n                        <div>节日/节气：<#this.term#> <#this.lunarFestival#> <#this.solarFestival#></div>\n                        ",arrange:["solarFestival","lunarFestival","term","date"],tags:[]},event:{enable:!1,display:"popup",template:"<div label><#this.label#></div><div content><#this.content#></div>",list:[]},menu:[],breakpoints:{},onInit:"",onClear:"",onSet:"",onSetRange:"",onCreatePanels:"",onCancel:"",onConfirm:"",onSetTime:"",onUpdate:"",onDestroy:"",onSave:""},e,this.inputDom,this.constructor.name),this.handlers={},this.triggerShow=()=>{this.active(this)},this.content=[],this.raw=[],this.monthStr=`\n            <li><span content><i label>01${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>02${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>03${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>04${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>05${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>06${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>07${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>08${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>09${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>10${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>11${this.options.language.unit.M}</i></span></li>\n            <li><span content><i label>12${this.options.language.unit.M}</i></span></li>\n        `,this.init()}init(){if(axInstance.push(this,this.options.insName,"date"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.destroyed=!1,this.data={startDate:"",selectedDates:[],type:"",panels:[],menu:[],year:{panelDom:"",listDom:"",list:[]},month:{panelDom:"",listDom:"",list:[]},time:[]},this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}return this.options.format=axTrim(this.options.format),this.data.type=axDateMethod.getType(this.options.format),"range"===this.options.mode&&1===this.options.cols&&(this.options.cols=2),"phone"===axClient()?("inline"!==this.options.display&&this.options.toDrawer&&(this.options.display="drawer"),this.options.lunar.enable?(this.options.cols=1,this.options.rows=1):this.options.cols>1&&(this.options.cols=1,this.options.rows=2),this.bilateralCondition=!1):this.bilateralCondition="time"!==this.data.type&&this.options.cols>1||"time"===this.data.type&&"range"===this.options.mode,this.separator="range"===this.options.mode&&this.options.language.range?this.options.language.range:this.options.separator,this.positionDom=this.options.positionDom?axIdToDom(this.options.positionDom):this.inputDom,this.buttonDom=this.options.buttonDom?axIdToDom(this.options.buttonDom):this.inputDom,this.selectedDatesProxy=new axObserve(this.data.selectedDates,{deep:!0}),this.selectedDatesProxy.instance.on("complete",(t=>{if(this.resultDom){let e=t.target.map((t=>axDateMethod.fillFormat(t,this.options.format))),s=this.resultIns.content.map((t=>t.value));this.options.resultShow&&this.resultIns&&JSON.stringify(e)!=JSON.stringify(s)&&this.resultIns.update({content:e})}this.options.autoFill&&this.confirm(!1)})),"time"!==this.data.type&&this.handleDayContent(),this.createSkeleton(),"time"!==this.data.type?this.createPanels():this.handleTimeContent(),"inline"===this.options.display?this.positionDom.insertAdjacentElement("afterend",this.targetDom):"popup"===this.options.display?this.bubbleIns=this.bubbleIns||new axPopup(this.positionDom,axExtend({size:"",padding:!1,placement:"bottom-start",close:!1,footerShow:!1,rel:this.options.buttonDom,content:this.targetDom},this.options.bubble)):"dialog"===this.options.display?this.bubbleIns=this.bubbleIns||new axDialog(axExtend({size:"",padding:!1,footerShow:!1,content:this.targetDom,rel:this.options.buttonDom},this.options.bubble),this.buttonDom):"drawer"===this.options.display&&(this.options.flexible=!0,this.bubbleIns=this.bubbleIns||new axDrawer(axExtend({size:"",padding:!1,footerShow:!1,content:this.targetDom,placement:"bottom",rel:this.options.buttonDom},this.options.bubble),this.buttonDom)),this.bubbleIns&&this.bubbleIns.on("show",(()=>{this.checkBeforeShow()})),this.setAttribute(),this.renderFinish(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}createPanel(t,e){let s=axDateMethod.toDate(e,this.data.type),i={},a=()=>"monday"===this.options.weekStart?`<li>${this.options.language.week[0]}</li>\n                            <li>${this.options.language.week[1]}</li>\n                            <li>${this.options.language.week[2]}</li>\n                            <li>${this.options.language.week[3]}</li>\n                            <li>${this.options.language.week[4]}</li>\n                            <li>${this.options.language.week[5]}</li>\n                            <li>${this.options.language.week[6]}</li>`:`<li>${this.options.language.week[6]}</li>\n                            <li>${this.options.language.week[0]}</li>\n                            <li>${this.options.language.week[1]}</li>\n                            <li>${this.options.language.week[2]}</li>\n                            <li>${this.options.language.week[3]}</li>\n                            <li>${this.options.language.week[4]}</li>\n                            <li>${this.options.language.week[5]}</li>`;this.data.type.includes("date")?(s.setMonth(s.getMonth()+t),i.month=s.getMonth(),i.year=s.getFullYear(),i.panelDom=axStrToDom(`\n                            <li panel='${this.options.lunar.enable?"lunar":"date"}'>\n                                <div header>\n                                    <span year><i>${i.year}</i>${this.options.language.unit.Y}</span><span month><i>${i.month+1}</i>${this.options.language.unit.M}</span>\n                                </div>\n                                <div body days>\n                                    <ul column>\n                                        ${a()}\n                                    </ul>\n                                    <ul list></ul>\n                                </div>\n                            </li>\n                            `),i.type="date",i.headerDom=i.panelDom.querySelector("[header]"),i.yearDom=i.headerDom.querySelector("[year]"),i.monthDom=i.headerDom.querySelector("[month]"),i.listDom=i.panelDom.querySelector("[list]"),i.list=this.createPanelDayList(i.listDom,s)):"month"===this.data.type?(s.setFullYear(s.getFullYear()+t),i.year=s.getFullYear(),i.panelDom=axStrToDom(`\n                        <li panel='month'>\n                            <div header>\n                                <span year><i>${i.year}</i>${this.options.language.unit.Y}</span>\n                            </div>\n                            <div body>\n                                <ul list>${this.monthStr}</ul>\n                            </div>\n                        </li>\n                        `),i.type="month",i.headerDom=i.panelDom.querySelector("[header]"),i.yearDom=i.headerDom.querySelector("[year]"),i.listDom=i.panelDom.querySelector("[list]"),i.list=this.createPanelMonthList(i.listDom,s)):"year"===this.data.type&&(s.setFullYear(s.getFullYear()+18*t-7),i.year=s.getFullYear(),i.panelDom=axStrToDom(`\n            <li panel='year'>\n                <div header>\n                    <span year><i>${i.year}</i>${this.options.language.unit.Y}~<i>${i.year+17}</i>${this.options.language.unit.Y}</span>\n                </div>\n                <div body>\n                    <ul list></ul>\n                </div>\n            </li>\n            `),i.type="year",i.headerDom=i.panelDom.querySelector("[header]"),i.listDom=i.panelDom.querySelector("[list]"),i.list=this.createPanelYearList(i.listDom,s)),i.bodyDom=i.panelDom.querySelector("[body]"),this.data.panels.push(i),this.panelsDom.appendChild(i.panelDom)}createPanels(t,e=!1,s){if(this.destroyed)return!1;let i,a=this.options.rows*this.options.cols;if(i=t?axDateMethod.toDate(t,this.data.type):this.data.startDate,!e&&this.inCurPanels(i))return!1;this.data.panels=[],this.panelsDom.innerHTML="";for(let t=0;t<a;t++)this.createPanel(t,i);this.data.startDate=i;let o=this.getCurGrids();o.forEach((t=>{this.inSelectedDate(t)&&!t.selected&&this.selectedAttrToggle(t,!0)})),"range"===this.options.mode&&this.setRangeAttr(o);let n=axDateMethod.toObj(new Date,!1,this.data.type),r=o.find((t=>JSON.stringify(t.value)==JSON.stringify(n)));return r&&r.wrapperDom.setAttribute("now",""),this.renderFinish(),this.handlers.hasOwnProperty("createPanels")&&this.emit("createPanels",""),this.options.onCreatePanels&&this.options.onCreatePanels.call(this),s&&s.call(this),this}inSelectedDate(t){let e=this.getDateValue(t,this.data.type);return this.selectedDatesProxy.proxy.some((t=>{let{hh:s,mm:i,ss:a,...o}=t;return JSON.stringify(o)==JSON.stringify(e)}))}showEvent(t){if(this.todayDom.innerHTML=axDateMethod.fillFormat(t.value,"YYYY年MM月DD日 周WW"),this.options.lunar.enable&&this.options.lunar.handler){let e={...this.options.lunar.map},s=this.options.lunar.handler(t.value.YYYY,t.value.MM+1,t.value.DD);for(let t in e)e.hasOwnProperty(t)&&(e[t]=s[e[t]]);this.lunarDom.innerHTML=axTplEngine(this.options.lunar.template,e)}let e=this.options.event.list.find((e=>JSON.stringify(axDateMethod.toObj(e.date,!1,"date"))==JSON.stringify(axDateMethod.toObj(t.value,!1,"date"))));this.eventDom.innerHTML=e&&e.content?axTplEngine(this.options.event.template,e):this.options.language.noEvent}inCurPanels(t,e){let s,i="datetime"===this.data.type?"date":this.data.type,a="Object"===axType(t)?{...t}:t,o=axDateMethod.toObj(a,!1,i);return s=(e||this.getCurGrids()).some((t=>JSON.stringify(t.value)==JSON.stringify(o))),s}setAttribute(){!this.bilateralCondition&&this.targetDom.setAttribute("footerType","line"),this.targetDom.setAttribute("mode",this.options.mode),this.data.type&&this.targetDom.setAttribute("type",this.data.type),this.targetDom.setAttribute("display",this.options.display),"INPUT"===this.inputDom.nodeName&&this.inputDom.setAttribute("readonly",""),this.options.flexible&&this.targetDom.setAttribute("flexible",""),this.targetDom.setAttribute("footerShow",this.options.footerShow),this.options.lunar.enable&&this.targetDom.setAttribute("lunar","")}inputValueToDates(t=!0){let e,s=[];return e="INPUT"===this.inputDom.nodeName?this.inputDom.value.trim():this.inputDom.innerText.trim(),!e||isNaN(parseFloat(e.substr(0,2)))||e&&(s=t?e.split(this.separator).map((t=>new Date(t))):axTrim(e)),s}contentToArr(){let t=axType(this.options.content),e=[];if("time"===this.data.type)this.inputDom&&(this.inputDom.value||this.inputDom.innerText)?e=this.inputValueToDates(!1):axIsEmpty(this.options.content)?e=axDateMethod.fillFormat(new Date,this.options.format):"String"===t?e=this.options.content.split(this.separator):"Array"===t&&(e=this.options.content);else if(axIsEmpty(this.options.content))e=this.inputDom&&(this.inputDom.value||this.inputDom.innerText)?this.inputValueToDates(!0):this.options.fillNow?[new Date]:[];else{let t=axType(this.options.content);"Array"===t?e=this.options.content.map((t=>"string"==typeof t?new Date(t):t)):"Date"===t?e.push(this.options.content):"String"===t&&(e=this.options.content.split(this.separator).map((t=>new Date(t))))}return e}handleDayContent(){this.content=this.contentToArr(),this.content.length>1&&"range"===this.options.mode&&(this.content.sort((function(t,e){return t-e})),this.content.length>2&&(this.content=this.content.slice(0,2))),this.data.startDate=0===this.content.length?new Date:this.content[0];let t=this.datesToObjs(this.content);if(this.selectedDatesProxy.proxy.splice(0,this.data.selectedDates.length,...t),this.raw=[...t],this.inputDom){let t=this.selectedDatesProxy.proxy.map((t=>axDateMethod.fillFormat(t,this.options.format))).join(this.separator);this.fillInput(t)}}timeStrSTD(t,e="object"){let s=axType(t),i=[],a=[],o=t=>{let e,s,i=axType(t);if("String"===i)e=axTrim(t).split(":").map((t=>~~t)),1===e.length?e.push(0,0):2===e.length&&e.push(0),s={hh:e[0],mm:e[1],ss:e[2]};else if("Object"===i){for(let e in t)t.hasOwnProperty(e)&&(t[e]=~~t[e]);!t.hasOwnProperty("mm")&&(t.mm=0),!t.hasOwnProperty("ss")&&(t.ss=0),s=t}return s};return"Array"===s?t.forEach((t=>{i.push(o(t))})):i.push(o(t)),"string"===e?(a=i.map((t=>`${axDateMethod.fillZero(t.hh)}:${axDateMethod.fillZero(t.mm)}:${axDateMethod.fillZero(t.ss)}`)),a):i}handleTimeContent(){if(this.content=this.timeStrSTD(this.contentToArr()),"range"===this.options.mode?0===this.content.length?this.setTime([{hh:0,mm:0,ss:0},{hh:0,mm:0,ss:0}]):1===this.content.length?this.setTime([this.content[0],{hh:0,mm:0,ss:0}]):this.setTime(this.content):0===this.content.length?this.setTime({hh:0,mm:0,ss:0}):this.setTime(this.content[0]),this.raw=[...this.content],this.inputDom&&!axIsEmpty(this.options.content)){let t=this.timeStrSTD(this.content,"string").join(this.separator);"INPUT"===this.inputDom.nodeName?this.inputDom.value=t:this.inputDom.innerText=t}}datesToObjs(t){let e=[];return"year"===this.data.type?e=t.map((t=>({YYYY:t.getFullYear()}))):"month"===this.data.type?e=t.map((t=>({YYYY:t.getFullYear(),MM:t.getMonth()}))):"time"===this.data.type?e=t.map((t=>({hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()}))):"date"===this.data.type?e=t.map((t=>({YYYY:t.getFullYear(),MM:t.getMonth(),DD:t.getDate()}))):"datetime"===this.data.type&&(e=t.map((t=>({YYYY:t.getFullYear(),MM:t.getMonth(),DD:t.getDate(),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()})))),e}checkBeforeShow(){if(!this.options.autoCorrect)return!1;if("time"!==this.data.type){let t=this.inputValueToDates(),e=this.datesToObjs(t);JSON.stringify(e)==JSON.stringify(this.data.selectedDates)||(this.data.startDate=t.length>0?t[0]:axDateMethod.toDate(this.data.selectedDates[0],this.data.type),this.createPanels(),this.clear(),this.set(e))}else{let t=this.timeStrSTD(this.inputValueToDates(!1));this.setTime(t)}}createSkeleton(){let t="",e="";"time"!==this.data.type&&(t=`<div outer>\n                            <div prev></div>\n                                <div next></div>\n                                <ul panels ${this.bilateralCondition?'style="grid-template-columns:repeat('+this.options.cols+', 1fr)"':""}></ul>\n                            </div>`),this.options.footerShow&&(e=`<div footer>\n                            ${this.bilateralCondition?"<div left></div><div right></div>":""}\n                            </div>`),this.targetDom=axStrToDom(`\n        <div class="ax-date">\n            <div wrapper>\n                ${this.options.menu.length>0?"<ul menu></ul>":""}\n                <div main>\n                    ${this.options.resultShow&&"time"!==this.data.type?"<div result></div>":""}\n                    ${t}\n                    ${e}\n                </div>\n            </div>\n        </div>\n    `),this.wrapperDom=this.targetDom.querySelector("[wrapper]"),this.menuDom=this.targetDom.querySelector("[menu]"),this.resultDom=this.targetDom.querySelector("[result]"),this.outerDom=this.targetDom.querySelector("[outer]"),this.prevDom=this.targetDom.querySelector("[prev]"),this.nextDom=this.targetDom.querySelector("[next]"),this.mainDom=this.targetDom.querySelector("[main]"),this.panelsDom=this.targetDom.querySelector("[panels]"),this.options.footerShow&&(this.footerDom=this.targetDom.querySelector("[footer]"),this.timeBtnWrapperDom=this.bilateralCondition?this.footerDom.querySelector("[left]"):this.footerDom,this.handleBtnsWrapperDom=this.bilateralCondition?this.footerDom.querySelector("[right]"):this.footerDom,this.confirmDom=axAddElem("i",{class:`ax-btn${this.bilateralCondition?"":" ax-plain"} `,confirm:""},this.options.language.button.confirm),this.clearDom=this.options.clearShow?axAddElem("i",{class:"ax-btn ax-plain",clear:""},this.options.language.button.clear):"",this.closeDom=this.options.closeShow?axAddElem("i",{class:"ax-btn ax-plain",close:""},this.options.language.button.close):"",this.cancelDom=this.options.cancelShow?axAddElem("i",{class:"ax-btn ax-plain",cancel:""},this.options.language.button.cancel):"",this.nowDom=this.options.nowShow?axAddElem("i",{class:"ax-btn ax-plain",now:""},this.options.language.button.now):"",this.timeBtnDom=this.data.type.includes("time")?axAddElem("i",{class:"ax-btn ax-plain",time:""},this.options.language.time.select):"",this.yearSearchDom="year"===this.data.type?axAddElem("span",{search:""},`<input type="text" placeholder="${this.options.language.year.placeholder}" /><i go>arrow-right</i>`):"",this.confirmDom&&this.handleBtnsWrapperDom.appendChild(this.confirmDom),this.nowDom&&this.handleBtnsWrapperDom.insertAdjacentElement("afterbegin",this.nowDom),this.clearDom&&this.handleBtnsWrapperDom.insertAdjacentElement("afterbegin",this.clearDom),this.closeDom&&this.handleBtnsWrapperDom.insertAdjacentElement("afterbegin",this.closeDom),this.cancelDom&&this.handleBtnsWrapperDom.insertAdjacentElement("afterbegin",this.cancelDom),this.timeBtnDom&&this.timeBtnWrapperDom.insertAdjacentElement("afterbegin",this.timeBtnDom),this.yearSearchDom&&this.timeBtnWrapperDom.insertAdjacentElement("afterbegin",this.yearSearchDom)),this.options.event.enable&&(this.detailDom=axAddElem("div",{detail:""}),this.todayDom=axAddElem("div",{today:""}),this.eventDom=axAddElem("div",{event:""},this.options.language.noEvent),this.detailDom.appendChild(this.todayDom),this.detailDom.appendChild(this.eventDom),this.options.lunar.enable&&this.options.lunar.handler&&(this.lunarDom=axAddElem("div",{lunar:""}),this.todayDom.insertAdjacentElement("afterend",this.lunarDom)),"inline"===this.options.event.display?this.wrapperDom.appendChild(this.detailDom):"popup"===this.options.event.display&&(this.detailIns=this.detailIns||new axPopup(this.panelsDom,{content:this.detailDom,trigger:"hovor",placement:"bottom",size:"sm",footerShow:!1}))),this.data.type.includes("time")&&this.options.footerShow&&this.createTimeSelectPanel(),this.createMenu(),"time"!==this.data.type&&(this.resultDom&&(this.resultIns=this.resultIns||new axTags(this.resultDom,{content:"",closable:!0,text:!0,emptyTip:this.options.language.empty})),"year"===this.data.type||"month"===this.data.type?(this.prevDom.innerHTML='<i prevYear class= "ax-iconfont ax-icon-left-double"></i> ',this.nextDom.innerHTML='<i nextYear class= "ax-iconfont ax-icon-right-double"></i> '):this.data.type.includes("date")&&(this.prevDom.innerHTML='<i prevYear class= "ax-iconfont ax-icon-left-double"></i> <i prevMonth class="ax-iconfont ax-icon-left"></i>',this.nextDom.innerHTML='<i nextYear class= "ax-iconfont ax-icon-right-double"></i> <i nextMonth class="ax-iconfont ax-icon-right"></i>'),this.prevYearDom=this.prevDom.querySelector("[prevYear]"),this.prevMonthDom=this.prevDom.querySelector("[prevMonth]"),this.nextYearDom=this.targetDom.querySelector("[nextYear]"),this.nextMonthDom=this.targetDom.querySelector("[nextMonth]"),("month"===this.data.type||this.data.type.includes("date"))&&this.createYearPanel(),this.data.type.includes("date")&&this.createMonthPanel())}createMenu(){if(this.options.menu.length>0){this.data.menu=this.options.menu;let t=document.createDocumentFragment();this.data.menu.forEach((e=>{let s=axAddElem("li","",e.label);e.dom=s,t.appendChild(s)})),this.menuDom.appendChild(t),this.data.menu.forEach((t=>{t.dom.onclick=()=>{t.action&&t.action.call(this),t.dom.setAttribute("selected",""),t.selected=!0,this.data.menu.filter((e=>e!==t)).forEach((t=>{Reflect.deleteProperty(t,"selected"),t.dom.removeAttribute("selected")}))}}))}}createMonthPanel(t){this.data.month.panelDom=axAddElem("div",{panel:"month"},`<div body><ul list>${this.monthStr}</ul></div>`),this.data.month.listDom=this.data.month.panelDom.querySelector("[list]"),[...this.data.month.listDom.children].forEach(((t,e)=>{let s={wrapperDom:t,contentDom:t.querySelector("[content]"),value:e};this.data.month.list.push(s)})),this.panelsDom.insertAdjacentElement("afterend",this.data.month.panelDom),t&&t()}createYearPanel(t){this.data.year.panelDom=axAddElem("div",{panel:"year"},`\n    <div body>\n                        <ul list></ul>\n                        <ul pages>\n                            <li><i prev>${this.options.language.year.prev}</i></li>\n                            <li><input type="text" placeholder=${this.options.language.year.placeholder} class="ax-sm"/><i go>arrow-right</i></li>\n                            <li><i next>${this.options.language.year.next}</i></li>\n                        </ul>\n                    </div>\n    `),this.data.year.listDom=this.data.year.panelDom.querySelector("[list]"),this.data.year.prevDom=this.data.year.panelDom.querySelector("[prev]"),this.data.year.nextDom=this.data.year.panelDom.querySelector("[next]"),this.data.year.inputDom=this.data.year.panelDom.querySelector("input"),this.data.year.goDom=this.data.year.panelDom.querySelector("[go]"),this.panelsDom.insertAdjacentElement("afterend",this.data.year.panelDom),t&&t()}createYearList(t,e,s){this.data.year.listDom.innerHTML="",this.data.year.list=[];for(let s=0;s<15;s++){let i=e||0===e?e+s:t.year-7+s,a={wrapperDom:axAddElem("li","",`<span content> <i label>${i}年</i></span> `),value:i};a.contentDom=a.wrapperDom.querySelector("[content]"),a.labelDom=a.wrapperDom.querySelector("[label]"),this.data.year.listDom.appendChild(a.wrapperDom),this.data.year.list.push(a)}this.data.year.list.forEach((e=>{t.year===e.value?this.selectedAttrToggle(e,!0):this.selectedAttrToggle(e,!1),e.contentDom.onclick=()=>{if(e.disabled)return!1;if(t.year!==e.value){let t=e.value;"month"===this.data.type?t=e.value-s:this.data.type.includes("date")&&(t=e.value-(this.data.panels[s].year-this.data.panels[0].year)),this.data.startDate.setFullYear(t),this.createPanels("",!0),axHide(this.data.year.panelDom)}}}))}goto(t,e=!1,s){if(this.destroyed)return!1;let i=axDateMethod.toDate(t,this.data.type);e?this.set(i):this.createPanels(i),s&&s.call(this)}offset(t,e){if(this.destroyed)return!1;if(this.data.selectedDates.length>0){let e=this.data.selectedDates.map((e=>axDateMethod.toObj(axDateMethod.getChain(e,t),!1,this.data.type)));this.set(e)}else this.data.startDate=axDateMethod.getChain(axDateMethod.toObj(new Date,!1,this.data.type),t),this.set(this.data.startDate);e&&e.call(this)}selectedAttrToggle(t,e){e?t.selected||(Reflect.set(t,"selected",!0),t.wrapperDom.setAttribute("selected","")):t.selected&&(Reflect.deleteProperty(t,"selected"),t.wrapperDom.removeAttribute("selected"))}setSelected(t,e,s){let i=this.findFromPanels(t,e,s),a=i.list,o=i.target,n=t=>{let e={};return e="range"===this.options.mode?1===this.selectedDatesProxy.proxy.length?this.data.type.includes("time")?{...t,...this.data.time[1].value}:t:this.data.type.includes("time")?{...t,...this.data.time[0].value}:t:this.data.time.length>0&&this.data.type.includes("time")?{...t,...this.data.time[0].value}:t,e};a.includes(t)||o||(this.createPanels(t.hasOwnProperty("value")?t.value:t),o=this.findFromPanels(t).target),!o.selected&&(e=>{let s;if(s=this.data.type.includes("time")?t.hasOwnProperty("hh")&&t.hasOwnProperty("mm")&&t.hasOwnProperty("ss")?t:n(e.value):t.value||t,!e.disabled){if("range"===this.options.mode){let t=this.selectedDatesProxy.proxy.length;if(t<2){if(this.selectedDatesProxy.proxy.push(s),1===t){let t={...this.data.selectedDates[0]},e={...this.data.selectedDates[1]};axDateMethod.toDate(t)>axDateMethod.toDate(e)&&(this.selectedDatesProxy.proxy.sort(((t,e)=>axDateMethod.toDate(t)-axDateMethod.toDate(e))),this.assignDaytime()),this.setRange(this.data.selectedDates)}}else this.clear(!1),this.selectedDatesProxy.proxy.splice(0,this.selectedDatesProxy.proxy.length,s)}else if("single"===this.options.mode){if(this.inSelectedDate(s))return!1;this.clear(!1),this.selectedDatesProxy.proxy.splice(0,this.selectedDatesProxy.proxy.length,s)}else"multiple"===this.options.mode&&!this.inSelectedDate(s)&&this.selectedDatesProxy.proxy.push(s);this.selectedAttrToggle(e,!0)}})(o),this.options.event.enable&&o&&this.showEvent(o)}setUnselected(t,e,s){if(axIsEmpty(t))return!1;let i=s||this.getCurGrids(),a=this.findFromPanels(t,e,i).target,o=[];a&&this.selectedAttrToggle(a,!1),o=this.data.selectedDates.filter((e=>!axDateMethod.isSameDay(e,t.hasOwnProperty("value")?t.value:t))),this.selectedDatesProxy.proxy.splice(0,this.data.selectedDates.length,...o),"range"===this.options.mode&&this.data.selectedDates.length<2&&i.forEach((t=>{this.removeRangeAttr(t)}))}setRangeAttr(t){if(2!==this.data.selectedDates.length)return!1;let e=t||this.getCurGrids(),s="datetime"===this.data.type?"date":this.data.type;e.forEach((t=>{this.removeRangeAttr(t),this.selectedAttrToggle(t,!1),axDateMethod.toDate(t.value,s)>axDateMethod.toDate(this.data.selectedDates[0],s)&&axDateMethod.toDate(t.value,s)<axDateMethod.toDate(this.data.selectedDates[1],s)&&t.wrapperDom.setAttribute("contain","")}));let i=this.findFromPanels(this.data.selectedDates[0],"",e).target,a=this.findFromPanels(this.data.selectedDates[1],"",e).target;i&&(i.wrapperDom.setAttribute("start",""),this.selectedAttrToggle(i,!0)),a&&(a.wrapperDom.setAttribute("end",""),this.selectedAttrToggle(a,!0))}removeRangeAttr(t){t.wrapperDom.hasAttribute("start")&&t.wrapperDom.removeAttribute("start"),t.wrapperDom.hasAttribute("end")&&t.wrapperDom.removeAttribute("end"),t.wrapperDom.hasAttribute("contain")&&t.wrapperDom.removeAttribute("contain")}limitRange(t,e,s){if(!this.options.minDate||!this.options.maxDate||t.disabled)return!1;let i,a=axDateMethod.toDate(t.value,e),o=axDateMethod.toDate(this.options.minDate,e),n=axDateMethod.toDate(this.options.maxDate,e);var r;"date"===e||"month"===e?i=this.options.minDate&&a<o||this.options.maxDate&&a>n:"year"===e?i=this.options.minDate&&t.value.YYYY<~~this.options.minDate||this.options.maxDate&&t.value.YYYY>~~this.options.maxDate:"time"===e&&(o=axDateMethod.toObj(this.options.minDate,!1,e),n=axDateMethod.toObj(this.options.maxDate,!1,e),i=t.value<o[s]||t.value>n[s]),r=t,i&&(r.disabled=!0,r.wrapperDom.setAttribute("disabled",""))}getDateValue(t,e){let s=axType(t),i={};"Object"===s?i=t.hasOwnProperty("value")?t.value:t:"Number"===s?i=this.data.selectedDates[t]:"String"!==s&&"Date"!==s||(i=axDateMethod.toObj(t,!1,this.data.type));let{hh:a,mm:o,ss:n,...r}=i;return"year"===e?(Reflect.deleteProperty(r,"DD"),Reflect.deleteProperty(r,"MM")):"month"===e&&Reflect.deleteProperty(r,"DD"),r}getCurGrids(){return this.data.panels.map((t=>t.list)).flat(1/0).filter((t=>!t.exceed))}findFromPanels(t,e,s){let i=this.getDateValue(t,this.data.type),a=s||this.getCurGrids();return{target:e||a.find((t=>JSON.stringify(t.value)==JSON.stringify(i))),list:a}}renderFinish(){if("time"!==this.data.type){let t=this.getCurGrids();if(this.data.panels.forEach((e=>{e.list.forEach((e=>{e.contentDom.onclick=()=>{if(e.disabled)return!1;if(this.data.selectedDates.length>this.options.maxSelection)return!1;let s=t.find((t=>JSON.stringify(t.value)==JSON.stringify(e.value)));"multiple"===this.options.mode&&s&&s.selected?this.setUnselected(e,s,t):this.setSelected(e,s,t),this.handlers.hasOwnProperty("set")&&this.emit("set",e),this.options.onSet&&this.options.onSet.call(this,e)},this.detailIns&&(e.contentDom.onmouseenter=()=>{this.showEvent(e),this.detailIns.updatePosition(e.contentDom).show()})}))})),this.resultIns&&(this.resultIns.on("remove",((t,e)=>{let s=this.getCurGrids(),i=this.findFromPanels(e[0],"",s).target;i&&this.selectedAttrToggle(i,!1),this.selectedDatesProxy.proxy.splice(e[0],1),s.forEach((t=>{this.removeRangeAttr(t)}))})),this.resultIns.on("update",(()=>{this.resultIns.content.forEach((t=>{t.dom.onclick=e=>{e.target.hasAttribute("close")||this.findFromPanels(t.value).target||this.createPanels(t.value)}}))}))),this.prevYearDom&&(this.prevYearDom.onclick=()=>{let t=-1;"year"===this.data.type?t=-18*this.options.cols*this.options.rows:"month"===this.data.type&&(t=-this.options.cols*this.options.rows),this.createPanels(axDateMethod.getChain(this.data.startDate,{YYYY:t}),!0)}),this.nextYearDom&&(this.nextYearDom.onclick=()=>{let t=1;"year"===this.data.type?t=18*this.options.cols*this.options.rows:"month"===this.data.type&&(t=this.options.cols*this.options.rows),this.createPanels(axDateMethod.getChain(this.data.startDate,{YYYY:t}),!0)}),this.data.type.includes("date")&&(this.prevMonthDom.onclick=()=>{this.createPanels(axDateMethod.getChain(this.data.startDate,{MM:-1}),!0)},this.nextMonthDom.onclick=()=>{this.createPanels(axDateMethod.getChain(this.data.startDate,{MM:1}),!0)}),this.data.panels.forEach(((t,e)=>{t.yearDom&&(t.yearDom.onclick=()=>{this.data.year.panelDom.style.top=t.panelDom.offsetTop+t.headerDom.clientHeight+"px",this.data.year.panelDom.style.left=t.panelDom.offsetLeft+"px",this.data.month.panelDom&&axIsVisible(this.data.month.panelDom)&&axHide(this.data.month.panelDom),this.createYearList(t,"",e),axToggle(this.data.year.panelDom)},this.data.year.prevDom.onclick=()=>{this.createYearList(t,this.data.year.list[0].value-15,e)},this.data.year.nextDom.onclick=()=>{this.createYearList(t,this.data.year.list[14].value+1,e)},this.data.year.goDom.onclick=()=>{this.searchYearToRefresh(this.data.year.inputDom)},this.data.year.inputDom.onkeyup=t=>{"Enter"===t.code&&this.searchYearToRefresh(this.data.year.inputDom)}),t.monthDom&&(t.monthDom.onclick=()=>{this.data.month.panelDom.style.top=t.panelDom.offsetTop+t.headerDom.clientHeight+"px",this.data.month.panelDom.style.left=t.panelDom.offsetLeft+"px",axIsVisible(this.data.year.panelDom)&&axHide(this.data.year.panelDom),this.data.month.list.forEach((s=>{t.month===s.value?this.selectedAttrToggle(s,!0):this.selectedAttrToggle(s,!1),s.contentDom.onclick=()=>{t.month!==s.value&&(this.data.startDate.setMonth(s.value-e),this.createPanels("",!0),axHide(this.data.month.panelDom))}})),axToggle(this.data.month.panelDom)})})),this.data.selectedDates.forEach(((e,s)=>{let i=this.findFromPanels(e,"",t).target;i&&(this.selectedAttrToggle(i,!0),0===s&&this.options.event.enable&&this.showEvent(i))})),this.yearSearchDom){let t=this.yearSearchDom.querySelector("[go]"),e=this.yearSearchDom.querySelector("input");t.onclick=()=>{this.searchYearToRefresh(e,!1)},e.onkeyup=t=>{"Enter"===t.code&&this.searchYearToRefresh(e,!1)}}this.timePanelsDom&&("range"===this.options.mode?0===this.data.selectedDates.length?this.setTime([{hh:0,mm:0,ss:0},{hh:0,mm:0,ss:0}]):1===this.data.selectedDates.length?this.setTime([this.data.selectedDates[0],{hh:0,mm:0,ss:0}]):this.setTime(this.data.selectedDates):0===this.data.selectedDates.length?this.setTime({hh:0,mm:0,ss:0}):this.setTime(this.data.selectedDates[0]),this.timeBtnDom&&(this.timeBtnDom.onclick=()=>{axSlideToggle(this.timePanelsDom,"inline-grid",(()=>{this.openTimeToPrevent()}))}))}if(this.options.footerShow&&(this.confirmDom.onclick=()=>{this.confirm()},this.nowDom&&(this.nowDom.onclick=()=>{this.now()}),this.clearDom&&(this.clearDom.onclick=()=>{this.clear(!0)}),this.cancelDom&&(this.cancelDom.onclick=()=>{this.bubbleIns.hide(),this.fillInput(""),this.clear(!0)})),this.data.type.includes("time")&&this.data.time.length>0){let t=this.data.time.map((t=>t.colsDom)).flat(1/0);"inline"===this.options.display?this.openTimeToPrevent(t):this.bubbleIns&&this.bubbleIns.on("shown",(()=>{this.openTimeToPrevent(t)}))}this.bubbleIns?this.bubbleIns.on("shown",(()=>{this.setResultWidth()})):this.setResultWidth(),this.save()}setResultWidth(){this.resultDom&&(this.resultDom.style.maxWidth=this.panelsDom.getBoundingClientRect().width+"px")}openTimeToPrevent(t){(t||this.data.time.map((t=>t.colsDom)).flat(1/0)).forEach((t=>{this.showForemost(t)}))}searchYearToRefresh(t,e=!0){let s=t.value;!s||isNaN(s)||3!==s.length&&4!==s.length?new axMessage({result:"error",iconShow:!0,content:this.options.language.message.requireYearFormat}).show():(this.data.startDate.setFullYear(~~s),this.createPanels(),e&&axHide(this.data.year.panelDom))}createPanelDayList(t,e){t.innerHTML="";let s=axDateMethod.toDate(e,this.data.type);s.setDate(1);let i,a=[],o=s.getMonth(),n=s.getFullYear(),r=axDateMethod.getDays(s),l=axDateMethod.getChain(s,{MM:-1}),h=l.getMonth(),p=l.getFullYear(),d=axDateMethod.getChain(s,{MM:1}),c=d.getMonth(),m=d.getFullYear(),u=document.createDocumentFragment();i="monday"===this.options.weekStart?0===s.getDay()?7:s.getDay():0===s.getDay()?1:s.getDay()+1;let g=1;for(let t=1;t<=42;){let e,s={wrapperDom:axAddElem("li"),contentDom:axAddElem("span",{content:""}),labelDom:axAddElem("i",{label:""})};if(s.wrapperDom.appendChild(s.contentDom),s.contentDom.appendChild(s.labelDom),t<i?(e=axDateMethod.getDays({YYYY:p,MM:h})-i+t+1,s.value={YYYY:p,MM:h,DD:e},s.exceed=!0,s.wrapperDom.setAttribute("exceed","")):t>=i+r?(e=t-i-r+1,s.value={YYYY:m,MM:c,DD:e},s.exceed=!0,s.wrapperDom.setAttribute("exceed","")):(e=g,s.value={YYYY:n,MM:o,DD:e},g++),s.label=e,s.labelDom.innerText=e,this.limitRange(s,"date"),this.options.lunar&&this.options.lunar.handler){let t=this.options.lunar.handler(s.value.YYYY,s.value.MM+1,s.value.DD);if(t&&-1!=t){let e="",i="";for(let s of this.options.lunar.arrange)if(this.options.lunar.map.hasOwnProperty(s)&&t[this.options.lunar.map[s]]){e=t[this.options.lunar.map[s]],s.includes("Festival")?i="festival":"term"===s&&(i=s);break}s.lunarDom=axAddElem("u","",e),i&&s.lunarDom.setAttribute(i,""),s.labelDom.insertAdjacentElement("afterend",s.lunarDom)}if(this.options.lunar.tags.length>0)for(let t of this.options.lunar.tags){let e=axDateMethod.toObj(t.date,!1,this.data.type),i=axAddElem("s",t.props,t.content);if(JSON.stringify(e)==JSON.stringify(s.value)){s.contentDom.appendChild(i);break}}}if(this.options.event.enable)for(let t of this.options.event.list){let e=axDateMethod.toObj(t.date,!1,this.data.type);if(JSON.stringify(e)==JSON.stringify(s.value)){s.busy=!0,s.wrapperDom.setAttribute("busy","");break}}t++,u.appendChild(s.wrapperDom),a.push(s)}return t.appendChild(u),a}createPanelMonthList(t,e){let s=[];return[...t.children].forEach(((t,i)=>{let a={wrapperDom:t,contentDom:t.querySelector("[content]"),value:{YYYY:e.getFullYear(),MM:i}};this.limitRange(a,"month"),s.push(a)})),s}createPanelYearList(t,e){let s=[],i=document.createDocumentFragment();for(let t=0;t<18;t++){let a=e.getFullYear()+t,o=axAddElem("li","",`<span content><i label>${a}年</i></span>`),n={wrapperDom:o,value:{YYYY:a}};n.contentDom=n.wrapperDom.querySelector("[content]"),this.limitRange(n,"year"),s.push(n),i.appendChild(o)}return t.appendChild(i),s}createLoopStr(t){let e="<li>";for(let s=0;s<t;s++)e+=`<div> <span content><i label>${axDateMethod.fillZero(s)}</i></span></div> `;return e+="</li>",e}createTimeList(t){return`\n    <li panel = "time">\n                        <span tools><i restore title='${this.options.language.toolTip.restore}'></i><i reset title='${this.options.language.toolTip.reset}'></i><i now title='${this.options.language.toolTip.now}'></i><i hide title='${this.options.language.toolTip.close}'></i></span>\n                        <div header>\n                            <span time>${t}</span>\n                        </div>\n                        <div body>\n                            <ul column>\n                                <li>${this.options.language.unit.h}</li>\n                                <li>${this.options.language.unit.m}</li>\n                                <li>${this.options.language.unit.s}</li>\n                            </ul>\n                            <ul list>\n                            ${this.createLoopStr(24)}\n                            ${this.createLoopStr(60)}\n                            ${this.createLoopStr(60)}\n                            </ul>\n                        </div>\n                    </li>\n    `}toggleTimeList(t,e){this.selectedAttrToggle(t,!0);let s=e.find((e=>e!=t&&e.selected));s&&this.selectedAttrToggle(s,!1)}getTimeListArr(t,e){let s=t.children,i=[];return[...s].forEach(((t,s)=>{let a={wrapperDom:t,contentDom:t.querySelector("[content]"),value:s};this.options.format.includes(e)||(a.disabled=!0,a.wrapperDom.setAttribute("disabled","")),this.limitRange(a,"time",e),i.push(a)})),i}showForemost(t){let e=axType(t),s=t=>{let e=t.querySelector("[selected]"),s=e.getBoundingClientRect().height*Math.floor(~~e.innerText/2);e&&!axChildVisible(e,t)&&(t.scrollTop=s)};"Array"===e?t.forEach((t=>{s(t)})):s(t)}createTimeSelectPanel(){this.timePanelsDom=axAddElem("ul",{panels:"hms"}),"range"===this.options.mode?this.timePanelsDom.innerHTML=this.createTimeList(this.options.language.time.start)+this.createTimeList(this.options.language.time.end):this.timePanelsDom.innerHTML=this.createTimeList(this.options.language.time.select),[...this.timePanelsDom.querySelectorAll("[panel]")].forEach((t=>{let e=[...t.querySelectorAll("[list] li")],s={panelDom:t,colsDom:e,restoreDom:t.querySelector("[restore]"),resetDom:t.querySelector("[reset]"),nowDom:t.querySelector("[now]"),closeDom:t.querySelector("[hide]"),value:{},hh:this.getTimeListArr(e[0],"hh"),mm:this.getTimeListArr(e[1],"mm"),ss:this.getTimeListArr(e[2],"ss")};this.data.time.push(s)})),this.footerDom.insertAdjacentElement("beforebegin",this.timePanelsDom),this.data.time.forEach(((t,e)=>{t.closeDom.onclick=()=>{axSlideUp(this.timePanelsDom,"inline-grid")},t.restoreDom.onclick=()=>{this.raw[e]&&this.setTime(this.raw[e],e,!0)},t.resetDom.onclick=()=>{this.setTime({hh:0,mm:0,ss:0},e,!0)},t.nowDom.onclick=()=>{let t=axDateMethod.toObj(new Date,!1,this.data.type);this.setTime({hh:t.hh,mm:t.mm,ss:t.ss},e,!0)},t.hh.forEach((s=>{s.contentDom.onclick=()=>{if(s.selected||s.disabled)return!1;this.toggleTimeList(s,t.hh),t.value.hh=s.value,this.timeToUpdate(t,e,!0),this.handlers.hasOwnProperty("setTime")&&this.emit("setTime",s),this.options.onSetTime&&this.options.onSetTime.call(this,s)}})),t.mm.forEach((s=>{s.contentDom.onclick=()=>{if(s.selected||s.disabled)return!1;this.toggleTimeList(s,t.mm),t.value.mm=s.value,this.timeToUpdate(t,e,!0),this.handlers.hasOwnProperty("setTime")&&this.emit("setTime",s),this.options.onSetTime&&this.options.onSetTime.call(this,s)}})),t.ss.forEach((s=>{s.contentDom.onclick=()=>{if(s.selected||s.disabled)return!1;this.toggleTimeList(s,t.ss),t.value.ss=s.value,this.timeToUpdate(t,e,!0),this.handlers.hasOwnProperty("setTime")&&this.emit("setTime",s),this.options.onSetTime&&this.options.onSetTime.call(this,s)}}))}))}timeToUpdate(t,e,s=!1){s&&this.setTimeBtnHTML(),"time"===this.data.type||"single"!==this.options.mode&&"range"!==this.options.mode||this.data.selectedDates.length>=e+1&&Object.assign(this.selectedDatesProxy.proxy[e],t.value),"time"===this.data.type&&this.options.autoFill&&this.confirm(!1)}setTimeBtnHTML(){if(!this.data.type.includes("time")||!this.timeBtnDom)return!1;let t=this.data.time.map((t=>axIsEmpty(t.value)?this.options.language.time.select:`${axDateMethod.fillZero(t.value.hh)}:${axDateMethod.fillZero(t.value.mm)}:${axDateMethod.fillZero(t.value.ss)}`));this.timeBtnDom.innerHTML=t.join("~")}setTime(t,e=0,s=!1,i){if(axIsEmpty(t)||!this.data.type.includes("time")||this.destroyed)return!1;let a=axType(t),o=(e,i)=>{let a;a="string"==typeof e?axDateMethod.strToTimeObj(t):e,this.data.time[i].value.hh=a.hh,this.toggleTimeList(this.data.time[i].hh[a.hh],this.data.time[i].hh),this.data.time[i].value.mm=a.mm,this.toggleTimeList(this.data.time[i].mm[a.mm],this.data.time[i].mm),this.data.time[i].value.ss=a.ss,this.toggleTimeList(this.data.time[i].ss[a.ss],this.data.time[i].ss),s&&"datetime"===this.data.type&&this.timeToUpdate(this.data.time[i],i)};"Array"===a?t.forEach(((t,e)=>{this.data.time.length>e&&o(t,e)})):o(t,e),this.setTimeBtnHTML(),this.handlers.hasOwnProperty("setTime")&&this.emit("setTime",t),this.options.onSetTime&&this.options.onSetTime.call(this,t),i&&i.call(this)}assignDaytime(){this.selectedDatesProxy.proxy.forEach(((t,e)=>{this.data.time[e]&&Object.assign(t,this.data.time[e].value)}))}confirm(t=this.options.confirmToHide,e){if(this.destroyed)return this;let s="";if("time"!==this.data.type){if("range"===this.options.mode)if(0===this.data.selectedDates.length)s="";else{if(2!==this.data.selectedDates.length)return new axMessage({result:"error",iconShow:!0,content:this.options.language.message.requireTwoValue}).show(),!1;{let t=axDateMethod.fillFormat(this.data.selectedDates[0],this.options.format),e=axDateMethod.fillFormat(this.data.selectedDates[1],this.options.format);s=`${t}${this.options.language.range}${e} `}}else if(s=this.data.selectedDates.map((t=>axDateMethod.fillFormat(t,this.options.format))).join(this.options.separator),this.options.forceSelect&&!s)return new axMessage({result:"error",iconShow:!0,content:this.options.language.message.requireOneSelected}).show(),!1}else s=this.data.time.map((t=>axDateMethod.fillFormat(t.value,this.options.format))).join(this.separator);if(this.fillInput(s),t&&this.bubbleIns){this.bubbleIns.hide();let t=this.options.next?axInstance.find(this.options.next,"date"):null;t&&t.bubbleIns&&t.bubbleIns.show()}this.handlers.hasOwnProperty("confirm")&&this.emit("confirm",s),this.options.onConfirm&&this.options.onConfirm.call(this,s),e&&e.call(this,s)}fillInput(t){this.inputDom&&("INPUT"===this.inputDom.nodeName?this.inputDom.value=t:this.inputDom.innerHTML=t),this.save()}now(t=this.options.nowToHide){if(this.destroyed)return this;let e=axDateMethod.toObj(new Date,!1,this.data.type);"time"===this.data.type?this.setTime(e):(this.timePanelsDom&&"range"!==this.options.mode&&this.setTime(e),this.setSelected(e)),t&&(this.confirm(),this.bubbleIns&&this.bubbleIns.hide())}save(t,e){return this.destroyed?this:!!this.options.storageName&&(setTimeout((()=>{t?(!t.hasOwnProperty("content")&&(t.content=this.inputValueToDates(!1)),axLocalStorage.set(this.options.storageName,t)):axLocalStorage.set(this.options.storageName,Object.assign(this.options,{content:this.inputValueToDates(!1)}));let s=axLocalStorage.get(this.options.storageName);this.handlers.hasOwnProperty("save")&&this.emit("save",s),this.options.onSave&&this.options.onSave.call(this,s),e&&e.call(this,s)}),0),this)}removeInstances(){this.targetDom.remove(),this.bubbleIns&&(this.bubbleIns.destroy(),this.bubbleIns=null),this.detailIns&&(this.detailIns.destroy(),this.detailIns=null),this.resultIns&&(this.resultIns.destroy(),this.resultIns=null),this.options.storageName&&axLocalStorage.set(this.options.storageName,{})}update(t,e){return this.destroyed||(this.removeInstances(),this.options=axExtend(this.options,t),this.init(),this.handlers.hasOwnProperty("update")&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this)),this}destroy(t){return this.removeInstances(),this.inputDom.onclick=null,this.positionDom&&(this.positionDom.onclick=null),this.buttonDom&&(this.buttonDom.onclick=null),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}setValuesToObjs(t){let e=axType(t),s=[];if("Array"===e&&(s=t),"Date"===e)s=[t];else if("Object"===e)s=[t];else if("String"===e){let e;e=t.includes(this.options.separator)?this.options.separator:this.separator,s=t.split(e)}return 0===s.length?[]:s.map((t=>axDateMethod.toObj(t,!1,this.data.type)))}set(t,e){if(axIsEmpty(t)||this.destroyed)return!1;let s=this.setValuesToObjs(t);return 0!==s.length&&("range"===this.options.mode?(s.length>=2?(s.splice(2,s.length-2),this.setRange(s)):this.setSelected(s[0]),this.setTime(s,"",!0)):"single"===this.options.mode?(this.setSelected(s[0]),this.setTime(s[0],0,!0)):"multiple"===this.options.mode&&s.forEach((t=>{this.setSelected(t)})),this.handlers.hasOwnProperty("set")&&this.emit("set",s),this.options.onSet&&this.options.onSet.call(this,s),e&&e.call(this,s),this)}setRange(t,e){if(axIsEmpty(t)||2!==t.length||this.destroyed)return!1;let s=t.map((t=>axDateMethod.toObj(t,!0,this.data.type))),i=this.getCurGrids();return axDateMethod.sort(s),this.selectedDatesProxy.proxy.splice(0,this.selectedDatesProxy.proxy.length,...s),this.inCurPanels(s[0],i)||this.inCurPanels(s[1],i)?this.setTime(s):this.createPanels(s[0]),this.setRangeAttr(),this.handlers.hasOwnProperty("ranged")&&this.emit("ranged",s),this.options.onRanged&&this.options.onRanged.call(this,s),e&&e.call(this,s),this}cancel(t,e){if(axIsEmpty(t)||this.destroyed)return!1;let s=this.setValuesToObjs(t);return 0!==s.length&&(s.forEach((t=>{this.setUnselected(t)})),this.handlers.hasOwnProperty("cancel")&&this.emit("cancel",s),this.options.onCancel&&this.options.onCancel.call(this,s),e&&e.call(this,s),this)}clear(t=!0,e){if(this.destroyed)return this;if("time"!==this.data.type){this.selectedDatesProxy.proxy.splice(0),this.resultIns&&this.resultIns.clear(),this.getCurGrids().forEach((t=>{t.selected&&this.selectedAttrToggle(t,!1),this.removeRangeAttr(t)}))}if(t&&this.timePanelsDom)for(let t in this.data.time)this.setTime({hh:0,mm:0,ss:0},t);return this.handlers.hasOwnProperty("clear")&&this.emit("clear",""),this.options.onClear&&this.options.onClear.call(this),e&&e.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：轮滑选择；改造自ion.rangeSlider | https://github.com/IonDen/ion.rangeSlider；使用方法：new axRange('#id',{参数})
*/class axRange{constructor(t,e){let s=axIdToDom(t);if(!s)return!1;"INPUT"===s.nodeName?(this.inputDom=s,this.inputDom.type="hidden",this.targetDom=axAddElem("div",{class:"ax-range"}),s.insertAdjacentElement("beforebegin",this.targetDom),this.targetDom.appendChild(s)):(this.targetDom=s,this.targetDom.classList.add("ax-range"),this.inputDom=axAddElem("input",{type:"hidden"}),this.targetDom.appendChild(this.inputDom)),this.options=axExtend({insName:"",storageName:"",name:"",step:1,max:100,min:0,value:0,multiple:!1,locked:!1,limitShow:!0,tipShow:!0,result:{enable:!1,format:"<#this.value#>"},fence:[0,0],button:{enable:!1,step:1,decrease:'<i class="ax-iconfont ax-icon-minus-o-f"></i>',increase:'<i class="ax-iconfont ax-icon-plus-o-f"></i>'},classes:"",keyboard:!1,separator:",",hyphen:"~",ruler:{enable:!1,majorEqual:4,minorEqual:"auto",labels:[]},axis:"x",disabled:!1,onInit:"",onSet:"",onToMin:"",onToMax:"",onReset:"",onEnable:"",onDisable:"",onUpdate:"",onDestroy:"",onSave:""},e,"INPUT"===s.nodeName?this.inputDom:this.targetDom,this.constructor.name),this.handlers={},this.isMobi=axIsMobi(),this.inputDom.name&&(this.inputDom.name=this.options.name),this.handles={},this.yCoef="y"===this.options.axis?-1:1,this.tows={from:null,to:null,single:null,thumb:null},this.attrMap="x"===this.options.axis?{size:"width",offset:"left"}:{size:"height",offset:"bottom"},this.keyFun=t=>{t.stopPropagation(),t.cancelable&&t.preventDefault(),["ArrowLeft","ArrowDown"].includes(t.code)?this.decrease():["ArrowRight","ArrowUp"].includes(t.code)&&this.increase(),document.activeElement!==this.targetDom&&document.removeEventListener("keydown",this.keyFun)},this.clickFun=()=>{document.activeElement===this.targetDom?(document.removeEventListener("keydown",this.keyFun),document.addEventListener("keydown",this.keyFun)):document.removeEventListener("keydown",this.keyFun)},setTimeout((()=>{this.init()}),0)}init(){if(axInstance.push(this,this.options.insName,"range"),this.destroyed=!1,this.options.storageName){axLocalStorage.set(this.options.storageName,{},!1);let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)||(this.options=axExtend(this.options,t))}this.rawValue=axClone(this.options.value),this.places=Math.max(this.options.min.toString().split(".")[1]?this.options.min.toString().split(".")[1].length:0,this.options.max.toString().split(".")[1]?this.options.max.toString().split(".")[1].length:0),this.output={value:null,ratio:null},this.getRangeValues(),this.getInitialValue(),this.initRender(),this.setAttribute(),this.getSize(),this.setValues(this.initialValue),this.ticks=[],this.setTicks();let t=this;return this.options.disabled||(this.options.button.enable&&(this.decreaseDom.onclick=()=>this.decrease(),this.increaseDom.onclick=()=>this.increase()),this.options.multiple?(this.setHandleTow("from"),this.setHandleTow("to"),this.tempRatios=[...this.output.ratio],this.thumbTow=new axTow(this.thumbDom,{onStart:function(){},onMove:function(e){e.originEvent.stopPropagation(),e.originEvent.cancelable&&e.originEvent.preventDefault(),t.slideSet(t.thumbDom,e.diff[t.options.axis]*t.yCoef)},onEnd:()=>{this.tempRatios=[...this.output.ratio]}})):this.setHandleTow("single"),this.baseDom.onclick=e=>{let s,i=axGetClientObj(e);if(!i)return!1;if(s=(i[this.options.axis]-this.baseDom.getBoundingClientRect()[this.attrMap.offset])*this.yCoef,this.options.multiple){let e=this.output.ratio[0]*this.size.track,i=this.output.ratio[1]*this.size.track;s>i?this.slideSet(t.thumbDom,s-i-this.size.handle/2):s<i&&this.slideSet(t.thumbDom,s-e-this.size.handle/2),this.tempRatios=[...this.output.ratio]}else this.slideSet(this.handles.single,s-this.size.handle/2)},this.options.multiple||(this.thumbDom.onclick=t=>{let e,s=axGetClientObj(t);s&&(e=(s[this.options.axis]-this.baseDom.getBoundingClientRect()[this.attrMap.offset])*this.yCoef,this.slideSet(this.handles.single,e-this.size.handle/2))}),this.bubbles.min&&(this.bubbles.min.onclick=()=>{this.toMin()}),this.bubbles.max&&(this.bubbles.max.onclick=()=>{this.toMax()}),this.options.keyboard&&(document.removeEventListener("click",this.clickFun),document.addEventListener("click",this.clickFun))),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}setHandleTow(t){let e=this;this.tows[t]=new axTow(this.handles[t],{onStart:function(){this.offset=axStyle(e.handles[t])[e.attrMap.offset]},onMove:function(s){s.originEvent.stopPropagation(),s.originEvent.cancelable&&s.originEvent.preventDefault(),e.slideSet(e.handles[t],parseFloat(this.offset)+s.diff[e.options.axis]*e.yCoef)},onEnd:()=>{"single"!==t&&(this.tempRatios=[...this.output.ratio])}})}setHandleActive(t){t.setAttribute("active","");for(let e in this.handles)this.handles[e]!==t&&this.handles[e].removeAttribute("active")}getRangeValues(){let t,e;this.options.fence.sort(),this.options.fence[0]!==this.options.fence[1]?this.options.fence[1]<this.options.min?t=e=this.options.min:this.options.fence[0]>this.options.max?t=e=this.options.max:this.options.fence[0]<this.options.min&&this.options.fence[1]>this.options.max?(e=this.options.min,t=this.options.max):this.options.fence[0]<this.options.min?(e=this.options.min,t=this.options.fence[1]):this.options.fence[1]>this.options.max?(e=this.options.fence[0],t=this.options.max):(e=this.options.fence[0],t=this.options.fence[1]):(e=this.options.min,t=this.options.max),this.rangeValues={min:e,max:t}}getRatioFromValue(t){return(t-this.options.min)/(this.options.max-this.options.min)*this.size.ratio.full}getValueFromRatio(t){return t*(this.options.max-this.options.min)/this.size.ratio.full+this.options.min}decrease(t=this.output.value[1]-this.output.value[0]){let e=this.output.value[0]-this.options.step;this.options.multiple?(e<this.rangeValues.min&&(e=this.rangeValues.min),this.options.locked?this.setValues([e,e+t]):this.setValues([e,this.output.value[1]])):this.setValues(this.output.value-this.options.step),this.options.multiple&&(this.tempRatios=[...this.output.ratio])}increase(t=this.output.value[1]-this.output.value[0]){let e=this.output.value[1]+this.options.step;this.options.multiple?(e>this.rangeValues.max&&(e=this.rangeValues.max),this.options.locked?this.setValues([e-t,e]):this.setValues([this.output.value[0],e])):this.setValues(this.output.value+this.options.step),this.options.multiple&&(this.tempRatios=[...this.output.ratio])}setAttribute(){this.targetDom.setAttribute("axis",this.options.axis),this.targetDom.setAttribute("tabindex","0"),axClass.add(this.targetDom,this.options.classes),this.options.multiple&&this.targetDom.setAttribute("multiple",""),this.options.disabled&&this.targetDom.setAttribute("disabled","")}getSize(){let t=(this.handles.single||this.handles.from).getBoundingClientRect()[this.attrMap.size],e=this.trackDom.getBoundingClientRect()[this.attrMap.size],s=this.bubbles.min?this.bubbles.min.getBoundingClientRect()[this.attrMap.size]:0,i=this.bubbles.max?this.bubbles.max.getBoundingClientRect()[this.attrMap.size]:0,a=(e-t)/e,o=t/2/e,n=(this.rangeValues.min-this.options.min)/(this.options.max-this.options.min)*a,r=(this.rangeValues.max-this.options.min)/(this.options.max-this.options.min)*a;this.size={handle:t,track:e,ruler:0,bubble:{min:s,max:i,from:0,to:0,single:0},ratio:{radius:o,min:n,max:r,full:a}}}getInitialValue(){this.inputDom.value?this.inputDom.value.includes(this.options.separator)?(this.options.multiple=!0,this.initialValue=this.inputDom.value.split(this.options.separator).map((t=>parseFloat(t))).sort()):this.initialValue=this.options.multiple?[parseFloat(this.inputDom.value),this.options.max]:parseFloat(this.inputDom.value):this.options.multiple&&!Array.isArray(this.options.value)?this.initialValue=[this.options.value,this.options.max]:!this.options.multiple&&Array.isArray(this.options.value)?(this.options.multiple=!0,this.initialValue=[...this.options.value].sort()):(this.initialValue=this.options.value,Array.isArray(this.initialValue)&&this.initialValue.sort()),this.initialValue=this.correctValue(this.initialValue)}correctValue(t){let e;return Array.isArray(t)?(e=[axNumber(axClampValue({value:t[0],...this.rangeValues}),{places:this.places}),axNumber(axClampValue({value:t[1],...this.rangeValues}),{places:this.places})],e[0]>e[1]&&(e[0]=e[1])):e=axNumber(axClampValue({value:t,...this.rangeValues}),{places:this.places}),this.options.multiple?Array.isArray(e)?e:[e,this.rangeValues.max]:Array.isArray(e)?e[0]:e}initRender(){this.wrapperDom?this.wrapperDom.innerHTML="":(this.wrapperDom=axAddElem("div",{class:"ax-range-wrapper"}),this.targetDom.appendChild(this.wrapperDom)),this.bubbles={},this.wrapperDom.innerHTML=`\n        ${this.options.button.enable?'<span class="ax-range-btn" decrease>'+this.options.button.decrease+"</span>":""}\n        <div class="ax-range-main">\n            <div class="ax-range-track">\n                <div base></div>\n                <div thumb></div>\n            </div>\n            <div class="ax-range-bubble">\n                ${this.options.limitShow?"<span min>"+this.options.min+"</span><span max>"+this.options.max+"</span>":""}\n            </div>\n            <div class="ax-range-handle"></div>\n            <div class="ax-range-ruler"><ul></ul></div>\n        </div>\n        ${this.options.button.enable?'<span class="ax-range-btn"  increase>'+this.options.button.increase+"</span>":""}\n        ${this.options.result.enable?'<span class="ax-range-result"></span>':""}\n        `,this.decreaseDom=this.wrapperDom.querySelector("[decrease]"),this.increaseDom=this.wrapperDom.querySelector("[increase]"),this.resultDom=this.wrapperDom.querySelector(".ax-range-result"),this.mainDom=this.wrapperDom.querySelector(".ax-range-main"),this.trackDom=this.wrapperDom.querySelector(".ax-range-track"),this.thumbDom=this.wrapperDom.querySelector("[thumb]"),this.baseDom=this.wrapperDom.querySelector("[base]"),this.bubbleDom=this.wrapperDom.querySelector(".ax-range-bubble"),this.bubbles.min=this.bubbleDom.querySelector("[min]"),this.bubbles.max=this.bubbleDom.querySelector("[max]"),this.handleDom=this.wrapperDom.querySelector(".ax-range-handle"),this.rulerDom=this.wrapperDom.querySelector(".ax-range-ruler"),this.tickDom=this.rulerDom.querySelector("ul"),this.options.multiple?(this.handles.from=axAddElem("span",{from:""}),this.handles.to=axAddElem("span",{to:""}),this.handleDom.append(this.handles.from,this.handles.to),this.options.tipShow&&(this.bubbles.from=axAddElem("span",{from:""}),this.bubbles.to=axAddElem("span",{to:""}),this.bubbles.merge=axAddElem("span",{merge:""}),this.bubbleDom.append(this.bubbles.from,this.bubbles.to,this.bubbles.merge))):(this.handles.single=axAddElem("span",{single:""}),this.handleDom.append(this.handles.single),this.options.tipShow&&(this.bubbles.single=axAddElem("span",{single:""}),this.bubbleDom.append(this.bubbles.single)))}setValues(t,e){if(this.destroyed)return this;this.output.value=this.correctValue(t);let s=100*this.size.ratio.radius,i=t=>axNumber(t,{places:this.places});if(Array.isArray(this.output.value)){this.output.ratio=[this.getRatioFromValue(this.output.value[0]),this.getRatioFromValue(this.output.value[1])];let t=100*this.output.ratio[0],e=100*this.output.ratio[1];this.handles.from.style[this.attrMap.offset]=`${t}%`,this.handles.to.style[this.attrMap.offset]=`${e}%`,this.size.ratio.center=this.output.ratio[1],this.thumbDom.style[this.attrMap.size]=e-t+"%",this.thumbDom.style[this.attrMap.offset]=`${t+s}%`,this.size.thumb=this.thumbDom.getBoundingClientRect()[this.attrMap.size],this.options.tipShow&&(this.bubbles.from.style[this.attrMap.offset]=`${t}%`,this.bubbles.from.innerHTML=i(this.output.value[0]),this.bubbles.to.style[this.attrMap.offset]=`${e}%`,this.bubbles.to.innerHTML=i(this.output.value[1]),this.bubbles.merge.style[this.attrMap.offset]=`${t+(e-t)/2}%`,this.bubbles.merge.innerHTML=`${i(this.output.value[0])}<i>${this.options.hyphen}</i>${i(this.output.value[1])}`,this.size.bubble.from=this.bubbles.from.getBoundingClientRect()[this.attrMap.size],this.size.bubble.to=this.bubbles.to.getBoundingClientRect()[this.attrMap.size],this.mergeTips())}else{this.output.ratio=this.getRatioFromValue(this.output.value);let t=100*this.output.ratio;this.handles.single.style[this.attrMap.offset]=`${t}%`,this.thumbDom.style[this.attrMap.size]=`${t+s}%`,this.size.thumb=this.thumbDom.getBoundingClientRect()[this.attrMap.size],this.options.tipShow&&(this.bubbles.single.style[this.attrMap.offset]=`${t}%`,this.bubbles.single.innerHTML=i(this.output.value),this.size.bubble.single=this.bubbles.single.getBoundingClientRect()[this.attrMap.size])}return this.options.limitShow&&this.hideEnds(),this.inputDom.value=this.output.value+"",this.options.result.enable&&(this.resultDom.innerHTML=axTplEngine(this.options.result.format,{value:this.output.value+""})),this.save(),this.handlers.hasOwnProperty("set")&&this.emit("set",this.output),this.options.onSet&&this.options.onSet.call(this,this.output),e&&e.call(this,this.output),this}getValues(){return this.output}toMax(t){if(this.destroyed)return this;let e,s;return this.options.multiple?(s=this.rangeValues.max-this.output.value[1],e=[this.output.value[0]+s,this.output.value[1]+s]):e=this.rangeValues.max,this.setValues(e),this.handlers.hasOwnProperty("toMax")&&this.emit("toMax",e),this.options.onToMax&&this.options.onToMax.call(this,e),t&&t.call(this,e),this}toMin(t){if(this.destroyed)return this;let e,s;return this.options.multiple?(s=this.rangeValues.min-this.output.value[0],e=[this.output.value[0]+s,this.output.value[1]+s]):e=this.rangeValues.min,this.setValues(e),this.handlers.hasOwnProperty("toMin")&&this.emit("toMin",e),this.options.onToMin&&this.options.onToMin.call(this,e),t&&t.call(this,e),this}slideSet(t,e){if(this.destroyed)return this;let s;if(t===this.thumbDom&&this.options.multiple){let t=this.tempRatios[0]+e/this.size.track,i=t+(this.tempRatios[1]-this.tempRatios[0]),a=this.getValueFromRatio(t),o=this.getValueFromRatio(i),n=this.getValueFromRatio(i)-this.getValueFromRatio(t);s=this.options.locked?a<this.rangeValues.min?[this.rangeValues.min,this.rangeValues.min+n]:o>this.rangeValues.max?[this.rangeValues.max-n,this.rangeValues.max]:[a,o]:[a,o]}else{let i=e/this.size.track;t===this.handles.from?(i>this.output.ratio[1]?i=this.output.ratio[1]:i<this.size.ratio.min&&(i=this.size.ratio.min),s=[this.getValueFromRatio(i),this.output.value[1]]):t===this.handles.to?(i>this.size.ratio.max?i=this.size.ratio.max:i<this.output.ratio[0]&&(i=this.output.ratio[0]),s=[this.output.value[0],this.getValueFromRatio(i)]):t===this.handles.single&&(i>this.size.ratio.max?i=this.size.ratio.max:i<this.size.ratio.min&&(i=this.size.ratio.min),s=this.getValueFromRatio(i))}this.setValues(s)}mergeTips(){this.size.thumb<(this.size.bubble.from+this.size.bubble.to)/2?this.targetDom.setAttribute("merge",""):this.targetDom.removeAttribute("merge")}hideEnds(){if(this.options.multiple){let t=this.output.ratio[0]*this.size.track,e=this.output.ratio[1]*this.size.track;t<this.size.bubble.min+this.size.bubble.from/2-this.size.handle/2?this.targetDom.setAttribute("tostart",""):this.targetDom.removeAttribute("tostart"),this.size.track-e<this.size.bubble.max+this.size.bubble.from/2+this.size.handle/2?this.targetDom.setAttribute("toend",""):this.targetDom.removeAttribute("toend")}else{let t=this.output.ratio*this.size.track;t<this.size.bubble.min+this.size.bubble.single/2-this.size.handle/2?this.targetDom.setAttribute("tostart",""):this.targetDom.removeAttribute("tostart"),this.size.track-t<this.size.bubble.max+this.size.bubble.single/2+this.size.handle/2?this.targetDom.setAttribute("toend",""):this.targetDom.removeAttribute("toend")}}setTicks(){if(this.options.ruler.enable){this.ceilValue=(this.options.max-this.options.min)/this.options.ruler.majorEqual,this.size.ruler=this.rulerDom.getBoundingClientRect()[this.attrMap.size];for(let t=0;t<=this.options.ruler.majorEqual;t++){let e=axNumber(this.options.min+this.ceilValue*t,{places:this.places}),s=this.options.ruler.labels.length>0?this.options.ruler.labels[t]:e,i=t/this.options.ruler.majorEqual,a=axAddElem("li",{style:`${this.attrMap.offset}:${100*i}%`,"data-content":s});this.tickDom.appendChild(a),a.onclick=()=>{this.setValues(e)},this.ticks.push({index:t,dom:a,ratio:i,content:s,value:e}),t!==this.options.ruler.majorEqual&&this.setMinorTicks(i)}if(this.options.fence[0]!==this.options.fence[1]){let t=this.options.max-this.options.min,e=(this.options.fence[1]-this.options.fence[0])/t,s=(this.options.fence[0]-this.options.min)/t;this.fenceDom=axAddElem("div",{style:`${this.attrMap.size}:${100*e}%;${this.attrMap.offset}:${100*s}%`}),this.rulerDom.appendChild(this.fenceDom)}}}setMinorTicks(t){let e=0,s=0,i=this.size.ruler/this.options.ruler.majorEqual;"auto"===this.options.ruler.minorEqual?e=i<40?5:i>=40&&i<80?6:i>=80&&i<160?7:i>=160&&i<320?8:i>=320&&i>=640?9:10:this.options.ruler.minorEqual>0&&(e=this.options.ruler.minorEqual),s=1/(e*this.options.ruler.majorEqual);for(let i=0;i<e;i++)this.tickDom.insertAdjacentHTML("beforeend",`<li style="${this.attrMap.offset}:${100*(t+s*i)}%"></li>`)}disable(t){return this.targetDom.setAttribute("disabled",""),this.handlers.hasOwnProperty("disable")&&this.emit("disable",""),this.options.onDisable&&this.options.onDisable.call(this),t&&t.call(this),this}enable(t){return this.targetDom.removeAttribute("disabled"),this.handlers.hasOwnProperty("enable")&&this.emit("enable",""),this.options.onEnable&&this.options.onEnable.call(this),t&&t.call(this),this}save(t,e){if(this.destroyed)return this;if(!this.options.storageName)return!1;t?(t.value=this.output.value,axLocalStorage.set(this.options.storageName,t,{cover:!1})):axLocalStorage.set(this.options.storageName,{value:this.output.value},{cover:!1});let s=axLocalStorage.get(this.options.storageName);return this.handlers.hasOwnProperty("save")&&this.emit("save",s),this.options.onSave&&this.options.onSave.call(this,s),e&&e.call(this,s),this}reset(t){return this.destroyed||(this.setValues(this.rawValue),this.handlers.hasOwnProperty("reset")&&this.emit("reset",""),this.options.onReset&&this.options.onReset.call(this),t&&t.call(this)),this}update(t,e){return this.destroyed||(this.save(t),this.options=axExtend(this.options,t),this.init(),this.handlers.hasOwnProperty("update")&&this.emit("update",t),this.options.onUpdate&&this.options.onUpdate.call(this,t),e&&e.call(this)),this}destroy(t){this.options.keyboard&&(document.removeEventListener("keydown",this.keyFun),document.removeEventListener("click",this.clickFun)),this.bubbles.min&&(this.bubbles.min.onclick=null),this.bubbles.max&&(this.bubbles.max.onclick=null),this.ticks.forEach((t=>{t.onclick=null})),this.options.button.enable&&(this.decreaseDom.onclick=null,this.increaseDom.onclick=null),this.baseDom.onclick=null,this.options.multiple||(this.thumbDom.onclick=null),this.bubbles.min&&(this.bubbles.min.onclick=null),this.bubbles.max&&(this.bubbles.max.onclick=null);for(let t in this.tows)this.tows.hasOwnProperty(t)&&this.tows[t]&&this.tows[t].destroy();return this.destroyed=!0,"destroy"in this.handlers&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：分页；使用方法：new axPagination('#id',{参数})
 * 从现有的list中自动创建分页
 * 从已知的数组创建列表并分页
 * 可追加列表item数量并重新渲染分页
 * 分页节点能自动在列表下方创建，也可以在指定的dom创建
 */class axPagination{constructor(t,e){return this.options=axExtend({insName:"",listDom:"",count:10,current:1,total:0,firstText:"首页",prevText:"上一页",nextText:"下一页",lastText:"尾页",allPages:!1,data:[],clickDelay:200,template:"",type:"regular",loadingMode:"replace",className:"",lastDel:"",async:"",ajaxType:"post",delay:0,dataExtend:"",breakpoints:{},onBeforeRendered:function(t){},onRendered:function(t,e,s){},onUpdated:function(t,e,s){},onTurned:function(t,e,s){}},e,t,this.constructor.name),this.targetExist=!!t,this.targetDom=t?axIdToDom(t):axAddElem("div",{class:this.options.className?"ax-pagination "+this.options.className:"ax-pagination"}),this.listDom="",this.options.total&&(this.options.data={length:this.options.total}),this.handlers={},this.preData=[],this.asyncData=[],this.selectData=[],this.itemsNum=0,this.pagesNum=0,this.current=this.options.current,this.loadingDom=axAddElem("div",{class:"ax-pageTurning"}),this.options.template?"#"===this.options.template.trim().substr(0,1)?this.template=document.querySelector(this.options.template).innerHTML:this.template=this.options.template:this.template="",this.pagesDom=axAddElem("div",{class:"ax-core"}),this.pageFirst=axAddElem("a",{href:"###",class:"ax-first"},this.options.firstText),this.pageLast=axAddElem("a",{href:"###",class:"ax-last"},this.options.lastText),this.pagePrev=axAddElem("a",{href:"###",class:"ax-prev"},this.options.prevText),this.pageNext=axAddElem("a",{href:"###",class:"ax-next"},this.options.nextText),this.pageTotal=axAddElem("span",{class:"ax-total"}),this.pageGo=axAddElem("span",{class:"ax-gopage"}),this.group=axAddElem("div",{class:"ax-group"}),this.renderedIndex=0,this.init(this.options.data),this}async init(t){if(axInstance.push(this,this.options.insName,"pagination"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.dataType=this.getDataType(t),"pageDom"===this.dataType?this.listDom=axIdToDom(this.options.data):this.options.listDom&&(this.listDom=axIdToDom(this.options.listDom)),axIsEmpty(t))return this.listDom&&(this.listDom.innerHTML=""),this.targetDom.innerHTML="",this.current=1,this.pagesNum=1,this.itemsNum=0,!1;let e;if("json"===this.dataType||"sql"===this.dataType){if(!this.template&&"TBODY"!=this.listDom.nodeName)return!1;"json"===this.options.async?await this.getJsonData({url:t}):"sql"===this.options.async&&await this.getSqlData({current:this.current}),e=1}else{if("sortList"===this.dataType)t.forEach((t=>{this.preData.push(t.dom)}));else if("pureNode"===this.dataType)this.preData=[...t];else if("tplArray"===this.dataType){if(!this.template)return!1;this.preData=this.tplToDoms(t)}else"manual"===this.dataType?this.preData={...t}:this.preData=[...this.listDom.childNodes].filter((t=>1==t.nodeType));this.getCurrent(this.preData.length),e=this.current}this.listDom&&"manual"!==this.dataType&&this.renderList(e),this.renderFinish()}getDataType(t){let e="",s=axType(t);return"Object"===s&&t.hasOwnProperty("length")?e="manual":"Array"===s?e=t.length>0&&t[0].hasOwnProperty("dom")?"sortList":t.length>0&&axType(t[0]).includes("Element")?"pureNode":"tplArray":"String"===s&&(e="json"===this.options.async?"json":"sql"===this.options.async?"sql":"pageDom"),e}tplToDoms(t,e=this.template){let s=[];return t.forEach((t=>{let i=axStrToDom(axTplEngine(e,t));s.push(i)})),s}renderTotal(){this.pageTotal.innerHTML="共有"+this.pagesNum+"页, "+this.itemsNum+"条数据"}renderFinish(){this.targetDom.removeAttribute("paging"),this.renderPagesTotal(this.current,(()=>{this.renderTotal()})),this.getPagination(),this.listDom&&!this.targetExist&&("TBODY"==this.listDom.nodeName?this.listDom.parentElement.insertAdjacentElement("afterend",this.targetDom):this.listDom.insertAdjacentElement("afterend",this.targetDom)),this.pageFirst.onclick=axDebounce((t=>{this.current<=1?axPreventDefault(t):(this.current=1,this.currentToRenderList(this.current))}),this.options.clickDelay),this.pageLast.onclick=axDebounce((t=>{this.current>=this.pagesNum?axPreventDefault(t):(this.current=this.pagesNum,this.currentToRenderList(this.current))}),this.options.clickDelay),this.pagePrev.onclick=axDebounce((t=>{this.current<=1?axPreventDefault(t):(this.current=this.current-1,this.currentToRenderList(this.current))}),this.options.clickDelay),this.pageNext.onclick=axDebounce((t=>{this.current>=this.pagesNum?axPreventDefault(t):(this.current=this.current+1,this.currentToRenderList(this.current))}),this.options.clickDelay),this.renderedIndex++,this.options.onTurned&&this.options.onTurned.call(this,this.current,this.pagesNum,this.getOffset()),this.handlers.hasOwnProperty("turned")&&this.emit("turned",this.current,this.pagesNum,this.getOffset())}getOffset(t=this.current,e=this.itemsNum,s=this.options.count){let i=s*t-e;return e&&i>0?i:s}currentFix(t,e=this.pagesNum){return t?(this.current=t<=1?1:t>=e?e:t,this.current):this.current}getCurrent(t,e,s,i){if(this.itemsNum=i||t,s)this.pagesNum=s;else{let t=this.itemsNum/this.options.count;this.pagesNum=t%1==0?t:Math.floor(t)+1}this.currentFix(e||this.current,this.pagesNum)}renderList(t,e,s){let i=document.createDocumentFragment(),a=e||this.preData,o=this.options.total?a.slice(0,this.options.total):a;this.selectData=o.slice(this.options.count*(t-1),this.options.count*t),this.selectData.forEach(((t,e)=>{e+1==this.selectData.length&&this.options.lastDel&&t.querySelector(this.options.lastDel)&&t.removeChild(t.querySelector(this.options.lastDel)),i.appendChild(t)})),this.options.onBeforeRendered&&this.options.onBeforeRendered.call(this,this.selectData,this.asyncData),"beforeRendered"in this.handlers&&this.emit("beforeRendered",this.selectData,this.asyncData),this.listDom.innerHTML="",0===this.selectData.length?new axMessage({content:`有效数据只有${o.length}条，本页没有数据，渲染数据失败！`,iconShow:!0,result:"error"}).show():(this.listDom.appendChild(i),this.options.onRendered&&this.options.onRendered.call(this,this.current,this.pagesNum,this.getOffset()),this.handlers.hasOwnProperty("rendered")&&this.emit("rendered",this.current,this.pagesNum,this.getOffset()),s&&s.call(this,this.current,this.pagesNum,this.getOffset()))}renderPagesTotal(t,e){if(t=this.currentFix(t),this.pagesDom.innerHTML="",this.options.allPages)for(let t=1;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}else if(this.pagesNum<11)for(let t=1;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}else if(t<6){for(let t=1;t<=8;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}this.pagesDom.appendChild(axAddElem("span",{},"..."));for(let t=this.pagesNum-1;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}}else if(this.pagesNum-t<5){for(let t=1;t<=2;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}this.pagesDom.appendChild(axAddElem("span",{},"..."));for(let t=this.pagesNum-6;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}}else{for(let t=1;t<=2;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}this.pagesDom.appendChild(axAddElem("span",{},"..."));for(let e=t-2;e<=t+2;e++){let t=axAddElem("a",{href:"###","data-page":e},e);this.pagesDom.appendChild(t)}this.pagesDom.appendChild(axAddElem("span",{},"..."));for(let t=this.pagesNum-1;t<=this.pagesNum;t++){let e=axAddElem("a",{href:"###","data-page":t},t);this.pagesDom.appendChild(e)}}return[...this.pagesDom.querySelectorAll("[data-page]")].forEach((t=>{t.onclick=axDebounce((()=>{this.current=~~t.dataset.page,this.currentToRenderList(this.current)}),this.options.clickDelay)})),this.setClass(t),e&&e.call(this,t),this.pagesDom}setClass(t){let e=[...this.pagesDom.querySelectorAll("[data-page]")].filter((e=>~~e.dataset.page==t))[0];e.classList.add("ax-active"),1==~~e.dataset.page?(this.pageFirst.classList.add("ax-disabled"),this.pagePrev.classList.add("ax-disabled"),1==this.pagesNum?(this.pageLast.classList.add("ax-disabled"),this.pageNext.classList.add("ax-disabled")):(this.pageLast.classList.remove("ax-disabled"),this.pageNext.classList.remove("ax-disabled"))):~~e.dataset.page==this.pagesNum?(this.pageLast.classList.add("ax-disabled"),this.pageNext.classList.add("ax-disabled"),this.pageFirst.classList.remove("ax-disabled"),this.pagePrev.classList.remove("ax-disabled")):(this.pageFirst.classList.remove("ax-disabled"),this.pagePrev.classList.remove("ax-disabled"),this.pageLast.classList.remove("ax-disabled"),this.pageNext.classList.remove("ax-disabled"))}getPagination(){let t=document.createDocumentFragment();this.pageGo.innerHTML='跳到</span><input type="text"><button type="button" class="ax-btn">确定</button>';let e=this.pageGo.querySelector("input"),s=this.pageGo.querySelector("button");if(s.onclick=axDebounce((()=>{let t=~~e.value;t<=1?(e.value=1,this.current=1):t>=this.pagesNum?(e.value=this.pagesNum,this.current=this.pagesNum):this.current=t,this.currentToRenderList(this.current)}),this.options.clickDelay),e.onkeyup=function(t){"Enter"===t.code&&s.click()},"regular"===this.options.type)t.appendChild(this.pageFirst),t.appendChild(this.pagePrev),t.appendChild(this.pagesDom),t.appendChild(this.pageNext),t.appendChild(this.pageLast);else if("group"===this.options.type)this.group.appendChild(this.pageFirst),this.group.appendChild(this.pagePrev),this.group.appendChild(this.pagesDom),this.group.appendChild(this.pageNext),this.group.appendChild(this.pageLast),t.appendChild(this.group);else if("simple"===this.options.type)t.appendChild(this.pagePrev),t.appendChild(this.pageNext);else if("full"===this.options.type)t.appendChild(this.pageTotal),t.appendChild(this.pageFirst),t.appendChild(this.pagePrev),t.appendChild(this.pagesDom),t.appendChild(this.pageNext),t.appendChild(this.pageLast),t.appendChild(this.pageGo);else if("pagesRight"===this.options.type){let e=axAddElem("div"),s=axAddElem("div",{class:"ax-col ax-align-right"});this.targetDom.classList.add("ax-row"),e.appendChild(this.pageTotal),s.appendChild(this.pageFirst),s.appendChild(this.pagePrev),s.appendChild(this.pagesDom),s.appendChild(this.pageNext),s.appendChild(this.pageLast),s.appendChild(this.pageGo),t.appendChild(e),t.appendChild(s)}else if("pagesLeft"===this.options.type){let e=axAddElem("div"),s=axAddElem("div",{class:"ax-col ax-align-left"});this.targetDom.classList.add("ax-row"),e.appendChild(this.pageTotal),s.appendChild(this.pageFirst),s.appendChild(this.pagePrev),s.appendChild(this.pagesDom),s.appendChild(this.pageNext),s.appendChild(this.pageLast),s.appendChild(this.pageGo),t.appendChild(s),t.appendChild(e)}else t.appendChild(this.pagesDom);this.targetDom.appendChild(t)}getJsonData(t={}){return t.template=t.template||this.template,t.url=t.url||this.options.data,axAjax({url:t.url,type:this.options.ajaxType,before:t=>{this.listDom&&(this.listDom.innerHTML='<div class="ax-pageTurning">'+t.content+"</div>")},success:e=>{let s,i=[];e.content.forEach(((e,s)=>{let a,o={index:s};if(t.template||"TBODY"!=this.listDom.nodeName)a=axStrToDom(axTplEngine(t.template,e));else{a=axAddElem("tr");for(let t in e){let s=axAddElem("td",{name:t},e[t]);a.appendChild(s),o.children=[],o.children.push({dom:s,name:t,label:e[t].toString()})}}o.dom=a,this.asyncData.push(o),i.push(a)})),"manual"!==this.dataType&&(this.preData=[...i]),s=this.preData.length,this.getCurrent(s),t.callback&&t.callback.call(this,i,this.asyncData,e.content)}})}getSqlData(t={}){return t.current=t.current||1,t.count=t.count||this.options.count,t.total=t.total||this.options.total,t.template=t.template||this.template,t.url=t.url||this.options.data,axAjax({data:Object.assign({count:t.count,current:t.current,offset:this.getOffset(t.current,t.total,t.count)},this.options.dataExtend),url:t.url,type:this.options.ajaxType,before:t=>{this.listDom&&(this.loadingDom.style="",this.loadingDom.innerHTML=t.content,"overlay"===this.options.loadingMode?this.loadingDom.classList.add("ax-overlay"):(this.listDom.innerHTML="",this.listDom.appendChild(this.loadingDom)),this.listDom.insertAdjacentElement("afterbegin",this.loadingDom),axFadeIn(this.loadingDom,"flex"))},success:e=>{if("object"!=typeof e.content)return!1;if(axIsEmpty(e.content.data))return this.listDom&&(this.listDom.innerHTML=""),new axMessage({content:"没有从数据库中获得数据，已停止渲染列表！",iconShow:!0,result:"error"}).show(),!1;"manual"!==this.dataType&&(this.preData=[]),this.asyncData=[];let s,i=[];e.content.data.forEach(((e,s)=>{let a,o={index:s};if(t.template||"TBODY"!=this.listDom.nodeName)a=axStrToDom(axTplEngine(t.template,e));else{a=axAddElem("tr"),o.children=[];for(let t in e){let s=axAddElem("td",{name:t},e[t].toString());a.appendChild(s),o.children.push({dom:s,name:t,label:e[t].toString()})}}o.dom=a,this.asyncData.push(o),i.push(a)})),"manual"!==this.dataType&&(this.preData=[...i]),s=this.preData.length,this.getCurrent(s,~~e.content.current,~~e.content.pagesNum,~~e.content.itemsNum),t.callback&&t.callback.call(this,i,this.asyncData,e.content)}})}async currentToRenderList(t,e){this.listDom&&"manual"!==this.dataType&&("sql"===this.options.async?await this.getSqlData({current:t,callback:()=>{this.options.delay?setTimeout((()=>{this.renderList(1)}),this.options.delay):this.renderList(1)}}):this.renderList(t)),this.renderPagesTotal(t,e&&e.call(this,t)),this.options.onTurned&&this.options.onTurned.call(this,this.current,this.pagesNum,this.getOffset()),this.handlers.hasOwnProperty("turned")&&this.emit("turned",this.current,this.pagesNum,this.getOffset())}first(t){return this.current=1,this.currentToRenderList(this.current),t&&t.call(this,this.current,this.pagesNum),this}prev(t){return!(this.current<=1)&&(this.current=this.current-1,this.currentToRenderList(this.current),t&&t.call(this,this.current,this.pagesNum),this)}next(t){return!(this.current>=this.pagesNum)&&(this.current=this.current+1,this.currentToRenderList(this.current),t&&t.call(this,this.current,this.pagesNum),this)}last(t){return this.current=this.pagesNum,this.currentToRenderList(this.current),t&&t.call(this,this.current,this.pagesNum),this}go(t,e){return!(this.current<=1||this.current>=this.pagesNum)&&(this.current=~~t,this.currentToRenderList(this.current),e&&e.call(this,this.current,this.pagesNum),this)}info(t){let e={current:this.current,pagesNum:this.pagesNum,count:this.options.count,itemsNum:this.itemsNum,selectData:this.selectData};return t&&t.call(this,e),e}updatePages(t,e,s){if(!t)return!1;let i;if(e=e||"remove",i="number"==typeof t?this.preData[t]:t,!i)return!1;"remove"===e&&(this.preData=this.preData.filter((t=>t!=i)),this.getCurrent(this.preData.length,this.current,"")),this.currentToRenderList(this.current,(()=>{this.renderTotal()})),s&&s.call(this)}async update(t,e,s){return e=e||"overwrite",this.options=axExtend(this.options,t),this.current=this.options.current,this.targetDom.setAttribute("paging",""),this.targetDom.innerHTML="","overwrite"===e&&(this.preData=[]),await this.init(this.options.data),this.options.onUpdated&&this.options.onUpdated.call(this,this.current,this.pagesNum,this.getOffset()),"updated"in this.handlers&&this.emit("updated",this.current,this.pagesNum,this.getOffset()),s&&s.call(this),this}async updateData(t,e,s){return e=e||"overwrite",this.targetDom.setAttribute("paging",""),this.targetDom.innerHTML="","overwrite"===e&&(this.preData=[],this.options.dataExtend=""),"object"==typeof t&&t.url&&t.hasOwnProperty("sql")?(this.options.data=t.url,this.options.dataExtend=t.sql):this.options.data=t,await this.init(this.options.data),this.options.onUpdated&&this.options.onUpdated.call(this,this.current,this.pagesNum,this.getOffset()),"updated"in this.handlers&&this.emit("updated",this.current,this.pagesNum,this.getOffset()),s&&s.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：可排序列表；使用方法：new axList('#id',{参数})；#id是可选参数，可以从该dom获取参数值
*/class axList{constructor(t,e){return this.targetDom=axIdToDom(t),this.rawOptions={insName:"",names:"",inputDelay:200,clickDelay:200,paginationDom:null,maxCount:1e4,order:"asc",operator:"or",paginationShow:!0,breakpoints:{},onUpdated:"",onInit:"",pagination:{current:1,count:10,data:[],template:null,async:"",ajaxType:"post",loadingMode:"overlay"}},this.options=axExtend(axClone(this.rawOptions),e,this.targetDom,this.constructor.name),this.handlers={},this.rawData=[],this.preData=[],this.paginationDom=this.options.paginationDom?axIdToDom(this.options.paginationDom):this.targetDom.querySelector(".ax-pagination")||"",this.options.pagination.template?"#"===this.options.pagination.template.trim().substr(0,1)?this.template=document.querySelector(this.options.pagination.template).innerHTML:this.template=this.options.pagination.template:this.template="",this.names=this.options.names.replace(/\s+/g,"").split(","),this.listDom=this.targetDom.querySelector("[list]"),this.searchs=[...this.targetDom.querySelectorAll("[search]")],this.keywords=[...this.targetDom.querySelectorAll("[keyword]")],this.searchVal="",this.sorts=[...this.targetDom.querySelectorAll("[sort]")],this.resets=[...this.targetDom.querySelectorAll("[reset]")],this.filters=[...this.targetDom.querySelectorAll("[filter]")],this.extends=[...this.targetDom.querySelectorAll("[extend]")],this.paginationOpt={},this.pagination=null,this.init(),this}async init(){if(axInstance.push(this,this.options.insName,"list"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.setPaginationOpt(),this.listDom.children.length>0){let t=[...this.listDom.childNodes].filter((t=>1==t.nodeType));this.getDomArr(t),this.paginationOpt.data=this.preData}else"String"===axType(this.options.pagination.data)&&this.options.pagination.template?"json"===this.options.pagination.async?await axAjax({url:this.options.pagination.data,type:this.options.pagination.ajaxType,success:t=>{let e=[];t.content.forEach((t=>{let s=axStrToDom(axTplEngine(this.template,t));e.push(s)})),this.getDomArr(e),this.paginationOpt.data=this.preData}}):"sql"===this.options.pagination.async&&(["relative","absolute","fixed"].includes(axStyle(this.listDom).position)||(this.listDom.style.position="relative")):(this.preData=this.options.pagination.data,this.rawData=[...this.preData],this.paginationOpt.data=this.options.pagination.data);this.renderFinish(),this.options.onInit&&this.options.onInit.call(this,this.pagination.current,this.pagination.pagesNum)}getDomArr(t){return this.options.names?(t.forEach((t=>{let e={dom:t};this.names.forEach((s=>{t.querySelector("["+s+"]")&&(e[s]=t.querySelector("["+s+"]").innerText.trim())})),this.preData.push(e)})),this.rawData=[...this.preData],!0):(this.preData=t,this.rawData=[...t],!1)}renderFinish(){if(this.pagination=new axPagination(this.paginationDom,this.paginationOpt),!this.options.paginationShow&&(this.pagination.targetDom.remove(),this.pagination.itemsNum>this.paginationOpt.count))return!1;let t="sql"===this.paginationOpt.async;this.loadExtend(t),this.loadSort(t),this.loadKeyword(t),this.loadSearch(t),this.loadFilter(t),this.loadReset(t)}setPaginationOpt(){return this.paginationOpt=this.options.pagination,this.paginationOpt.listDom=this.listDom,this.paginationOpt.count=this.options.paginationShow?this.paginationOpt.count:this.options.maxCount,this.paginationOpt}loadExtend(t){0!==this.extends.length&&this.extends.forEach((e=>{let s=e.getAttribute("extend");e.onclick=axDebounce((()=>{this.extend(s,t)}),this.options.clickDelay)}))}extend(t,e){e?(this.updateSql({dataExtend:{extend:t}}),this.pagination.on("rendered",(()=>{axIsEmpty(this.pagination.preData)&&(this.listDom.innerHTML="",this.pagination.targetDom.innerHTML="")}))):this.strSearch(t)}loadKeyword(t){0!==this.keywords.length&&this.keywords.forEach((e=>{let s=[...this.preData],i=e.getAttribute("keyword").trim(),a=e.getAttribute("operator")?e.getAttribute("operator").trim():this.options.operator,o="",n=i?i.split(","):[],r=0!==n.length?n:this.names;e.hasAttribute("auto")&&(e.oninput=axDebounce((()=>{let i=e.value;if(0!==n.length){let t={};n.forEach((e=>{t[e]=i})),o=t}else o=i;t?this.sqlSearch(r,i,a):this.keySearch(o,s,a)}),this.options.inputDelay))}))}loadFilter(t){0!==this.filters.length&&this.filters.forEach((e=>{let s,i=[...this.preData],a=e.getAttribute("operator")?e.getAttribute("operator").trim():this.options.operator;s=t?e.getAttribute("filter"):axAttrToJson(e,"filter"),e.onclick=axDebounce((()=>{this.filter(s,i,a,t)}),this.options.clickDelay)}))}filter(t,e,s,i){s=s||this.options.operator,e=e||[...this.preData],i?this.updateSql({dataExtend:{filter:t}}):this.keySearch(t,e,s)}loadSearch(t){0!==this.searchs.length&&this.searchs.forEach((e=>{if(0==this.keywords.length)return!1;let s=e.getAttribute("field"),i=this.keywords.filter((t=>t.name==s))[0],a=i.getAttribute("keyword"),o=i.getAttribute("operator")?i.getAttribute("operator").trim():this.options.operator,n=[...this.preData];a=a?a.replace(/\s+/g,"").split(","):this.names,e.onclick=axDebounce((()=>{this.search(a,i.value,n,o,t)}),this.options.clickDelay),i.onkeyup=t=>{"Enter"===t.code&&e.click()}}))}search(t,e,s,i,a){if(i=i||this.options.operator,a)this.sqlSearch(t,e,i);else{let a={};s=s||[...this.preData],t.forEach((t=>{a[t]=e})),this.keySearch(a,s,i)}}loadSort(t){if(0!==this.sorts.length)for(let e of this.sorts){let s=e.getAttribute("sort").trim();!t&&this.names.every((t=>t!==s))||(e.onclick=axDebounce((()=>{t?(this.sort(s,"",!0),s.includes(",")||(s.includes("desc")?(e.setAttribute("order","desc"),s=s.replace("desc","asc")):s.includes("asc")&&(e.setAttribute("order","asc"),s=s.replace("asc","desc")))):"desc"===e.getAttribute("order")?(e.setAttribute("order","asc"),this.sort(s,"asc",!1)):"asc"===e.getAttribute("order")?(e.setAttribute("order","desc"),this.sort(s,"desc",!1)):(e.setAttribute("order",this.options.order),this.sort(s,this.options.order,!1)),this.sorts.filter((t=>t!=e)).forEach((t=>{t.setAttribute("order","")}))}),this.options.clickDelay))}}sort(t,e,s){s?this.updateSql({dataExtend:{sort:t}}):this.preSort(t,e)}preSort(t,e,s){if("desc"===e)this.preData.sort((function(e,s){return isNaN(e[t]-s[t])?s[t].localeCompare(e[t],"zh-CN-u-kf-lower"):s[t]-e[t]}));else{if("asc"!==e)return!1;this.preData.sort((function(e,s){return isNaN(e[t]-s[t])?e[t].localeCompare(s[t],"zh-CN-u-kf-lower"):e[t]-s[t]}))}return this.pagination.updateData(this.preData),this.handlers.hasOwnProperty("sorted")&&this.emit("sorted",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),s&&s.call(this,this.preData,this.pagination.current),this}loadReset(t){0!==this.resets.length&&this.resets.forEach((e=>{e.onclick=axDebounce((()=>{this.reset(t)}),this.options.clickDelay)}))}reset(t){if(t)this.updateSql({dataExtend:""});else{this.preData=[...this.rawData];let t=axClone(this.rawOptions.pagination);t.data=this.preData,this.updatePages(t)}this.sorts.forEach((t=>{t.setAttribute("order","")})),this.keywords.forEach((t=>{t.value=""})),"reset"in this.handlers&&this.emit("reset",""),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum)}keySearch(t,e,s=this.options.operator,i){let a=e.filter((e=>{let i=[];if("object"!=typeof t){for(let t of this.names)i.push(e[t]);return i.toString().includes(t)}{let i=[];for(let s in t)i.push(String(e[s]).includes(t[s]));if("or"===s)return i.some((t=>1==t));if("and"===s)return i.every((t=>1==t))}}));if(this.preData=a,axIsEmpty(this.preData))return"rendered"in this.handlers&&this.emit("rendered",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),i&&i.call(this,this.pagination.current,this.pagination.pagesNum),this.preData=[...this.rawData],this.listDom.innerHTML="",this.pagination.targetDom.innerHTML="",!1;this.pagination.updateData(this.preData),"rendered"in this.handlers&&this.emit("rendered",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),i&&i.call(this,this.pagination.current,this.pagination.pagesNum)}strSearch(t,e){if(this.preData=axStrToFilter(t,[...this.preData]),axIsEmpty(this.preData))return"rendered"in this.handlers&&this.emit("rendered",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),e&&e.call(this,this.pagination.current,this.pagination.pagesNum),this.preData=[...this.rawData],this.listDom.innerHTML="",this.pagination.targetDom.innerHTML="",!1;this.pagination.updateData(this.preData),"rendered"in this.handlers&&this.emit("rendered",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum),e&&e.call(this,this.pagination.current,this.pagination.pagesNum)}sqlSearch(t,e,s){let i,a="";if(s=s||this.options.operator,0==t.length)return!1;e&&t.forEach(((o,n)=>{i=t.length-1!=n?s+" ":"",a+=o+' like "%'+e+'%" '+i})),this.pagination.options.dataExtend="",this.updatePages({dataExtend:{search:a}}),this.pagination.on("rendered",(()=>{axIsEmpty(this.pagination.preData)&&(this.listDom.innerHTML="",this.pagination.targetDom.innerHTML="")}))}updateSql(t,e){return this.pagination.options.dataExtend="",this.pagination.update(t,"",(()=>{this.handlers.hasOwnProperty("updated")&&this.emit("updated",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum)})),e&&e.call(this,this.pagination.current,this.pagination.pagesNum),this}updatePages(t,e){let s=axExtend(this.options.pagination,t);return this.pagination.update(s,"",(()=>{this.handlers.hasOwnProperty("updated")&&this.emit("updated",this.pagination.current,this.pagination.pagesNum),this.options.onUpdated&&this.options.onUpdated.call(this,this.pagination.current,this.pagination.pagesNum)})),e&&e.call(this,this.pagination.current,this.pagination.pagesNum),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!a
 * 插件：灯箱画廊；使用方法：axLightbox('#id',{参数})
 */class axLightbox{constructor(t,e){this.options=axExtend({insName:"",src:"",gallery:!0,download:!1,autoplay:!1,thumb:{show:!1,placement:"bottom",row:1},zoom:!0,share:!1,btnClass:"ax-lightbox-open",index:0,zIndex:0,breakpoints:{},onInit:"",onShow:"",onShown:"",onHide:"",onHidden:"",onUpdate:"",onDestroy:""},t,e,this.constructor.name),this.handlers={},this.data=[],this.closeArea=[],this.zoomIn=!1,this.button=e?axIdToDom(e):null,this.shown=!1,axInstance.push(this,this.options.insName,"lightbox")}init(){let t=this;this.destroyed=!1,!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.data=axCreateData(this.options.src,["src","cover","caption","type"],["media","cover","caption","type"],"figure",["","","","image"],(function(t){t.forEach((t=>{t.cover||"image"!=t.type||(t.cover=t.media),t.cover=t.cover?t.cover:""}))})),this.setAttribute(),this.createBox(),this.createSlide(),this.data.length>1&&(this.prev=axStrToDom('<span class="ax-prev ax-light"></span>'),this.next=axStrToDom('<span class="ax-next ax-light"></span>'),this.swiper.appendChild(this.prev),this.swiper.appendChild(this.next));let e={zoom:this.options.zoom,lazy:!0,keyboard:!0,mousewheel:!0,initialSlide:this.options.index||0,pagination:{el:this.options.gallery?this.targetDom.querySelector(".ax-pages"):null,type:"fraction"},thumbs:{swiper:""},on:{touchStart:(t,e)=>{t.el.classList.add("ax-grabbing")},touchEnd:(t,e)=>{t.el.classList.remove("ax-grabbing")},zoomChange:(t,e)=>{e>1?this.zoomIn=!0:setTimeout((()=>{this.zoomIn=!1}),100)}}},s={lazy:!0,spaceBetween:4,slidesPerView:"auto",mousewheel:!0,grid:{rows:this.options.thumb.row},watchSlidesProgress:!0};return this.options.gallery&&this.options.thumb&&(this.stage.insertAdjacentElement("afterend",this.createThumb()),this.insThumb=new axSwiper(this.thumb.querySelector(".ax-swiper"),s),e.thumbs.swiper=this.insThumb,this.btnList.onclick=()=>{this.targetDom.classList.toggle("ax-thumb-hide")}),this.options.thumb.show||this.targetDom.classList.add("ax-thumb-hide"),this.options.autoplay&&(e.autoplay={delay:5e3,stopOnLastSlide:!1,disableOnInteraction:!0}),this.insSwiper=new axSwiper(this.swiper,e),document.body.appendChild(this.targetDom),this.data.length>1&&this.options.thumb.row&&this.options.thumb.row>1&&(this.thumb.querySelector(".ax-swiper").style.height=axHeight(this.thumb.querySelector(".ax-slide"),"outer")*this.options.thumb.row+s.spaceBetween*(this.options.thumb.row-1)+"px"),this.options.gallery||this.insSwiper.disable(),this.targetDom.querySelectorAll("[close]").forEach((t=>{t.addEventListener("click",(()=>{this.hide()}),!1)})),this.options.zoom&&(this.btnZoom.onclick=function(){this.classList.contains("ax-icon-zoomin")?t.insSwiper.zoom.in():t.insSwiper.zoom.out()}),this.options.download&&("image"!=this.data[this.insSwiper.activeIndex].type?(this.btnDownload.href="###",this.btnDownload.classList.add("ax-disabled"),this.btnDownload.removeAttribute("download"),this.btnDownload.removeAttribute("target")):(this.btnDownload.href=this.data[this.insSwiper.activeIndex].media,this.btnDownload.classList.remove("ax-disabled"),this.btnDownload.setAttribute("download",""),this.btnDownload.setAttribute("target","_blank"))),this.options.zoom&&("image"!=this.data[this.insSwiper.activeIndex].type?(this.btnZoom.classList.add("ax-disabled"),this.insSwiper.zoom.disable()):(this.btnZoom.classList.remove("ax-disabled"),this.insSwiper.zoom.enable())),this.options.share&&("image"!=this.data[this.insSwiper.activeIndex].type?this.btnShare.classList.add("ax-disabled"):this.btnShare.classList.remove("ax-disabled")),this.insSwiper.on("slideChangeTransitionEnd",(function(){t.options.download&&("image"!=t.data[this.activeIndex].type?(t.btnDownload.href="###",t.btnDownload.classList.add("ax-disabled"),t.btnDownload.removeAttribute("download"),t.btnDownload.removeAttribute("target")):(t.btnDownload.href=t.data[this.activeIndex].media,t.btnDownload.classList.remove("ax-disabled"),t.btnDownload.setAttribute("download",""),t.btnDownload.setAttribute("target","_blank"))),t.options.zoom&&("image"!=t.data[this.activeIndex].type?(t.btnZoom.classList.add("ax-disabled"),t.insSwiper.zoom.disable()):(t.btnZoom.classList.remove("ax-disabled"),t.btnZoom.classList.remove("ax-icon-zoomout"),t.btnZoom.classList.add("ax-icon-zoomin"),t.insSwiper.zoom.enable())),t.options.share&&("image"!=t.data[this.activeIndex].type?t.btnShare.classList.add("ax-disabled"):t.btnShare.classList.remove("ax-disabled")),t.targetDom.querySelectorAll("video,audio").forEach((t=>{t.pause()})),t.zoomIn=!1})),this.insSwiper.on("zoomChange",((t,e)=>{e>1?(this.btnZoom.classList.remove("ax-icon-zoomin"),this.btnZoom.classList.add("ax-icon-zoomout")):(this.btnZoom.classList.remove("ax-icon-zoomout"),this.btnZoom.classList.add("ax-icon-zoomin"))})),this.options.onInit&&this.options.onInit.call(this),"init"in this.handlers&&this.emit("init",""),this}overlayClose(t){this.closeArea=[];let e=!0,s=!0,i=!0;return this.prev&&(e=axIsOutside(t,this.prev)),this.closeArea.push(e),this.next&&(s=axIsOutside(t,this.next)),this.closeArea.push(s),i=!this.options.thumb||axIsOutside(t,this.thumb),this.closeArea.push(i),this.swiperWrapper.querySelectorAll(".ax-media").forEach((e=>{let s=e.firstElementChild;this.closeArea.push(axIsOutside(t,s))})),this.swiperWrapper.querySelectorAll(".ax-caption")&&this.swiperWrapper.querySelectorAll(".ax-caption").forEach((e=>{this.closeArea.push(axIsOutside(t,e))})),this.closeArea.push(axIsOutside(t,this.operate)),this.closeArea.push(axIsOutside(t,this.pages)),this.closeArea}createSlide(){this.data.forEach((t=>{let e=null,s=null;e=axStrToDom(((t,e)=>e&&"video"==e?`\n                <div class="ax-slide">\n                    <div class="ax-media">\n                        <video controls><source src="${t}"></video>\n                    </div>\n                </div>\n                `:e&&"audio"==e?`\n                <div class="ax-slide">\n                    <div class="ax-media">\n                        <audio controls><source src="${t}" ></audio>\n                    </div>\n                </div>\n                `:e&&"iframe"==e?`\n                <div class="ax-slide">\n                    <div class="ax-media">\n                        <iframe src="${t}" frameborder="0" width="100%" height="100%"></iframe>\n                    </div>\n                </div>\n                `:e&&"text"==e?("#"==t.substr(0,1)&&(t=document.querySelector(t).innerHTML),`\n                <div class="ax-slide">\n                    <div class="ax-media">\n                        <div class="ax-text">${t}</div>\n                    </div>\n                </div>\n                `):`\n                <div class="ax-slide">\n                    <div class="ax-media ax-zoom">\n                        <img data-src="${t}" class="ax-lazy" />\n                        <span class="ax-loading ax-white"><i></i></span>\n                    </div>\n                </div>\n                `)(t.media,t.type)),s=t.caption?axStrToDom(`<div class="ax-caption">${t.caption}</div>`):null,s&&e.appendChild(s),this.swiperWrapper.appendChild(e)}))}createThumb(){return this.thumb=axStrToDom('<div class="ax-thumb"><div class="ax-swiper"><div class="ax-wrapper"></div></div></div>'),this.thumbWrapper=this.thumb.querySelector(".ax-wrapper"),this.data.forEach((t=>{let e=axStrToDom(`\n            <div class="ax-slide">\n                <img data-src="${t.cover}" class="ax-lazy" />\n                <span class="ax-loading ax-white"><i></i></span>\n            </div>\n            `);this.thumbWrapper.appendChild(e)})),this.thumb}createBox(){this.targetDom=axStrToDom('\n        <div class="ax-lightbox">\n        <div class="ax-overlay"></div>\n        <div class="ax-tools">\n            <div class="ax-pages"></div>\n            <div class="ax-operate"><i class="ax-iconfont ax-icon-close" close></i></div>\n        </div>\n        <div class="ax-stage">\n            <div class="ax-swiper">\n                <div class="ax-wrapper">\n                </div>\n            </div>\n        </div>\n    </div>\n      '),this.tools=this.targetDom.querySelector(".ax-tools"),this.pages=this.targetDom.querySelector(".ax-pages"),this.operate=this.targetDom.querySelector(".ax-operate"),this.stage=this.targetDom.querySelector(".ax-stage"),this.swiper=this.stage.querySelector(".ax-swiper"),this.swiperWrapper=this.swiper.querySelector(".ax-wrapper"),this.createBtn()}createBtn(){this.btnShare=axStrToDom('<i class="ax-iconfont ax-icon-share-f" share></i>'),this.btnDownload=axStrToDom('<a href="###" class="ax-iconfont ax-icon-download" target="_blank" download></a>'),this.btnZoom=axStrToDom('<i class="ax-iconfont ax-icon-zoomin" zoom></i>'),this.btnList=axStrToDom('<i class="ax-iconfont ax-icon-list" list></i>'),this.options.thumb&&this.operate.insertAdjacentElement("afterbegin",this.btnList),this.options.download&&this.operate.insertAdjacentElement("afterbegin",this.btnDownload),this.options.zoom&&this.operate.insertAdjacentElement("afterbegin",this.btnZoom),this.options.share&&this.operate.insertAdjacentElement("afterbegin",this.btnShare)}setAttribute(){for(let t=0,e=this.data.length;t<e;t++){this.data[t].hasOwnProperty("type")&&["iframe","video","text"].includes(this.data[t].type)&&(this.options.thumb=!1);break}this.data.length<2&&this.options.thumb,this.options.zIndex&&(this.targetDom.style.zIndex=this.options.zIndex)}update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.init(),this.options.onUpdate&&this.options.onUpdate.call(this),"update"in this.handlers&&this.emit("update",""),e&&e.call(this)),this}show(t){return this.destroyed||this.shown||!this.targetDom||axIsVnode(this.targetDom)||(this.options.onShow&&this.options.onShow.call(this),"show"in this.handlers&&this.emit("show",""),this.targetDom.style.visibility="visible",this.targetDom.classList.add("ax-show"),this.button&&this.button.classList.add(this.options.btnClass),t&&t.call(this),this.options.onShown&&this.options.onShown.call(this),"shown"in this.handlers&&this.emit("shown",""),this.targetDom.onclick=t=>{this.overlayClose(t),this.closeArea.includes(!1)||this.zoomIn||this.hide()},this.shown=!0),this}hide(t){return this.destroyed||!this.shown||(this.options.onHide&&this.options.onHide.call(this),"hide"in this.handlers&&this.emit("hide",""),this.button&&this.button.classList.remove(this.options.btnClass),this.targetDom.classList.remove("ax-show"),this.targetDom.addEventListener("transitionend",(()=>{this.targetDom.remove()}),!1),this.shown=!1,this.targetDom.querySelectorAll("video,audio").forEach((t=>{t.pause()})),t&&t.call(this),this.options.onHidden&&this.options.onHidden.call(this),"hidden"in this.handlers&&this.emit("hidden","")),this}destroy(){return this.targetDom.remove(),callback&&callback.call(this),this.options.onDestroy&&this.options.onDestroy.call(this),"destroy"in this.handlers&&this.emit("destroy",""),this.destroyed=!0,this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}(()=>{let t=t=>{let e=axIdToDom(t),s=[{}],i=e.nodeName;return"A"==i?e.hasAttribute("href")&&-1==e.getAttribute("href").indexOf("##")&&(s[0].media=e.getAttribute("href"),s[0].cover=e.getAttribute("href")):"IMG"==i&&e.hasAttribute("src")&&(s[0].media=e.getAttribute("src"),s[0].cover=e.getAttribute("src")),e.hasAttribute("type")?s[0].type=e.getAttribute("type"):s[0].type="image",e.hasAttribute("title")?s[0].caption=e.getAttribute("title"):e.hasAttribute("alt")?s[0].caption=e.getAttribute("alt"):s[0].caption="",s},e=[],s=[...document.querySelectorAll("[axLightbox]")].filter((t=>t.getAttribute("axLightbox").includes("insName"))),i={};for(let t=0,e=s.length;t<e;t++){let e=s[t],a=axAttrToJson(e,"axLightbox").insName;a&&(i.hasOwnProperty(a)?i[a].push(e):i[a]=[e])}for(let s in i){let a=0;i[s].forEach((i=>{i.slideIndex=a;let o=[],n=axAttrToJson(i,"axLightbox").src;o=n?axCreateData(n,["src","cover","caption","type"],"figure",["media","cover","caption","type"],["","","","image"],(function(t){t.forEach((t=>{t.cover||"image"!=t.type||(t.cover=t.media),t.cover=t.cover?t.cover:""}))})):t(i),a+=o.length,axIsEmpty(e)?e.push({name:s,data:o}):(e.forEach((t=>{t.name==s&&t.data.push(...o)})),e.some((t=>t.name==s))||e.push({name:s,data:o}))}))}e.forEach((t=>{new axLightbox({insName:t.name,src:t.data})})),document.querySelectorAll("[axLightbox]").forEach((e=>{let s=axAttrToJson(e,"axLightbox"),i=s.insName;if(i){let t=axInstance.find(i,"lightbox");e.onclick=s=>{axPreventDefault(s),t&&(t.init(),t.insSwiper.slideTo(e.slideIndex,0),t.show())}}else s.src?e.onclick=t=>{axPreventDefault(t),new axLightbox("",e).init().show()}:e.onclick=s=>{axPreventDefault(s),new axLightbox({src:t(e)}).init().show()}}))})();
/*!
* 插件：网页媒体懒加载；使用方法：new axLazyload('#id',{参数})
*/
class axLazyload{constructor(t,e){return this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",offset:"0px",visible:[0,.5,1],parent:null,animation:"ax-fadeIn",dataName:"src",breakpoints:{},onBefore:"",onShow:"",onShowing:"",onShown:"",onAllShown:"",onIn:"",onOut:"",onAdd:"",onRemove:"",onAsync:""},e,this.targetDom,this.constructor.name),this.handlers={},this.items=[],this.shownNum=0,this.targetDom.hasAttribute(`data-${this.options.dataName}`)?this.type="single":this.type="multiple",this.parent=this.options.parent?axIdToDom(this.options.parent):this.options.parent,this.init(),this}init(){return axInstance.push(this,this.options.insName,"lazyload"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.interactOpt(),this.active(),this}active(){return this.createInteract(),"single"===this.type?this.items.push(this.targetDom):"multiple"===this.type&&(this.items=[...this.targetDom.querySelectorAll(`[data-${this.options.dataName}]`)]),(!this.options.onBefore||this.options.onBefore.call(this,this.items))&&this.items.forEach((t=>{t.lazyload={observed:!0},this.interact.observe(t)})),this}interactOpt(){return this.offset=this.options.offset.replace(/\s*/g,"").split(","),1==this.offset.length?this.offset.push(...this.offset):offset.length>2&&this.offset.splice(0,2),{root:this.parent,rootMargin:this.offset[0]+" 0px "+this.offset[1]+" 0px",threshold:this.options.visible}}createInteract(){this.interact=new IntersectionObserver((t=>{t.forEach((t=>{let e=[t.target,t],s=t.target.dataset[this.options.dataName];if(t.isIntersecting){if(s){if(this.options.animation&&t.target.classList.add(this.options.animation),"VIDEO"===t.target.nodeName||"AUDIO"===t.target.nodeName)t.target.src=s,t.target.querySelector("source")&&t.target.querySelector("source").setAttribute("src",s);else if("IMG"===t.target.nodeName||"IFRAME"===t.target.nodeName)t.target.setAttribute("src",s);else{let e=axAttrToJson(t.target,"data-async");axAjax({url:s,data:e,before:()=>{t.target.setAttribute("loading","")},success:s=>{t.target.removeAttribute("loading"),t.target.innerHTML="",t.target.dataset.async||"object"==typeof s.content?(this.handlers.hasOwnProperty("async")&&this.emit("async",{response:s.content,data:e,dom:t.target}),this.options.onAsync&&this.options.onAsync.call(this,{response:s.content,data:e,dom:t.target})):t.target.innerHTML=s.content}})}delete t.target.dataset[this.options.dataName],0===t.intersectionRatio?(t.target.lazyload.state="show",this.handlers.hasOwnProperty("show")&&this.emit("show",...e),this.options.onShow&&this.options.onShow.call(this,...e)):1===t.intersectionRatio?(t.target.lazyload.state="shown",this.handlers.hasOwnProperty("shown")&&this.emit("shown",...e),this.options.onShown&&this.options.onShown.call(this,...e),this.shownNum++,this.interact.unobserve(t.target)):(t.target.lazyload.state="showing",this.handlers.hasOwnProperty("showing")&&this.emit("showing",...e),this.options.onShowing&&this.options.onShowing.call(this,...e)),this.handlers.hasOwnProperty("in")&&this.emit("in",...e),this.options.onIn&&this.options.onIn.call(this,...e),this.shownNum>=this.items.length&&(this.handlers.hasOwnProperty("allShown")&&this.emit("allShown",this.items),this.options.onAllShown&&this.options.onAllShown.call(this,this.items))}}else this.handlers.hasOwnProperty("out")&&this.emit("out",...e),this.options.onOut&&this.options.onOut.call(this,...e)}))}),this.interactOpt())}getDoms(t){let e=axType(t),s=[];return"Array"===e?s=t.map((t=>axIdToDom(t))).filter(Boolean):"String"===e&&(s=axAllToDoms(t).filter(Boolean)),s}add(t,e){let s=this.getDoms(t);s.forEach((t=>{t.lazyload?new axMessage({content:`媒体文件${t.dataset.src||t.src}已经处于监听状态，不需要添加监听操作！`,iconShow:!0,result:"warning"}).show():(t.lazyload={observed:!0},this.interact.observe(t),!this.items.includes(t)&&this.items.push(t))})),this.handlers.hasOwnProperty("add")&&this.emit("add",s),this.options.onAdd&&this.options.onAdd.call(this,s),e&&e.call(this,s)}remove(t,e){let s=this.getDoms(t);s.forEach((t=>{this.items.includes(t)&&(t.lazyload?(Reflect.deleteProperty(t,"lazyload"),this.interact.unobserve(t)):new axMessage({content:`媒体文件${t.dataset.src||t.src}还未被监听，不需要取消监听操作！`,iconShow:!0,result:"warning"}).show())})),this.handlers.hasOwnProperty("remove")&&this.emit("remove",s),this.options.onRemove&&this.options.onRemove.call(this,s),e&&e.call(this,s)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：列表异步无限滚动；使用方法：new axInfinite('#id',{参数})
*/class axInfinite{constructor(t,e){if(this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",type:"list",offset:"0px",visible:[0],url:"",urlMax:20,data:[],template:null,selector:"",trigger:"scroll",parent:null,animation:"ax-fadeIn",start:0,count:10,finishText:"没有更多内容了",nextBtn:'<button class="ax-btn ax-btn-primary ax-longer">查看更多</button>',ajaxType:"post",active:"",breakpoints:{}},e,this.targetDom,this.constructor.name),this.handlers={},this.start=this.options.start,this.data=this.options.data,this.loadStatus=this.targetDom.querySelector(".ax-infinite-status")?this.targetDom.querySelector(".ax-infinite-status"):axAddElem("div",{class:"ax-infinite-status"}),this.loadingDiv=axAddElem("div",{class:"ax-infinite-loading"},'<span class="ax-loading"><i></i></span>'),this.resultDiv=axAddElem("div",{class:"ax-infinite-tips"}),this.nextDiv=axAddElem("div",{class:"ax-infinite-next"},this.options.nextBtn),this.nextButton=this.nextDiv.firstElementChild,this.loadStatus.insertAdjacentElement("afterbegin",this.loadingDiv),this.loadStatus.appendChild(this.resultDiv),this.url=[],"string"==typeof this.options.url)if(this.options.url.indexOf("{")>0&&this.options.url.indexOf("}")>0){let t=~~this.options.url.match(/\{(\S*)\}/)[1],e=`{${t}}`;for(let s=t;s<=t+this.options.urlMax;s++)this.url.push(this.options.url.replace(e,s))}else if("pagination"===this.options.url){[...this.loadStatus.querySelectorAll("[data-page]")].forEach((t=>{this.url.push(t.href)}))}else this.options.url&&(this.url=[this.options.url]);else"Array"==axType(this.options.url)&&(this.url=this.options.url);this.options.template?"#"==this.options.template.trim().substr(0,1)?this.template=document.querySelector(this.options.template).innerHTML:this.template=this.options.template:this.template="",this.items=[],this.init()}init(){axInstance.push(this,this.options.insName,"infinite"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),"image"==this.options.type||this.targetDom.classList.contains("ax-infinite")||this.targetDom.classList.add("ax-infinite"),this.interactOpt(),"scroll"==this.options.trigger?this.active():"clicks"==this.options.trigger&&(this.loadStatus.appendChild(this.nextDiv),this.loadStatus.setAttribute("preloading",""),this.targetDom.appendChild(this.loadStatus),this.nextButton.onclick=()=>{this.loadStatus.removeAttribute("preloading",""),this.loadStatus.removeAttribute("loaded",""),this.loadStatus.setAttribute("loading",""),"pages"==this.options.type?this.getAsyncData("page",{start:this.start}):this.options.url&&this.options.template&&("json"==this.options.type?this.getAsyncData("json",{start:this.start}):"sql"==this.options.type&&this.getAsyncData("sql",{start:this.start,count:this.options.count}))})}active(t,e){if(axIsEmpty(t)||("Array"==axType(t)?this.url.push(...t):this.url.push(t)),"pages"==this.options.type)this.asyncInteract("page");else if(!axIsEmpty(this.url)&&this.options.template)"json"==this.options.type?this.asyncInteract("json"):"sql"==this.options.type&&this.asyncInteract("sql");else if("list"==this.options.type){axIsEmpty(this.data)||this.renderList(this.data),[...this.targetDom.childNodes].filter((t=>1==t.nodeType)).forEach((t=>{axOffset(t).top>window.innerHeight&&(t.setAttribute("infinite",""),this.items.push(t))})),this.listInteract(),this.items.forEach((t=>{this.listInteract().observe(t)}))}e&&e.call(this),this.options.active&&this.options.active.call(this),"activated"in this.handlers&&this.emit("activated","")}interactOpt(){return this.offset=this.options.offset.replace(/\s*/g,"").split(","),1==this.offset.length?this.offset.push(...this.offset):offset.length>2&&this.offset.splice(0,2),{root:this.options.parent,rootMargin:this.offset[0]+" 0px "+this.offset[1]+" 0px",threshold:this.options.visible}}listInteract(){let t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.hasAttribute("infinite")&&(e.target.classList.add(this.options.animation),e.target.removeAttribute("infinite"),t.unobserve(e.target)),"shown"in this.handlers&&this.emit("shown",e.target))}))}),this.interactOpt());return t}asyncInteract(t){this.targetDom.appendChild(this.loadStatus),this.asyncObserver=new IntersectionObserver((e=>{e[0].isIntersecting&&("page"==t||"json"===t?this.getAsyncData(t,{start:this.start}):"sql"===t&&this.getAsyncData("sql",{start:this.start,count:this.options.count}))}),this.interactOpt()),this.asyncObserver.observe(this.loadStatus)}itemInteract(){let t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.hasAttribute("infinite")&&(e.target.classList.add(this.options.animation),e.target.removeAttribute("infinite"),t.unobserve(e.target),"shown"in this.handlers&&this.emit("shown",e.target))}))}),this.interactOpt());return t}renderList(t){let e=document.createDocumentFragment();t.forEach((t=>{let s=axStrToDom(axTplEngine(this.template,t));s.setAttribute("infinite",""),this.items.push(s),e.appendChild(s)})),this.targetDom.appendChild(e),"list"==!this.options.type&&this.targetDom.appendChild(this.loadStatus)}loadFinish(){"clicks"!=this.options.trigger&&this.asyncObserver.disconnect(),this.loadStatus.removeAttribute("loading"),this.loadStatus.removeAttribute("loaded"),this.loadStatus.setAttribute("finish",""),this.loadingDiv&&this.loadingDiv.remove(),this.nextDiv&&this.nextDiv.remove(),this.resultDiv.innerHTML=this.options.finishText,"finished"in this.handlers&&this.emit("finished","")}getAsyncData(t="json",e,s){return axAjax({data:"sql"===t?{start:e.start,count:e.count}:"",type:this.options.ajaxType,url:"sql"===t?this.options.url:this.url[e.start],selector:this.options.selector,error:t=>{"404"==t.status&&new axMessage({content:"已经没有更多内容了！",result:"warning",iconShow:!0}).show(),this.loadFinish()},opened:t=>{this.contentXhr=t.xhr},success:i=>{"page"===t?(this.targetDom.insertAdjacentHTML("beforeEnd",i.content),this.targetDom.appendChild(this.loadStatus),this.start++,this.start>=this.url.length&&this.loadFinish()):(this.itemInteract(),"json"===t?(this.renderList(i.content),this.targetDom.appendChild(this.loadStatus),this.start++,this.start>=this.url.length&&this.loadFinish()):"sql"===t&&(this.renderList(i.content.data),this.targetDom.appendChild(this.loadStatus),this.start+=e.count,this.start>=i.content.total&&this.loadFinish())),"clicks"==this.options.trigger&&(this.loadStatus.removeAttribute("loading",""),this.loadStatus.setAttribute("loaded","")),this.items.forEach((t=>{this.itemInteract().observe(t)})),this.handlers.hasOwnProperty("loaded")&&this.emit("loaded",i.content),s&&s(i.content)}})}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：进度条；使用方法：new axProgress('#id',{参数})
*/class axProgress{constructor(t,e){return!!t&&(this.targetDom=axIdToDom(t),!!this.targetDom&&(this.options=axExtend({insName:"",type:"line",theme:"",gradient:!1,linecap:"round",size:"",range:[0,100],value:0,curve:"easeOut",duration:0,rotate:!1,trackShow:!0,labelFormat:"",labelShow:!0,lablePlace:"",labelText:{unit:"%",tips:"当前进度",complete:"完成!"},breakpoints:{},onInit:"",onStart:"",onCompleted:"",onDoing:"",onSet:"",onPause:"",onReset:"",onDone:"",onDestroy:""},e,this.targetDom,this.constructor.name),this.handlers={},this.options.range=this.options.range.sort(((t,e)=>t-e)),this.barSize="circle"===this.options.type?251.2:"semicircle"===this.options.type?125.6:"gapcircle"===this.options.type?167.6:this.options.range[1],this.value=this.valueNow=this.fixedValue(this.options.value),this.barValue=this.barValueNow=this.getInitBarValue(),this.completeDom=axAddElem("span",{complete:""},`${this.options.labelText.complete}`),this.stop=!1,this.init(),this))}init(t){return axInstance.push(this,this.options.insName,"progress"),this.destroyed=!1,!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.createHtmltoInit(),this.stopWatch(),this.setAttribute(),this.options.onInit&&this.options.onInit.call(this,this.value,this.barValue),this.handlers.hasOwnProperty("init")&&this.emit("init",this.value,this.barValue),t&&t.call(this,this.value,this.barValue),this}setAnimation(t){if(this.stop)return!1;let e=Object.assign({duration:this.options.duration,valTarget:this.value,barTarget:this.barValue,valLast:this.valueNow,barLast:this.barValueNow},t);if(this.value===this.valueNow)return!1;this.aniRequest&&cancelAnimationFrame(this.aniRequest);let s=e.valTarget-e.valLast,i=e.barTarget-e.barLast,a=e.duration||0===e.duration?e.duration:3*Math.abs(i)+200,o=(new Date).getTime(),n=()=>{let t=(new Date).getTime()-o,r=t/a,l=axCurves[this.options.curve](r);this.timeRest=Math.trunc(a-t),this.valueNow=axNumber(e.valLast+s*l,{mode:"floor"}),this.barValueNow=axNumber(e.barLast+i*l,{mode:"floor"}),this.valueNowText=Math.trunc(this.valueNow),this.options.onDoing&&this.options.onDoing.call(this,this.valueNow,this.barValueNow),this.handlers.hasOwnProperty("doing")&&this.emit("doing",this.valueNow,this.barValueNow),t<a?("line"==this.options.type?this.barDom.style.width=this.barValueNow+"%":this.barDom.setAttribute("stroke-dashoffset",this.barValueNow),this.progressDom&&(this.progressDom.innerText=Math.trunc(this.valueNowText)),this.aniRequest=requestAnimationFrame(n)):(cancelAnimationFrame(this.aniRequest),this.valueNow=this.value,this.barValueNow=this.barValue,this.timeRest=0,"line"==this.options.type?this.barDom.style.width=this.barValue+"%":this.barDom.setAttribute("stroke-dashoffset",this.barValue),this.progressDom&&(this.progressDom.innerText=this.value)),this.stopWatch()};n()}stopWatch(){this.valueNow>=this.options.range[1]?(this.completed=!0,this.targetDom.setAttribute("completed","true"),this.labelDom&&this.labelDom.appendChild(this.completeDom),this.options.onCompleted&&this.options.onCompleted.call(this),this.handlers.hasOwnProperty("completed")&&this.emit("completed","")):(this.completed=!1,this.completeDom.remove(),this.targetDom.removeAttribute("completed"),this.valueNow<=this.options.range[0]&&(this.options.onStart&&this.options.onStart.call(this),this.handlers.hasOwnProperty("start")&&this.emit("start","")))}fixedValue(t){let e;return e=t<this.options.range[0]?this.options.range[0]:t>this.options.range[1]?this.options.range[1]:t,e}getInitBarValue(){let t;return t="line"==this.options.type?this.value/(this.options.range[1]-this.options.range[0])*this.options.range[1]:this.barSize-this.value/this.options.range[1]*this.barSize,axNumber(t,{mode:"floor"})}getBarValue(t){let e;return"line"==this.options.type?(e=t/(this.options.range[1]-this.options.range[0])*this.options.range[1],e=e>this.options.range[1]?this.options.range[1]:axNumber(e,{mode:"floor"})):(e=this.barSize-t/this.options.range[1]*this.barSize,e=e>this.barSize?this.barSize:axNumber(e,{mode:"floor"})),e}setAttribute(){!this.targetDom.classList.contains("ax-progress")&&this.targetDom.classList.add("ax-progress"),this.targetDom.setAttribute("linecap",this.options.linecap),this.targetDom.setAttribute("type",this.options.type),this.options.size&&this.targetDom.setAttribute("size",this.options.size),this.options.theme&&this.targetDom.setAttribute("theme",this.options.theme),this.options.gradient&&this.targetDom.setAttribute("gradient",""),!this.options.trackShow&&this.targetDom.setAttribute("track","false"),this.options.rotate&&"circle"===this.options.type&&(this.wrapperDom.classList.add("ax-rotate360"),this.wrapperDom.style.animationIterationCount="infinite")}createHtmltoInit(){if(this.targetDom.innerHTML="","line"==this.options.type)this.wrapperDom=this.trackDom=axAddElem("div",{track:""}),this.barDom=axAddElem("div",{bar:"",style:`width:${this.barValue}%`}),this.labelFormat=this.options.labelFormat?this.options.labelFormat:"<span label><i progress></i><i unit></i></span>";else{this.labelFormat=this.options.labelFormat?this.options.labelFormat:"<div label><div tips></div><div result><i progress></i><i unit></i></div></div>";let t,e="";this.options.gradient&&("primary"==this.options.theme?e='\n                <linearGradient id="svgbar-primary" >\n                    <stop offset="0%" style="stop-color:var(--color-primary);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-primary-aj);" ></stop>\n                </linearGradient>\n              ':"error"==this.options.theme?e='\n                <linearGradient id="svgbar-error" >\n                    <stop offset="0%" style="stop-color:var(--color-error);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-error-aj);" ></stop>\n                </linearGradient>\n              ':"success"==this.options.theme?e='\n                <linearGradient id="svgbar-success" >\n                    <stop offset="0%" style="stop-color:var(--color-success);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-success-aj);" ></stop>\n                </linearGradient>\n              ':"warning"==this.options.theme?e='\n            <linearGradient id="svgbar-warning" >\n                <stop offset="0%" style="stop-color:var(--color-warning);" ></stop>\n                <stop offset="100%" style="stop-color:var(--color-warning-aj);" ></stop>\n            </linearGradient>\n          ':"info"==this.options.theme?e='\n                <linearGradient id="svgbar-info" >\n                    <stop offset="0%" style="stop-color:var(--color-info);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-info-aj);" ></stop>\n                </linearGradient>\n              ':"question"==this.options.theme&&(e='\n                <linearGradient id="svgbar-question" >\n                    <stop offset="0%" style="stop-color:var(--color-question);" ></stop>\n                    <stop offset="100%" style="stop-color:var(--color-question-aj);"></stop>\n                </linearGradient>\n              ')),"circle"==this.options.type?t=`<svg viewBox="0 0 100 100">\n                            ${e}\n                            ${this.options.trackShow?'<path d="M 50 50 m -40 0 a 40 40 0 1 1 80 0  a 40 40 0 1 1 -80 0" track></path>':""}\n                            <path d="M 50 50 m -40 0 a 40 40 0 1 1 80 0  a 40 40 0 1 1 -80 0" bar stroke-dasharray=${this.barSize} stroke-linecap=${this.options.linecap}  stroke-dashoffset=${this.barValue}></path>\n                       </svg>\n                        `:"semicircle"==this.options.type?t=`<svg viewBox="0 0 100 60">\n                            ${e}\n                            ${this.options.trackShow?`<path d="M 50 50 m -40 0 a 40 40 0 1 1 80 0" track stroke-linecap=${this.options.linecap}></path>`:""}\n                            <path d="M 50 50 m -40 0 a 40 40 0 1 1 80 0" bar stroke-dasharray=${this.barSize} stroke-linecap=${this.options.linecap} stroke-dashoffset=${this.barValue}></path>\n                       </svg>\n                        `:"gapcircle"==this.options.type&&(t=`<svg viewBox="0 0 100 80">\n                            ${e}\n                            ${this.options.trackShow?`<path d="M15.367,70.026C11.954,64.137,10,57.296,10,49.999 C10,27.909,27.909,10,50,10c22.092,0,40,17.909,40,39.999c0,7.295-1.952,14.134-5.363,20.022" track stroke-linecap=${this.options.linecap}></path>`:""}\n                            <path d="M15.367,70.026C11.954,64.137,10,57.296,10,49.999 C10,27.909,27.909,10,50,10c22.092,0,40,17.909,40,39.999c0,7.295-1.952,14.134-5.363,20.022" bar stroke-dasharray=${this.barSize} stroke-linecap=${this.options.linecap} stroke-dashoffset=${this.barValue}></path>\n                       </svg>\n                        `),this.wrapperDom=axStrToDom(t)}if(this.options.labelShow){if(this.options.labelPlace){let t=axIdToDom(this.options.labelPlace);t&&(t.insertAdjacentHTML("beforeEnd",this.labelFormat),this.labelDom=t.querySelector("[label]"))}else this.targetDom.insertAdjacentHTML("beforeEnd",this.labelFormat),this.labelDom=this.targetDom.querySelector("[label]");this.progressDom=this.labelDom.querySelector("[progress]"),this.unitDom=this.labelDom.querySelector("[unit]"),this.tipsDom=this.labelDom.querySelector("[tips]"),this.progressDom&&(this.progressDom.innerHTML=this.value),this.unitDom&&(this.unitDom.innerHTML=this.options.labelText.unit),this.tipsDom&&(this.tipsDom.innerHTML=this.options.labelText.tips)}"line"==this.options.type?(this.wrapperDom.appendChild(this.barDom),this.targetDom.insertAdjacentElement("afterBegin",this.wrapperDom)):(this.targetDom.insertAdjacentElement("afterBegin",this.wrapperDom),this.barDom=this.wrapperDom.querySelector("[bar]"),this.trackDom=this.wrapperDom.querySelector("[track]"))}beforeSet(t){this.value=this.fixedValue(t),this.barValue=this.getBarValue(this.value)}set(t,e=this.options.duration,s){return this.destroyed?this:!this.stop&&(this.beforeSet(t),this.value!==this.valueNow&&(this.setAnimation({duration:e}),this.options.onSet&&this.options.onSet.call(this,this.value,this.barValue),this.handlers.hasOwnProperty("set")&&this.emit("set",this.value,this.barValue),s&&s.call(this),this))}reset(t){return this.destroyed||(this.stop=!1,this.value=this.valueNow=0,this.progressDom&&(this.progressDom.innerHTML=0),this.barValue=this.barValueNow=this.barSize,this.barDom.setAttribute("stroke-dashoffset",this.barValue),this.stopWatch(),this.options.onReset&&this.options.onReset.call(this),this.handlers.hasOwnProperty("reset")&&this.emit("reset",""),t&&t.call(this)),this}done(t){return this.destroyed||(this.stop=!1,this.value=this.valueNow=this.options.range[1],this.progressDom&&(this.progressDom.innerHTML=100),this.barValue=this.barValueNow=0,this.barDom.setAttribute("stroke-dashoffset",this.barValue),this.stopWatch(),this.options.onDone&&this.options.onDone.call(this),this.handlers.hasOwnProperty("done")&&this.emit("done",""),t&&t.call(this)),this}continue(t){return this.destroyed?this:!!this.stop&&(this.stop=!1,t=t||this.timeRest,this.setAnimation({duration:this.timeRest}),this)}pause(t){return this.destroyed||(this.aniRequest&&(cancelAnimationFrame(this.aniRequest),this.stop=!0),this.options.onPause&&this.options.onPause.call(this,this.valueNow,this.barValueNow),this.handlers.hasOwnProperty("pause")&&this.emit("pause",this.valueNow,this.barValueNow),t&&t.call(this,this.valueNow,this.barValueNow)),this}get(){return{value:this.value,barValue:this.barValue,valueNow:this.valueNow,barValueNow:this.barValueNow,completed:this.completed,timeRest:this.timeRest,valueNowText:this.valueNowText}}destroy(t){return this.destroyed||(this.reset(),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：创建单行文本域和多行文本域；使用方法：new axInput('#id',{参数})
 * text、textarea、hidden、url、tel、search、email、color、number、range、month、week、date、time、datetime、datetime-local
 * submit、reset和button特别，通过value设定名称
 * radio和checkbox请使用axCheckbox组件
 */class axInput{constructor(t,e){this.targetDom=t?axIdToDom(t):"",this.options=axExtend({insName:"",type:"text",name:"",value:"",limit:0,placeholder:"",width:"",height:"",size:"",className:"",props:"",toolsShow:!0,extend:"",clearShow:!1,language:{limit:"已输入<i have>0</i>个字符,还可以输入<i remainder><# this.value #></i>个字"},breakpoints:{},onClear:"",onSet:"",onReset:"",onInit:"",onExceed:"",onInput:""},e,this.targetDom,this.constructor.name),this.handlers={},this.output={name:this.options.name},!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.createElem(),this.setAttribute(),this.addExtend(this.options.extend),axInstance.push(this,this.options.insName,"input")}createElem(){let t=()=>{"textarea"==this.options.type?this.field=axAddElem("textarea",{name:this.options.name,placeholder:this.options.placeholder}):"button"==this.options.type?this.field=axAddElem("button","",this.options.value):this.field=axAddElem("input",{type:this.options.type,name:this.options.name,placeholder:this.options.placeholder})};if(this.targetDom?"INPUT"==this.targetDom.nodeName||"TEXTAREA"==this.targetDom.nodeName||"BUTTON"==this.targetDom.nodeName?(this.parent=this.targetDom.parentElement,this.field=this.targetDom):(this.parent=this.targetDom,t()):(this.parent=axAddElem("div",{class:"ax-form-wrapper"}),t()),this.parent.appendChild(this.field),this.parent.querySelector(".ax-pos-right")?this.tools=this.parent.querySelector(".ax-pos-right"):this.tools=axAddElem("span",{class:"ax-pos-right"}),this.tools.querySelector("[clear]")?this.clearBtn=this.tools.querySelector("[clear]"):(this.clearBtn=axAddElem("a",{href:"###",class:"ax-iconfont ax-icon-close",clear:""}),this.options.clearShow&&this.tools.appendChild(this.clearBtn)),this.clearBtn&&(this.clearBtn.onclick=()=>{this.clear()},this.clearBtn.clear=!0),this.options.toolsShow&&this.parent.appendChild(this.tools),this.options.limit){this.limit=axAddElem("div",{class:"ax-form-limit"},axTplEngine(this.options.language.limit,{value:this.options.limit}));let t=this.limit.querySelector("[have]"),e=this.limit.querySelector("[remainder]");this.parent.appendChild(this.limit),this.field.oninput=()=>{let s=this.intercept(this.field.value);this.field.value=s.text,t&&(t.innerHTML=s.have),e&&(e.innerHTML=s.remainder),this.options.onInput&&this.options.onInput.call(this,this.output),"input"in this.handlers&&this.emit("input",this.output)}}this.options.value&&this.set(this.options.value),this.output.dom=this.field,this.output.parent=this.parent,this.output.type=this.options.type,this.options.onInit&&this.options.onInit.call(this,this.output)}setAttribute(){this.options.className&&this.field.setAttribute("class",this.options.className),this.options.width&&(this.field.style.width=this.options.width),this.options.height&&(this.field.style.height=this.options.height),this.options.size&&this.field.classList.add(`ax-${this.options.size}`);for(let t in this.options.props)this.field.setAttribute(t,this.options.props[t])}addExtend(t){if(!this.options.toolsShow)return!1;let e=t=>{let e=axAddElem(t.node||"a",{class:t.icon},t.text);if(e.setAttribute(t.name,""),t.props)for(let e in t.props)this.field.setAttribute(e,t.props[e]);this.tools.appendChild(e),t.callback&&t.callback.call(this,e,this.field)};Array.isArray(t)?t.forEach((t=>{e(t)})):e(t)}intercept(t){let e=t.length,s={};return e>=this.options.limit&&this.options.limit?(s={text:t.substring(0,this.options.limit),have:this.options.limit,remainder:0},this.limit&&this.limit.classList.add("ax-color-error"),this.options.onExceed&&this.options.onExceed.call(this,this.output),"exceed"in this.handlers&&this.emit("exceed",this.output)):(this.limit&&this.limit.classList.remove("ax-color-error"),s={text:t,have:t.length,remainder:Math.abs(this.options.limit-e)}),s}set(t,e){Array.isArray(t)?t=JSON.stringify(t[0]):"string"!=typeof t&&(t=JSON.stringify(t));let s=t.replace(/<[^>]+>/g,"").trim(),i=this.intercept(s);return this.field.value=i.text,this.limit&&(this.limit.querySelector("[have]")&&(this.limit.querySelector("[have]").innerHTML=i.have),this.limit.querySelector("[remainder]")&&(this.limit.querySelector("[remainder]").innerHTML=i.remainder)),this.output.value=this.field.value,e&&e.call(this,this.field,i.text,i.remainder),this.options.onSet&&this.options.onSet.call(this,this.field,i.text,i.remainder),"set"in this.handlers&&this.emit("set",this.field,i.text,i.remainder),this}getValues(){return this.field.value}clear(t){this.set(""),t&&t.call(this,this.field),this.options.onClear&&this.options.onClear.call(this,this.field),"clear"in this.handlers&&this.emit("clear",this.field)}reset(t){this.set(this.options.value),t&&t.call(this,this.field),this.options.onReset&&this.options.onReset.call(this,this.field),"reset"in this.handlers&&this.emit("reset",this.field)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：单选和多选文本域；使用方法：new axCheckbox('#id',{参数})
 */class axCheckbox{constructor(t,e){return this.targetDom=t?axIdToDom(t):"",this.options=axExtend({insName:"",type:"checkbox",style:"beautify",name:"",children:"",value:"",limit:0,language:{limit:"已选择<i have>0</i>项,还可以选择<i remainder><# this.value #></i>项"},separator:",",size:"",parentClass:"",childClass:"",props:"",display:"",gap:"",columns:0,clearShow:!0,breakpoints:{},onClear:"",onSet:"",onReset:"",onAddChecked:"",onExceed:"",onInit:"",onChange:""},e,this.targetDom,this.constructor.name),this.handlers={},!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.output={children:[]},this.getChildren(),this.name=this.options.name,this.trueLimit=this.children.length<=this.options.limit?this.children.length:this.options.limit,this.createParent(),this.setAttribute(),axIsEmpty(this.options.value)||this.set(this.options.value),axInstance.push(this,this.options.insName,"checkbox"),this}getChildren(){Array.isArray(this.options.children)?"object"==typeof this.options.children[0]?(this.options.children.forEach((t=>{t.hasOwnProperty("value")||(t.value=t.label)})),this.children=this.options.children):this.children=this.options.children.map((t=>({label:t,value:t}))):"object"==typeof this.options.children?(this.options.children.hasOwnProperty("value")||(this.options.children.value=this.options.children.label),this.children=[this.options.children]):this.children=[{label:this.options.children,value:this.options.children}]}createParent(){this.targetDom&&"INPUT"!=this.targetDom.nodeName?this.parent=this.targetDom:(this.parent=axAddElem("div",{class:"ax-form-wrapper"}),"INPUT"==this.targetDom.nodeName&&(this.hidden=this.targetDom,this.hidden.insertAdjacentElement("beforeBegin",this.parent),this.name=this.targetDom.name,"hidden"!=this.hidden.type&&(this.hidden.style.display="none"))),this.children.length>0&&this.children.forEach((t=>{this.createElem(t)}));let t=this.output.children.filter((t=>t.checked));for(let e=0,s=t.length;e<s;e++){let s=t[e],i=s.dom.querySelector("input");if("radio"==this.options.type){if(e>0){s.checked=!1;break}i.setAttribute("checked",""),s.checked=!0}else"checkbox"==this.options.type&&(e<this.trueLimit||!this.trueLimit?(i.setAttribute("checked",""),s.checked=!0):s.checked=!1)}this.options.limit&&(this.limit=axAddElem("div",{class:"ax-form-limit"},axTplEngine(this.options.language.limit,{value:this.options.limit})),this.resetLimit(),this.parent.insertAdjacentElement("afterend",this.limit)),this.output.name=this.name,this.output.parent=this.parent,this.output.type=this.options.type,this.output.value=this.getValues(),this.hidden&&(this.hidden.value=this.getValues("string",this.options.separator)),this.output.children.forEach((t=>{t.dom.querySelector("input").onchange=()=>{this.change(t)}})),this.options.onInit&&this.options.onInit.call(this,this.output)}createElem(t){let e=`<label class="ax-${"beautify"==this.options.style?this.options.type:this.options.style}"><input name="${this.name+"_ax_alt"}" value="${t.value}" ${t.disabled?"disabled":""} type="${this.options.type}"><u></u>${t.label?"<i>"+t.label+"</i>":""}</label>`,s=axStrToDom(axTplEngine(e,t)),i=axAddElem("div");this.options.childClass&&axClass.add(i,this.options.childClass),this.options.size&&s.classList.add(`ax-${this.options.size}`);for(let e in t.props)s.setAttribute(e,t.props[e]);"grid"==this.options.display||"block"==this.options.display?(i.appendChild(s),this.parent.appendChild(i)):this.parent.appendChild(s);let a={dom:s,label:t.label,value:t.value,checked:!!t.checked&&t.checked,disabled:!!t.disabled&&t.disabled};return this.output.children.push(a),t.callback&&t.callback.call(this,a),s}setAttribute(){this.options.parentClass&&axClass.add(this.parent,this.options.parentClass);for(let t in this.options.props)this.parent.setAttribute(t,this.options.props[t]);"grid"==this.options.display&&(this.parent.classList.add("ax-grid"),this.options.columns&&this.parent.classList.add(`ax-grid-${this.options.columns}`),this.options.gap&&(this.parent.style.gridColumnGap=this.options.gap))}change(t){let e=t.dom.querySelector("input");if(!t.value)return!1;if(e.checked){if("radio"==this.options.type){let t=this.output.children.find((t=>t.checked));t&&(t.checked=!1)}t.checked=!0}else t.checked=!1;let s=this.output.children.filter((t=>t.checked));this.trueLimit&&s.length>this.trueLimit&&(e.checked=!1,t.checked=!1),this.output.value=this.getValues(),this.hidden&&(this.hidden.value=this.getValues("string",this.options.separator),this.hidden.onchange&&this.hidden.onchange()),this.resetLimit(),this.intercept(),this.options.onChange&&this.options.onChange.call(this,t),"change"in this.handlers&&this.emit("change",t)}intercept(){let t=this.output.children.filter((t=>t.checked)).length,e=!1;return!!this.trueLimit&&(t>=this.trueLimit?(e=!0,this.options.onExceed&&this.options.onExceed.call(this,this.output),"exceed"in this.handlers&&this.emit("exceed",this.output)):e=!1,e)}resetLimit(){if(!this.trueLimit)return!1;let t=this.output.children.filter((t=>t.checked)).length,e=this.limit.querySelector("[have]"),s=this.limit.querySelector("[remainder]");t>=this.trueLimit?(this.limit&&this.limit.classList.add("ax-color-error"),e.innerHTML=this.trueLimit,s.innerHTML=0):(this.limit&&this.limit.classList.remove("ax-color-error"),e.innerHTML=t,s.innerHTML=this.trueLimit-t)}set(t,e){if("radio"==this.options.type){let e,s,i="";i=Array.isArray(t)?t[0]:t,i?(e=this.output.children.find((t=>t.value==i)),s=this.output.children.filter((t=>t.value!=i)),e&&(e.checked=!0,e.dom.querySelector("input").checked=!0),s.forEach((t=>{t.checked=!1,t.dom.querySelector("input").checked=!1}))):(e=this.output.children.find((t=>t.checked)),e&&(e.checked=!1,e.dom.querySelector("input").checked=!1))}else if("checkbox"==this.options.type){let e;e=Array.isArray(t)?t:"string"==typeof t?t.split(this.options.separator):[t],e=e.filter(Boolean),this.trueLimit&&e.length>this.trueLimit&&(e=e.slice(0,this.trueLimit)),this.output.children.forEach((t=>{let s=t.dom.querySelector("input");e.includes(t.value)?(t.checked=!0,s.checked=!0):(t.checked=!1,s.checked=!1)}))}return this.output.value=this.getValues(),this.hidden&&(this.hidden.value=this.getValues("string",this.options.separator)),this.resetLimit(),e&&e.call(this,this.output),this.options.onSet&&this.options.onSet.call(this,this.output),"set"in this.handlers&&this.emit("set",this.output),this}addChecked(t,e){if("radio"==this.options.type)return!1;let s=[];s=Array.isArray(t)?t:[t],s=s.filter(Boolean);for(let t=0,e=s.length;t<e&&!this.intercept();t++){let e=s[t],i=this.output.children.find((t=>t.value==e));i.dom.querySelector("input").checked=!0,i.checked=!0,this.resetLimit()}this.output.value=this.getValues(),this.hidden&&(this.hidden.value=this.getValues("string",this.options.separator)),e&&e.call(this,s,this.output),this.options.onAddChecked&&this.options.onAddChecked.call(this,s,this.output),"addChecked"in this.handlers&&this.emit("addChecked",s,this.output)}checkedAll(t){this.output.children.forEach((t=>{t.dom.querySelector("input").checked=!0,t.checked=!0})),this.resetLimit(),this.output.value=this.getValues(),t&&t.call(this,this.output),this.options.onCheckedAll&&this.options.onCheckedAll.call(this,this.output),"checkedAll"in this.handlers&&this.emit("checkedAll",this.output)}getValues(t,e){t=t||"array",e=e||this.options.separator;let s=[];return this.output.children.forEach((e=>{e.checked&&("json"==t?s.push({label:e.label,value:e.value}):s.push(e.value))})),"string"==t&&(s=s.join(e)),s}reset(t){let e;if(this.options.value)e=this.options.value;else{let t=this.options.children.filter((t=>t.checked));e=[],t.forEach((t=>{e.push(t.value)}))}this.set(e),t&&t.call(this,this.output),this.options.onReset&&this.options.onReset.call(this,this.output),"reset"in this.handlers&&this.emit("reset",this.output)}clear(t){this.output.children.forEach((t=>{t.checked&&(t.checked=!1,t.dom.querySelector("input").checked=!1)})),this.output.value=[],this.resetLimit(),t&&t.call(this,this.output),this.options.onClear&&this.options.onClear.call(this,this.output),"clear"in this.handlers&&this.emit("clear",this.output)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：复选列表全选和取消全选；使用方法：new axCheckAll('#id',{参数})
 */class axCheckAll{constructor(t,e){if(this.targetDom=t?axIdToDom(t):"",!this.targetDom)return!1;this.options=axExtend({checkDom:"",clearDom:"",separator:",",includeDisabled:!0,onInit:"",onChecked:"",onCheckAll:"",onClearAll:""},e,this.targetDom,this.constructor.name),this.handlers={},this.checkDom=this.options.checkDom?axIdToDom(this.options.checkDom):"",this.clearDom=this.options.clearDom?axIdToDom(this.options.clearDom):"",this.list=[],this.listAvailable=[],this.toggleType="",this.state="",this.toggleBtns=[],this.name="",this.init()}init(){return this.getOptionsList(),0!==this.list.length&&(this.observeToggle(),this.observeList(),this.options.onInit&&this.options.onInit.call(this),this)}observeList(){this.setLinkage(),this.listAvailable.forEach((t=>{t.field.addEventListener("change",(()=>{this.setLinkage()}),!1)}))}observeToggle(){this.checkDom&&"checkbox"===this.checkDom.type?(this.toggleType="checkbox",this.toggleBtns=[this.checkDom],this.checkDom.checked&&this.checkAll(),this.checkDom.addEventListener("change",(()=>{this.checkDom.checked?this.checkAll():this.clearAll()}),!1)):this.checkDom&&"radio"===this.checkDom.type?(this.toggleType="radio",this.toggleBtns=[...document.querySelectorAll(this.options.checkDom.replace("[","[name="))],1==axMultiValues(this.options.checkDom,"radio","string")&&this.checkAll(),this.toggleBtns.forEach((t=>{t.addEventListener("change",(()=>{1==axMultiValues(this.options.checkDom,"radio","string")?this.checkAll():this.clearAll()}),!1)}))):(this.toggleType="button",this.checkDom&&(this.toggleBtns.push(this.checkDom),this.checkDom.onclick=()=>{this.checkAll()}),this.clearDom&&(this.toggleBtns.push(this.clearDom),this.clearDom.onclick=()=>{this.clearAll()}))}setLinkage(){let t=axMultiValues(this.name,"checkbox","array");if(0===t.length){if(this.state="cleared",this.toggleBtns.forEach((t=>{t.removeAttribute("checking")})),this.checkDom&&"checkbox"===this.toggleType)this.checkDom.checked=!1;else if(this.toggleType="radio"){let t=this.toggleBtns.find((t=>t.checked));t&&(t.checked=!1)}this.options.onClearAll&&this.options.onClearAll.call(this),"clearAll"in this.handlers&&this.emit("clearAll","")}else if(t.length===this.listAvailable.length){if(this.state="checked",this.toggleBtns.forEach((t=>{t.removeAttribute("checking")})),this.checkDom&&"checkbox"===this.toggleType)this.checkDom.checked=!0;else if(this.toggleType="radio"){let t=this.toggleBtns.find((t=>1==t.value));t&&(t.checked=!0)}this.options.onCheckAll&&this.options.onCheckAll.call(this),"checkAll"in this.handlers&&this.emit("checkAll","")}else this.state="checking",this.checkDom&&"checkbox"===this.toggleType?(this.checkDom.checked=!1,this.checkDom.setAttribute("checking","")):(this.toggleType="radio")&&this.toggleBtns.forEach((t=>{t.checked&&(t.checked=!1),1==t.value&&t.setAttribute("checking","")}))}getOptionsList(t=this.options.includeDisabled){return[...this.targetDom.querySelectorAll("label")].forEach((e=>{let s=e.querySelector("input");t?this.list.push({dom:e,field:s,name:s.name,value:s.value}):e.field.disabled||this.list.push({dom:e,field:s,name:s.name,value:s.value})})),this.list.find((t=>!t.name)),this.list.some((t=>t.name!=this.list[0].name)),this.list.find((t=>!t.value||!t.field.hasAttribute("value"))),this.listAvailable=t?this.list.filter((t=>!t.field.disabled)):this.list,this.name=this.listAvailable[0].name,this.list}getValues(t,e){t=t||"array",e=e||this.options.separator;let s=this.list.filter((t=>t.field.checked)).map((t=>t.field.value));return"string"===t?s.join(e):"array"===t?s:""}checked(t,e){let s=[];if("string"==typeof t)s=t.split(this.options.separator);else{if(!Array.isArray(t))return!1;s=t}return s.forEach((t=>{let e=this.list.find((e=>e.value==t));e&&(e.field.checked=!0)})),this.setLinkage(),e&&e.call(this,s),this.options.onChecked&&this.options.onChecked.call(this,s),"checked"in this.handlers&&this.emit("checked",s),this}checkAll(t){return this.state="checked",this.list.forEach((t=>{t.field.disabled||(t.field.checked=!0)})),this.toggleBtns.forEach((t=>{t.removeAttribute("checking")})),t&&t.call(this),this.options.onCheckAll&&this.options.onCheckAll.call(this),"checkAll"in this.handlers&&this.emit("checkAll",""),this}clearAll(t){return this.state="cleared",this.list.forEach((t=>{t.field.checked&&(t.field.checked=!1)})),this.toggleBtns.forEach((t=>{t.removeAttribute("checking")})),t&&t.call(this),this.options.onClearAll&&this.options.onClearAll.call(this),"clearAll"in this.handlers&&this.emit("clearAll",""),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
 * 插件：创建表单；使用方法：new axForm([{}],'#id')
 */class axForm{constructor(t,e){return this.targetDom=t?axIdToDom(t):null,this.form,this.output=[],this.handlers={},this.targetDom?"FORM"==this.targetDom.nodeName?this.form=this.targetDom:(this.form=axAddElem("form"),this.targetDom.appendChild(this.form)):this.form=axAddElem("form"),this.init(e),this}init(t){return this.setAttribute(t),t.rows.forEach((e=>{this.createSection(e,t.style)})),t.onInit&&t.onInit.call(this,this.output),axInstance.push(this,t.insName,"form"),this}createTpl(t,e){let s="",i="",a="";if(t.title&&t.title.show&&(s=t.title.html?t.title.html:`<div class="ax-form-label${t.title.className?" "+t.title.className:""}">${t.title.text?t.title.text:""}</div>`),i="emulate"==e?'<div class="ax-break-line"></div>':"fit"==e?'<div class="ax-break ax-hide-tel"></div><div class="ax-break-line ax-hide-pad ax-hide-pc"></div>':'<div class="ax-break"></div>',!axIsEmpty(t.props))for(let e in t.props)a+=` ${e}="${t.props[e]}" `;return`\n                    <section${a}>\n                    ${t.before||""}\n                        <div class="ax-form-group">\n                            <div class="ax-flex-row">\n                                ${s}\n                                <div class="ax-form-con">\n                                    <div class="ax-form-input"></div>\n                                </div>\n                                ${t.tools?t.tools:""}\n                            </div>\n                        </div>\n                        ${t.after||""}\n                        ${i}\n                    </section >\n                    `}setAttribute(t){if("emulate"==t.style?this.form.classList.add("ax-emulate"):"fit"==t.style&&this.form.classList.add("ax-fit-tel"),t.className&&this.form.classList.add(t.className),!axIsEmpty(t.props))for(let e in t.props)this.form.setAttribute(e,t.props[e])}createCols(t,e,s,i,a,o){t.forEach((t=>{let n,r;"grid"==s?(e.classList.add("ax-grid"),n=axAddElem("div"),i&&e.classList.add("ax-grid-"+i),e.style.gridGap=a,r=n,e.appendChild(n),o(t,n)):"flex"==s?(e.classList.add("ax-row"),n=axAddElem("div",{class:"ax-col"}),r=n,e.appendChild(n),o(t,n)):(n=e,r=o(t,n)),t.prefix&&r.insertAdjacentHTML("beforebegin",t.prefix),t.suffix&&r.insertAdjacentHTML("afterend",t.suffix)}))}createSection(t,e){let s=axStrToDom(this.createTpl(t,e)),i=s.querySelector(".ax-form-input");axIsEmpty(t.cols)?this.createItem(t,i):this.createCols(t.cols,i,t.display,t.columns,t.gap,((t,e)=>this.createItem(t,e))),this.form.appendChild(s)}createItem(t,e){let s,i={};if("select"==t.type)s=axAddElem("select",{name:t.name||"",...t.props}),t.className&&s.setAttribute("class",t.className),e.appendChild(s),t.options&&t.options.length>0&&t.options.forEach((t=>{let e=axAddElem("option",{value:t.value||""},t.label);t.checked&&e.setAttribute("selected",""),t.disabled&&e.setAttribute("disabled",""),s.appendChild(e),t.callback&&t.callback.call(this,e,t)}));else if("radio"==t.type){for(let s in t.props)e.setAttribute(s,t.props[s]);t.className&&e.setAttribute("class",t.className),s=[],this.createCols(t.options,e,t.display,t.columns,t.gap,((e,i)=>{let a=axAddElem("input",{type:"radio",name:t.name||"",value:e.value||""}),o=axAddElem("label",{class:"ax-radio"},`<u></u><i> ${e.label}</i>`);return e.checked&&(a.checked=!0),e.disabled&&(a.disabled=!0),o.insertAdjacentElement("afterBegin",a),i.appendChild(o),s.push(a),o}))}else if("checkbox"==t.type){for(let s in t.props)e.setAttribute(s,t.props[s]);t.className&&e.setAttribute("class",t.className),s=[],this.createCols(t.options,e,t.display,t.columns,t.gap,((e,i)=>{let a=axAddElem("input",{type:"checkbox",name:t.name||"",value:e.value||""}),o=axAddElem("label",{class:"ax-checkbox"},`<u></u><i> ${e.label}</i>`);return e.checked&&(a.checked=!0),e.disabled&&(a.disabled=!0),o.insertAdjacentElement("afterBegin",a),i.appendChild(o),s.push(a),o}))}else"html"==t.type?(s=axAddElem("div",t.props,t.value||""),t.className&&s.setAttribute("class",t.className),e.appendChild(s)):"a"==t.type?(s=axAddElem("a",t.props,t.value||""),t.className&&s.setAttribute("class",t.className),e.appendChild(s)):"button"==t.type?(s=axAddElem("button",t.props,t.value||""),t.className&&s.setAttribute("class",t.className),e.appendChild(s)):"textarea"==t.type?(s=axAddElem("textarea",{name:t.name||"",value:t.value||"",...t.props}),t.readonly&&(s.readonly=!0),t.disabled&&(s.disabled=!0),t.className&&s.setAttribute("class",t.className),t.placeholder&&s.setAttribute("placeholder",t.placeholder),e.appendChild(s)):(s=axAddElem("input",{type:t.type,name:t.name||"",value:t.value||"",...t.props}),t.readonly&&(s.readonly=!0),t.disabled&&(s.disabled=!0),t.className&&s.setAttribute("class",t.className),t.placeholder&&s.setAttribute("placeholder",t.placeholder),e.appendChild(s));return i.name=t.name||"",i.value=t.value||"",i.field=s,i.parent=e,this.output.push(i),t.callback&&t.callback.call(this,i),s}get(t="string",e=","){let s=[];return this.output.forEach((t=>{s.push(t.field)})),s=s.flat(2).filter((t=>["INPUT","SELECT","TEXTAREA"].includes(t.nodeName)&&t.name)),axSerialize(s,t,e)}update(t,e){return this.form.innerHTML="",this.output=[],this.init(t),t.onUpdate&&t.onUpdate.call(this,this.output),e&&e.call(this,this.output),"updated"in this.handlers&&this.emit("updated",this.output),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：表单标题避让；使用方法：new axDodge('#id',{参数})
*/class axDodge{constructor(t,e){return this.targetDom=axIdToDom(t),!!this.targetDom&&(this.inputDom=this.targetDom.querySelector("input,textarea"),!!this.inputDom&&(this.options=axExtend({insName:"",placeholder:"请输入...",onInit:"",onSet:"",onClear:""},e,this.targetDom,this.constructor.name),this.handlers={},this.isFocus=!1,this.focusEvent=()=>{this.inputDom.focus(),this.targetDom.classList.add("ax-active"),this.inputDom.removeAttribute("readonly"),this.isFocus=!0},this.blurEvent=()=>{this.inputDom.blur(),this.inputDom.value?this.targetDom.classList.add("ax-active"):this.targetDom.classList.remove("ax-active"),this.inputDom.setAttribute("readonly",""),this.isFocus=!1},void this.init()))}init(){axInstance.push(this,this.options.insName,"dodge"),this.setAttribute(),this.labelDom=axAddElem("label");let t=this.inputDom.getAttribute("placeholder");return t?(this.labelDom.innerHTML=t,this.inputDom.removeAttribute("placeholder")):this.labelDom.innerHTML=this.options.placeholder,this.targetDom.appendChild(this.labelDom),this.inputDom.addEventListener("focus",this.focusEvent,!1),this.inputDom.addEventListener("blur",this.blurEvent,!1),this.labelDom.onclick=()=>{this.focusEvent()},this.inputDom.value&&this.focusEvent(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}setAttribute(){this.inputDom.setAttribute("readonly",""),this.inputDom.classList.contains("ax-lg")&&this.targetDom.classList.add("ax-lg"),!this.targetDom.classList.contains("ax-dodge")&&this.targetDom.classList.add("ax-dodge")}set(t,e){return t?(this.inputDom.value=t,this.focusEvent()):this.inputDom.focus(),this.options.onSet&&this.options.onSet.call(this,t),this.handlers.hasOwnProperty("set")&&this.emit("set",t),e&&e.call(this,t),this}clear(t){return this.inputDom.value="",this.inputDom.blur(),this.blurEvent(),this.options.onClear&&this.options.onClear.call(this),this.handlers.hasOwnProperty("clear")&&this.emit("clear",""),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：操作面板；使用方法：new axPanel('#id',{参数})
*/class axPanel{constructor(t,e){if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",type:"panel",display:"",expanded:!0,headerClosable:!1,arrow:{enable:!0,rotate:180,iconClose:"ax-icon-down",iconOpen:"ax-icon-down",position:"end"},breakpoints:{},onInit:"",onCollapsed:"",onExpanded:"",onRemove:"",onRestore:""},e,this.targetDom,this.constructor.name),this.handlers={},this.location={parent:this.targetDom.parentElement,brother:this.targetDom.nextElementSibling},this.expanded=!0,this.init()}init(){return axInstance.push(this,this.options.insName,"panel"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.headerDom=this.targetDom.querySelector(".ax-panel-header"),this.bodyDom=this.targetDom.querySelector(".ax-panel-body"),this.headerDom.querySelector("[arrow]")?this.arrowDom=this.headerDom.querySelector("[arrow]"):this.options.arrow.enable&&(this.arrowDom=axAddElem("i",{arrow:"",class:`ax-iconfont ${this.options.arrow.iconOpen}`}),"begin"===this.options.arrow.position?this.headerDom.insertAdjacentElement("afterbegin",this.arrowDom):"end"===this.options.arrow.position&&this.headerDom.insertAdjacentElement("beforeend",this.arrowDom)),this.setAttribute(),this.options.expanded&&!axIsVisible(this.bodyDom)?this.expand():!this.options.expanded&&axIsVisible(this.bodyDom)&&this.collapse(),this.options.headerClosable?this.headerDom.onclick=()=>{axIsVisible(this.bodyDom)?this.collapse():this.expand()}:this.arrowDom&&(this.arrowDom.onclick=()=>{axIsVisible(this.bodyDom)?this.collapse():this.expand()}),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}setAttribute(){!this.targetDom.classList.contains("ax-panel")&&this.targetDom.classList.add("ax-panel"),"box"===this.targetDom.getAttribute("type")?this.options.type="box":"box"===this.options.type&&this.targetDom.setAttribute("type",this.options.type),this.options.lamp&&this.targetDom.setAttribute("lamp",this.options.lamp),this.options.headerClosable&&this.targetDom.setAttribute("headerClosable","")}expand(t){if(this.expanded)return!1;this.arrowDom&&(this.options.arrow.iconClose===this.options.arrow.iconOpen?this.arrowDom.classList.remove(`ax-deg${this.options.arrow.rotate}`):(this.arrowDom.classList.remove(this.options.arrow.iconClose),this.arrowDom.classList.add(this.options.arrow.iconOpen))),axSlideDown(this.bodyDom,this.options.display,(()=>{this.expanded=!0,this.options.onExpanded&&this.options.onExpanded.call(this),this.handlers.hasOwnProperty("expanded")&&this.emit("expanded","")})),t&&t.call(this)}collapse(t){if(!this.expanded)return!1;this.arrowDom&&(this.options.arrow.iconClose===this.options.arrow.iconOpen?this.arrowDom.classList.add(`ax-deg${this.options.arrow.rotate}`):(this.arrowDom.classList.remove(this.options.arrow.iconOpen),this.arrowDom.classList.add(this.options.arrow.iconClose))),axSlideUp(this.bodyDom,this.options.display,(()=>{this.expanded=!1,this.options.onCollapsed&&this.options.onCollapsed.call(this),this.handlers.hasOwnProperty("collapsed")&&this.emit("collapsed","")})),t&&t.call(this)}remove(t){if(axIsVnode(this.targetDom))return!1;this.targetDom.remove(),this.options.onRemove&&this.options.onRemove.call(this),this.handlers.hasOwnProperty("remove")&&this.emit("remove",""),t&&t.call(this)}restore(t){if(!axIsVnode(this.targetDom))return!1;this.location.brother?this.location.brother.insertAdjacentElement("beforebegin",this.targetDom):this.location.parent.appendChild(this.targetDom),this.options.onRestore&&this.options.onRestore.call(this),this.handlers.hasOwnProperty("restore")&&this.emit("restore",""),t&&t.call(this)}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：光晕特效；使用方法：new axRipple('#id',{参数})
*/class axRipple{constructor(t,e){if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",duration:0,removeTime:800,theme:"dark",breakpoints:{}},e,this.targetDom,this.constructor.name),this.init()}init(){axInstance.push(this,this.options.insName,"ripple"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),!this.targetDom.classList.contains("ax-ripple")&&this.targetDom.classList.add("ax-ripple"),this.targetDom.setAttribute("theme",this.options.theme);let t=axWidth(this.targetDom,"inner"),e=axHeight(this.targetDom,"inner"),s=Math.max(t,e);return this.targetDom.addEventListener("click",(t=>{let e=t.clientX-(axOffset(this.targetDom).left-(document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft)),i=t.clientY-(axOffset(this.targetDom).top-(document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop)),a=axAddElem("u",{style:`left: ${e}px;top: ${i}px; width: ${s}px;height: ${s}px${this.options.duration?";animation-duration:"+this.options.duration+"ms":""}`,class:this.options.theme});this.targetDom.appendChild(a),setTimeout((()=>{a.parentNode.removeChild(a)}),this.options.removeTime)}),!1),this}}
/*!
* 插件：光晕特效；使用方法：new axShortcut('#id',{参数})
*/class axShortcut{constructor(t,e){if(this.targetDom=axIdToDom(t),!this.targetDom)return!1;this.options=axExtend({insName:"",shape:"",placement:"right-bottom",gap:{side:"",bottom:"",top:""},size:"",threshold:400,scrollTo:0,onInit:"",breakpoints:{}},e,this.targetDom,this.constructor.name),this.totopEvent=()=>{let t=this.totop.querySelector("a");(document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop)>=this.options.threshold?t.classList.add("ax-show"):t.classList.remove("ax-show")},this.init()}init(){if(axInstance.push(this,this.options.insName,"shortcut"),!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.setAttribute(),this.children=[...this.targetDom.children],0===this.children.length)return!1;this.totop=this.targetDom.querySelector("[totop]");for(let t of this.children){let e=t.querySelector("[pop]");new axHover(t,{enter:()=>{t.classList.add("ax-active"),e&&axFadeIn(e)},leave:()=>{t.classList.remove("ax-active"),e&&axFadeOut(e)}})}return this.totop&&(this.totop.addEventListener("click",(()=>{axScrollTo(this.options.scrollTo)}),!1),window.addEventListener("scroll",this.totopEvent,!1)),this.options.onInit&&this.options.onInit.call(this),this}setAttribute(){!this.targetDom.classList.contains("ax-shortcut")&&this.targetDom.classList.add("ax-shortcut"),this.options.shape&&this.targetDom.setAttribute("shape",this.options.shape),this.options.placement&&this.targetDom.setAttribute("placement",this.options.placement),this.options.size&&this.targetDom.setAttribute("size",this.options.size),this.options.gap.side&&(this.options.placement.includes("left")?(this.targetDom.style.left=this.options.gap.side,this.targetDom.style.right="auto"):this.targetDom.style.right=this.options.gap.side),this.options.gap.bottom&&this.options.placement.includes("bottom")&&(this.targetDom.style.bottom=this.options.gap.bottom),this.options.gap.top&&(this.targetDom.style.top=this.options.gap.top,this.targetDom.style.bottom="auto")}}
/*!
* 插件：元素进入视窗监听；使用方法：new axSpy('#id',{参数})
*/class axSpy{constructor(t,e){return!axIsEmpty(t)&&(this.targetDom=axIdToDom(t),this.options=axExtend({insName:"",offset:"0px",visible:[0,.5,1],parent:null,distance:0,spySelector:"",navSelector:"",btnSelector:"",duration:0,interval:500,repeat:!0,active:"",in:"",out:"",rel:"",breakpoints:{},onBefore:"",onShow:"",onShowing:"",onShown:"",onIn:"",onOut:"",onAdd:"",onRemove:"",onInit:"",onDestroy:""},e,this.targetDom,this.constructor.name),this.handlers={},this.navDom=this.options.navSelector?axIdToDom(this.options.navSelector):null,this.btnDoms=this.navDom&&this.options.btnSelector?this.navDom.querySelectorAll(this.options.btnSelector):[],this.parentDom=this.options.parent?axIdToDom(this.options.parent):this.options.parent,this.options.active.trim().startsWith("[")&&this.options.active.trim().endsWith("]")?(this.isAttr=!0,this.active=this.options.active.replace("[","").replace("]","").replace(" ","")):(this.activeIsAttr=!1,this.active=this.options.active),this.init(),this)}init(t){return axInstance.push(this,this.options.insName,"spy"),this.destroyed=!1,!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.items=[],this.interactOpt(),this.interact=new IntersectionObserver((t=>{t.forEach((t=>{let e=[t.target,t.target.spy,t];t.isIntersecting?(t.target.spy.in&&axClass.add(t.target,t.target.spy.in,(e=>!t.target.classList.contains(e))),0===t.intersectionRatio?(t.target.spy.state="show",this.handlers.hasOwnProperty("show")&&this.emit("show",...e),this.options.onShow&&this.options.onShow.call(this,...e)):1===t.intersectionRatio?(t.target.spy.state="shown",this.handlers.hasOwnProperty("shown")&&this.emit("shown",...e),this.options.onShown&&this.options.onShown.call(this,...e),this.setActiveOnly(t.target),this.options.repeat||this.interact.unobserve(t.target)):(t.target.spy.state="showing",this.handlers.hasOwnProperty("showing")&&this.emit("showing",...e),this.options.onShowing&&this.options.onShowing.call(this,...e)),this.handlers.hasOwnProperty("in")&&this.emit("in",...e),this.options.onIn&&this.options.onIn.call(this,...e)):(t.target.spy.state="hidden",this.options.repeat&&axDebounce((()=>{t.target.spy.out&&axClass.add(t.target,t.target.spy.out),t.target.spy.in&&axClass.del(t.target,t.target.spy.in),this.active&&t.target.spy.rel.forEach((t=>{this.isAttr?t.removeAttribute(this.active):axClass.del(t,this.active)}))}),this.options.interval)(),this.handlers.hasOwnProperty("out")&&this.emit("out",...e),this.options.onOut&&this.options.onOut.call(this,...e))}))}),this.interactOpt()),this.options.spySelector?this.items=[...this.targetDom.querySelectorAll(this.options.spySelector)]:this.items.push(this.targetDom),(!this.options.onBefore||this.options.onBefore.call(this,this.items))&&this.items.forEach((t=>{this.setSpyAttr(t),this.interact.observe(t)})),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),t&&t.call(this),this}setActiveOnly(t){if(this.active){t.spy.rel.forEach((t=>{this.isAttr?t.setAttribute(this.active,""):axClass.add(t,this.active,(e=>!t.classList.contains(e)))})),this.items.filter((e=>e!==t&&e.spy)).map((t=>t.spy.rel)).flat(1/0).forEach((t=>{this.isAttr?t.removeAttribute(this.active):axClass.del(t,this.active)}))}}setSpyAttr(t){if(!axType(t).includes("HTML"))return!1;let e=axAttrToJson(t,"spy");t.spy={observed:!0,rel:this.getRels(t),in:e.in||this.options.in,out:e.out||this.options.out}}getRels(t){let e=[],s=[],i=[],a=[];if(t.id)if(this.btnDoms.length>0&&this.btnDoms[0].hasAttribute("href")){let t=this.btnDoms.find((t=>t.getAttribute("href")===`#${t.id}`));t&&e.push(t)}else e=[...document.querySelectorAll(`[href='#${t.id}']`)];else{let s=this.items.findIndex((e=>e==t));-1!==s&&this.btnDoms[s]&&e.push(this.btnDoms[s])}if(t.hasAttribute("spy")){let e=axAttrToJson(t,"spy");e.rel&&(s=axAllToDoms(e.rel))}return this.options.rel&&(i=axAllToDoms(this.options.rel)),a=[...e,...s,...i].filter(Boolean),a.forEach((e=>{e.onclick=e=>{axPreventDefault(e),axScrollTo(t,{parent:this.parentDom,duration:this.options.duration,offset:this.options.distance})}})),a}interactOpt(){return this.offset=this.options.offset.replace(/\s*/g,"").split(","),1==this.offset.length?this.offset.push(...this.offset):offset.length>2&&this.offset.splice(0,2),{root:this.parentDom,rootMargin:this.offset[0]+" 0px "+this.offset[1]+" 0px",threshold:this.options.visible}}getDoms(t){let e=axType(t),s=[];return"Array"===e?s=t.map((t=>axIdToDom(t))).filter(Boolean):"String"===e&&(s=axAllToDoms(t).filter(Boolean)),s}add(t,e){if(this.destroyed)return this;let s=this.getDoms(t);s.forEach((t=>{t.spy?new axMessage({content:`媒体文件${t.dataset.src||t.src}已经处于监听状态，不需要添加监听操作！`,iconShow:!0,result:"warning"}).show():(this.setSpyAttr(t),this.interact.observe(t),!this.items.includes(t)&&this.items.push(t))})),this.handlers.hasOwnProperty("add")&&this.emit("add",s),this.options.onAdd&&this.options.onAdd.call(this,s),e&&e.call(this,s)}remove(t,e){if(this.destroyed)return this;let s=this.getDoms(t);s.forEach((t=>{this.items.includes(t)&&(t.spy?(Reflect.deleteProperty(t,"spy"),this.interact.unobserve(t)):new axMessage({content:`媒体文件${t.dataset.src||t.src}还未被监听，不需要取消监听操作！`,iconShow:!0,result:"warning"}).show())})),this.handlers.hasOwnProperty("remove")&&this.emit("remove",s),this.options.onRemove&&this.options.onRemove.call(this,s),e&&e.call(this,s)}destroy(t){return this.destroyed||(this.interact.disconnect(),this.items.forEach((t=>{t.spy.rel.forEach((t=>{t.onclick=null}))})),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this)),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
* 插件：轮子滚动选择；使用方法：new axWheel('#id',{参数})
*/class axWheel{constructor(t,e){return!!t&&(this.inputDom=axIdToDom(t),!!this.inputDom&&(this.options=axExtend({insName:"",storageName:"",content:"",ajaxType:"post",async:"",placeholder:"请选择",selected:"",lamps:"",output:{prop:"label",type:"chain",connector:"/",separator:">"},tools:{enable:!1,data:[]},display:"drawer",bubble:{},buttonDom:"",positionDom:"",toDrawer:!0,resultShow:!0,footerShow:!0,clearShow:!0,closeShow:!0,cancelShow:!1,resetShow:!1,confirmToHide:!0,autoFill:!1,autoCorrect:!0,rootStart:-1,idStart:0,next:"",language:{button:{clear:"清除",close:"关闭",cancel:"取消",reset:"重置",confirm:"确定"}},scroll:{},note:"",breakpoints:{},onInit:"",onSet:"",onConfirm:"",onReset:"",onClear:"",onCancel:"",onUpdate:"",onDestroy:"",onSave:""},e,this.inputDom,this.constructor.name),this.handlers={},void this.init()))}begin(){if(!axIsEmpty(this.options.breakpoints)&&axBreakpoints(this.options,this.options.breakpoints),this.data=[],this.ultimates=[],this.shownTimes=0,this.selecteds=[],this.lamps=[],axInstance.push(this,this.options.insName,"wheel"),this.destroyed=!1,this.options.storageName){let t=axLocalStorage.get(this.options.storageName);axIsEmpty(t)?axLocalStorage.set(this.options.storageName,{}):this.options=axExtend(this.options,t)}}async init(){this.begin(),this.createSkeleton(),this.setAttribute(),this.positionDom=this.options.positionDom?axIdToDom(this.options.positionDom):this.inputDom,this.buttonDom=this.options.buttonDom?axIdToDom(this.options.buttonDom):this.inputDom,"phone"===axClient()&&"inline"!==this.options.display&&this.options.toDrawer&&(this.options.display="drawer"),"inline"===this.options.display?this.positionDom.insertAdjacentElement("afterend",this.targetDom):"popup"===this.options.display?this.bubbleIns=new axPopup(this.positionDom,axExtend({size:"md",padding:!1,placement:"bottom-start",close:!1,footerShow:!1,rel:this.options.buttonDom,content:this.targetDom},this.options.bubble),this.buttonDom):"dialog"===this.options.display?this.bubbleIns=new axDialog(axExtend({size:"md",padding:!1,footerShow:!1,content:this.targetDom,rel:this.options.buttonDom},this.options.bubble),this.buttonDom):"drawer"===this.options.display&&(this.bubbleIns=new axDrawer(axExtend({size:"",padding:!1,footerShow:!1,content:this.targetDom,placement:"bottom",rel:this.options.buttonDom},this.options.bubble),this.buttonDom));let t=axType(this.options.content);if("String"==t&&this.options.async)"sql"===this.options.async?await axTreeMethod.getFullData({source:this.options.content,ajaxType:this.options.ajaxType,ajaxData:{pId:this.options.rootStart},rootStart:this.options.rootStart,idStart:this.options.idStart,async:!0,opened:t=>{this.contentXhr=t.xhr},before:t=>{this.bodyDom.innerHTML="",this.bodyDom.setAttribute("loading","")},success:()=>{this.bodyDom.removeAttribute("loading")}}).then((t=>{let e=!!t.data[0].hasOwnProperty("pId");this.data=[{id:0,treeData:t.data,flatData:axArrToFlat(t.data),maxFloor:t.floorMax,cascade:e}]})):"json"===this.options.async&&await axAjax({url:this.options.content,type:this.options.ajaxType,opened:t=>{this.contentXhr=t.xhr},before:t=>{this.bodyDom.innerHTML="",this.bodyDom.setAttribute("loading","")},success:t=>{if(axIsEmpty(t.content))return!1;if(this.bodyDom.removeAttribute("loading"),Array.isArray(t.content[0]))this.getMultiData(t.content).then((t=>{this.data=t}));else{let e=axTreeMethod.addPath(t.content,this.options.rootStart,this.options.idStart);this.data=[{id:0,treeData:e.data,flatData:axArrToFlat(e.data),maxFloor:e.floorMax,cascade:!0}]}}});else if("Array"===t){if(0===this.options.content.length)return!1;await this.getMultiData(this.options.content).then((t=>{this.data=t}))}else(t.includes("HTML")||axStrType(this.options.content))&&await axTreeMethod.getFullData({source:this.options.content,rootStart:this.options.rootStart,idStart:this.options.idStart}).then((t=>{this.data=[{id:0,treeData:t.data,flatData:axArrToFlat(t.data),maxFloor:t.floorMax,cascade:!0}]}));return this.renderFinish(),this.handlers.hasOwnProperty("init")&&this.emit("init",""),this.options.onInit&&this.options.onInit.call(this),this}async getMultiData(t){let e=[];for(let[s,i]of t.entries()){if("Object"===axType(i)){await axTreeMethod.getFullData({source:t,rootStart:this.options.rootStart,idStart:this.options.idStart}).then((t=>{e.push({id:s,treeData:t.data,flatData:axArrToFlat(t.data),maxFloor:t.floorMax,cascade:!0})}));break}if("string"==typeof i[0]||"number"==typeof i[0]){let t=i.map(((t,e)=>{let s={id:e};return s[this.options.output.prop]=t,s}));e.push({id:s,treeData:t,flatData:t,maxFloor:1,cascade:!1})}else await axTreeMethod.getFullData({source:i,rootStart:this.options.rootStart,idStart:this.options.idStart}).then((t=>{e.push({id:s,treeData:t.data,flatData:axArrToFlat(t.data),maxFloor:t.floorMax,cascade:!0})}))}return e}setAttribute(){this.targetDom.setAttribute("display",this.options.display),"INPUT"===this.inputDom.nodeName&&this.inputDom.setAttribute("readonly","")}createSkeleton(){this.targetDom=axStrToDom(`\n                     <div class="ax-wheel">\n                        ${this.options.resultShow?'<div class="ax-wheel-header">'+this.options.placeholder+"</div>":""}\n                        ${this.options.tools.enable?'<div class="ax-wheel-tools"></div>':""}\n                        ${this.options.lamps?'<ul class="ax-wheel-lamp"></ul>':""}\n                        <div class="ax-wheel-body"></div>\n                        ${this.options.note?'<div class="ax-wheel-note">'+this.options.note+"</div>":""}\n                        ${this.options.footerShow?'<ul class="ax-wheel-footer"></ul>':""}\n                    </div>\n    `),this.headerDom=this.targetDom.querySelector(".ax-wheel-header"),this.toolsDom=this.targetDom.querySelector(".ax-wheel-tools"),this.lampDom=this.targetDom.querySelector(".ax-wheel-lamp"),this.bodyDom=this.targetDom.querySelector(".ax-wheel-body"),this.noteDom=this.targetDom.querySelector(".ax-wheel-note"),this.footerDom=this.targetDom.querySelector(".ax-wheel-footer"),this.footerDom&&(this.confirmDom=axAddElem("li",{confirm:""},this.options.language.button.confirm),this.clearDom=this.options.clearShow?axAddElem("li",{clear:""},this.options.language.button.clear):"",this.closeDom=this.options.closeShow?axAddElem("li",{close:""},this.options.language.button.close):"",this.cancelDom=this.options.cancelShow?axAddElem("li",{cancel:""},this.options.language.button.cancel):"",this.resetDom=this.options.resetShow?axAddElem("i",{reset:""},this.options.language.button.reset):"",this.options.cancelShow&&this.footerDom.appendChild(this.cancelDom),this.options.closeShow&&this.footerDom.appendChild(this.closeDom),this.options.clearShow&&this.footerDom.appendChild(this.clearDom),this.options.resetShow&&this.footerDom.appendChild(this.resetDom),this.footerDom.appendChild(this.confirmDom)),this.options.tools.enable&&this.options.tools.data.forEach((t=>{t.dom=axAddElem(t.node||"i",Object.assign({},t.props),t.name),t.callback&&(t.dom.onclick=t.callback.bind(this,t)),this.toolsDom.appendChild(t.dom)}))}resetFromValue(){let t=this.getInputValue();if(this.value===t)return!1;if(this.selecteds=this.valueToSelects(t),this.selecteds.flat(1/0).length>0)for(let[t,e]of this.selecteds.entries()){if(!e)continue;let s=this.data[t].cascade,i=this.data[t].wheels[0].wheel,a=e[0].dom;s?i.snapped!==a?i.scrollTo(a):i.setSnapped({force:!0}):i.snapped!==a&&i.scrollTo(a)}}createItem(t){let e=`<li>${t.image?`<i image><img src="${t.image}"/></i>`:""}${t.avatar?`<i avatar><img src="${t.avatar}"/></i>`:""}${t.legend?`<i legend class="${t.legend}"></i>`:""}<i label><# this.label #></i>${t.tip?`<i tip>${t.tip}</i>`:""}</li>`;return t.dom=axStrToDom(axTplEngine(e,t)),t.callback&&t.callback.call(this,t),t.dom}arrayToSection(t,e,s){let i=t.dom,a=axAddElem("ul"),o=document.createDocumentFragment();return i.innerHTML="",i.appendChild(a),e.forEach((t=>{this.createItem(t),o.appendChild(t.dom)})),a.appendChild(o),s?s.insertAdjacentElement("afterend",i):this.bodyDom.appendChild(i),i}createWheels(){let t=(t,s)=>{if(t.children)s.wheels[t.floor].dom.innerHTML="",this.data.length>1&&s.wheels[t.floor-1].dom.removeAttribute("breakpoint"),this.arrayToSection(s.wheels[t.floor],t.children,s.wheels[t.floor-1].dom),s.wheels[t.floor].lamp&&this.lampDom.appendChild(s.wheels[t.floor].lamp),e(s.wheels[t.floor],s,!1);else{this.data.length>1&&s.wheels[t.floor-1].dom.setAttribute("breakpoint",""),s.wheels.slice(t.floor).forEach((t=>{e(t,s,!0)})),this.getUltimates(s,t,"data"),this.save(),this.options.onSet&&this.options.onSet.call(this,t),this.handlers.hasOwnProperty("set")&&this.emit("set",t),this.setWheelsWidth()}},e=(t,e,i=!0)=>{this.setWheelState(t,i),i||(t.wheel=s(t,e))},s=(e,s)=>new axScroll(e.dom,{transInit:this.selecteds[s.id]&&this.selecteds[s.id][e.id]?this.selecteds[s.id][e.id].dom:0,distMouse:this.liHeight,paddingStart:2*this.liHeight,paddingEnd:2*this.liHeight,drift:{mode:"snap",timeTHR:100},snap:{enable:!0},toInitMode:"locate",onInit:function(){},onClick:axThrottle((function(t){let e=t.closest("li");e!==this.snapped&&[...this.wrapperDom.children].includes(e)&&this.scrollTo(t)}),200),onSnap:e=>{if(s.cascade){let i=s.flatData.find((t=>t.dom===e));i&&t(i,s)}else{let t=this.getUltimates(s,e,"snap");this.setWheelsWidth(),this.data.length>1&&s.wheels[0].dom.setAttribute("breakpoint",""),this.save(),this.options.onSet&&this.options.onSet.call(this,t),this.handlers.hasOwnProperty("set")&&this.emit("set",t)}this.options.autoFill&&this.confirm(!1)}});this.data.forEach((t=>{t.wheels[0].wheel=s(t.wheels[0],t)}))}getUltimates(t,e,s="data"){let i="snap"===s?t.flatData.find((t=>t.dom===e)):e,a=this.ultimates.find((e=>e.id===t.id));return a?a.data=i:this.ultimates.push({id:t.id,data:i}),this.ultimates.sort(((t,e)=>t.id-e.id)),this.headerDom&&(this.headerDom.innerHTML=this.getValues()),i}setWheelState(t,e=!0){e?(Reflect.deleteProperty(t,"wheel"),t.hidden=!0,t.dom.style.width="0%",t.dom.innerHTML="",t.dom.setAttribute("hidden",""),t.lamp&&(t.lamp.style.width="0%",t.lamp.setAttribute("hidden",""))):(Reflect.deleteProperty(t,"hidden"),t.dom.removeAttribute("hidden"),t.lamp&&t.lamp.removeAttribute("hidden"))}setWheelsWidth(){let t=this.data.map((t=>t.wheels)).flat(1/0).filter((t=>!t.hidden));t.forEach((e=>{let s=Math.floor(100/t.length*100)/100+"%";e.dom.style.width=s,e.lamp&&(e.lamp.style.width=s)}))}renderFinish(){this.setWheelDoms(),this.options.selected?(this.selecteds=this.valueToSelects(this.options.selected),this.setInputValue(this.options.selected)):this.options.autoCorrect&&this.getInputValue()&&(this.selecteds=this.valueToSelects(this.getInputValue())),this.value=this.getInputValue(),this.bubbleIns?this.bubbleIns.on("show",(()=>{this.options.autoCorrect&&(this.selecteds=this.valueToSelects(this.getInputValue())),0===this.shownTimes?(this.liHeight=parseInt(axStyle(this.bodyDom).height)/5,this.createWheels()):this.options.autoCorrect&&this.resetFromValue(),this.shownTimes++})):(this.liHeight=parseInt(axStyle(this.bodyDom).height)/5,this.createWheels()),this.confirmDom&&(this.confirmDom.onclick=()=>{this.confirm()}),this.clearDom&&(this.clearDom.onclick=()=>{this.clear()}),this.cancelDom&&(this.cancelDom.onclick=()=>{this.cancel()}),this.resetDom&&(this.resetDom.onclick=()=>{this.reset()})}getSelects(){return this.data.map((t=>t.wheels.map((t=>t.wheel.snapped)))).map(((t,e)=>{t.map((t=>this.data[e].flatData.find((e=>e.dom==t)))).filter(Boolean)}))}getValues(t){let e=Object.assign(this.options.output,t),s=this.ultimates.map(((t,s)=>{if(t.data.path){let i=axTreeMethod.getItemsFromPath({path:t.data.path,data:this.data[s].flatData,connector:e.connector,prop:e.prop}).path,a=i.split(e.connector);return"ultimate"===this.options.output.type&&(i=a.at(-1),a=a.slice(-1)),e.isArray?a:i}return[t.data[e.prop]]}));return e.isArray?s:s.join(e.separator)}confirm(t=this.options.confirmToHide,e){if(this.destroyed)return this;if(this.value=this.getValues(),this.setInputValue(this.value),t&&this.bubbleIns){this.bubbleIns.hide();let t=this.options.next?axInstance.find(this.options.next,"wheel"):null;t&&t.bubbleIns&&t.bubbleIns.show()}this.handlers.hasOwnProperty("confirm")&&this.emit("confirm",this.value),this.options.onConfirm&&this.options.onConfirm.call(this,this.value),e&&e.call(this,this.value)}setInputValue(t){this.inputDom&&("INPUT"===this.inputDom.nodeName?this.inputDom.value=t:this.inputDom.innerHTML=t)}getInputValue(){let t="";return this.inputDom&&(t="INPUT"===this.inputDom.nodeName?this.inputDom.value.trim():this.inputDom.innerText.trim()),t}valueToSelects(t){t=t.trim();let e=[];if("ultimate"===this.options.output.type){let s=this.data.at(-1).flatData.find((e=>e[this.options.output.prop]==t));s&&(e=this.data.map(((t,e)=>{let i=[];return e===this.data.length-1&&(i=t.flatData[0].hasOwnProperty("pId")?axTreeMethod.getItemsFromPath({path:s.path,data:t.flatData}).items:[t]),i})).filter(Boolean))}else"chain"===this.options.output.type&&(e=t.split(this.options.output.separator).map(((t,e)=>{if(t.includes(this.options.output.connector))return this.data[e].flatData[0].hasOwnProperty("pId")?t.split(this.options.output.connector).map((t=>this.data[e].flatData.find((e=>e[this.options.output.prop]==t)))):[];{let s,i=this.data[e].flatData.find((e=>e[this.options.output.prop]==t));return s=i?this.data[e].cascade?axTreeMethod.getItemsFromPath({path:i.path,data:this.data[e].flatData}).items:[i]:[],s}})).filter(Boolean));return this.data.length!==e.length?this.data.map(((t,s)=>e[s]?e[s]:[])):e}setWheelDoms(){this.options.lamps&&(this.lamps=this.options.lamps.split(this.options.output.separator).map((t=>t.split(this.options.output.connector)))),this.data.forEach(((t,e)=>{t.hasOwnProperty("id")&&(t.id=e),t.wheels=[];for(let s=0;s<t.maxFloor;s++){let i=axAddElem("section"),a=this.lamps[e]&&this.lamps[e][s]?axAddElem("li","",this.lamps[e][s]):null;t.cascade?i.setAttribute("cascade",!0):i.setAttribute("cascade",!1),t.wheels.push({id:s,dom:i,lamp:a})}this.bodyDom.appendChild(t.wheels[0].dom),t.wheels[0].lamp&&this.lampDom.appendChild(t.wheels[0].lamp),this.arrayToSection(t.wheels[0],t.treeData)}))}set(t,e){return(t=t.trim())&&(this.setInputValue(t),this.selecteds=this.valueToSelects(t)),this.bubbleIns&&"shown"!==this.bubbleIns.state?this.bubbleIns.show():this.resetFromValue(),e&&e.call(this,this.selecteds),this}reset(t){return this.destroyed||(this.selecteds=this.data.map((t=>[])),this.data.forEach((t=>{t.cascade?t.wheels[0].wheel.snapped===t.treeData[0].dom?t.wheels[0].wheel.setSnapped({force:!0}):t.wheels[0].wheel.toStart():t.wheels[0].wheel.snapped!==t.treeData[0].dom&&t.wheels[0].wheel.toStart()})),this.handlers.hasOwnProperty("reset")&&this.emit("reset",""),this.options.onReset&&this.options.onReset.call(this),t&&t.call(this)),this}clear(t){return this.destroyed||(this.options.autoFill||this.setInputValue(""),this.reset(),this.handlers.hasOwnProperty("clear")&&this.emit("clear",""),this.options.onClear&&this.options.onClear.call(this),t&&t.call(this)),this}cancel(t){return this.destroyed||(this.bubbleIns&&this.bubbleIns.hide(),this.clear(),this.handlers.hasOwnProperty("cancel")&&this.emit("cancel",""),this.options.onCancel&&this.options.onCancel.call(this),t&&t.call(this)),this}async update(t,e){return this.destroyed||(this.options=axExtend(this.options,t),this.options.storageName&&axLocalStorage.set(this.options.storageName,{}),this.targetDom.remove(),this.save(),await this.init(),this.handlers.hasOwnProperty("update")&&this.emit("update",""),this.options.onUpdate&&this.options.onUpdate.call(this),e&&e.call(this)),this}save(t,e){if(this.destroyed)return this;if(!this.options.storageName)return!1;t?axLocalStorage.set(this.options.storageName,t):(this.options.selected=this.getValues(),axLocalStorage.set(this.options.storageName,this.options));let s=axLocalStorage.get(this.options.storageName);return this.handlers.hasOwnProperty("save")&&this.emit("save",s),this.options.onSave&&this.options.onSave.call(this,s),e&&e.call(this,s),this}destroy(t){return this.inputDom.onclick=null,this.positionDom&&(this.positionDom.onclick=null),this.buttonDom&&(this.buttonDom.onclick=null),this.contentXhr&&this.contentXhr.abort(),this.bubbleIns&&this.bubbleIns.destroy(),this.destroyed=!0,this.handlers.hasOwnProperty("destroy")&&this.emit("destroy",""),this.options.onDestroy&&this.options.onDestroy.call(this),t&&t.call(this),this}on(t,e){return axAddPlan(t,e,this),this}emit(t,...e){axExePlan(t,this,...e)}off(t,e){return axDelPlan(t,e,this),this}}
/*!
*项目所需的立即执行的代码片段，避免污染全局变量
*/const axInit=(t,e=document)=>{let s=axIdToDom(e);if(axIsEmpty(t)||t.includes("other")){let t=[...s.querySelectorAll(".ax-pos-left")];for(let e of t)"INPUT"!=e.nextElementSibling.nodeName&&"TEXTAREA"!=e.nextElementSibling.nodeName||(e.nextElementSibling.style.paddingLeft=axWidth(e,"outer")/10+"rem");let e=[...s.querySelectorAll(".ax-pos-right [clear]")].filter((t=>!t.clear)),i=function(){let t=this.parentElement.previousElementSibling;"INPUT"!=t.nodeName&&"TEXTAREA"!=t.nodeName||(t.value="")};for(let t of e)t.clear=!0,t.addEventListener("click",i,!1)}let i=[],a=["axAccordion","axAlert","axAmount","axCage","axCheckbox","axCheckAll","axComplete","axDate","axDialog","axDodge","axDrawer","axDropdown","axGesture","axInfinite","axInput","axLazyload","axList","axMenu","axMore","axPanel","axPagination","axPopup","axProgress","axRange","axRipple","axSelect","axShare","axShortcut","axSpy","axStick","axSwiper","axTab","axTags","axTooltip","axUpload","axTree","axRate","axWheel","axScroll","axSlider"],o=t=>{axIsEmpty(t)||(t=t.map((t=>t.startsWith("ax")?t:"ax"+t.slice(0,1).toUpperCase()+t.slice(1))));let e=t||a,i=e.map((t=>`[${t}]`)).join(","),o=[...s.querySelectorAll(i)];return e.map((t=>{let e=o.filter((e=>e.attributes.hasOwnProperty(t.toLowerCase())&&!e[t]));return{module:t,nodeList:e}}))},n=(t,e)=>{let s=(e,i)=>{e.forEach((e=>{let a,o="dom";"axDialog"!==t&&"axDrawer"!==t||(o="'',dom"),a=new Function("dom",`try {return new ${t}(${o})} catch(e) {}`)(e),a&&(e[t]=!0),i&&a&&(a.targetDom.style.zIndex=parseInt(getComputedStyle(i.targetDom).zIndex)+1);let n=a.content.querySelectorAll(`[${t}]`);n.length>0&&s(n,a)}))};s(e)};if(axIsEmpty(t))i=o();else{let e=axType(t);"String"===e?"other"!==t&&(i=o([t])):"Array"===e&&(i=o(t=t.filter((t=>"other"!==t))))}i.length>0&&(t=>{for(let e of t)if(0!==e.nodeList.length)if(["axDialog","axDrawer","axPopup"].includes(e.module))n(e.module,e.nodeList);else{let t="dom";"axMessage"===e.module?t="":"axSwiper"===e.module&&(t="dom,axAttrToJson(dom, 'axSwiper')"),e.nodeList.forEach((s=>{new Function("dom",`try {return new ${e.module}(${t})} catch(e) {}`)(s)&&(s[e.module]=!0)}))}})(i)};axInit();